<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.rules.rules_Load</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">invariants</span> <span class="id" title="library">gen_heap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">ectx_lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">frac</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="cap_machine.rules.rules_base.html#"><span class="id" title="library">rules_base</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="cap_lang_rules" class="idref" href="#cap_lang_rules"><span class="id" title="section">cap_lang_rules</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">memG</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="H:2" class="id">Σ</span></span></a>, <a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">regG</span></a> <a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">Σ</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H1:4" class="idref" href="#H1:4"><span class="id" title="binder">MachineParameters</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.rules.rules_Load.html#c83beb9a67378c40938d18b1e249d990"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> σ : <a class="idref" href="cap_machine.cap_lang.html#ExecConf"><span class="id" title="definition">ExecConf</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">c</span> : <a class="idref" href="cap_machine.cap_lang.html#expr"><span class="id" title="inductive">cap_lang.expr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">r</span> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <a class="idref" href="cap_machine.cap_lang.html#val"><span class="id" title="inductive">cap_lang.val</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">w</span> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">reg</span> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">ms</span> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reg_allows_load" class="idref" href="#reg_allows_load"><span class="id" title="definition">reg_allows_load</span></a> (<a id="regs:5" class="idref" href="#regs:5"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="r:6" class="idref" href="#r:6"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) <a id="p:7" class="idref" href="#p:7"><span class="id" title="binder">p</span></a> <a id="b:8" class="idref" href="#b:8"><span class="id" title="binder">b</span></a> <a id="e:9" class="idref" href="#e:9"><span class="id" title="binder">e</span></a> <a id="a:10" class="idref" href="#a:10"><span class="id" title="binder">a</span></a>  :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:5"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r:6"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:7"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:8"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:9"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:10"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:7"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:8"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:9"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:10"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Load_failure" class="idref" href="#Load_failure"><span class="id" title="definition, inductive"><span id="Load_failure_rect" class="id"><span id="Load_failure_ind" class="id"><span id="Load_failure_rec" class="id"><span id="Load_failure_sind" class="id">Load_failure</span></span></span></span></span></a> (<a id="regs:11" class="idref" href="#regs:11"><span class="id" title="binder">regs</span></a>: <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="r1:12" class="idref" href="#r1:12"><span class="id" title="binder">r1</span></a> <a id="r2:13" class="idref" href="#r2:13"><span class="id" title="binder">r2</span></a>: <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="mem:14" class="idref" href="#mem:14"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) :=<br/>
&nbsp;&nbsp;| <a id="Load_fail_const" class="idref" href="#Load_fail_const"><span class="id" title="constructor">Load_fail_const</span></a> <a id="w:17" class="idref" href="#w:17"><span class="id" title="binder">w</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:17"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:17"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_failure:15"><span class="id" title="inductive">Load_failure</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:12"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:14"><span class="id" title="variable">mem</span></a><br/>
&nbsp;&nbsp;| <a id="Load_fail_bounds" class="idref" href="#Load_fail_bounds"><span class="id" title="constructor">Load_fail_bounds</span></a> <a id="p:18" class="idref" href="#p:18"><span class="id" title="binder">p</span></a> <a id="b:19" class="idref" href="#b:19"><span class="id" title="binder">b</span></a> <a id="e:20" class="idref" href="#e:20"><span class="id" title="binder">e</span></a> <a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:18"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:19"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:21"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:18"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:19"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_failure:15"><span class="id" title="inductive">Load_failure</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:12"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:14"><span class="id" title="variable">mem</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Notice&nbsp;how&nbsp;the&nbsp;None&nbsp;below&nbsp;also&nbsp;includes&nbsp;all&nbsp;cases&nbsp;where&nbsp;we&nbsp;read&nbsp;an&nbsp;inl&nbsp;value&nbsp;into&nbsp;the&nbsp;PC,&nbsp;because&nbsp;then&nbsp;incrementing&nbsp;it&nbsp;will&nbsp;fail&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Load_fail_invalid_PC" class="idref" href="#Load_fail_invalid_PC"><span class="id" title="constructor">Load_fail_invalid_PC</span></a> <a id="p:22" class="idref" href="#p:22"><span class="id" title="binder">p</span></a> <a id="b:23" class="idref" href="#b:23"><span class="id" title="binder">b</span></a> <a id="e:24" class="idref" href="#e:24"><span class="id" title="binder">e</span></a> <a id="a:25" class="idref" href="#a:25"><span class="id" title="binder">a</span></a> <a id="loadv:26" class="idref" href="#loadv:26"><span class="id" title="binder">loadv</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:22"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:23"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:24"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:25"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem:14"><span class="id" title="variable">mem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:25"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:26"><span class="id" title="variable">loadv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementPC"><span class="id" title="definition">incrementPC</span></a> (<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:12"><span class="id" title="variable">r1</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:26"><span class="id" title="variable">loadv</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">regs</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_failure:15"><span class="id" title="inductive">Load_failure</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:11"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:12"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:13"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:14"><span class="id" title="variable">mem</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Load_spec" class="idref" href="#Load_spec"><span class="id" title="definition, inductive"><span id="Load_spec_ind" class="id"><span id="Load_spec_sind" class="id">Load_spec</span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="regs:27" class="idref" href="#regs:27"><span class="id" title="binder">regs</span></a>: <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="r1:28" class="idref" href="#r1:28"><span class="id" title="binder">r1</span></a> <a id="r2:29" class="idref" href="#r2:29"><span class="id" title="binder">r2</span></a>: <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="regs':30" class="idref" href="#regs':30"><span class="id" title="binder">regs'</span></a>: <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="mem:31" class="idref" href="#mem:31"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) : <a class="idref" href="cap_machine.cap_lang.html#val"><span class="id" title="inductive">cap_lang.val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <a id="Load_spec_success" class="idref" href="#Load_spec_success"><span class="id" title="constructor">Load_spec_success</span></a> <a id="p:34" class="idref" href="#p:34"><span class="id" title="binder">p</span></a> <a id="b:35" class="idref" href="#b:35"><span class="id" title="binder">b</span></a> <a id="e:36" class="idref" href="#e:36"><span class="id" title="binder">e</span></a> <a id="a:37" class="idref" href="#a:37"><span class="id" title="binder">a</span></a> <a id="loadv:38" class="idref" href="#loadv:38"><span class="id" title="binder">loadv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#reg_allows_load"><span class="id" title="definition">reg_allows_load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:27"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:29"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:34"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:35"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:37"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem:31"><span class="id" title="variable">mem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:37"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:38"><span class="id" title="variable">loadv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementPC"><span class="id" title="definition">incrementPC</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:28"><span class="id" title="variable">r1</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:38"><span class="id" title="variable">loadv</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">regs</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':30"><span class="id" title="variable">regs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_spec:32"><span class="id" title="inductive">Load_spec</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:27"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:28"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:29"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':30"><span class="id" title="variable">regs'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:31"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><br/>
<br/>
&nbsp;&nbsp;| <a id="Load_spec_failure" class="idref" href="#Load_spec_failure"><span class="id" title="constructor">Load_spec_failure</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_failure"><span class="id" title="inductive">Load_failure</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:27"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:28"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:29"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:31"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#Load_spec:32"><span class="id" title="inductive">Load_spec</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:27"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:28"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:29"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':30"><span class="id" title="variable">regs'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:31"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.cap_lang.html#FailedV"><span class="id" title="constructor">FailedV</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="allow_load_map_or_true" class="idref" href="#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a id="r:39" class="idref" href="#r:39"><span class="id" title="binder">r</span></a> (<a id="regs:40" class="idref" href="#regs:40"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="mem:41" class="idref" href="#mem:41"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="p:42" class="idref" href="#p:42"><span class="id" title="binder">p</span></a> <a id="b:43" class="idref" href="#b:43"><span class="id" title="binder">b</span></a> <a id="e:44" class="idref" href="#e:44"><span class="id" title="binder">e</span></a> <a id="a:45" class="idref" href="#a:45"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:40"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:42"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:43"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:44"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.rules.rules_Load.html#reg_allows_load"><span class="id" title="definition">reg_allows_load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:40"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:42"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:43"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:44"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:45"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="w:46" class="idref" href="#w:46"><span class="id" title="binder">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:41"><span class="id" title="variable">mem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:46"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="notation">True</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="allow_load_implies_loadv" class="idref" href="#allow_load_implies_loadv"><span class="id" title="lemma">allow_load_implies_loadv</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="r2:47" class="idref" href="#r2:47"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="mem0:48" class="idref" href="#mem0:48"><span class="id" title="binder">mem0</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) (<a id="r:49" class="idref" href="#r:49"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="p:50" class="idref" href="#p:50"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:51" class="idref" href="#b:51"><span class="id" title="binder">b</span></a> <a id="e:52" class="idref" href="#e:52"><span class="id" title="binder">e</span></a> <a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:47"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r:49"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem0:48"><span class="id" title="variable">mem0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r:49"><span class="id" title="variable">r</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:47"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:50"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:51"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:52"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:53"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:50"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:51"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:52"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="loadv:54" class="idref" href="#loadv:54"><span class="id" title="binder">loadv</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem0:48"><span class="id" title="variable">mem0</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:54"><span class="id" title="variable">loadv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r2</span> <span class="id" title="var">mem0</span> <span class="id" title="var">r</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">HaLoad</span> <span class="id" title="var">Hr2v</span> <span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a>, <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HaLoad</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HaLoad</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp; <span class="id" title="var">Hrinr</span> &amp; <span class="id" title="var">Hmem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hr2v</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrinr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrinr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hrega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradiction</span> <span class="id" title="var">Hrega</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_eq_implies_allow_load_map" class="idref" href="#mem_eq_implies_allow_load_map"><span class="id" title="lemma">mem_eq_implies_allow_load_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="regs:55" class="idref" href="#regs:55"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>)(<a id="mem:56" class="idref" href="#mem:56"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>)(<a id="r2:57" class="idref" href="#r2:57"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="w:58" class="idref" href="#w:58"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) <a id="p:59" class="idref" href="#p:59"><span class="id" title="binder">p</span></a> <a id="b:60" class="idref" href="#b:60"><span class="id" title="binder">b</span></a> <a id="e:61" class="idref" href="#e:61"><span class="id" title="binder">e</span></a> <a id="a:62" class="idref" href="#a:62"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem:56"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#a:62"><span class="id" title="variable">a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:58"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:55"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:57"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:59"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:60"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:61"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:62"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:57"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:55"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:56"><span class="id" title="variable">mem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">regs</span> <span class="id" title="var">mem</span> <span class="id" title="var">r2</span> <span class="id" title="var">w</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">Hmem</span> <span class="id" title="var">Hrr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>,<span class="id" title="var">b</span>,<span class="id" title="var">e</span>,<span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">case_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">w</span>. <span class="id" title="var">simplify_map_eq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_neq_implies_allow_load_map" class="idref" href="#mem_neq_implies_allow_load_map"><span class="id" title="lemma">mem_neq_implies_allow_load_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="regs:63" class="idref" href="#regs:63"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>)(<a id="mem:64" class="idref" href="#mem:64"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>)(<a id="r2:65" class="idref" href="#r2:65"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="pc_a:66" class="idref" href="#pc_a:66"><span class="id" title="binder">pc_a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="w:67" class="idref" href="#w:67"><span class="id" title="binder">w</span></a> <a id="w':68" class="idref" href="#w':68"><span class="id" title="binder">w'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) <a id="p:69" class="idref" href="#p:69"><span class="id" title="binder">p</span></a> <a id="b:70" class="idref" href="#b:70"><span class="id" title="binder">b</span></a> <a id="e:71" class="idref" href="#e:71"><span class="id" title="binder">e</span></a> <a id="a:72" class="idref" href="#a:72"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#a:72"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:66"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:64"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:66"><span class="id" title="variable">pc_a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:67"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">a</span><span class="id" title="notation">:=</span><span class="id" title="notation">w'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:63"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:65"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:69"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:70"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:71"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:72"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:65"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:63"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:64"><span class="id" title="variable">mem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">regs</span> <span class="id" title="var">mem</span> <span class="id" title="var">r2</span> <span class="id" title="var">pc_a</span> <span class="id" title="var">w</span> <span class="id" title="var">w'</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">H4</span> <span class="id" title="var">Hrr2</span> <span class="id" title="var">Hreg2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>,<span class="id" title="var">b</span>,<span class="id" title="var">e</span>,<span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hreg2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">case_decide</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">w'</span>. <span class="id" title="var">simplify_map_eq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_implies_allow_load_map" class="idref" href="#mem_implies_allow_load_map"><span class="id" title="lemma">mem_implies_allow_load_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="regs:73" class="idref" href="#regs:73"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>)(<a id="mem:74" class="idref" href="#mem:74"><span class="id" title="binder">mem</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>)(<a id="r2:75" class="idref" href="#r2:75"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="pc_a:76" class="idref" href="#pc_a:76"><span class="id" title="binder">pc_a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="w:77" class="idref" href="#w:77"><span class="id" title="binder">w</span></a> <a id="w':78" class="idref" href="#w':78"><span class="id" title="binder">w'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) <a id="p:79" class="idref" href="#p:79"><span class="id" title="binder">p</span></a> <a id="b:80" class="idref" href="#b:80"><span class="id" title="binder">b</span></a> <a id="e:81" class="idref" href="#e:81"><span class="id" title="binder">e</span></a> <a id="a:82" class="idref" href="#a:82"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a:82"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:76"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:74"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:76"><span class="id" title="variable">pc_a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:77"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:74"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:76"><span class="id" title="variable">pc_a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:77"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">a</span><span class="id" title="notation">:=</span><span class="id" title="notation">w'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:73"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:75"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:81"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:82"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:75"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:73"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:74"><span class="id" title="variable">mem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">regs</span> <span class="id" title="var">mem</span> <span class="id" title="var">r2</span> <span class="id" title="var">pc_a</span> <span class="id" title="var">w</span> <span class="id" title="var">w'</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">H4</span> <span class="id" title="var">Hrr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>, <a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_eq_implies_allow_load_map"><span class="id" title="axiom">mem_eq_implies_allow_load_map</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_neq_implies_allow_load_map"><span class="id" title="axiom">mem_neq_implies_allow_load_map</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_implies_loadv" class="idref" href="#mem_implies_loadv"><span class="id" title="lemma">mem_implies_loadv</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="pc_a:83" class="idref" href="#pc_a:83"><span class="id" title="binder">pc_a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="w:84" class="idref" href="#w:84"><span class="id" title="binder">w</span></a> <a id="w':85" class="idref" href="#w':85"><span class="id" title="binder">w'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) (<a id="a0:86" class="idref" href="#a0:86"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="mem0:87" class="idref" href="#mem0:87"><span class="id" title="binder">mem0</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) (<a id="loadv:88" class="idref" href="#loadv:88"><span class="id" title="binder">loadv</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a0:86"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:83"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem0:87"><span class="id" title="variable">mem0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:83"><span class="id" title="variable">pc_a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:84"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem0:87"><span class="id" title="variable">mem0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:83"><span class="id" title="variable">pc_a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_Load.html#w:84"><span class="id" title="variable">w</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">a0</span><span class="id" title="notation">:=</span><span class="id" title="notation">w'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">∅)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem0:87"><span class="id" title="variable">mem0</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a0:86"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#loadv:88"><span class="id" title="variable">loadv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#loadv:88"><span class="id" title="variable">loadv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a0:86"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:83"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:84"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':85"><span class="id" title="variable">w'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pc_a</span> <span class="id" title="var">w</span> <span class="id" title="var">w'</span> <span class="id" title="var">a0</span> <span class="id" title="var">mem0</span> <span class="id" title="var">loadv</span> <span class="id" title="var">H4</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a0</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>, <a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a0</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_general" class="idref" href="#wp_load_general"><span class="id" title="lemma">wp_load_general</span></a> <a id="Ep:89" class="idref" href="#Ep:89"><span class="id" title="binder">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="pc_p:90" class="idref" href="#pc_p:90"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:91" class="idref" href="#pc_b:91"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:92" class="idref" href="#pc_e:92"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:93" class="idref" href="#pc_a:93"><span class="id" title="binder">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="r1:94" class="idref" href="#r1:94"><span class="id" title="binder">r1</span></a> <a id="r2:95" class="idref" href="#r2:95"><span class="id" title="binder">r2</span></a> <a id="w:96" class="idref" href="#w:96"><span class="id" title="binder">w</span></a> <a id="mem:97" class="idref" href="#mem:97"><span class="id" title="binder">mem</span></a> (<a id="dfracs:98" class="idref" href="#dfracs:98"><span class="id" title="binder">dfracs</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <span class="id" title="inductive">dfrac</span>) <a id="regs:99" class="idref" href="#regs:99"><span class="id" title="binder">regs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:96"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:94"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:95"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:90"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:91"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:92"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:93"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:99"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:90"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:91"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:92"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:93"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#regs_of"><span class="id" title="definition">regs_of</span></a> (<a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:94"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:95"><span class="id" title="variable">r2</span></a>) <span class="id" title="notation">⊆</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:99"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:93"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:96"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:95"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:99"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.rules.rules_Load.html#dfracs:98"><span class="id" title="variable">dfracs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:100" class="idref" href="#a:100"><span class="id" title="binder"><span id="a:101" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="dw:102" class="idref" href="#dw:102"><span class="id" title="binder"><span id="dw:103" class="id">dw</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#dfracs:98"><span class="id" title="variable">dfracs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:100"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dw:102"><span class="id" title="variable">dw</span></a><span class="id" title="notation">.1</span><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#dw:102"><span class="id" title="variable">dw</span></a><span class="id" title="notation">.2</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:104" class="idref" href="#k:104"><span class="id" title="binder"><span id="k:105" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:106" class="idref" href="#y:106"><span class="id" title="binder"><span id="y:107" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:99"><span class="id" title="variable">regs</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#k:104"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#y:106"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#Ep:89"><span class="id" title="variable">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="regs':108" class="idref" href="#regs':108"><span class="id" title="binder">regs'</span></a> <a id="retv:109" class="idref" href="#retv:109"><span class="id" title="binder">retv</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.rules.rules_Load.html#retv:109"><span class="id" title="variable">retv</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="cap_machine.rules.rules_Load.html#Load_spec"><span class="id" title="inductive">Load_spec</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:99"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:94"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:95"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':108"><span class="id" title="variable">regs'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#retv:109"><span class="id" title="variable">retv</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:110" class="idref" href="#a:110"><span class="id" title="binder"><span id="a:111" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="dw:112" class="idref" href="#dw:112"><span class="id" title="binder"><span id="dw:113" class="id">dw</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#dfracs:98"><span class="id" title="variable">dfracs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:97"><span class="id" title="variable">mem</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:110"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dw:112"><span class="id" title="variable">dw</span></a><span class="id" title="notation">.1</span><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#dw:112"><span class="id" title="variable">dw</span></a><span class="id" title="notation">.2</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:114" class="idref" href="#k:114"><span class="id" title="binder"><span id="k:115" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:116" class="idref" href="#y:116"><span class="id" title="binder"><span id="y:117" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':108"><span class="id" title="variable">regs'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#k:114"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#y:116"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">HPC</span> <span class="id" title="var">Dregs</span> <span class="id" title="var">Hmem_pc</span> <span class="id" title="var">HaLoad</span> <span class="id" title="var">Hdomeq</span> φ) "(&gt;Hmem &amp; &gt;Hmap) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_lift_atomic_head_step_no_fork</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (σ1 <span class="id" title="var">ns</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">nt</span>) "[Hr Hm] /=". <span class="id" title="tactic">destruct</span> σ1; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_valid_inclSepM"><span class="id" title="axiom">gen_heap_valid_inclSepM</span></a> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hregs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Derive&nbsp;necessary&nbsp;register&nbsp;values&nbsp;in&nbsp;r&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">lookup_weaken</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HPC</span> <span class="id" title="var">Hregs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.rules.rules_base.html#indom_regs_incl"><span class="id" title="axiom">indom_regs_incl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Dregs</span> <span class="id" title="var">Hregs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hri</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#regs_of"><span class="id" title="definition">regs_of</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hri</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">odestruct</span> (<span class="id" title="var">Hri</span> <span class="id" title="var">r2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r2v</span> [<span class="id" title="var">Hr'2</span> <span class="id" title="var">Hr2</span>]]. <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>+.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">odestruct</span> (<span class="id" title="var">Hri</span> <span class="id" title="var">r1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r1v</span> [<span class="id" title="var">Hr'1</span> <span class="id" title="var">_</span>]]. <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>+. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hri</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Derive&nbsp;the&nbsp;PC&nbsp;in&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">is_Some</span> (<span class="id" title="var">dfracs</span> <span class="id" title="notation">!!</span> <span class="id" title="var">pc_a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">dq</span> <span class="id" title="var">Hdq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hdomeq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">dfracs</span> <span class="id" title="var">mem</span> <span class="id" title="notation">!!</span> <span class="id" title="var">pc_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">dq</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">w</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hmem_dpc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span> <span class="id" title="var">Hmem_pc</span> <span class="id" title="var">Hdq</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_mem_valid_inSepM_general"><span class="id" title="axiom">gen_mem_valid_inSepM_general</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">dfracs</span> <span class="id" title="var">mem</span>) <span class="id" title="var">m</span> <span class="id" title="notation">with</span> "Hm Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hma</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#normal_always_head_reducible"><span class="id" title="axiom">normal_always_head_reducible</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> <span class="id" title="var">Hpstep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#prim_step_exec_inv"><span class="id" title="lemma">prim_step_exec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpstep</span> <span class="id" title="keyword">as</span> (-&gt; &amp; -&gt; &amp; (<span class="id" title="var">c</span> &amp; -&gt; &amp; <span class="id" title="var">Hstep</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.cap_lang.html#step_exec_inv"><span class="id" title="axiom">step_exec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#exec"><span class="id" title="definition">exec</span></a> /= <span class="id" title="var">Hr2</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;we&nbsp;start&nbsp;splitting&nbsp;on&nbsp;the&nbsp;different&nbsp;cases&nbsp;in&nbsp;the&nbsp;Load&nbsp;spec,&nbsp;and&nbsp;prove&nbsp;them&nbsp;one&nbsp;at&nbsp;a&nbsp;time&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> <span class="id" title="var">r2v</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hr2v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="comment">(*&nbsp;Failure:&nbsp;r2&nbsp;is&nbsp;not&nbsp;a&nbsp;capability&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.cap_lang.html#Failed"><span class="id" title="constructor">Failed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> σ2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (-&gt; &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr2v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">r2v</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_pair_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFailWP</span> "Hφ" <a class="idref" href="cap_machine.rules.rules_Load.html#Load_fail_const"><span class="id" title="constructor">Load_fail_const</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r2v</span> <span class="id" title="keyword">as</span> [ | [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> | ] | ]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hr2v</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hr2v</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HRA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="comment">(*&nbsp;Failure:&nbsp;r2&nbsp;is&nbsp;either&nbsp;not&nbsp;within&nbsp;bounds&nbsp;or&nbsp;doesnt&nbsp;allow&nbsp;reading&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">c</span> σ2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HRA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFailWP</span> "Hφ" <a class="idref" href="cap_machine.rules.rules_Load.html#Load_fail_bounds"><span class="id" title="constructor">Load_fail_bounds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HRA</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HRA</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hra</span> &amp; <span class="id" title="var">Hwb</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Prove&nbsp;that&nbsp;a&nbsp;is&nbsp;in&nbsp;the&nbsp;memory&nbsp;map&nbsp;now,&nbsp;otherwise&nbsp;we&nbsp;cannot&nbsp;continue&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_implies_loadv"><span class="id" title="axiom">allow_load_implies_loadv</span></a> <span class="id" title="var">r2</span> <span class="id" title="var">mem</span> <span class="id" title="var">regs</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">loadv</span> &amp; <span class="id" title="var">Hmema</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">is_Some</span> (<span class="id" title="var">dfracs</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">dq'</span> <span class="id" title="var">Hdq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hdomeq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">dfracs</span> <span class="id" title="var">mem</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">dq'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">loadv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hmemadq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span> <span class="id" title="var">Hmema</span> <span class="id" title="var">Hdq'</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_mem_valid_inSepM_general"><span class="id" title="axiom">gen_mem_valid_inSepM_general</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">dfracs</span> <span class="id" title="var">mem</span>) <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">loadv</span> <span class="id" title="notation">with</span> "Hm Hmem" <span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hma'</span> ; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hma'</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementPC"><span class="id" title="definition">incrementPC</span></a> (<span class="id" title="notation">&lt;[</span> <span class="id" title="var">r1</span> <span class="id" title="notation">:=</span> <span class="id" title="var">loadv</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">regs</span>)) <span class="id" title="keyword">as</span>  [ <span class="id" title="var">regs'</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="comment">(*&nbsp;Failure:&nbsp;the&nbsp;PC&nbsp;could&nbsp;not&nbsp;be&nbsp;incremented&nbsp;correctly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementPC"><span class="id" title="definition">incrementPC</span></a> (<span class="id" title="notation">&lt;[</span> <span class="id" title="var">r1</span> <span class="id" title="notation">:=</span> <span class="id" title="var">loadv</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">r</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#incrementPC_overflow_mono"><span class="id" title="axiom">incrementPC_overflow_mono</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_is_Some'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>; <span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.rules.rules_base.html#incrementPC_fail_updatePC"><span class="id" title="axiom">incrementPC_fail_updatePC</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">c</span> σ2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;heap&nbsp;resource,&nbsp;using&nbsp;the&nbsp;resource&nbsp;for&nbsp;r2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFailWP</span> "Hφ" <a class="idref" href="cap_machine.rules.rules_Load.html#Load_fail_invalid_PC"><span class="id" title="constructor">Load_fail_invalid_PC</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Success&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#update_reg"><span class="id" title="definition">update_reg</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementPC_success_updatePC"><span class="id" title="axiom">incrementPC_success_updatePC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">p1</span> &amp; <span class="id" title="var">b1</span> &amp; <span class="id" title="var">e1</span> &amp; <span class="id" title="var">a1</span> &amp; <span class="id" title="var">a_pc1</span> &amp; <span class="id" title="var">HPC''</span> &amp; <span class="id" title="var">Ha_pc'</span> &amp; <span class="id" title="var">HuPC</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#updatePC_success_incl"><span class="id" title="axiom">updatePC_success_incl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HuPC</span>. 2: <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HuPC</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">HuPC</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">c</span> σ2. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r1</span><span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#Load_spec_success"><span class="id" title="constructor">Load_spec_success</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hmema</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#incrementPC"><span class="id" title="definition">incrementPC</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HPC''</span> <span class="id" title="var">Ha_pc'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load" class="idref" href="#wp_load"><span class="id" title="lemma">wp_load</span></a> <a id="Ep:118" class="idref" href="#Ep:118"><span class="id" title="binder">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="pc_p:119" class="idref" href="#pc_p:119"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:120" class="idref" href="#pc_b:120"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:121" class="idref" href="#pc_e:121"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:122" class="idref" href="#pc_a:122"><span class="id" title="binder">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="r1:123" class="idref" href="#r1:123"><span class="id" title="binder">r1</span></a> <a id="r2:124" class="idref" href="#r2:124"><span class="id" title="binder">r2</span></a> <a id="w:125" class="idref" href="#w:125"><span class="id" title="binder">w</span></a> <a id="mem:126" class="idref" href="#mem:126"><span class="id" title="binder">mem</span></a> <a id="regs:127" class="idref" href="#regs:127"><span class="id" title="binder">regs</span></a> <a id="dq:128" class="idref" href="#dq:128"><span class="id" title="binder">dq</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:125"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:123"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:124"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:119"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:120"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:121"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:122"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#regs:127"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:119"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:120"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:121"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:122"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#regs_of"><span class="id" title="definition">regs_of</span></a> (<a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:123"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:124"><span class="id" title="variable">r2</span></a>) <span class="id" title="notation">⊆</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:127"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#mem:126"><span class="id" title="variable">mem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:122"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:125"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_Load.html#allow_load_map_or_true"><span class="id" title="definition">allow_load_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:124"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:127"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:126"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:129" class="idref" href="#a:129"><span class="id" title="binder"><span id="a:130" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="w:131" class="idref" href="#w:131"><span class="id" title="binder"><span id="w:132" class="id">w</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:126"><span class="id" title="variable">mem</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:129"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:128"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:131"><span class="id" title="variable">w</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:133" class="idref" href="#k:133"><span class="id" title="binder"><span id="k:134" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:135" class="idref" href="#y:135"><span class="id" title="binder"><span id="y:136" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:127"><span class="id" title="variable">regs</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#k:133"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#y:135"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#Ep:118"><span class="id" title="variable">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="regs':137" class="idref" href="#regs':137"><span class="id" title="binder">regs'</span></a> <a id="retv:138" class="idref" href="#retv:138"><span class="id" title="binder">retv</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.rules.rules_Load.html#retv:138"><span class="id" title="variable">retv</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="cap_machine.rules.rules_Load.html#Load_spec"><span class="id" title="inductive">Load_spec</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs:127"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:123"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:124"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':137"><span class="id" title="variable">regs'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:126"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#retv:138"><span class="id" title="variable">retv</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:139" class="idref" href="#a:139"><span class="id" title="binder"><span id="a:140" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="w:141" class="idref" href="#w:141"><span class="id" title="binder"><span id="w:142" class="id">w</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem:126"><span class="id" title="variable">mem</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:139"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:128"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:141"><span class="id" title="variable">w</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:143" class="idref" href="#k:143"><span class="id" title="binder"><span id="k:144" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:145" class="idref" href="#y:145"><span class="id" title="binder"><span id="y:146" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_Load.html#regs':137"><span class="id" title="variable">regs'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_Load.html#k:143"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#y:145"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "[Hmem Hreg] Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#mem_remove_dq"><span class="id" title="axiom">mem_remove_dq</span></a> <span class="id" title="notation">with</span> "Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hmem".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_general"><span class="id" title="axiom">wp_load_general</span></a> <span class="id" title="notation">with</span> "[$Hmem $Hreg]"<span class="id" title="notation">)</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_dom"><span class="id" title="axiom">create_gmap_default_dom</span></a> <span class="id" title="lemma">list_to_set_elements_L</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (? ?) "(?&amp;Hmem&amp;?)". <span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#mem_remove_dq"><span class="id" title="axiom">mem_remove_dq</span></a> <span class="id" title="notation">with</span> "Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hmem". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success" class="idref" href="#wp_load_success"><span class="id" title="lemma">wp_load_success</span></a> <a id="E:147" class="idref" href="#E:147"><span class="id" title="binder">E</span></a> <a id="r1:148" class="idref" href="#r1:148"><span class="id" title="binder">r1</span></a> <a id="r2:149" class="idref" href="#r2:149"><span class="id" title="binder">r2</span></a> <a id="pc_p:150" class="idref" href="#pc_p:150"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:151" class="idref" href="#pc_b:151"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:152" class="idref" href="#pc_e:152"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:153" class="idref" href="#pc_a:153"><span class="id" title="binder">pc_a</span></a> <a id="w:154" class="idref" href="#w:154"><span class="id" title="binder">w</span></a> <a id="w':155" class="idref" href="#w':155"><span class="id" title="binder">w'</span></a> <a id="w'':156" class="idref" href="#w'':156"><span class="id" title="binder">w''</span></a> <a id="p:157" class="idref" href="#p:157"><span class="id" title="binder">p</span></a> <a id="b:158" class="idref" href="#b:158"><span class="id" title="binder">b</span></a> <a id="e:159" class="idref" href="#e:159"><span class="id" title="binder">e</span></a> <a id="a:160" class="idref" href="#a:160"><span class="id" title="binder">a</span></a> <a id="pc_a':161" class="idref" href="#pc_a':161"><span class="id" title="binder">pc_a'</span></a> <a id="dq:162" class="idref" href="#dq:162"><span class="id" title="binder">dq</span></a> <a id="dq':163" class="idref" href="#dq':163"><span class="id" title="binder">dq'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:154"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:148"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:149"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:150"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:151"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:152"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:157"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:158"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:159"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':161"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:150"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:151"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:152"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:162"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:154"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:148"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w'':156"><span class="id" title="variable">w''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:149"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:157"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:158"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:159"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#eqb_addr"><span class="id" title="abbreviation">eqb_addr</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">emp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':163"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':155"><span class="id" title="variable">w'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:147"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:150"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:151"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:152"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':161"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:148"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#eqb_addr"><span class="id" title="abbreviation">eqb_addr</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:154"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':155"><span class="id" title="variable">w'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:162"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:154"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:149"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:157"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:158"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:159"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#eqb_addr"><span class="id" title="abbreviation">eqb_addr</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:153"><span class="id" title="variable">pc_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">emp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:160"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':163"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':155"><span class="id" title="variable">w'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>] <span class="id" title="var">Hpca'</span> φ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(&gt;HPC &amp; &gt;Hi &amp; &gt;Hr1 &amp; &gt;Hr2 &amp; Hr2a) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#map_of_regs_3"><span class="id" title="axiom">map_of_regs_3</span></a> <span class="id" title="notation">with</span> "HPC Hr1 Hr2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hmap (%&amp;%&amp;%)]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2gen_clater_dq"><span class="id" title="axiom">memMap_resource_2gen_clater_dq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:164" class="idref" href="#a:164"><span class="id" title="binder"><span id="a:167" class="id">a</span></span></a> <a id="dq:165" class="idref" href="#dq:165"><span class="id" title="binder"><span id="dq:168" class="id">dq</span></span></a> <a id="w:166" class="idref" href="#w:166"><span class="id" title="binder"><span id="w:169" class="id">w</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:164"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:165"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:166"><span class="id" title="variable">w</span></a>)%<span class="id" title="var">I</span> <span class="id" title="notation">with</span> "Hi Hr2a"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">mem</span> <span class="id" title="var">dfracs</span>) "[&gt;Hmem Hmem']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hmem'" <span class="id" title="keyword">as</span> %[<span class="id" title="var">Hmem</span> <span class="id" title="var">Hdfracs</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_general"><span class="id" title="axiom">wp_load_general</span></a> <span class="id" title="notation">with</span> "[$Hmap $Hmem]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">dom_insert</span>; <span class="id" title="var">set_solver</span>+. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_implies_allow_load_map"><span class="id" title="axiom">mem_implies_allow_load_map</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span>; <span class="id" title="var">simplify_eq</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">dom_insert_L</span>;<span class="id" title="var">set_solver</span>+. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">regs'</span> <span class="id" title="var">retv</span>) "(#Hspec &amp; Hmem &amp; Hmap)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hspec" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hspec</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hspec</span> <span class="id" title="keyword">as</span> [ | * <span class="id" title="var">Hfail</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Success&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;FIXME:&nbsp;fragile&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrr2</span> <span class="id" title="var">_</span>]. <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2gen_d_dq"><span class="id" title="axiom">memMap_resource_2gen_d_dq</span></a> <span class="id" title="notation">with</span> "[Hmem]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hpc_a Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">mem</span>,<span class="id" title="var">dfracs</span>; <span class="id" title="var">iSplitL</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incrementPC_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.rules.rules_Load.html#mem_implies_loadv"><span class="id" title="axiom">mem_implies_loadv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hmem</span> <span class="id" title="var">H6</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hloadv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">insert_commute</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <span class="id" title="var">r1</span>) // <span class="id" title="lemma">insert_insert</span> (<span class="id" title="lemma">insert_commute</span> <span class="id" title="var">_</span> <span class="id" title="var">r1</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>) // <span class="id" title="lemma">insert_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#regs_of_map_3"><span class="id" title="axiom">regs_of_map_3</span></a> <span class="id" title="notation">with</span> "[$Hmap]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[HPC [Hr1 Hr2] ]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Failure&nbsp;(contradiction)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfail</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">incrementPC_inv</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_notinstr" class="idref" href="#wp_load_success_notinstr"><span class="id" title="lemma">wp_load_success_notinstr</span></a> <a id="E:170" class="idref" href="#E:170"><span class="id" title="binder">E</span></a> <a id="r1:171" class="idref" href="#r1:171"><span class="id" title="binder">r1</span></a> <a id="r2:172" class="idref" href="#r2:172"><span class="id" title="binder">r2</span></a> <a id="pc_p:173" class="idref" href="#pc_p:173"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:174" class="idref" href="#pc_b:174"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:175" class="idref" href="#pc_e:175"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:176" class="idref" href="#pc_a:176"><span class="id" title="binder">pc_a</span></a> <a id="w:177" class="idref" href="#w:177"><span class="id" title="binder">w</span></a> <a id="w':178" class="idref" href="#w':178"><span class="id" title="binder">w'</span></a> <a id="w'':179" class="idref" href="#w'':179"><span class="id" title="binder">w''</span></a> <a id="p:180" class="idref" href="#p:180"><span class="id" title="binder">p</span></a> <a id="b:181" class="idref" href="#b:181"><span class="id" title="binder">b</span></a> <a id="e:182" class="idref" href="#e:182"><span class="id" title="binder">e</span></a> <a id="a:183" class="idref" href="#a:183"><span class="id" title="binder">a</span></a> <a id="pc_a':184" class="idref" href="#pc_a':184"><span class="id" title="binder">pc_a'</span></a> <a id="dq:185" class="idref" href="#dq:185"><span class="id" title="binder">dq</span></a> <a id="dq':186" class="idref" href="#dq':186"><span class="id" title="binder">dq'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:177"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:171"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:172"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:173"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:174"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:175"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:176"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:180"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:181"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:182"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:183"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:176"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':184"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:173"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:174"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:175"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:176"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:176"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:185"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:177"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:171"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w'':179"><span class="id" title="variable">w''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:172"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:180"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:181"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:182"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:183"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:183"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':186"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':178"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:170"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:173"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:174"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:175"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':184"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:171"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':178"><span class="id" title="variable">w'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:176"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:185"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:177"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:172"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:180"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:181"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:182"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:183"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:183"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':186"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':178"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "(&gt;HPC &amp; &gt;Hpc_a &amp; &gt;Hr1 &amp; &gt;Hr2 &amp; &gt;Ha)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">Z</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">pc_a</span>); <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">solve_addr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">mapsto_agree</span> <span class="id" title="notation">with</span> "Hpc_a Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success"><span class="id" title="axiom">wp_load_success</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1 $Hr2]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>,<a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>,<a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">pc_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt;. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ? &amp; ?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">pc_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> -&gt;. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success"><span class="id" title="axiom">wp_load_success</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1 $Hr2 Ha]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ? &amp; ?)". <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">apply</span> <span class="id" title="constructor">DfracDiscarded</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0).<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_frominstr" class="idref" href="#wp_load_success_frominstr"><span class="id" title="lemma">wp_load_success_frominstr</span></a> <a id="E:187" class="idref" href="#E:187"><span class="id" title="binder">E</span></a> <a id="r1:188" class="idref" href="#r1:188"><span class="id" title="binder">r1</span></a> <a id="r2:189" class="idref" href="#r2:189"><span class="id" title="binder">r2</span></a> <a id="pc_p:190" class="idref" href="#pc_p:190"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:191" class="idref" href="#pc_b:191"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:192" class="idref" href="#pc_e:192"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:193" class="idref" href="#pc_a:193"><span class="id" title="binder">pc_a</span></a> <a id="w:194" class="idref" href="#w:194"><span class="id" title="binder">w</span></a> <a id="w'':195" class="idref" href="#w'':195"><span class="id" title="binder">w''</span></a> <a id="p:196" class="idref" href="#p:196"><span class="id" title="binder">p</span></a> <a id="b:197" class="idref" href="#b:197"><span class="id" title="binder">b</span></a> <a id="e:198" class="idref" href="#e:198"><span class="id" title="binder">e</span></a> <a id="pc_a':199" class="idref" href="#pc_a':199"><span class="id" title="binder">pc_a'</span></a> <a id="dq:200" class="idref" href="#dq:200"><span class="id" title="binder">dq</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:194"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:188"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:189"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:190"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:191"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:192"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:196"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:198"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':199"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:190"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:191"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:192"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:200"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:194"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:188"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w'':195"><span class="id" title="variable">w''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:189"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:196"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:198"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:187"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:190"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:191"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:192"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':199"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:188"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:194"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:200"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:194"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:189"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:196"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:198"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:193"><span class="id" title="variable">pc_a</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "(&gt;HPC &amp; &gt;Hpc_a &amp; &gt;Hr1 &amp; &gt;Hr2)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success"><span class="id" title="axiom">wp_load_success</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1 $Hr2]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ? &amp; ?)". <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_same" class="idref" href="#wp_load_success_same"><span class="id" title="lemma">wp_load_success_same</span></a> <a id="E:201" class="idref" href="#E:201"><span class="id" title="binder">E</span></a> <a id="r1:202" class="idref" href="#r1:202"><span class="id" title="binder">r1</span></a> <a id="pc_p:203" class="idref" href="#pc_p:203"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:204" class="idref" href="#pc_b:204"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:205" class="idref" href="#pc_e:205"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:206" class="idref" href="#pc_a:206"><span class="id" title="binder">pc_a</span></a> <a id="w:207" class="idref" href="#w:207"><span class="id" title="binder">w</span></a> <a id="w':208" class="idref" href="#w':208"><span class="id" title="binder">w'</span></a> <a id="w'':209" class="idref" href="#w'':209"><span class="id" title="binder">w''</span></a> <a id="p:210" class="idref" href="#p:210"><span class="id" title="binder">p</span></a> <a id="b:211" class="idref" href="#b:211"><span class="id" title="binder">b</span></a> <a id="e:212" class="idref" href="#e:212"><span class="id" title="binder">e</span></a> <a id="a:213" class="idref" href="#a:213"><span class="id" title="binder">a</span></a> <a id="pc_a':214" class="idref" href="#pc_a':214"><span class="id" title="binder">pc_a'</span></a> <a id="dq:215" class="idref" href="#dq:215"><span class="id" title="binder">dq</span></a> <a id="dq':216" class="idref" href="#dq':216"><span class="id" title="binder">dq'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:207"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:202"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:202"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:203"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:204"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:205"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:210"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:211"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:212"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':214"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:203"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:204"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:205"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:215"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:207"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:202"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:210"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:211"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:212"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">emp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':216"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':208"><span class="id" title="variable">w'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:201"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:203"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:204"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:205"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':214"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:202"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:207"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':208"><span class="id" title="variable">w'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:215"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:207"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> (<a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:206"><span class="id" title="variable">pc_a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">emp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:213"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':216"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':208"><span class="id" title="variable">w'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span> <span class="id" title="var">Hpca'</span> φ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(&gt;HPC &amp; &gt;Hi &amp; &gt;Hr1 &amp; Hr1a) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#map_of_regs_2"><span class="id" title="axiom">map_of_regs_2</span></a> <span class="id" title="notation">with</span> "HPC Hr1"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hmap %]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2gen_clater_dq"><span class="id" title="axiom">memMap_resource_2gen_clater_dq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:217" class="idref" href="#a:217"><span class="id" title="binder"><span id="a:220" class="id">a</span></span></a> <a id="dq:218" class="idref" href="#dq:218"><span class="id" title="binder"><span id="dq:221" class="id">dq</span></span></a> <a id="w:219" class="idref" href="#w:219"><span class="id" title="binder"><span id="w:222" class="id">w</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:217"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:218"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:219"><span class="id" title="variable">w</span></a>)%<span class="id" title="var">I</span> <span class="id" title="notation">with</span> "Hi Hr1a"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mem</span> <span class="id" title="var">dfracs</span>) "[&gt;Hmem Hmem']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hmem'" <span class="id" title="keyword">as</span> %[<span class="id" title="var">Hmem</span> <span class="id" title="var">Hfracs</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_general"><span class="id" title="axiom">wp_load_general</span></a> <span class="id" title="notation">with</span> "[$Hmap $Hmem]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">dom_insert</span>; <span class="id" title="var">set_solver</span>+. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_implies_allow_load_map"><span class="id" title="axiom">mem_implies_allow_load_map</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">regs'</span> <span class="id" title="var">retv</span>) "(#Hspec &amp; Hmem &amp; Hmap)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hspec" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hspec</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hspec</span> <span class="id" title="keyword">as</span> [ | * <span class="id" title="var">Hfail</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Success&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrr2</span> <span class="id" title="var">_</span>]. <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2gen_d_dq"><span class="id" title="axiom">memMap_resource_2gen_d_dq</span></a> <span class="id" title="notation">with</span> "[Hmem]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hpc_a Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">iExists</span> <span class="id" title="var">mem</span>,<span class="id" title="var">dfracs</span>; <span class="id" title="var">iSplitL</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incrementPC_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.rules.rules_Load.html#mem_implies_loadv"><span class="id" title="axiom">mem_implies_loadv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hmem</span> <span class="id" title="var">H4</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hloadv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">insert_commute</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <span class="id" title="var">r1</span>) // <span class="id" title="lemma">insert_insert</span> (<span class="id" title="lemma">insert_commute</span> <span class="id" title="var">_</span> <span class="id" title="var">r1</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>) // <span class="id" title="lemma">insert_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#regs_of_map_2"><span class="id" title="axiom">regs_of_map_2</span></a> <span class="id" title="notation">with</span> "[$Hmap]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[HPC Hr1]"; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Failure&nbsp;(contradiction)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfail</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">incrementPC_inv</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_same_notinstr" class="idref" href="#wp_load_success_same_notinstr"><span class="id" title="lemma">wp_load_success_same_notinstr</span></a> <a id="E:223" class="idref" href="#E:223"><span class="id" title="binder">E</span></a> <a id="r1:224" class="idref" href="#r1:224"><span class="id" title="binder">r1</span></a> <a id="pc_p:225" class="idref" href="#pc_p:225"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:226" class="idref" href="#pc_b:226"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:227" class="idref" href="#pc_e:227"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:228" class="idref" href="#pc_a:228"><span class="id" title="binder">pc_a</span></a> <a id="w:229" class="idref" href="#w:229"><span class="id" title="binder">w</span></a> <a id="w':230" class="idref" href="#w':230"><span class="id" title="binder">w'</span></a> <a id="w'':231" class="idref" href="#w'':231"><span class="id" title="binder">w''</span></a> <a id="p:232" class="idref" href="#p:232"><span class="id" title="binder">p</span></a> <a id="b:233" class="idref" href="#b:233"><span class="id" title="binder">b</span></a> <a id="e:234" class="idref" href="#e:234"><span class="id" title="binder">e</span></a> <a id="a:235" class="idref" href="#a:235"><span class="id" title="binder">a</span></a> <a id="pc_a':236" class="idref" href="#pc_a':236"><span class="id" title="binder">pc_a'</span></a> <a id="dq:237" class="idref" href="#dq:237"><span class="id" title="binder">dq</span></a> <a id="dq':238" class="idref" href="#dq':238"><span class="id" title="binder">dq'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:229"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:224"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:224"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:225"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:226"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:227"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:228"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:232"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:233"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:234"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:235"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:228"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':236"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:225"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:226"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:227"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:228"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:228"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:237"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:229"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:224"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:232"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:233"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:234"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:235"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:235"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':238"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':230"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:223"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:225"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:226"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:227"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':236"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:224"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':230"><span class="id" title="variable">w'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:228"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:237"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:229"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:235"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq':238"><span class="id" title="variable">dq'</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':230"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "(&gt;HPC &amp; &gt;Hpc_a &amp; &gt;Hr1 &amp; &gt;Ha)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">pc_a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">solve_addr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqa</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">mapsto_agree</span> <span class="id" title="notation">with</span> "Hpc_a Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success_same"><span class="id" title="axiom">wp_load_success_same</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success_same"><span class="id" title="axiom">wp_load_success_same</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1 Ha]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ?)". <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0). <span class="id" title="tactic">apply</span> <span class="id" title="constructor">DfracDiscarded</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_same_frominstr" class="idref" href="#wp_load_success_same_frominstr"><span class="id" title="lemma">wp_load_success_same_frominstr</span></a> <a id="E:239" class="idref" href="#E:239"><span class="id" title="binder">E</span></a> <a id="r1:240" class="idref" href="#r1:240"><span class="id" title="binder">r1</span></a> <a id="pc_p:241" class="idref" href="#pc_p:241"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:242" class="idref" href="#pc_b:242"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:243" class="idref" href="#pc_e:243"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:244" class="idref" href="#pc_a:244"><span class="id" title="binder">pc_a</span></a> <a id="w:245" class="idref" href="#w:245"><span class="id" title="binder">w</span></a> <a id="p:246" class="idref" href="#p:246"><span class="id" title="binder">p</span></a> <a id="b:247" class="idref" href="#b:247"><span class="id" title="binder">b</span></a> <a id="e:248" class="idref" href="#e:248"><span class="id" title="binder">e</span></a> <a id="pc_a':249" class="idref" href="#pc_a':249"><span class="id" title="binder">pc_a'</span></a> <a id="dq:250" class="idref" href="#dq:250"><span class="id" title="binder">dq</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:245"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:240"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:240"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:241"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:242"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:243"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:246"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:247"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:248"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':249"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:241"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:242"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:243"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:250"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:245"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:240"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:246"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:247"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:248"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:239"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:241"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:242"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:243"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':249"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:240"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:245"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:244"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:250"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:245"><span class="id" title="variable">w</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "(&gt;HPC &amp; &gt;Hpc_a &amp; &gt;Hr1)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hφ". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success_same"><span class="id" title="axiom">wp_load_success_same</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> "(? &amp; ? &amp; ? &amp; ?)". <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_refl"><span class="id" title="lemma">Z.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ". <span class="id" title="var">iFrame</span>. <span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;a&nbsp;points&nbsp;to&nbsp;a&nbsp;capability,&nbsp;the&nbsp;load&nbsp;into&nbsp;PC&nbsp;success&nbsp;if&nbsp;its&nbsp;address&nbsp;can&nbsp;be&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_PC" class="idref" href="#wp_load_success_PC"><span class="id" title="lemma">wp_load_success_PC</span></a> <a id="E:251" class="idref" href="#E:251"><span class="id" title="binder">E</span></a> <a id="r2:252" class="idref" href="#r2:252"><span class="id" title="binder">r2</span></a> <a id="pc_p:253" class="idref" href="#pc_p:253"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:254" class="idref" href="#pc_b:254"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:255" class="idref" href="#pc_e:255"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:256" class="idref" href="#pc_a:256"><span class="id" title="binder">pc_a</span></a> <a id="w:257" class="idref" href="#w:257"><span class="id" title="binder">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="p:258" class="idref" href="#p:258"><span class="id" title="binder">p</span></a> <a id="b:259" class="idref" href="#b:259"><span class="id" title="binder">b</span></a> <a id="e:260" class="idref" href="#e:260"><span class="id" title="binder">e</span></a> <a id="a:261" class="idref" href="#a:261"><span class="id" title="binder">a</span></a> <a id="p':262" class="idref" href="#p':262"><span class="id" title="binder">p'</span></a> <a id="b':263" class="idref" href="#b':263"><span class="id" title="binder">b'</span></a> <a id="e':264" class="idref" href="#e':264"><span class="id" title="binder">e'</span></a> <a id="a':265" class="idref" href="#a':265"><span class="id" title="binder">a'</span></a> <a id="a'':266" class="idref" href="#a'':266"><span class="id" title="binder">a''</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:257"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:252"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:253"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:254"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:255"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:256"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:258"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:259"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:260"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:261"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#a':265"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a'':266"><span class="id" title="variable">a''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:253"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:254"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:255"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:256"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:256"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:257"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:252"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:258"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:259"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:260"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:261"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:261"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p':262"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b':263"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e':264"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a':265"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:251"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p':262"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b':263"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e':264"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a'':266"><span class="id" title="variable">a''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:256"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:257"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:252"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:258"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:259"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:260"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:261"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:261"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p':262"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b':263"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e':264"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a':265"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>] <span class="id" title="var">Hpca'</span> φ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(&gt;HPC &amp; &gt;Hi &amp; &gt;Hr2 &amp; &gt;Hr2a) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#map_of_regs_2"><span class="id" title="axiom">map_of_regs_2</span></a> <span class="id" title="notation">with</span> "HPC Hr2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hmap %]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2ne_apply"><span class="id" title="axiom">memMap_resource_2ne_apply</span></a> <span class="id" title="notation">with</span> "Hi Hr2a"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hmem %]"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load"><span class="id" title="axiom">wp_load</span></a> <span class="id" title="notation">with</span> "[$Hmap $Hmem]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">dom_insert</span>; <span class="id" title="var">set_solver</span>+. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_neq_implies_allow_load_map"><span class="id" title="axiom">mem_neq_implies_allow_load_map</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">a</span>) (<span class="id" title="var">pc_a</span> := <span class="id" title="var">pc_a</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">regs'</span> <span class="id" title="var">retv</span>) "(#Hspec &amp; Hmem &amp; Hmap)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hspec" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hspec</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hspec</span> <span class="id" title="keyword">as</span> [ | * <span class="id" title="var">Hfail</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Success&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrr2</span> <span class="id" title="var">_</span>]. <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_2ne"><span class="id" title="axiom">memMap_resource_2ne</span></a> <span class="id" title="notation">with</span> "Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hpc_a Ha]";<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incrementPC_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_insert</span> <span class="id" title="lemma">insert_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#regs_of_map_2"><span class="id" title="axiom">regs_of_map_2</span></a> <span class="id" title="notation">with</span> "[$Hmap]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[HPC Hr2]"; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Failure&nbsp;(contradiction)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfail</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">incrementPC_inv</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_fromPC" class="idref" href="#wp_load_success_fromPC"><span class="id" title="lemma">wp_load_success_fromPC</span></a> <a id="E:267" class="idref" href="#E:267"><span class="id" title="binder">E</span></a> <a id="r1:268" class="idref" href="#r1:268"><span class="id" title="binder">r1</span></a> <a id="pc_p:269" class="idref" href="#pc_p:269"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:270" class="idref" href="#pc_b:270"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:271" class="idref" href="#pc_e:271"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:272" class="idref" href="#pc_a:272"><span class="id" title="binder">pc_a</span></a> <a id="pc_a':273" class="idref" href="#pc_a':273"><span class="id" title="binder">pc_a'</span></a> <a id="w:274" class="idref" href="#w:274"><span class="id" title="binder">w</span></a> <a id="w'':275" class="idref" href="#w'':275"><span class="id" title="binder">w''</span></a> <a id="dq:276" class="idref" href="#dq:276"><span class="id" title="binder">dq</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:274"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:268"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:269"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:270"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:271"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:272"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:272"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':273"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:269"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:270"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:271"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:272"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:272"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:276"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:274"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:268"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w'':275"><span class="id" title="variable">w''</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:267"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:269"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:270"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:271"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':273"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:272"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">↦ₐ{</span></a><a class="idref" href="cap_machine.rules.rules_Load.html#dq:276"><span class="id" title="variable">dq</span></a><a class="idref" href="cap_machine.rules.rules_base.html#1f356528680e66e063184d2852c70086"><span class="id" title="notation">}</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:274"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:268"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:274"><span class="id" title="variable">w</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hpca'</span> φ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(&gt;HPC &amp; &gt;Hi &amp; &gt;Hr1) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#map_of_regs_2"><span class="id" title="axiom">map_of_regs_2</span></a> <span class="id" title="notation">with</span> "HPC Hr1"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hmap %]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_1_dq"><span class="id" title="axiom">memMap_resource_1_dq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load"><span class="id" title="axiom">wp_load</span></a> <span class="id" title="notation">with</span> "[$Hmap $Hi]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">dom_insert</span>; <span class="id" title="var">set_solver</span>+. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_Load.html#mem_eq_implies_allow_load_map"><span class="id" title="axiom">mem_eq_implies_allow_load_map</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">pc_a</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">regs'</span> <span class="id" title="var">retv</span>) "(#Hspec &amp; Hmem &amp; Hmap)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hspec" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hspec</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hspec</span> <span class="id" title="keyword">as</span> [ | * <span class="id" title="var">Hfail</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Success&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrr2</span> <span class="id" title="var">_</span>]. <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.rules.rules_base.html#memMap_resource_1_dq"><span class="id" title="axiom">memMap_resource_1_dq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incrementPC_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_commute</span> //= <span class="id" title="lemma">insert_insert</span> <span class="id" title="lemma">insert_commute</span> //= <span class="id" title="lemma">insert_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#regs_of_map_2"><span class="id" title="axiom">regs_of_map_2</span></a> <span class="id" title="notation">with</span> "[$Hmap]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[HPC Hr1]"; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Failure&nbsp;(contradiction)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfail</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">incrementPC_inv</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_ra_wb"><span class="id" title="axiom">isCorrectPC_ra_wb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_prop_elim"><span class="id" title="lemma">andb_prop_elim</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Is_true_false</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_alt" class="idref" href="#wp_load_success_alt"><span class="id" title="lemma">wp_load_success_alt</span></a> <a id="E:277" class="idref" href="#E:277"><span class="id" title="binder">E</span></a> <a id="r1:278" class="idref" href="#r1:278"><span class="id" title="binder">r1</span></a> <a id="r2:279" class="idref" href="#r2:279"><span class="id" title="binder">r2</span></a> <a id="pc_p:280" class="idref" href="#pc_p:280"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:281" class="idref" href="#pc_b:281"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:282" class="idref" href="#pc_e:282"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:283" class="idref" href="#pc_a:283"><span class="id" title="binder">pc_a</span></a> <a id="w:284" class="idref" href="#w:284"><span class="id" title="binder">w</span></a> <a id="w':285" class="idref" href="#w':285"><span class="id" title="binder">w'</span></a> <a id="w'':286" class="idref" href="#w'':286"><span class="id" title="binder">w''</span></a> <a id="p:287" class="idref" href="#p:287"><span class="id" title="binder">p</span></a> <a id="b:288" class="idref" href="#b:288"><span class="id" title="binder">b</span></a> <a id="e:289" class="idref" href="#e:289"><span class="id" title="binder">e</span></a> <a id="a:290" class="idref" href="#a:290"><span class="id" title="binder">a</span></a> <a id="pc_a':291" class="idref" href="#pc_a':291"><span class="id" title="binder">pc_a'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:284"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:278"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:279"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:280"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:281"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:282"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:283"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:287"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:288"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:289"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:290"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:283"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':291"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:280"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:281"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:282"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:283"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:283"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:284"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:278"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w'':286"><span class="id" title="variable">w''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:279"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:287"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:288"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:289"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:290"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:290"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':285"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:277"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:280"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:281"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:282"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':291"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:278"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':285"><span class="id" title="variable">w'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:283"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:284"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r2:279"><span class="id" title="variable">r2</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:287"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:288"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:289"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:290"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:290"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':285"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>] <span class="id" title="var">Hpca'</span> φ) "(&gt;HPC &amp; &gt;Hi &amp; &gt;Hr1 &amp; &gt;Hr2 &amp; &gt;Hr2a) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span>(<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#address_neq"><span class="id" title="axiom">address_neq</span></a> <span class="id" title="notation">with</span> "Hr2a Hi"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hneq</span>. <span class="id" title="var">iIntros</span> (-&gt;%<a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a>). <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success"><span class="id" title="axiom">wp_load_success</span></a> <span class="id" title="notation">with</span> "[$HPC $Hi $Hr1 $Hr2 Hr2a]"<span class="id" title="notation">)</span>;<span class="id" title="tactic">eauto</span>;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfalse</span>;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_load_success_same_alt" class="idref" href="#wp_load_success_same_alt"><span class="id" title="lemma">wp_load_success_same_alt</span></a> <a id="E:292" class="idref" href="#E:292"><span class="id" title="binder">E</span></a> <a id="r1:293" class="idref" href="#r1:293"><span class="id" title="binder">r1</span></a> <a id="pc_p:294" class="idref" href="#pc_p:294"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:295" class="idref" href="#pc_b:295"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:296" class="idref" href="#pc_e:296"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:297" class="idref" href="#pc_a:297"><span class="id" title="binder">pc_a</span></a> <a id="w:298" class="idref" href="#w:298"><span class="id" title="binder">w</span></a> <a id="w':299" class="idref" href="#w':299"><span class="id" title="binder">w'</span></a> <a id="p:300" class="idref" href="#p:300"><span class="id" title="binder">p</span></a> <a id="b:301" class="idref" href="#b:301"><span class="id" title="binder">b</span></a> <a id="e:302" class="idref" href="#e:302"><span class="id" title="binder">e</span></a> <a id="a:303" class="idref" href="#a:303"><span class="id" title="binder">a</span></a> <a id="pc_a':304" class="idref" href="#pc_a':304"><span class="id" title="binder">pc_a'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:298"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#Load"><span class="id" title="constructor">Load</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:293"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:293"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:294"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:295"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:296"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:297"><span class="id" title="variable">pc_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#readAllowed"><span class="id" title="definition">readAllowed</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:300"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:301"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:302"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:303"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:297"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.addr_reg.html#83f9bcf2054d3d441d475f25e3e951c6"><span class="id" title="notation">+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':304"><span class="id" title="variable">pc_a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:294"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:295"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:296"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:297"><span class="id" title="variable">pc_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:297"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:298"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:293"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#p:300"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#b:301"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#e:302"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#a:303"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:303"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':299"><span class="id" title="variable">w'</span></a><span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_Load.html#E:292"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_p:294"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_b:295"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_e:296"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a':304"><span class="id" title="variable">pc_a'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#r1:293"><span class="id" title="variable">r1</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':299"><span class="id" title="variable">w'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#pc_a:297"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w:298"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.rules.rules_Load.html#a:303"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_Load.html#w':299"><span class="id" title="variable">w'</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hra</span> <span class="id" title="var">Hwb</span>] <span class="id" title="var">Hpca'</span> φ) "(&gt;HPC &amp; &gt;Hpc_a &amp; &gt;Hr1 &amp; &gt;Ha) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span>(<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#78f5fa8e2bcce93d56bc8dcc902b0827"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pc_a</span>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#address_neq"><span class="id" title="axiom">address_neq</span></a> <span class="id" title="notation">with</span> "Ha Hpc_a"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hneq</span>. <span class="id" title="var">iIntros</span> (-&gt;%<a class="idref" href="machine_utils.finz_base.html#finz_to_z_eq"><span class="id" title="lemma">finz_to_z_eq</span></a>). <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_Load.html#wp_load_success_same"><span class="id" title="axiom">wp_load_success_same</span></a> <span class="id" title="notation">with</span> "[$HPC $Hpc_a $Hr1 Ha]"<span class="id" title="notation">)</span>;<span class="id" title="tactic">eauto</span>;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfalse</span>;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.rules.rules_Load.html#cap_lang_rules"><span class="id" title="section">cap_lang_rules</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
