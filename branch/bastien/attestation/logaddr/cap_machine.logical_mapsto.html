<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.logical_mapsto</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">invariants</span> <span class="id" title="library">gen_heap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">ectx_lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="cap_machine.cap_lang.html#"><span class="id" title="library">cap_lang</span></a> <a class="idref" href="cap_machine.iris_extra.html#"><span class="id" title="library">iris_extra</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a> <a class="idref" href="cap_machine.machine_parameters.html#"><span class="id" title="library">machine_parameters</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Version" class="idref" href="#Version"><span class="id" title="definition">Version</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="LAddr" class="idref" href="#LAddr"><span class="id" title="definition">LAddr</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Inductive</span> <a id="LSealable" class="idref" href="#LSealable"><span class="id" title="definition, inductive"><span id="LSealable_rect" class="id"><span id="LSealable_ind" class="id"><span id="LSealable_rec" class="id"><span id="LSealable_sind" class="id">LSealable</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LSCap" class="idref" href="#LSCap"><span class="id" title="constructor">LSCap</span></a>: <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a><br/>
| <a id="LSSealRange" class="idref" href="#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a>: <a class="idref" href="cap_machine.machine_base.html#SealPerms"><span class="id" title="definition">SealPerms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="LWord" class="idref" href="#LWord"><span class="id" title="definition, inductive"><span id="LWord_rect" class="id"><span id="LWord_ind" class="id"><span id="LWord_rec" class="id"><span id="LWord_sind" class="id">LWord</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LWInt" class="idref" href="#LWInt"><span class="id" title="constructor">LWInt</span></a> (<a id="z:5" class="idref" href="#z:5"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
| <a id="LWSealable" class="idref" href="#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a id="sb:6" class="idref" href="#sb:6"><span class="id" title="binder">sb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>)<br/>
| <a id="LWSealed" class="idref" href="#LWSealed"><span class="id" title="constructor">LWSealed</span></a>: <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord:3"><span class="id" title="inductive">LWord</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lsealable_get_sealable" class="idref" href="#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> (<a id="lsb:7" class="idref" href="#lsb:7"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Sealable"><span class="id" title="inductive">Sealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:7"><span class="id" title="variable">lsb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SSealRange"><span class="id" title="constructor">SSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_word" class="idref" href="#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a id="lw:9" class="idref" href="#lw:9"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:9"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealable"><span class="id" title="constructor">WSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealed"><span class="id" title="constructor">WSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="LCap" class="idref" href="#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealRange" class="idref" href="#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealedCap" class="idref" href="#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LInt" class="idref" href="#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="lword_inhabited" class="idref" href="#lword_inhabited"><span class="id" title="instance">lword_inhabited</span></a>: <span class="id" title="class">Inhabited</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_version" class="idref" href="#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> (<a id="lw:11" class="idref" href="#lw:11"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:11"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | (<a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_addr" class="idref" href="#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> (<a id="la:13" class="idref" href="#la:13"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:13"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_version" class="idref" href="#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> (<a id="la:14" class="idref" href="#la:14"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:14"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_inv" class="idref" href="#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a> <a id="la:15" class="idref" href="#la:15"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:15"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:15"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:15"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lcap" class="idref" href="#is_lcap"><span class="id" title="definition">is_lcap</span></a> (<a id="w:16" class="idref" href="#w:16"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:16"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_lcap" class="idref" href="#get_lcap"><span class="id" title="definition">get_lcap</span></a> (<a id="w:18" class="idref" href="#w:18"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:18"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_is_lcap" class="idref" href="#get_is_lcap"><span class="id" title="lemma">get_is_lcap</span></a> <a id="lw:20" class="idref" href="#lw:20"><span class="id" title="binder">lw</span></a> <a id="lsb:21" class="idref" href="#lsb:21"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:20"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:21"><span class="id" title="variable">lsb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:20"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a>, <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a>. <span class="id" title="tactic">repeat</span> (<span class="id" title="var">case_match</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="version_eq_dec" class="idref" href="#version_eq_dec"><span class="id" title="instance">version_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lsealb_eq_dec" class="idref" href="#lsealb_eq_dec"><span class="id" title="instance">lsealb_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lword_eq_dec" class="idref" href="#lword_eq_dec"><span class="id" title="instance">lword_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VMap" class="idref" href="#VMap"><span class="id" title="definition">VMap</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LReg" class="idref" href="#LReg"><span class="id" title="definition">LReg</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LMem" class="idref" href="#LMem"><span class="id" title="definition">LMem</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LDFrac" class="idref" href="#LDFrac"><span class="id" title="definition">LDFrac</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <span class="id" title="inductive">iris.algebra.dfrac.dfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lreg_strip" class="idref" href="#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> (<a id="lr:22" class="idref" href="#lr:22"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a> :=<br/>
&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="lw:23" class="idref" href="#lw:23"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:23"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:22"><span class="id" title="variable">lr</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_addr" class="idref" href="#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> (<a id="la:24" class="idref" href="#la:24"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="cur_map:25" class="idref" href="#cur_map:25"><span class="id" title="binder">cur_map</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#cur_map:25"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:24"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:24"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>. <span class="comment">(*&nbsp;check&nbsp;whether&nbsp;the&nbsp;version&nbsp;of&nbsp;`la`&nbsp;matches&nbsp;in&nbsp;cur_map&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_word" class="idref" href="#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a id="lw:26" class="idref" href="#lw:26"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="cur_map:27" class="idref" href="#cur_map:27"><span class="id" title="binder">cur_map</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:26"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:29" class="idref" href="#a:29"><span class="id" title="binder"><span id="a:30" class="id">a</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:29"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#cur_map:27"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:29"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_log_cap" class="idref" href="#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> (<a id="lw:31" class="idref" href="#lw:31"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:31"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_true_iff" class="idref" href="#is_log_cap_is_cap_true_iff"><span class="id" title="lemma">is_log_cap_is_cap_true_iff</span></a> <a id="lw:33" class="idref" href="#lw:33"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:33"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:33"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_false_iff" class="idref" href="#is_log_cap_is_cap_false_iff"><span class="id" title="lemma">is_log_cap_is_cap_false_iff</span></a> <a id="lw:34" class="idref" href="#lw:34"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:34"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:34"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="logical_region" class="idref" href="#logical_region"><span class="id" title="definition">logical_region</span></a> ( <a id="region:35" class="idref" href="#region:35"><span class="id" title="binder">region</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> ) (<a id="v:36" class="idref" href="#v:36"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="a:37" class="idref" href="#a:37"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:37"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:36"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#region:35"><span class="id" title="variable">region</span></a>.<br/>

<br/>
</div>

<div class="doc">
The `reg_phys_log_corresponds` states that, the physical register file `phr` corresponds
    to the the logical register file `lr`, according to the view map `cur_map` if:
<ul class="doclist">
<li> the content of the register `phr` is the same as the words in `lr` w/o the version

</li>
<li> the version of the capabilities in `lr` are the same as the version of its addresses
      in the view map `cur_map`

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="reg_phys_log_corresponds" class="idref" href="#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<a id="phr:38" class="idref" href="#phr:38"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:39" class="idref" href="#lr:39"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:40" class="idref" href="#cur_map:40"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:39"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:38"><span class="id" title="variable">phr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <a id="lw:41" class="idref" href="#lw:41"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:41"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:40"><span class="id" title="variable">cur_map</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:39"><span class="id" title="variable">lr</span></a>.<br/>

<br/>
</div>

<div class="doc">
The `mem_phys_log_corresponds` states that,
<ul class="doclist">
<li> for each logical addresses in the logical memory,
      + the version is less or equal the current version of the address
      + the current version of the address also exists in the logical memory

</li>
<li> for all entries in the view map,
      + it exists is a logical word `lw` in the logical memory `lm`
        ( i.e. dom(cur_map) ⊆ dom(lm) )
      + the logical word `lw` corresponds to the actual word in the physical memory `phm`
        for the same address
      + the logical word `lw` is the current view of the word

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mem_phys_log_corresponds" class="idref" href="#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> (<a id="phm:42" class="idref" href="#phm:42"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:43" class="idref" href="#lm:43"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:44" class="idref" href="#cur_map:44"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:45" class="idref" href="#la:45"><span class="id" title="binder">la</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="cur_v:46" class="idref" href="#cur_v:46"><span class="id" title="binder">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:45"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:46"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:44"><span class="id" title="variable">cur_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;logical&nbsp;addr&nbsp;has&nbsp;version&nbsp;less&nbsp;or&nbsp;equal&nbsp;the&nbsp;current&nbsp;version&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:45"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:46"><span class="id" title="variable">cur_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;current&nbsp;version&nbsp;of&nbsp;the&nbsp;address&nbsp;actually&nbsp;exists&nbsp;in&nbsp;the&nbsp;logical&nbsp;memory&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;is&nbsp;this&nbsp;last&nbsp;part&nbsp;is&nbsp;not&nbsp;necessary&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">is_Some</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#lm:43"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:45"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:46"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;) <a class="idref" href="cap_machine.logical_mapsto.html#lm:43"><span class="id" title="variable">lm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:47" class="idref" href="#a:47"><span class="id" title="binder">a</span></a> <a id="v:48" class="idref" href="#v:48"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:49" class="idref" href="#lw:49"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:43"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:47"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:48"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:42"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:47"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:44"><span class="id" title="variable">cur_map</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#cur_map:44"><span class="id" title="variable">cur_map</span></a> <span class="comment">(*&nbsp;subset&nbsp;in&nbsp;other&nbsp;direction,&nbsp;and&nbsp;every&nbsp;current&nbsp;address&nbsp;is&nbsp;gc&nbsp;root&nbsp;*)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_phys_log_corresponds" class="idref" href="#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> (<a id="phr:50" class="idref" href="#phr:50"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:51" class="idref" href="#phm:51"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:52" class="idref" href="#lr:52"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:53" class="idref" href="#lm:53"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:54" class="idref" href="#cur_map:54"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:50"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:52"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:54"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:51"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:53"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:54"><span class="id" title="variable">cur_map</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="tactic">fresh</span> "z" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="tactic">fresh</span> "p" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">b</span> := <span class="id" title="tactic">fresh</span> "b" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">fresh</span> "e" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="tactic">fresh</span> "a" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">fresh</span> "v" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">o</span> := <span class="id" title="tactic">fresh</span> "o" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sr</span> := <span class="id" title="tactic">fresh</span> "sr" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sd</span> := <span class="id" title="tactic">fresh</span> "sd" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">z</span> | [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>] | <span class="id" title="var">o</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>]].<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="is_cur_addr_dec" class="idref" href="#is_cur_addr_dec"><span class="id" title="instance">is_cur_addr_dec</span></a> (<a id="la:55" class="idref" href="#la:55"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="cur_map:56" class="idref" href="#cur_map:56"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:55"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:56"><span class="id" title="variable">cur_map</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">la</span><span class="id" title="notation">.1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_same" class="idref" href="#is_cur_addr_same"><span class="id" title="lemma">is_cur_addr_same</span></a> (<a id="a:57" class="idref" href="#a:57"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:58" class="idref" href="#v:58"><span class="id" title="binder">v</span></a> <a id="v':59" class="idref" href="#v':59"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="cur_map:60" class="idref" href="#cur_map:60"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:57"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:58"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:60"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:57"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':59"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:60"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#v:58"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':59"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hcur_a</span> <span class="id" title="var">Hcur_a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_insert_respects_corresponds" class="idref" href="#lreg_insert_respects_corresponds"><span class="id" title="lemma">lreg_insert_respects_corresponds</span></a> (<a id="phr:61" class="idref" href="#phr:61"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:62" class="idref" href="#lr:62"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:63" class="idref" href="#cur_map:63"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:64" class="idref" href="#r:64"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:65" class="idref" href="#lw:65"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:61"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:62"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:63"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:65"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:63"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:64"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:65"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phr</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:64"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:65"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:63"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fmap_insert</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_insert_respects_corresponds" class="idref" href="#lmem_insert_respects_corresponds"><span class="id" title="lemma">lmem_insert_respects_corresponds</span></a> (<a id="phm:66" class="idref" href="#phm:66"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:67" class="idref" href="#lm:67"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:68" class="idref" href="#cur_map:68"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:69" class="idref" href="#la:69"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:70" class="idref" href="#lw:70"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:66"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:67"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:68"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:69"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:68"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:70"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:68"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:69"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:70"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phm</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#la:69"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:70"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm</span>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:68"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <span class="id" title="var">la</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">H1</span> &amp; <span class="id" title="var">H2</span> &amp; <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v</span>. <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">la</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <span class="id" title="var">la'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cur_v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hp</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hp'</span> := <span class="id" title="var">Hp</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hneq</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> ;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">intro</span>; <span class="id" title="var">simplify_pair_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_read_iscur" class="idref" href="#lreg_read_iscur"><span class="id" title="lemma">lreg_read_iscur</span></a> (<a id="phr:71" class="idref" href="#phr:71"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:72" class="idref" href="#lr:72"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:73" class="idref" href="#cur_map:73"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:74" class="idref" href="#r:74"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:75" class="idref" href="#lw:75"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:71"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:72"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:73"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:72"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:74"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:75"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:75"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:73"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_read_iscur" class="idref" href="#lmem_read_iscur"><span class="id" title="lemma">lmem_read_iscur</span></a> (<a id="phm:76" class="idref" href="#phm:76"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:77" class="idref" href="#lm:77"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:78" class="idref" href="#cur_map:78"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:79" class="idref" href="#la:79"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:80" class="idref" href="#lw:80"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:76"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:77"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:78"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:79"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:78"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:77"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:79"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:80"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:80"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:78"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hphm</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw'</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lword_version" class="idref" href="#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> (<a id="lw:81" class="idref" href="#lw:81"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:82" class="idref" href="#p:82"><span class="id" title="binder">p</span></a> <a id="b:83" class="idref" href="#b:83"><span class="id" title="binder">b</span></a> <a id="e:84" class="idref" href="#e:84"><span class="id" title="binder">e</span></a> <a id="a:85" class="idref" href="#a:85"><span class="id" title="binder">a</span></a> <a id="v:86" class="idref" href="#v:86"><span class="id" title="binder">v</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:81"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:82"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:83"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:84"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:85"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:86"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_lword_inv" class="idref" href="#is_lword_inv"><span class="id" title="lemma">is_lword_inv</span></a> (<a id="lw:87" class="idref" href="#lw:87"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:88" class="idref" href="#p:88"><span class="id" title="binder">p</span></a> <a id="b:89" class="idref" href="#b:89"><span class="id" title="binder">b</span></a> <a id="e:90" class="idref" href="#e:90"><span class="id" title="binder">e</span></a> <a id="a:91" class="idref" href="#a:91"><span class="id" title="binder">a</span></a> <a id="v:92" class="idref" href="#v:92"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:87"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:88"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:89"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:92"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="o:93" class="idref" href="#o:93"><span class="id" title="binder">o</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:87"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#o:93"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:88"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:89"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:92"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:87"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:88"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:89"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:92"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hversion</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span>; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">eexists</span>]; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cur_lword_cur_addr" class="idref" href="#cur_lword_cur_addr"><span class="id" title="lemma">cur_lword_cur_addr</span></a> <a id="lw:94" class="idref" href="#lw:94"><span class="id" title="binder">lw</span></a> <a id="p:95" class="idref" href="#p:95"><span class="id" title="binder">p</span></a> <a id="b:96" class="idref" href="#b:96"><span class="id" title="binder">b</span></a> <a id="e:97" class="idref" href="#e:97"><span class="id" title="binder">e</span></a> <a id="a:98" class="idref" href="#a:98"><span class="id" title="binder">a</span></a> (<a id="v:99" class="idref" href="#v:99"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="cur_map:100" class="idref" href="#cur_map:100"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:94"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:95"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:97"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:98"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:94"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:100"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:97"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:98"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:98"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:100"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlword</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> ; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_lword_inv"><span class="id" title="axiom">is_lword_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlword</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlword</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">o</span> ?]| ?] ; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>, <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbounds</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_lw</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_corresponds_reg" class="idref" href="#state_phys_corresponds_reg"><span class="id" title="lemma">state_phys_corresponds_reg</span></a> <a id="lw:101" class="idref" href="#lw:101"><span class="id" title="binder">lw</span></a> (<a id="w:102" class="idref" href="#w:102"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) <a id="r:103" class="idref" href="#r:103"><span class="id" title="binder">r</span></a> <a id="pr:104" class="idref" href="#pr:104"><span class="id" title="binder">pr</span></a> <a id="pm:105" class="idref" href="#pm:105"><span class="id" title="binder">pm</span></a> <a id="lr:106" class="idref" href="#lr:106"><span class="id" title="binder">lr</span></a> <a id="lm:107" class="idref" href="#lm:107"><span class="id" title="binder">lm</span></a> <a id="cur_map:108" class="idref" href="#cur_map:108"><span class="id" title="binder">cur_map</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:101"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:102"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pr:104"><span class="id" title="variable">pr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pm:105"><span class="id" title="variable">pm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:106"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:107"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:108"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:106"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:103"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:101"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#pr:104"><span class="id" title="variable">pr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:103"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:102"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlword</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HregInv</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HregInv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_fmap_Some</span>; <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_corresponds_mem" class="idref" href="#state_phys_corresponds_mem"><span class="id" title="lemma">state_phys_corresponds_mem</span></a><br/>
&nbsp;&nbsp;(<a id="lw:109" class="idref" href="#lw:109"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="w:110" class="idref" href="#w:110"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) (<a id="la:111" class="idref" href="#la:111"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="a:112" class="idref" href="#a:112"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;(<a id="pr:113" class="idref" href="#pr:113"><span class="id" title="binder">pr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="pm:114" class="idref" href="#pm:114"><span class="id" title="binder">pm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:115" class="idref" href="#lr:115"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:116" class="idref" href="#lm:116"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:117" class="idref" href="#cur_map:117"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:109"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:110"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:111"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:112"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pr:113"><span class="id" title="variable">pr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pm:114"><span class="id" title="variable">pm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:115"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:116"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:117"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:116"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:111"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:109"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:111"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:117"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#pm:114"><span class="id" title="variable">pm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:112"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:110"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlword</span> <span class="id" title="var">Hladdr</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">HmemInv</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HmemInv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a'</span> <span class="id" title="var">v'</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm</span> &amp; <span class="id" title="var">Hpm</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reg_corresponds_cap_cur_addr" class="idref" href="#reg_corresponds_cap_cur_addr"><span class="id" title="lemma">reg_corresponds_cap_cur_addr</span></a> <a id="lcap:118" class="idref" href="#lcap:118"><span class="id" title="binder">lcap</span></a> <a id="p:119" class="idref" href="#p:119"><span class="id" title="binder">p</span></a> (<a id="b:120" class="idref" href="#b:120"><span class="id" title="binder">b</span></a> <a id="e:121" class="idref" href="#e:121"><span class="id" title="binder">e</span></a> <a id="a:122" class="idref" href="#a:122"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="la:123" class="idref" href="#la:123"><span class="id" title="binder">la</span></a> <a id="r:124" class="idref" href="#r:124"><span class="id" title="binder">r</span></a> (<a id="reg:125" class="idref" href="#reg:125"><span class="id" title="binder">reg</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) <a id="lr:126" class="idref" href="#lr:126"><span class="id" title="binder">lr</span></a> <a id="cur_map:127" class="idref" href="#cur_map:127"><span class="id" title="binder">cur_map</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#reg:125"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:126"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:127"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:118"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:119"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:120"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:121"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:122"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:123"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:122"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:120"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:121"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:122"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:126"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:124"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:118"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:118"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:123"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:123"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:127"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>[<span class="id" title="var">_</span> <span class="id" title="var">Hcur</span>] <span class="id" title="var">Hlcap</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lcap</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_cap_cur_addr" class="idref" href="#state_corresponds_cap_cur_addr"><span class="id" title="lemma">state_corresponds_cap_cur_addr</span></a><br/>
&nbsp;&nbsp;<a id="lcap:128" class="idref" href="#lcap:128"><span class="id" title="binder">lcap</span></a> <a id="p:129" class="idref" href="#p:129"><span class="id" title="binder">p</span></a> (<a id="b:130" class="idref" href="#b:130"><span class="id" title="binder">b</span></a> <a id="e:131" class="idref" href="#e:131"><span class="id" title="binder">e</span></a> <a id="a:132" class="idref" href="#a:132"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="la:133" class="idref" href="#la:133"><span class="id" title="binder">la</span></a> <a id="r:134" class="idref" href="#r:134"><span class="id" title="binder">r</span></a> (<a id="reg:135" class="idref" href="#reg:135"><span class="id" title="binder">reg</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) <a id="pm:136" class="idref" href="#pm:136"><span class="id" title="binder">pm</span></a> <a id="lr:137" class="idref" href="#lr:137"><span class="id" title="binder">lr</span></a> <a id="lm:138" class="idref" href="#lm:138"><span class="id" title="binder">lm</span></a> <a id="cur_map:139" class="idref" href="#cur_map:139"><span class="id" title="binder">cur_map</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#reg:135"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pm:136"><span class="id" title="variable">pm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:137"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:138"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:139"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:128"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:129"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:130"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:131"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:132"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:133"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:132"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:130"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:131"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:132"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:137"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:134"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:128"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:128"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:133"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:133"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:139"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span>] <span class="id" title="var">Hlcap</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#reg_corresponds_cap_cur_addr"><span class="id" title="axiom">reg_corresponds_cap_cur_addr</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reg_corresponds_cap_PC" class="idref" href="#reg_corresponds_cap_PC"><span class="id" title="lemma">reg_corresponds_cap_PC</span></a> <a id="lcap:140" class="idref" href="#lcap:140"><span class="id" title="binder">lcap</span></a> <a id="p:141" class="idref" href="#p:141"><span class="id" title="binder">p</span></a> (<a id="b:142" class="idref" href="#b:142"><span class="id" title="binder">b</span></a> <a id="e:143" class="idref" href="#e:143"><span class="id" title="binder">e</span></a> <a id="a:144" class="idref" href="#a:144"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="la:145" class="idref" href="#la:145"><span class="id" title="binder">la</span></a> <a id="r:146" class="idref" href="#r:146"><span class="id" title="binder">r</span></a> (<a id="reg:147" class="idref" href="#reg:147"><span class="id" title="binder">reg</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) <a id="lr:148" class="idref" href="#lr:148"><span class="id" title="binder">lr</span></a> <a id="cur_map:149" class="idref" href="#cur_map:149"><span class="id" title="binder">cur_map</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#reg:147"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:148"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:149"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:140"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:141"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:142"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:143"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:144"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:145"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:144"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:141"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:142"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:143"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:144"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:148"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:146"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:140"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lcap:140"><span class="id" title="variable">lcap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:145"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:145"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:149"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HinvReg</span> <span class="id" title="var">Hlcap</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_withinBounds"><span class="id" title="axiom">isCorrectPC_withinBounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#reg_corresponds_cap_cur_addr"><span class="id" title="axiom">reg_corresponds_cap_cur_addr</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_corresponds_mem_PC" class="idref" href="#state_phys_corresponds_mem_PC"><span class="id" title="lemma">state_phys_corresponds_mem_PC</span></a><br/>
&nbsp;&nbsp;(<a id="p:150" class="idref" href="#p:150"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:151" class="idref" href="#b:151"><span class="id" title="binder">b</span></a> <a id="e:152" class="idref" href="#e:152"><span class="id" title="binder">e</span></a> <a id="a:153" class="idref" href="#a:153"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:154" class="idref" href="#v:154"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="r:155" class="idref" href="#r:155"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:156" class="idref" href="#lw:156"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="w:157" class="idref" href="#w:157"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>)<br/>
&nbsp;&nbsp;(<a id="pr:158" class="idref" href="#pr:158"><span class="id" title="binder">pr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="pm:159" class="idref" href="#pm:159"><span class="id" title="binder">pm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:160" class="idref" href="#lr:160"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:161" class="idref" href="#lm:161"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:162" class="idref" href="#cur_map:162"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:156"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:157"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:150"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:151"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:152"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:153"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pr:158"><span class="id" title="variable">pr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#pm:159"><span class="id" title="variable">pm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:160"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:161"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:162"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:160"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:155"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:150"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:151"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:152"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:153"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:154"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:161"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:153"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:154"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:156"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#pm:159"><span class="id" title="variable">pm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:153"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:157"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlw</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_corresponds_mem"><span class="id" title="axiom">state_phys_corresponds_mem</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#reg_corresponds_cap_PC"><span class="id" title="axiom">reg_corresponds_cap_PC</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reg_phys_log_get_word" class="idref" href="#reg_phys_log_get_word"><span class="id" title="lemma">reg_phys_log_get_word</span></a> <a id="phr:163" class="idref" href="#phr:163"><span class="id" title="binder">phr</span></a> <a id="lr:164" class="idref" href="#lr:164"><span class="id" title="binder">lr</span></a> <a id="cur_map:165" class="idref" href="#cur_map:165"><span class="id" title="binder">cur_map</span></a> <a id="r:166" class="idref" href="#r:166"><span class="id" title="binder">r</span></a> <a id="lw:167" class="idref" href="#lw:167"><span class="id" title="binder">lw</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:163"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:164"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:165"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:164"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:166"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:167"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:163"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:166"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:167"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [&lt;- <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_fmap_Some</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mem_phys_log_get_word" class="idref" href="#mem_phys_log_get_word"><span class="id" title="lemma">mem_phys_log_get_word</span></a> <a id="phm:168" class="idref" href="#phm:168"><span class="id" title="binder">phm</span></a> <a id="lm:169" class="idref" href="#lm:169"><span class="id" title="binder">lm</span></a> <a id="cur_map:170" class="idref" href="#cur_map:170"><span class="id" title="binder">cur_map</span></a> <a id="a:171" class="idref" href="#a:171"><span class="id" title="binder">a</span></a> <a id="v:172" class="idref" href="#v:172"><span class="id" title="binder">v</span></a> <a id="lw:173" class="idref" href="#lw:173"><span class="id" title="binder">lw</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:168"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:169"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:170"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:169"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:171"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:172"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:173"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:171"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:172"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:170"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:168"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:171"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:173"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hlm</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mem_phys_log_current_word" class="idref" href="#mem_phys_log_current_word"><span class="id" title="lemma">mem_phys_log_current_word</span></a> <a id="phm:174" class="idref" href="#phm:174"><span class="id" title="binder">phm</span></a> <a id="lm:175" class="idref" href="#lm:175"><span class="id" title="binder">lm</span></a> <a id="cur_map:176" class="idref" href="#cur_map:176"><span class="id" title="binder">cur_map</span></a> <a id="a:177" class="idref" href="#a:177"><span class="id" title="binder">a</span></a> <a id="v:178" class="idref" href="#v:178"><span class="id" title="binder">v</span></a> <a id="lw:179" class="idref" href="#lw:179"><span class="id" title="binder">lw</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:174"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:175"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:176"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:175"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:177"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:178"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:179"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:177"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:178"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:176"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:179"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:176"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hlm</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_log_reg_get_word" class="idref" href="#state_phys_log_reg_get_word"><span class="id" title="lemma">state_phys_log_reg_get_word</span></a> <a id="phr:180" class="idref" href="#phr:180"><span class="id" title="binder">phr</span></a> <a id="mem:181" class="idref" href="#mem:181"><span class="id" title="binder">mem</span></a> <a id="lr:182" class="idref" href="#lr:182"><span class="id" title="binder">lr</span></a> <a id="lm:183" class="idref" href="#lm:183"><span class="id" title="binder">lm</span></a> <a id="cur_map:184" class="idref" href="#cur_map:184"><span class="id" title="binder">cur_map</span></a> <a id="r:185" class="idref" href="#r:185"><span class="id" title="binder">r</span></a> <a id="lw:186" class="idref" href="#lw:186"><span class="id" title="binder">lw</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:180"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#mem:181"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:182"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:183"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:184"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:182"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:185"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:186"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:180"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:185"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:186"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hreg</span> <span class="id" title="var">_</span>] ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_get_word"><span class="id" title="axiom">reg_phys_log_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_log_mem_get_word" class="idref" href="#state_phys_log_mem_get_word"><span class="id" title="lemma">state_phys_log_mem_get_word</span></a> <a id="phr:187" class="idref" href="#phr:187"><span class="id" title="binder">phr</span></a> <a id="phm:188" class="idref" href="#phm:188"><span class="id" title="binder">phm</span></a> <a id="lr:189" class="idref" href="#lr:189"><span class="id" title="binder">lr</span></a> <a id="lm:190" class="idref" href="#lm:190"><span class="id" title="binder">lm</span></a> <a id="cur_map:191" class="idref" href="#cur_map:191"><span class="id" title="binder">cur_map</span></a> <a id="a:192" class="idref" href="#a:192"><span class="id" title="binder">a</span></a> <a id="v:193" class="idref" href="#v:193"><span class="id" title="binder">v</span></a> <a id="lw:194" class="idref" href="#lw:194"><span class="id" title="binder">lw</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:187"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:188"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:189"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:190"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:191"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:190"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:192"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:193"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:194"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:192"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:193"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:191"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:188"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:192"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:194"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmem</span>] ? ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_get_word"><span class="id" title="axiom">mem_phys_log_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_log_cap_all_current" class="idref" href="#state_phys_log_cap_all_current"><span class="id" title="lemma">state_phys_log_cap_all_current</span></a><br/>
&nbsp;&nbsp;(<a id="phr:195" class="idref" href="#phr:195"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:196" class="idref" href="#phm:196"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:197" class="idref" href="#lm:197"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:198" class="idref" href="#lr:198"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:199" class="idref" href="#cur_map:199"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:200" class="idref" href="#src:200"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:201" class="idref" href="#lwsrc:201"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:202" class="idref" href="#p:202"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:203" class="idref" href="#b:203"><span class="id" title="binder">b</span></a> <a id="e:204" class="idref" href="#e:204"><span class="id" title="binder">e</span></a> <a id="a:205" class="idref" href="#a:205"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:206" class="idref" href="#v:206"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:201"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:202"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:204"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:205"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:206"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:195"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:196"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:198"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:197"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:199"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:198"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:200"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:201"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:207" class="idref" href="#a0:207"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:199"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:207"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:206"><span class="id" title="variable">v</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:204"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget_lw</span> [ [<span class="id" title="var">_</span> <span class="id" title="var">Hreg_current</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hreg_current</span> <span class="id" title="var">Hlr_src</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_of_argument" class="idref" href="#lword_of_argument"><span class="id" title="definition">lword_of_argument</span></a> (<a id="lregs:208" class="idref" href="#lregs:208"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:209" class="idref" href="#a:209"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:209"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lregs:208"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="version_addr_reg" class="idref" href="#version_addr_reg"><span class="id" title="lemma">version_addr_reg</span></a> <a id="reg:211" class="idref" href="#reg:211"><span class="id" title="binder">reg</span></a> <a id="lr:212" class="idref" href="#lr:212"><span class="id" title="binder">lr</span></a> <a id="cur_map:213" class="idref" href="#cur_map:213"><span class="id" title="binder">cur_map</span></a> <a id="wr:214" class="idref" href="#wr:214"><span class="id" title="binder">wr</span></a> <a id="r:215" class="idref" href="#r:215"><span class="id" title="binder">r</span></a> <a id="p:216" class="idref" href="#p:216"><span class="id" title="binder">p</span></a> <a id="b:217" class="idref" href="#b:217"><span class="id" title="binder">b</span></a> <a id="e:218" class="idref" href="#e:218"><span class="id" title="binder">e</span></a> <a id="a:219" class="idref" href="#a:219"><span class="id" title="binder">a</span></a> <a id="la:220" class="idref" href="#la:220"><span class="id" title="binder">la</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#reg:211"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:212"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:213"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#wr:214"><span class="id" title="variable">wr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:216"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:217"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:218"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:219"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:220"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:219"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:217"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:218"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:219"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:212"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:215"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#wr:214"><span class="id" title="variable">wr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:220"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:213"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#wr:214"><span class="id" title="variable">wr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:220"><span class="id" title="variable">la</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_reg</span>] <span class="id" title="var">Hlr</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hinbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_reg</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_reg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">wr</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_reg</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_reg_lreg_strip" class="idref" href="#insert_reg_lreg_strip"><span class="id" title="lemma">insert_reg_lreg_strip</span></a> (<a id="lregs:221" class="idref" href="#lregs:221"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:222" class="idref" href="#r:222"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:223" class="idref" href="#lw:223"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:221"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:222"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:223"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:222"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:223"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:221"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_cap_lreg_strip" class="idref" href="#insert_cap_lreg_strip"><span class="id" title="lemma">insert_cap_lreg_strip</span></a> (<a id="lregs:224" class="idref" href="#lregs:224"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:225" class="idref" href="#r:225"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:226" class="idref" href="#p:226"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="a:227" class="idref" href="#a:227"><span class="id" title="binder">a</span></a> <a id="b:228" class="idref" href="#b:228"><span class="id" title="binder">b</span></a> <a id="e:229" class="idref" href="#e:229"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:230" class="idref" href="#v:230"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:224"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:225"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:226"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:228"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:229"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:227"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:230"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:225"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:226"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:228"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:229"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:227"><span class="id" title="variable">a</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:224"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addr" class="idref" href="#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> (<a id="a:231" class="idref" href="#a:231"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="w:232" class="idref" href="#w:232"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:232"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span>) =&gt; (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:231"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">e</span>)%<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addrL" class="idref" href="#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> (<a id="a:233" class="idref" href="#a:233"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lw:234" class="idref" href="#lw:234"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:233"><span class="id" title="variable">a</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:234"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_word" class="idref" href="#update_cur_word"><span class="id" title="lemma">update_cur_word</span></a> (<a id="lw:235" class="idref" href="#lw:235"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="a:236" class="idref" href="#a:236"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:237" class="idref" href="#v:237"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lm:238" class="idref" href="#lm:238"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:239" class="idref" href="#cur_map:239"><span class="id" title="binder">cur_map</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:236"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:235"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:235"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:239"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:235"><span class="id" title="variable">lw</span></a> ( <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a:236"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v:237"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">cur_map</span> ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnaccess</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>; <span class="id" title="var">solve_addr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_insert_ne" class="idref" href="#is_cur_addr_insert_ne"><span class="id" title="lemma">is_cur_addr_insert_ne</span></a><br/>
&nbsp;&nbsp;(<a id="a:240" class="idref" href="#a:240"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:241" class="idref" href="#v:241"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a':242" class="idref" href="#a':242"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v':243" class="idref" href="#v':243"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="cur_map:244" class="idref" href="#cur_map:244"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:240"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:241"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:244"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:240"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':242"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:240"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:241"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a':242"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v':243"><span class="id" title="variable">v'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">cur_map</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Update version number of a memory region 
</div>
<div class="code">
<span class="comment">(*&nbsp;For&nbsp;all&nbsp;the&nbsp;content&nbsp;of&nbsp;a&nbsp;logical&nbsp;memory&nbsp;`lm`,<br/>
&nbsp;&nbsp;&nbsp;no&nbsp;current&nbsp;logical&nbsp;address&nbsp;has&nbsp;a&nbsp;lword&nbsp;that&nbsp;can&nbsp;access&nbsp;the&nbsp;address&nbsp;`a`.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Put&nbsp;another&nbsp;way,&nbsp;the&nbsp;"current&nbsp;view"&nbsp;of&nbsp;the&nbsp;memory&nbsp;cannot&nbsp;access&nbsp;`a`.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lmem_not_access_addrL" class="idref" href="#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> (<a id="lm:245" class="idref" href="#lm:245"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:246" class="idref" href="#cur_map:246"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:247" class="idref" href="#a:247"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:248" class="idref" href="#la:248"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:249" class="idref" href="#lw:249"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:248"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:246"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:247"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:249"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;) <a class="idref" href="cap_machine.logical_mapsto.html#lm:245"><span class="id" title="variable">lm</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;describes&nbsp;whether&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;is&nbsp;not&nbsp;reachable&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lmem_not_access_wordL" class="idref" href="#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> (<a id="lm:250" class="idref" href="#lm:250"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:251" class="idref" href="#cur_map:251"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:252" class="idref" href="#lw:252"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;is_cur_word&nbsp;lw&nbsp;cur_map&nbsp;→&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:252"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:253" class="idref" href="#a:253"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:250"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:251"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:253"><span class="id" title="variable">a</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;address&nbsp;version&nbsp;in&nbsp;lm,&nbsp;given&nbsp;the&nbsp;word.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_lmemory_lword" class="idref" href="#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> (<a id="lm:254" class="idref" href="#lm:254"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:255" class="idref" href="#a:255"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:256" class="idref" href="#v:256"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:257" class="idref" href="#lw:257"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> := <span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:255"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:256"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:257"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_addr_local" class="idref" href="#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> (<a id="lm:258" class="idref" href="#lm:258"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:259" class="idref" href="#cur_map:259"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:260" class="idref" href="#a:260"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:259"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:260"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:258"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:260"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:258"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:260"><span class="id" title="variable">a</span></a> <span class="id" title="var">v</span> <span class="id" title="var">lw</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:260"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">cur_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:258"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:259"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:258"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:259"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_region_local" class="idref" href="#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a><br/>
&nbsp;&nbsp;(<a id="lm:261" class="idref" href="#lm:261"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:262" class="idref" href="#cur_map:262"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:263" class="idref" href="#la:263"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="keyword">fun</span> <a id="a:264" class="idref" href="#a:264"><span class="id" title="binder">a</span></a> (<a id="upd:265" class="idref" href="#upd:265"><span class="id" title="binder">upd</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="lm':266" class="idref" href="#lm':266"><span class="id" title="binder">lm'</span></a>, <a id="cur_map':267" class="idref" href="#cur_map':267"><span class="id" title="binder">cur_map'</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#upd:265"><span class="id" title="variable">upd</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':266"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':267"><span class="id" title="variable">cur_map'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:264"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:261"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:262"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la:263"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_word_region_local" class="idref" href="#update_cur_version_word_region_local"><span class="id" title="definition">update_cur_version_word_region_local</span></a><br/>
&nbsp;&nbsp;(<a id="lm:268" class="idref" href="#lm:268"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:269" class="idref" href="#cur_map:269"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:270" class="idref" href="#lw:270"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:270"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:268"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:269"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:268"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:269"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;assume&nbsp;that&nbsp;*lmem*&nbsp;is&nbsp;a&nbsp;local&nbsp;view&nbsp;compatible&nbsp;with&nbsp;the&nbsp;global&nbsp;view&nbsp;*lm*.<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;also&nbsp;assume&nbsp;that&nbsp;*lm*&nbsp;contains&nbsp;the&nbsp;laddress&nbsp;*(a,v)*,<br/>
&nbsp;&nbsp;&nbsp;whereas&nbsp;*lmem*&nbsp;might&nbsp;not&nbsp;contain&nbsp;it.<br/>
<br/>
&nbsp;&nbsp;&nbsp;This&nbsp;way,&nbsp;the&nbsp;local&nbsp;view&nbsp;*lmem*&nbsp;can&nbsp;be&nbsp;updated,<br/>
&nbsp;&nbsp;&nbsp;even&nbsp;if&nbsp;it&nbsp;does&nbsp;not&nbsp;contain&nbsp;the&nbsp;address&nbsp;(a,v)<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_addr_global" class="idref" href="#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> (<a id="lmem:271" class="idref" href="#lmem:271"><span class="id" title="binder">lmem</span></a> <a id="lm:272" class="idref" href="#lm:272"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:273" class="idref" href="#cur_map:273"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:274" class="idref" href="#a:274"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:273"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:274"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:272"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:274"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:271"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:274"><span class="id" title="variable">a</span></a> <span class="id" title="var">v</span> <span class="id" title="var">lw</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:274"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">cur_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:271"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:273"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:271"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:273"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_region_global" class="idref" href="#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:275" class="idref" href="#lmem:275"><span class="id" title="binder">lmem</span></a> <a id="lm:276" class="idref" href="#lm:276"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:277" class="idref" href="#cur_map:277"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:278" class="idref" href="#la:278"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="keyword">fun</span> <a id="a:279" class="idref" href="#a:279"><span class="id" title="binder">a</span></a> (<a id="upd:280" class="idref" href="#upd:280"><span class="id" title="binder">upd</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="lmem':281" class="idref" href="#lmem':281"><span class="id" title="binder">lmem'</span></a>, <a id="cur_map':282" class="idref" href="#cur_map':282"><span class="id" title="binder">cur_map'</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#upd:280"><span class="id" title="variable">upd</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':281"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:276"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':282"><span class="id" title="variable">cur_map'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:279"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:275"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:277"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la:278"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_word_region_global" class="idref" href="#update_cur_version_word_region_global"><span class="id" title="definition">update_cur_version_word_region_global</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:283" class="idref" href="#lmem:283"><span class="id" title="binder">lmem</span></a> <a id="lm:284" class="idref" href="#lm:284"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:285" class="idref" href="#cur_map:285"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:286" class="idref" href="#lw:286"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:286"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:283"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:284"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:285"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:284"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:285"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_region_local_cons" class="idref" href="#update_cur_version_region_local_cons"><span class="id" title="definition">update_cur_version_region_local_cons</span></a><br/>
&nbsp;&nbsp;(<a id="lm:287" class="idref" href="#lm:287"><span class="id" title="binder">lm</span></a> <a id="lm':288" class="idref" href="#lm':288"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:289" class="idref" href="#cur_map:289"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':290" class="idref" href="#cur_map':290"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:291" class="idref" href="#a:291"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:292" class="idref" href="#la:292"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:287"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:289"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:291"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:292"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':288"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':290"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="lm0:293" class="idref" href="#lm0:293"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map0:294" class="idref" href="#cur_map0:294"><span class="id" title="binder">cur_map0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:287"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:289"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:292"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm0:293"><span class="id" title="variable">lm0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map0:294"><span class="id" title="variable">cur_map0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:293"><span class="id" title="variable">lm0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map0:294"><span class="id" title="variable">cur_map0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:291"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':288"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':290"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lm0</span> <span class="id" title="var">cur_map0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lm0</span>, <span class="id" title="var">cur_map0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_region_global_cons" class="idref" href="#update_cur_version_region_global_cons"><span class="id" title="definition">update_cur_version_region_global_cons</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:295" class="idref" href="#lmem:295"><span class="id" title="binder">lmem</span></a> <a id="lm:296" class="idref" href="#lm:296"><span class="id" title="binder">lm</span></a> <a id="lmem':297" class="idref" href="#lmem':297"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:298" class="idref" href="#vmap:298"><span class="id" title="binder">vmap</span></a> <a id="vmap':299" class="idref" href="#vmap':299"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:300" class="idref" href="#a:300"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:301" class="idref" href="#la:301"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:295"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:296"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:298"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:300"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:301"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':297"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':299"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="lmem0:302" class="idref" href="#lmem0:302"><span class="id" title="binder">lmem0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap0:303" class="idref" href="#vmap0:303"><span class="id" title="binder">vmap0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:295"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:296"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:298"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:301"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem0:302"><span class="id" title="variable">lmem0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:303"><span class="id" title="variable">vmap0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:302"><span class="id" title="variable">lmem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:296"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:303"><span class="id" title="variable">vmap0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:300"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':297"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':299"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">vmap</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">vmap</span> <span class="id" title="var">la</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lmem0</span> <span class="id" title="var">vmap0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lmem0</span>, <span class="id" title="var">vmap0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;find&nbsp;better&nbsp;lemma&nbsp;name&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;If&nbsp;an&nbsp;address&nbsp;`a'`&nbsp;is&nbsp;not&nbsp;reachable&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,<br/>
&nbsp;&nbsp;&nbsp;then&nbsp;updating&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;another&nbsp;address&nbsp;`a`<br/>
&nbsp;&nbsp;&nbsp;does&nbsp;not&nbsp;make&nbsp;it&nbsp;reachable&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_preserves_no_access" class="idref" href="#update_cur_version_addr_local_preserves_no_access"><span class="id" title="lemma">update_cur_version_addr_local_preserves_no_access</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="a:304" class="idref" href="#a:304"><span class="id" title="binder">a</span></a> <a id="a':305" class="idref" href="#a':305"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lm:306" class="idref" href="#lm:306"><span class="id" title="binder">lm</span></a> <a id="lm':307" class="idref" href="#lm':307"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:308" class="idref" href="#cur_map:308"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':309" class="idref" href="#cur_map':309"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:304"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':305"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:306"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:308"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':305"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':307"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':309"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:306"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:308"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:304"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':307"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':309"><span class="id" title="variable">cur_map'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:304"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hneq</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> ; [|<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn'</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">va'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hno_access</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heqn'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hno_access</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Same&nbsp;as&nbsp;`update_cur_version_addr_preserves_no_access`,&nbsp;but&nbsp;for&nbsp;a&nbsp;list&nbsp;of&nbsp;addresses&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_preserves_no_access" class="idref" href="#update_cur_version_region_local_preserves_no_access"><span class="id" title="lemma">update_cur_version_region_local_preserves_no_access</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="la:310" class="idref" href="#la:310"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:311" class="idref" href="#a:311"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lm:312" class="idref" href="#lm:312"><span class="id" title="binder">lm</span></a> <a id="lm':313" class="idref" href="#lm':313"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:314" class="idref" href="#cur_map:314"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':315" class="idref" href="#cur_map':315"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:311"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:310"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:312"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:314"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:310"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':313"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':315"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:312"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:314"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:311"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':313"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':315"><span class="id" title="variable">cur_map'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:311"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hnot_in</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnot_in</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnot_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hnot_in</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lm0</span> <span class="id" title="var">cur_map0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_preserves_no_access"><span class="id" title="axiom">update_cur_version_addr_local_preserves_no_access</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;If&nbsp;the&nbsp;address&nbsp;`a`&nbsp;is&nbsp;not&nbsp;reachable<br/>
&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,<br/>
&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;still&nbsp;holds<br/>
&nbsp;&nbsp;&nbsp;after&nbsp;updating&nbsp;its&nbsp;version&nbsp;number.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_preserves_mem_phyc_cor" class="idref" href="#update_cur_version_addr_local_preserves_mem_phyc_cor"><span class="id" title="lemma">update_cur_version_addr_local_preserves_mem_phyc_cor</span></a><br/>
&nbsp;&nbsp;(<a id="phm:316" class="idref" href="#phm:316"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:317" class="idref" href="#lm:317"><span class="id" title="binder">lm</span></a> <a id="lm':318" class="idref" href="#lm':318"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:319" class="idref" href="#cur_map:319"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':320" class="idref" href="#cur_map':320"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:321" class="idref" href="#a:321"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:317"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:319"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:321"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':318"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':320"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:317"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:319"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:321"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:316"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:317"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:319"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:316"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':318"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':320"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hnaccess_mem</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcur_la</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hla</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">cur_map</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lw</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnaccess</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hla'</span> := <span class="id" title="var">Hla</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">va</span> &amp; <span class="id" title="var">Hcur_va</span> &amp; <span class="id" title="var">Hle_va</span> &amp; [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>, <span class="id" title="var">Hcur_va</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_va</span> ; <span class="id" title="var">simplify_eq</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_read_iscur"><span class="id" title="axiom">lmem_read_iscur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1) <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>;<span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eexists</span> (<span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> //= ; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hroot'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a'</span> <span class="id" title="var">v'</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">Hcur_max</span> &amp; [<span class="id" title="var">cur_lw</span> <span class="id" title="var">Hcur_lw</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1). <span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">va</span> <span class="id" title="keyword">with</span> <span class="id" title="var">cur_v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> ( <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v</span>; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v</span>. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_insert_ne"><span class="id" title="axiom">is_cur_addr_insert_ne</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_lw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hla'</span> := <span class="id" title="var">Hla</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">Hcur_max</span> &amp; [<span class="id" title="var">cur_lw</span> <span class="id" title="var">Hcur_lw</span>]).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_la</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hcur_a'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hcur_a''</span> := <span class="id" title="var">Hcur_a'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a''</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_a''</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lw'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Same&nbsp;as&nbsp;`update_cur_version_addr_preserves_mem_phyc_cor`,<br/>
&nbsp;&nbsp;&nbsp;but&nbsp;for&nbsp;a&nbsp;list&nbsp;of&nbsp;addresses&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_preserves_mem_phyc_cor" class="idref" href="#update_cur_version_region_local_preserves_mem_phyc_cor"><span class="id" title="lemma">update_cur_version_region_local_preserves_mem_phyc_cor</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="la:322" class="idref" href="#la:322"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="phm:323" class="idref" href="#phm:323"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:324" class="idref" href="#lm:324"><span class="id" title="binder">lm</span></a> <a id="lm':325" class="idref" href="#lm':325"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:326" class="idref" href="#cur_map:326"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':327" class="idref" href="#cur_map':327"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:322"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:324"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:326"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:322"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':325"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':327"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:328" class="idref" href="#a:328"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:324"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:326"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:328"><span class="id" title="variable">a</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:322"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:323"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:324"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:326"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:323"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':325"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':327"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hno_dup</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hall_naccess_mem</span> <span class="id" title="var">Hmem_phys_log_corr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">foldr_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lm0</span> <span class="id" title="var">cur_map0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hall_naccess_mem</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnacces_mem</span> <span class="id" title="var">Hall_naccess_mem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_dup</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hno_dup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnotin</span> <span class="id" title="var">Hno_dup</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <span class="id" title="var">phm</span> <span class="id" title="var">lm0</span> <span class="id" title="var">cur_map0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinv0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ;<span class="id" title="tactic">eauto</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_preserves_mem_phyc_cor"><span class="id" title="axiom">update_cur_version_addr_local_preserves_mem_phyc_cor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_no_access"><span class="id" title="axiom">update_cur_version_region_local_preserves_no_access</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;a&nbsp;memory&nbsp;region&nbsp;that&nbsp;is&nbsp;not&nbsp;reacheable,<br/>
&nbsp;&nbsp;&nbsp;preserves&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_word_region_local_preserves_mem_phyc_cor" class="idref" href="#update_cur_version_word_region_local_preserves_mem_phyc_cor"><span class="id" title="lemma">update_cur_version_word_region_local_preserves_mem_phyc_cor</span></a><br/>
&nbsp;&nbsp;(<a id="phm:329" class="idref" href="#phm:329"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:330" class="idref" href="#lm:330"><span class="id" title="binder">lm</span></a> <a id="lm':331" class="idref" href="#lm':331"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:332" class="idref" href="#cur_map:332"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':333" class="idref" href="#cur_map':333"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:334" class="idref" href="#lw:334"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:330"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:332"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:334"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region_local"><span class="id" title="definition">update_cur_version_word_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:330"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:332"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:334"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':331"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':333"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:329"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:330"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:332"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:329"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':331"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':333"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hno_access</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hmem_phys_log</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region_local"><span class="id" title="definition">update_cur_version_word_region_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <span class="id" title="var">lw</span>) <span class="id" title="keyword">as</span> [[] |] ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_mem_phyc_cor"><span class="id" title="axiom">update_cur_version_region_local_preserves_mem_phyc_cor</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;duplicate&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_local_notin_preserves_cur_map&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lmem':&nbsp;LMem)&nbsp;(cur_map&nbsp;cur_map':&nbsp;VMap)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version):&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;∉&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur_map&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_region_local&nbsp;lmem&nbsp;cur_map&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;cur_map')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur_map'&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lmem'&nbsp;cur_map&nbsp;cur_map'&nbsp;a&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span>&nbsp;;&nbsp;intros&nbsp;*&nbsp;Hnot_in&nbsp;Hcur_a&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;by&nbsp;cbn&nbsp;in&nbsp;Hupd;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;apply&nbsp;not_elem_of_cons&nbsp;in&nbsp;Hnot_in.&nbsp;destruct&nbsp;Hnot_in&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Ha0_neq_a</span></span> <span class="inlinecode"><span class="id" title="var">Hnot_in</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbn&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;-/(update_cur_version_region_local&nbsp;lmem&nbsp;cur_map&nbsp;la)&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(update_cur_version_region_local&nbsp;lmem&nbsp;cur_map&nbsp;la)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lmem0</span></span> <span class="inlinecode"><span class="id" title="var">cur_map0</span></span>&nbsp;eqn:Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr_local&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(cur_map0&nbsp;!!&nbsp;a)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">va</span>|</span>&nbsp;eqn:Hva.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{&nbsp;simplify_eq;&nbsp;eapply&nbsp;IHla;&nbsp;eauto.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(lmem0&nbsp;!!&nbsp;(a,va))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw</span>|</span>&nbsp;eqn:Hlw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{&nbsp;simplify_eq;&nbsp;eapply&nbsp;IHla;&nbsp;eauto.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_preserves_lmem" class="idref" href="#update_cur_version_region_local_preserves_lmem"><span class="id" title="lemma">update_cur_version_region_local_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:335" class="idref" href="#lmem:335"><span class="id" title="binder">lmem</span></a> <a id="lmem':336" class="idref" href="#lmem':336"><span class="id" title="binder">lmem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:337" class="idref" href="#cur_map:337"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':338" class="idref" href="#cur_map':338"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:339" class="idref" href="#la:339"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:340" class="idref" href="#v:340"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:339"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:341" class="idref" href="#a:341"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:342" class="idref" href="#lw:342"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:335"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:341"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:340"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:342"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:339"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:343" class="idref" href="#a:343"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:337"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:343"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:340"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:339"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:335"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:337"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:339"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':336"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':338"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:344" class="idref" href="#a:344"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem':336"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:344"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:340"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:339"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_preserves_vmap" class="idref" href="#update_cur_version_region_local_preserves_vmap"><span class="id" title="lemma">update_cur_version_region_local_preserves_vmap</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:345" class="idref" href="#lmem:345"><span class="id" title="binder">lmem</span></a> <a id="lmem':346" class="idref" href="#lmem':346"><span class="id" title="binder">lmem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:347" class="idref" href="#cur_map:347"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':348" class="idref" href="#cur_map':348"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:349" class="idref" href="#la:349"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:350" class="idref" href="#v:350"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:349"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:351" class="idref" href="#a:351"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:352" class="idref" href="#lw:352"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:345"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:351"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:350"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:352"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:349"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:353" class="idref" href="#a:353"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:347"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:353"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:350"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:349"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:345"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:347"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:349"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':346"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':348"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:354" class="idref" href="#a:354"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#cur_map':348"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:354"><span class="id" title="variable">a</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:349"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_mono" class="idref" href="#update_cur_version_region_mono"><span class="id" title="lemma">update_cur_version_region_mono</span></a><br/>
&nbsp;&nbsp;(<a id="lm:355" class="idref" href="#lm:355"><span class="id" title="binder">lm</span></a> <a id="lmem:356" class="idref" href="#lmem:356"><span class="id" title="binder">lmem</span></a> <a id="lmem':357" class="idref" href="#lmem':357"><span class="id" title="binder">lmem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:358" class="idref" href="#cur_map:358"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':359" class="idref" href="#cur_map':359"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:360" class="idref" href="#la:360"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:361" class="idref" href="#v:361"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:356"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:355"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:360"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:362" class="idref" href="#a:362"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:363" class="idref" href="#lw:363"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:356"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:362"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:361"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:363"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:360"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:364" class="idref" href="#a:364"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:358"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:364"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:361"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:360"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:356"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:358"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:360"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':357"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':359"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="lm':365" class="idref" href="#lm':365"><span class="id" title="binder">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:355"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:358"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:360"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':365"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':359"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':357"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':365"><span class="id" title="variable">lm'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hsubset_lmem</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">HmemMap</span> <span class="id" title="var">HcurMap</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">lm</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">HNoDup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmemMap</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HmemMap</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">lw</span> <span class="id" title="var">Ha</span>] <span class="id" title="var">HmemMap</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HcurMap</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HcurMap</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcur</span> <span class="id" title="var">HcurMap</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> //= <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lmem0</span> <span class="id" title="var">cur_map0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_lm0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some&nbsp;in&nbsp;Hupd_lmem.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd_lmem&nbsp;as&nbsp;(&nbsp;<span class="inlinecode"><span class="id" title="var">lmem0</span></span> <span class="inlinecode"><span class="id" title="var">cur_map0</span></span>&nbsp;&amp;&nbsp;Hupd_lmem&nbsp;&amp;&nbsp;Hupd_lmem0&nbsp;).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lm'</span> [<span class="id" title="var">Hupd_lm'</span> <span class="id" title="var">Hsubset_lm'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hupd_lmem'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hva</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;eapply&nbsp;update_cur_version_region_local_preserves_vmap&nbsp;in&nbsp;Hupd_lm';&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;easy,&nbsp;Hupd_lm'&nbsp;+&nbsp;Hva&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;admit.&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;by&nbsp;Hsubset_lm,&nbsp;should&nbsp;be&nbsp;easy&nbsp;-&gt;&nbsp;lemma&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw0</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;eapply&nbsp;update_cur_version_region_local_preserves_lmem&nbsp;in&nbsp;Hupd_lm';&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;easy,&nbsp;Hupd_lm'&nbsp;+&nbsp;Hlw&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;admit.&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;by&nbsp;Hsubset_lm,&nbsp;should&nbsp;be&nbsp;easy&nbsp;-&gt;&nbsp;lemma&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some&nbsp;in&nbsp;Hupd_lmem0.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd_lmem0&nbsp;as&nbsp;(va&nbsp;&amp;&nbsp;Hva&nbsp;&amp;&nbsp;Hupd_lmem0).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some&nbsp;in&nbsp;Hupd_lmem0.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd_lmem0&nbsp;as&nbsp;(lmem0'&nbsp;&amp;&nbsp;Hupd_lmem0'&nbsp;&amp;&nbsp;Hlmem0').&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some&nbsp;in&nbsp;Hupd_lmem0'.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd_lmem0'&nbsp;as&nbsp;(lw0&nbsp;&amp;&nbsp;Hlw0&nbsp;&amp;&nbsp;?).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hupd_lm'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hupd_lm''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;by&nbsp;Hsubset_lm,&nbsp;should&nbsp;be&nbsp;easy&nbsp;-&gt;&nbsp;lemma&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm'0</span> &amp; <span class="id" title="var">Hupd_lm'0</span> &amp; <span class="id" title="var">Hsubset_lm'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hupd_lm'0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm''</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">lw0</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;split.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;admit.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;insert_mono;&nbsp;auto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;{&nbsp;cbn.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;-/(update_cur_version_region&nbsp;lm&nbsp;cur_map&nbsp;la).&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;Hupd_lm'.&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;auto.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;exists&nbsp;(lm',&nbsp;cur_map0)&nbsp;;&nbsp;split&nbsp;;&nbsp;auto.&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some;&nbsp;exists&nbsp;va&nbsp;;&nbsp;split&nbsp;;&nbsp;auto.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some;&nbsp;exists&nbsp;(&lt;<span class="inlinecode">(<span class="id" title="var">a</span>,</span> <span class="inlinecode"><span class="id" title="var">va</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1):=<span class="id" title="var">lw0</span></span>&gt;&nbsp;lm')&nbsp;;&nbsp;split&nbsp;;&nbsp;auto.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some;&nbsp;exists&nbsp;lw0&nbsp;;&nbsp;split&nbsp;;&nbsp;auto.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;map_subseteq_spec;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;intros.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;i.&nbsp;destruct&nbsp;(decide&nbsp;(f&nbsp;=&nbsp;a));&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;admit.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;insert_mono;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_preserves_content_lmem" class="idref" href="#update_cur_version_addr_local_preserves_content_lmem"><span class="id" title="lemma">update_cur_version_addr_local_preserves_content_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:366" class="idref" href="#lmem:366"><span class="id" title="binder">lmem</span></a> <a id="lmem':367" class="idref" href="#lmem':367"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:368" class="idref" href="#vmap:368"><span class="id" title="binder">vmap</span></a> <a id="vmap':369" class="idref" href="#vmap':369"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:370" class="idref" href="#a:370"><span class="id" title="binder">a</span></a> <a id="a':371" class="idref" href="#a':371"><span class="id" title="binder">a'</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:372" class="idref" href="#v:372"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="opt_lw:373" class="idref" href="#opt_lw:373"><span class="id" title="binder">opt_lw</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:370"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':371"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:366"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:368"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':371"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':367"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':369"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:366"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:370"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:372"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_lw:373"><span class="id" title="variable">opt_lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':367"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:370"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:372"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_lw:373"><span class="id" title="variable">opt_lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha_notint_la</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hlmem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hva'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> ; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_pair_eq</span>).<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_preserves_content_lmem" class="idref" href="#update_cur_version_region_local_preserves_content_lmem"><span class="id" title="lemma">update_cur_version_region_local_preserves_content_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:374" class="idref" href="#lmem:374"><span class="id" title="binder">lmem</span></a> <a id="lmem':375" class="idref" href="#lmem':375"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:376" class="idref" href="#cur_map:376"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':377" class="idref" href="#cur_map':377"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:378" class="idref" href="#la:378"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:379" class="idref" href="#a:379"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:380" class="idref" href="#v:380"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="opt_lw:381" class="idref" href="#opt_lw:381"><span class="id" title="binder">opt_lw</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:379"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:378"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:374"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:376"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:378"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':375"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':377"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:374"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:379"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:380"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_lw:381"><span class="id" title="variable">opt_lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':375"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:379"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:380"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_lw:381"><span class="id" title="variable">opt_lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">opt_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">Hla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_neq_a'</span> <span class="id" title="var">Ha_notin_la</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem0</span> &amp; <span class="id" title="var">vmap0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_addr_local_preserves_content_lmem</span></a>; [<span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">eauto</span> | ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_notin_preserves_cur_1" class="idref" href="#update_cur_version_addr_local_notin_preserves_cur_1"><span class="id" title="lemma">update_cur_version_addr_local_notin_preserves_cur_1</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:382" class="idref" href="#lm:382"><span class="id" title="binder">lm</span></a> <a id="lm':383" class="idref" href="#lm':383"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:384" class="idref" href="#cur_map:384"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':385" class="idref" href="#cur_map':385"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:386" class="idref" href="#a:386"><span class="id" title="binder">a</span></a> <a id="a':387" class="idref" href="#a':387"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:388" class="idref" href="#opt_v:388"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:382"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:384"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':387"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':383"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':385"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:386"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':387"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:384"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:386"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:388"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':385"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:386"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:388"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> |]<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_notin_preserves_cur_2" class="idref" href="#update_cur_version_addr_local_notin_preserves_cur_2"><span class="id" title="lemma">update_cur_version_addr_local_notin_preserves_cur_2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:389" class="idref" href="#lm:389"><span class="id" title="binder">lm</span></a> <a id="lm':390" class="idref" href="#lm':390"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:391" class="idref" href="#cur_map:391"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':392" class="idref" href="#cur_map':392"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:393" class="idref" href="#a:393"><span class="id" title="binder">a</span></a> <a id="a':394" class="idref" href="#a':394"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:395" class="idref" href="#opt_v:395"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:389"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:391"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':394"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':390"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':392"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:393"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':394"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':392"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:393"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:395"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:391"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:393"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:395"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> |]<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_local_notin_preserves_cur" class="idref" href="#update_cur_version_addr_local_notin_preserves_cur"><span class="id" title="lemma">update_cur_version_addr_local_notin_preserves_cur</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:396" class="idref" href="#lm:396"><span class="id" title="binder">lm</span></a> <a id="lm':397" class="idref" href="#lm':397"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:398" class="idref" href="#cur_map:398"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':399" class="idref" href="#cur_map':399"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:400" class="idref" href="#a:400"><span class="id" title="binder">a</span></a> <a id="a':401" class="idref" href="#a':401"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:402" class="idref" href="#opt_v:402"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:396"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:398"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':401"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':397"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':399"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':401"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#cur_map:398"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:402"><span class="id" title="variable">opt_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':399"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:402"><span class="id" title="variable">opt_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_2</span></a>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_notin_preserves_cur_1" class="idref" href="#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="lemma">update_cur_version_region_local_notin_preserves_cur_1</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:403" class="idref" href="#lm:403"><span class="id" title="binder">lm</span></a> <a id="lm':404" class="idref" href="#lm':404"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:405" class="idref" href="#cur_map:405"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':406" class="idref" href="#cur_map':406"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:407" class="idref" href="#la:407"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:408" class="idref" href="#a:408"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:409" class="idref" href="#opt_v:409"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:403"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:405"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:407"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':404"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':406"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:408"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:407"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:405"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:408"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:409"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':406"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:408"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:409"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hcur</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_1</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_notin_preserves_cur_2" class="idref" href="#update_cur_version_region_local_notin_preserves_cur_2"><span class="id" title="lemma">update_cur_version_region_local_notin_preserves_cur_2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:410" class="idref" href="#lm:410"><span class="id" title="binder">lm</span></a> <a id="lm':411" class="idref" href="#lm':411"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:412" class="idref" href="#cur_map:412"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':413" class="idref" href="#cur_map':413"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:414" class="idref" href="#la:414"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:415" class="idref" href="#a:415"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:416" class="idref" href="#opt_v:416"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:410"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:412"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:414"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':411"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':413"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:415"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:414"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':413"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:415"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:416"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:412"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:415"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:416"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hcur</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_2</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_notin_preserves_cur" class="idref" href="#update_cur_version_region_local_notin_preserves_cur"><span class="id" title="lemma">update_cur_version_region_local_notin_preserves_cur</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:417" class="idref" href="#lm:417"><span class="id" title="binder">lm</span></a> <a id="lm':418" class="idref" href="#lm':418"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:419" class="idref" href="#cur_map:419"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':420" class="idref" href="#cur_map':420"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:421" class="idref" href="#la:421"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:422" class="idref" href="#a:422"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:423" class="idref" href="#opt_v:423"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:417"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:419"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:421"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':418"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':420"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:422"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:421"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#cur_map:419"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:422"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:423"><span class="id" title="variable">opt_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':420"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:422"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:423"><span class="id" title="variable">opt_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_2</span></a>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_global_notin_preserves_cur_1" class="idref" href="#update_cur_version_addr_global_notin_preserves_cur_1"><span class="id" title="lemma">update_cur_version_addr_global_notin_preserves_cur_1</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lmem:424" class="idref" href="#lmem:424"><span class="id" title="binder">lmem</span></a> <a id="lm:425" class="idref" href="#lm:425"><span class="id" title="binder">lm</span></a> <a id="lmem':426" class="idref" href="#lmem':426"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:427" class="idref" href="#cur_map:427"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':428" class="idref" href="#cur_map':428"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:429" class="idref" href="#a:429"><span class="id" title="binder">a</span></a> <a id="a':430" class="idref" href="#a':430"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:431" class="idref" href="#opt_v:431"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:424"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:425"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:427"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':430"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':426"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':428"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:429"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':430"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:427"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:429"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:431"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':428"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:429"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:431"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">opt_v</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> |]<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_global_notin_preserves_cur_2" class="idref" href="#update_cur_version_addr_global_notin_preserves_cur_2"><span class="id" title="lemma">update_cur_version_addr_global_notin_preserves_cur_2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lmem:432" class="idref" href="#lmem:432"><span class="id" title="binder">lmem</span></a> <a id="lm:433" class="idref" href="#lm:433"><span class="id" title="binder">lm</span></a> <a id="lmem':434" class="idref" href="#lmem':434"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:435" class="idref" href="#cur_map:435"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':436" class="idref" href="#cur_map':436"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:437" class="idref" href="#a:437"><span class="id" title="binder">a</span></a> <a id="a':438" class="idref" href="#a':438"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:439" class="idref" href="#opt_v:439"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:432"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:433"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:435"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':438"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':434"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':436"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:437"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':438"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':436"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:437"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:439"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:435"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:437"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:439"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">opt_v</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cur_map</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> |]<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_global_notin_preserves_cur_1" class="idref" href="#update_cur_version_region_global_notin_preserves_cur_1"><span class="id" title="lemma">update_cur_version_region_global_notin_preserves_cur_1</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lmem:440" class="idref" href="#lmem:440"><span class="id" title="binder">lmem</span></a> <a id="lm:441" class="idref" href="#lm:441"><span class="id" title="binder">lm</span></a> <a id="lmem':442" class="idref" href="#lmem':442"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:443" class="idref" href="#cur_map:443"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':444" class="idref" href="#cur_map':444"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:445" class="idref" href="#la:445"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:446" class="idref" href="#a:446"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:447" class="idref" href="#opt_v:447"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:440"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:441"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:443"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:445"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':442"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':444"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:446"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:445"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:443"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:446"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:447"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':444"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:446"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:447"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hcur</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap_m0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">opt_v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur0</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_global_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_global_notin_preserves_cur_2" class="idref" href="#update_cur_version_region_global_notin_preserves_cur_2"><span class="id" title="lemma">update_cur_version_region_global_notin_preserves_cur_2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lmem:448" class="idref" href="#lmem:448"><span class="id" title="binder">lmem</span></a> <a id="lm:449" class="idref" href="#lm:449"><span class="id" title="binder">lm</span></a> <a id="lmem':450" class="idref" href="#lmem':450"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:451" class="idref" href="#cur_map:451"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':452" class="idref" href="#cur_map':452"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:453" class="idref" href="#la:453"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:454" class="idref" href="#a:454"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="opt_v:455" class="idref" href="#opt_v:455"><span class="id" title="binder">opt_v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:448"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:449"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:451"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:453"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':450"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':452"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:454"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:453"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':452"><span class="id" title="variable">cur_map'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:454"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:455"><span class="id" title="variable">opt_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:451"><span class="id" title="variable">cur_map</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:454"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#opt_v:455"><span class="id" title="variable">opt_v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hcur</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_addr_global_notin_preserves_cur_2</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Sweep in logical memory 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="overlap_wordL" class="idref" href="#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a id="lw1:456" class="idref" href="#lw1:456"><span class="id" title="binder">lw1</span></a> <a id="lw2:457" class="idref" href="#lw2:457"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:456"><span class="id" title="variable">lw1</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:457"><span class="id" title="variable">lw2</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="overlap_wordL_dec" class="idref" href="#overlap_wordL_dec"><span class="id" title="instance">overlap_wordL_dec</span></a> (<a id="lw1:458" class="idref" href="#lw1:458"><span class="id" title="binder">lw1</span></a> <a id="lw2:459" class="idref" href="#lw2:459"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:458"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:459"><span class="id" title="variable">lw2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_registersL" class="idref" href="#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> (<a id="lregs:460" class="idref" href="#lregs:460"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:461" class="idref" href="#src:461"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:462" class="idref" href="#lwsrc:462"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="r:463" class="idref" href="#r:463"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwr:464" class="idref" href="#lwr:464"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.logical_mapsto.html#r:463"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:461"><span class="id" title="variable">src</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">True</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:462"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:464"><span class="id" title="variable">lwr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:460"><span class="id" title="variable">lregs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_registersL_dec" class="idref" href="#unique_in_registersL_dec"><span class="id" title="instance">unique_in_registersL_dec</span></a> (<a id="lregs:465" class="idref" href="#lregs:465"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:466" class="idref" href="#src:466"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:467" class="idref" href="#lwsrc:467"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:465"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:466"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:467"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">rw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_last_version_addr" class="idref" href="#is_last_version_addr"><span class="id" title="definition">is_last_version_addr</span></a> (<a id="lmem:468" class="idref" href="#lmem:468"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:469" class="idref" href="#la:469"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="v:470" class="idref" href="#v:470"><span class="id" title="binder">v</span></a> := <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:469"><span class="id" title="variable">la</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="keyword">fun</span> (<a id="la':471" class="idref" href="#la':471"><span class="id" title="binder">la'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la':471"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:469"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la':471"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a>  <a class="idref" href="cap_machine.logical_mapsto.html#v:470"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:468"><span class="id" title="variable">lmem</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mem_phys_log_cur_addr_last_version_1" class="idref" href="#mem_phys_log_cur_addr_last_version_1"><span class="id" title="lemma">mem_phys_log_cur_addr_last_version_1</span></a><br/>
&nbsp;&nbsp;(<a id="phm:472" class="idref" href="#phm:472"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:473" class="idref" href="#lm:473"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:474" class="idref" href="#cur_map:474"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:475" class="idref" href="#la:475"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:472"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:473"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:474"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:475"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:474"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_last_version_addr"><span class="id" title="definition">is_last_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:473"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:475"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">la</span> =&gt; [<span class="id" title="var">a</span> <span class="id" title="var">v</span>] [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a'</span> <span class="id" title="var">v'</span>] <span class="id" title="var">lw'</span> <span class="id" title="var">Hla'</span> /= ? ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v_la'</span> &amp; <span class="id" title="var">Hcur_la'</span> &amp; <span class="id" title="var">Hcur_v_la'</span> &amp; <span class="id" title="var">Hla'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la'</span>; [|<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hcur_la</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mem_phys_log_cur_addr_last_version_2" class="idref" href="#mem_phys_log_cur_addr_last_version_2"><span class="id" title="lemma">mem_phys_log_cur_addr_last_version_2</span></a><br/>
&nbsp;&nbsp;(<a id="phm:476" class="idref" href="#phm:476"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:477" class="idref" href="#lm:477"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:478" class="idref" href="#cur_map:478"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:479" class="idref" href="#la:479"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:476"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:477"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:478"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:477"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:479"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_last_version_addr"><span class="id" title="definition">is_last_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:477"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:479"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:479"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:478"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">la</span> =&gt; [<span class="id" title="var">a</span> <span class="id" title="var">v</span>] [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] [<span class="id" title="var">lw</span> <span class="id" title="var">Hla</span>] <span class="id" title="var">Hlast_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v_la</span> &amp; <span class="id" title="var">Hcur_v_la</span> &amp; <span class="id" title="var">Hcur_max</span> &amp; [<span class="id" title="var">lw0</span> <span class="id" title="var">Hla0</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla0</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hla0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v_la</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mem_phys_log_cur_addr_last_version" class="idref" href="#mem_phys_log_cur_addr_last_version"><span class="id" title="lemma">mem_phys_log_cur_addr_last_version</span></a><br/>
&nbsp;&nbsp;(<a id="phm:480" class="idref" href="#phm:480"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:481" class="idref" href="#lm:481"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:482" class="idref" href="#cur_map:482"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:483" class="idref" href="#la:483"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:480"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:481"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:482"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:481"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:483"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#is_last_version_addr"><span class="id" title="definition">is_last_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:481"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:483"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:483"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:482"><span class="id" title="variable">cur_map</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">HLinv</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intro</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_cur_addr_last_version_2"><span class="id" title="axiom">mem_phys_log_cur_addr_last_version_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_cur_addr_last_version_1"><span class="id" title="axiom">mem_phys_log_cur_addr_last_version_1</span></a> ].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_log_last_version" class="idref" href="#state_phys_log_last_version"><span class="id" title="lemma">state_phys_log_last_version</span></a><br/>
&nbsp;&nbsp;(<a id="phr:484" class="idref" href="#phr:484"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:485" class="idref" href="#phm:485"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:486" class="idref" href="#lm:486"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:487" class="idref" href="#lr:487"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:488" class="idref" href="#cur_map:488"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:489" class="idref" href="#src:489"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:490" class="idref" href="#lwsrc:490"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:491" class="idref" href="#p:491"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:492" class="idref" href="#b:492"><span class="id" title="binder">b</span></a> <a id="e:493" class="idref" href="#e:493"><span class="id" title="binder">e</span></a> <a id="a:494" class="idref" href="#a:494"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:495" class="idref" href="#v:495"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:490"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:491"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:492"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:493"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:494"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:495"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:484"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:485"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:487"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:486"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:488"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:487"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:489"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:490"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:496" class="idref" href="#a0:496"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:486"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:496"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:495"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:492"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:493"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> [ [<span class="id" title="var">_</span> <span class="id" title="var">Hreg_current</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hreg_current</span> <span class="id" title="var">Hlr_src</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">cur_map</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_a0</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hv'</span> ; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmem_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hroot</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">cur</span> &amp; <span class="id" title="var">Hsome</span> &amp; <span class="id" title="var">Hmaxv</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw</span> &amp; <span class="id" title="var">Hlm</span> &amp; <span class="id" title="var">_</span>) ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_phys_log_access_word_region" class="idref" href="#state_phys_log_access_word_region"><span class="id" title="lemma">state_phys_log_access_word_region</span></a><br/>
&nbsp;&nbsp;(<a id="phr:497" class="idref" href="#phr:497"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:498" class="idref" href="#phm:498"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:499" class="idref" href="#lr:499"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:500" class="idref" href="#lm:500"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:501" class="idref" href="#vmap:501"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:502" class="idref" href="#src:502"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:503" class="idref" href="#lwsrc:503"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:504" class="idref" href="#p:504"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:505" class="idref" href="#b:505"><span class="id" title="binder">b</span></a> <a id="e:506" class="idref" href="#e:506"><span class="id" title="binder">e</span></a> <a id="a:507" class="idref" href="#a:507"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:508" class="idref" href="#v:508"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:503"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:504"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:505"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:506"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:507"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:508"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:497"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:498"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:499"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:500"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:501"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:499"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:502"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:503"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':509" class="idref" href="#a':509"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:500"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':509"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:508"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:505"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:506"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hget</span> [ [<span class="id" title="var">_</span> ?] [? ?] ] <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlsrc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Returns&nbsp;<span class="inlinecode"><span class="id" title="var">true</span></span>&nbsp;if&nbsp;<span class="inlinecode"><span class="id" title="var">r</span></span>&nbsp;is&nbsp;unique.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_memoryL" class="idref" href="#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> (<a id="lmem:510" class="idref" href="#lmem:510"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lwsrc:511" class="idref" href="#lwsrc:511"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:512" class="idref" href="#la:512"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lwa:513" class="idref" href="#lwa:513"><span class="id" title="binder">lwa</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_last_version_addr"><span class="id" title="definition">is_last_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:510"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:512"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:511"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:513"><span class="id" title="variable">lwa</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:510"><span class="id" title="variable">lmem</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_memoryL_dec" class="idref" href="#unique_in_memoryL_dec"><span class="id" title="instance">unique_in_memoryL_dec</span></a> (<a id="lmem:514" class="idref" href="#lmem:514"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lwsrc:515" class="idref" href="#lwsrc:515"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:514"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:515"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">la</span> <span class="id" title="var">lwa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">impl_dec</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_machineL" class="idref" href="#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> (<a id="lmem:516" class="idref" href="#lmem:516"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lregs:517" class="idref" href="#lregs:517"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:518" class="idref" href="#src:518"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:519" class="idref" href="#lwsrc:519"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:517"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:518"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:519"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:517"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:518"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:519"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:516"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:519"><span class="id" title="variable">lwsrc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_memoryL_aux" class="idref" href="#unique_in_memoryL_aux"><span class="id" title="definition">unique_in_memoryL_aux</span></a> (<a id="lmem:520" class="idref" href="#lmem:520"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lwsrc:521" class="idref" href="#lwsrc:521"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="cur_map:522" class="idref" href="#cur_map:522"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:523" class="idref" href="#la:523"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lwa:524" class="idref" href="#lwa:524"><span class="id" title="binder">lwa</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:523"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:522"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:521"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:524"><span class="id" title="variable">lwa</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:520"><span class="id" title="variable">lmem</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_memoryL_equiv" class="idref" href="#unique_in_memoryL_equiv"><span class="id" title="lemma">unique_in_memoryL_equiv</span></a><br/>
&nbsp;&nbsp;(<a id="phm:525" class="idref" href="#phm:525"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="phr:526" class="idref" href="#phr:526"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lm:527" class="idref" href="#lm:527"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:528" class="idref" href="#lr:528"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:529" class="idref" href="#src:529"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:530" class="idref" href="#lwsrc:530"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="cur_map:531" class="idref" href="#cur_map:531"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:528"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:529"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:530"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:526"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:525"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:528"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:527"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:531"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:525"><span class="id" title="variable">phm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:530"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:527"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:530"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL_aux"><span class="id" title="definition">unique_in_memoryL_aux</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:527"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:530"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:531"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hsrc</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hsweep</span> <span class="id" title="var">HsweepL</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL_aux"><span class="id" title="definition">unique_in_memoryL_aux</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HsweepL</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">HsweepL</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">la</span> <span class="id" title="var">lw</span> /= <span class="id" title="var">His_last</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">His_last</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_cur_addr_last_version_1"><span class="id" title="axiom">mem_phys_log_cur_addr_last_version_1</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_word_lea" class="idref" href="#is_cur_word_lea"><span class="id" title="lemma">is_cur_word_lea</span></a><br/>
&nbsp;&nbsp;(<a id="cur_map:532" class="idref" href="#cur_map:532"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:533" class="idref" href="#p:533"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:534" class="idref" href="#b:534"><span class="id" title="binder">b</span></a> <a id="e:535" class="idref" href="#e:535"><span class="id" title="binder">e</span></a> <a id="a:536" class="idref" href="#a:536"><span class="id" title="binder">a</span></a> <a id="a':537" class="idref" href="#a':537"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:538" class="idref" href="#v:538"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:533"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:534"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:535"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:536"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:538"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:532"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:533"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:534"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:535"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':537"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:538"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:532"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hcur</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_in_updates_cur_map" class="idref" href="#update_cur_version_region_local_in_updates_cur_map"><span class="id" title="lemma">update_cur_version_region_local_in_updates_cur_map</span></a><br/>
&nbsp;&nbsp;(<a id="lm:539" class="idref" href="#lm:539"><span class="id" title="binder">lm</span></a> <a id="lm':540" class="idref" href="#lm':540"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:541" class="idref" href="#cur_map:541"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':542" class="idref" href="#cur_map':542"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:543" class="idref" href="#la:543"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="a:544" class="idref" href="#a:544"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:545" class="idref" href="#v:545"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:543"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:539"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:541"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:543"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':540"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':542"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:543"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:539"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:545"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:545"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:541"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:545"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':542"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">cur_map</span> <span class="id" title="var">cur_map'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la'</span> <span class="id" title="var">IH</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>] <span class="id" title="var">Hcur_a</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">Ha'_not_in_la'</span> <span class="id" title="var">HNoDup</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha</span>] ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;case&nbsp;(a&nbsp;=&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_region_local_preserves_content_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hupd</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlwa</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;case&nbsp;(a&nbsp;&lt;&gt;&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha_neq_a'</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_1</span></a> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reg_phys_log_corresponds_cap_is_cur" class="idref" href="#reg_phys_log_corresponds_cap_is_cur"><span class="id" title="lemma">reg_phys_log_corresponds_cap_is_cur</span></a><br/>
&nbsp;&nbsp;(<a id="phr:546" class="idref" href="#phr:546"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:547" class="idref" href="#lr:547"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:548" class="idref" href="#cur_map:548"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:549" class="idref" href="#src:549"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:550" class="idref" href="#p:550"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>)  (<a id="b:551" class="idref" href="#b:551"><span class="id" title="binder">b</span></a> <a id="e:552" class="idref" href="#e:552"><span class="id" title="binder">e</span></a> <a id="a:553" class="idref" href="#a:553"><span class="id" title="binder">a</span></a> <a id="a':554" class="idref" href="#a':554"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:555" class="idref" href="#v:555"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:547"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:549"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:550"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:551"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:552"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:553"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:555"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:546"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:547"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:548"><span class="id" title="variable">cur_map</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':554"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:551"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:552"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':554"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:555"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:548"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_read_iscur"><span class="id" title="axiom">lreg_read_iscur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word_lea"><span class="id" title="axiom">is_cur_word_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a'</span> := <span class="id" title="var">a'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_wordL_seq_between" class="idref" href="#not_overlap_wordL_seq_between"><span class="id" title="lemma">not_overlap_wordL_seq_between</span></a><br/>
&nbsp;&nbsp;(<a id="p:556" class="idref" href="#p:556"><span class="id" title="binder">p</span></a> <a id="p':557" class="idref" href="#p':557"><span class="id" title="binder">p'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:558" class="idref" href="#b:558"><span class="id" title="binder">b</span></a> <a id="b':559" class="idref" href="#b':559"><span class="id" title="binder">b'</span></a> <a id="e:560" class="idref" href="#e:560"><span class="id" title="binder">e</span></a> <a id="e':561" class="idref" href="#e':561"><span class="id" title="binder">e'</span></a> <a id="a:562" class="idref" href="#a:562"><span class="id" title="binder">a</span></a> <a id="a':563" class="idref" href="#a':563"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:564" class="idref" href="#v:564"><span class="id" title="binder">v</span></a> <a id="v':565" class="idref" href="#v':565"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:566" class="idref" href="#lw:566"><span class="id" title="binder">lw</span></a> <a id="lw':567" class="idref" href="#lw':567"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:566"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:556"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:558"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:560"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:562"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:564"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':567"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':557"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':559"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':561"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':563"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':565"><span class="id" title="variable">v'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:566"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':567"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a0:568" class="idref" href="#a0:568"><span class="id" title="binder">a0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:568"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':559"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':561"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:568"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:558"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:560"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget_lw</span> <span class="id" title="var">Hget_lw'</span> <span class="id" title="var">Hnot_overlap</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha_in</span> <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnot_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /= /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_in</span>, <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b'</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hb</span>; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_local_notin_is_cur_word" class="idref" href="#update_cur_version_local_notin_is_cur_word"><span class="id" title="lemma">update_cur_version_local_notin_is_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="lm:569" class="idref" href="#lm:569"><span class="id" title="binder">lm</span></a> <a id="lm':570" class="idref" href="#lm':570"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:571" class="idref" href="#cur_map:571"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':572" class="idref" href="#cur_map':572"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:573" class="idref" href="#p:573"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:574" class="idref" href="#b:574"><span class="id" title="binder">b</span></a> <a id="e:575" class="idref" href="#e:575"><span class="id" title="binder">e</span></a> <a id="a:576" class="idref" href="#a:576"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:577" class="idref" href="#v:577"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:578" class="idref" href="#lw:578"><span class="id" title="binder">lw</span></a> <a id="lwsrc:579" class="idref" href="#lwsrc:579"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:579"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:573"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:574"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:575"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:576"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:577"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:569"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:571"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:574"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:575"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':570"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':572"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:579"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:578"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:578"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:571"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:578"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':572"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">p'</span> <span class="id" title="var">b'</span> <span class="id" title="var">e'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span>|] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">His_cur_lw</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'0_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#not_overlap_wordL_seq_between"><span class="id" title="axiom">not_overlap_wordL_seq_between</span></a>; [ | | <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hno_overlap</span>| <span class="id" title="tactic">eapply</span> <span class="id" title="var">Ha'0</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">p'</span> <span class="id" title="var">b'</span> <span class="id" title="var">e'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span>|] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">His_cur_lw</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'0_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#not_overlap_wordL_seq_between"><span class="id" title="axiom">not_overlap_wordL_seq_between</span></a>; [ | | <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hno_overlap</span>| <span class="id" title="tactic">eapply</span> <span class="id" title="var">Ha'0</span>]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_lword" class="idref" href="#update_version_lword"><span class="id" title="definition">update_version_lword</span></a> (<a id="lw:580" class="idref" href="#lw:580"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> ) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:580"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:580"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_word_region_local_update_lword" class="idref" href="#update_cur_version_word_region_local_update_lword"><span class="id" title="lemma">update_cur_version_word_region_local_update_lword</span></a><br/>
&nbsp;&nbsp;(<a id="lm:582" class="idref" href="#lm:582"><span class="id" title="binder">lm</span></a> <a id="lm':583" class="idref" href="#lm':583"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:584" class="idref" href="#cur_map:584"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':585" class="idref" href="#cur_map':585"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:586" class="idref" href="#lw:586"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region_local"><span class="id" title="definition">update_cur_version_word_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:582"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:584"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:586"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':583"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':585"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;ugly&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:586"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:588" class="idref" href="#a:588"><span class="id" title="binder"><span id="a:589" class="id">a</span></span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:582"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:588"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) ) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:586"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:584"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_lword"><span class="id" title="definition">update_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:586"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':585"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hcur</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_in_updates_cur_map"><span class="id" title="axiom">update_cur_version_region_local_in_updates_cur_map</span></a><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'</span>]; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_local_update_lword" class="idref" href="#update_cur_version_region_local_update_lword"><span class="id" title="lemma">update_cur_version_region_local_update_lword</span></a><br/>
&nbsp;&nbsp;(<a id="lm:590" class="idref" href="#lm:590"><span class="id" title="binder">lm</span></a> <a id="lm':591" class="idref" href="#lm':591"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:592" class="idref" href="#cur_map:592"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':593" class="idref" href="#cur_map':593"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:594" class="idref" href="#p:594"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:595" class="idref" href="#b:595"><span class="id" title="binder">b</span></a> <a id="e:596" class="idref" href="#e:596"><span class="id" title="binder">e</span></a> <a id="a:597" class="idref" href="#a:597"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:598" class="idref" href="#v:598"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:599" class="idref" href="#lw:599"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:599"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:594"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:595"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:596"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:597"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:598"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:590"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:592"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:595"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:596"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':591"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':593"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:600" class="idref" href="#a:600"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:590"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:600"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:598"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:595"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:596"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:599"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:592"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_lword"><span class="id" title="definition">update_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:599"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':593"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hget</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region_local_update_lword"><span class="id" title="axiom">update_cur_version_word_region_local_update_lword</span></a>; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_reg_phys_log_cor_updates_src" class="idref" href="#update_cur_version_reg_phys_log_cor_updates_src"><span class="id" title="lemma">update_cur_version_reg_phys_log_cor_updates_src</span></a><br/>
&nbsp;&nbsp;(<a id="phr:601" class="idref" href="#phr:601"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:602" class="idref" href="#phm:602"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:603" class="idref" href="#lr:603"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:604" class="idref" href="#lm:604"><span class="id" title="binder">lm</span></a> <a id="lm':605" class="idref" href="#lm':605"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:606" class="idref" href="#cur_map:606"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':607" class="idref" href="#cur_map':607"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:608" class="idref" href="#src:608"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:609" class="idref" href="#p:609"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:610" class="idref" href="#b:610"><span class="id" title="binder">b</span></a> <a id="e:611" class="idref" href="#e:611"><span class="id" title="binder">e</span></a> <a id="a:612" class="idref" href="#a:612"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:613" class="idref" href="#v:613"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="lw:614" class="idref" href="#lw:614"><span class="id" title="binder">lw</span></a> <a id="lwsrc:615" class="idref" href="#lwsrc:615"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:615"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:609"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:610"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:611"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:612"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:613"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':607"><span class="id" title="variable">cur_map'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:601"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:602"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:603"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:604"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:606"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:603"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:608"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:615"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:604"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:603"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:608"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:615"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:604"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:606"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:610"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:611"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':605"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':607"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:608"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)]&gt;</span> <span class="id" title="notation">phr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:608"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':607"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hcur_lw</span> [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_insert</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">replace</span> <span class="id" title="var">phr</span> <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">_</span>]).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">insert_delete_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_insert_respects_corresponds"><span class="id" title="axiom">lreg_insert_respects_corresponds</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">phr</span> := (<span class="id" title="definition">delete</span> <span class="id" title="var">src</span> <span class="id" title="var">phr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_reg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hunique</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_local_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_local_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reg_phys_log_corresponds_delete" class="idref" href="#reg_phys_log_corresponds_delete"><span class="id" title="lemma">reg_phys_log_corresponds_delete</span></a><br/>
&nbsp;&nbsp;(<a id="phr:616" class="idref" href="#phr:616"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:617" class="idref" href="#lr:617"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:618" class="idref" href="#cur_map:618"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:619" class="idref" href="#src:619"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:616"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:617"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:618"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:619"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:616"><span class="id" title="variable">phr</span></a>) (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:619"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:617"><span class="id" title="variable">lr</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:618"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_reg_phys_log_cor_updates_notin" class="idref" href="#update_cur_version_reg_phys_log_cor_updates_notin"><span class="id" title="lemma">update_cur_version_reg_phys_log_cor_updates_notin</span></a><br/>
&nbsp;&nbsp;(<a id="phr:620" class="idref" href="#phr:620"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:621" class="idref" href="#phm:621"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:622" class="idref" href="#lr:622"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:623" class="idref" href="#lm:623"><span class="id" title="binder">lm</span></a> <a id="lm':624" class="idref" href="#lm':624"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="cur_map:625" class="idref" href="#cur_map:625"><span class="id" title="binder">cur_map</span></a> <a id="cur_map':626" class="idref" href="#cur_map':626"><span class="id" title="binder">cur_map'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:627" class="idref" href="#src:627"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:628" class="idref" href="#p:628"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:629" class="idref" href="#b:629"><span class="id" title="binder">b</span></a> <a id="e:630" class="idref" href="#e:630"><span class="id" title="binder">e</span></a> <a id="a:631" class="idref" href="#a:631"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:632" class="idref" href="#v:632"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:620"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:621"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:622"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:623"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:625"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:622"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:627"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:628"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:629"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:630"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:631"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:623"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:625"><span class="id" title="variable">cur_map</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:629"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:630"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':624"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':626"><span class="id" title="variable">cur_map'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:623"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:622"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:627"><span class="id" title="variable">src</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:628"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:629"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:630"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:631"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#src:627"><span class="id" title="variable">src</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.logical_mapsto.html#phr:620"><span class="id" title="variable">phr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#src:627"><span class="id" title="variable">src</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:622"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:620"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:622"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map':626"><span class="id" title="variable">cur_map'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hsrc_notin_phr</span> <span class="id" title="var">Hsrc_notin_lr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hreg_strip</span> <span class="id" title="var">Hreg_current</span>] [<span class="id" title="var">Hroot</span> <span class="id" title="var">Hdom</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup</span> ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">lwr</span> <span class="id" title="var">Hlr_lwr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr_neq_src</span> : <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">src</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsrc_notin_lr</span>; <span class="id" title="tactic">congruence</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hreg_current</span> ; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hunique</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_local_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_local_notin_is_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_insert_reg" class="idref" href="#unique_in_machineL_insert_reg"><span class="id" title="lemma">unique_in_machineL_insert_reg</span></a><br/>
&nbsp;&nbsp;(<a id="lm:633" class="idref" href="#lm:633"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:634" class="idref" href="#lr:634"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:635" class="idref" href="#src:635"><span class="id" title="binder">src</span></a> <a id="r:636" class="idref" href="#r:636"><span class="id" title="binder">r</span></a>: <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:637" class="idref" href="#lwsrc:637"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:638" class="idref" href="#lwr:638"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:636"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:635"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:634"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:635"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:637"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:637"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:638"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:633"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:634"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:635"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:637"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:633"><span class="id" title="variable">lm</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:636"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:638"><span class="id" title="variable">lwr</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#src:635"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:637"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_src</span>] <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_word_leaL" class="idref" href="#not_overlap_word_leaL"><span class="id" title="lemma">not_overlap_word_leaL</span></a><br/>
&nbsp;&nbsp;(<a id="p1:639" class="idref" href="#p1:639"><span class="id" title="binder">p1</span></a> <a id="p2:640" class="idref" href="#p2:640"><span class="id" title="binder">p2</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b1:641" class="idref" href="#b1:641"><span class="id" title="binder">b1</span></a> <a id="b2:642" class="idref" href="#b2:642"><span class="id" title="binder">b2</span></a> <a id="e1:643" class="idref" href="#e1:643"><span class="id" title="binder">e1</span></a> <a id="e2:644" class="idref" href="#e2:644"><span class="id" title="binder">e2</span></a> <a id="a1:645" class="idref" href="#a1:645"><span class="id" title="binder">a1</span></a> <a id="a1':646" class="idref" href="#a1':646"><span class="id" title="binder">a1'</span></a> <a id="a2:647" class="idref" href="#a2:647"><span class="id" title="binder">a2</span></a> <a id="a2':648" class="idref" href="#a2':648"><span class="id" title="binder">a2'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:649" class="idref" href="#v1:649"><span class="id" title="binder">v1</span></a> <a id="v2:650" class="idref" href="#v2:650"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw1:651" class="idref" href="#lw1:651"><span class="id" title="binder">lw1</span></a> <a id="lw1':652" class="idref" href="#lw1':652"><span class="id" title="binder">lw1'</span></a> <a id="lw2:653" class="idref" href="#lw2:653"><span class="id" title="binder">lw2</span></a> <a id="lw2':654" class="idref" href="#lw2':654"><span class="id" title="binder">lw2'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:651"><span class="id" title="variable">lw1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:639"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:641"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:643"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:645"><span class="id" title="variable">a1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:649"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':652"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:639"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:641"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:643"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1':646"><span class="id" title="variable">a1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:649"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:653"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:640"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:642"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:644"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:647"><span class="id" title="variable">a2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:650"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':654"><span class="id" title="variable">lw2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:640"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:642"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:644"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2':648"><span class="id" title="variable">a2'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:650"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:651"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:653"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':652"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':654"><span class="id" title="variable">lw2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlw1</span> <span class="id" title="var">Hlw1'</span> <span class="id" title="var">Hlw2</span> <span class="id" title="var">Hlw2'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Hoverlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1'</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2'</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hoverlap</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_not_overlap_word" class="idref" href="#unique_in_machineL_not_overlap_word"><span class="id" title="lemma">unique_in_machineL_not_overlap_word</span></a><br/>
&nbsp;&nbsp;(<a id="lm:655" class="idref" href="#lm:655"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:656" class="idref" href="#lr:656"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:657" class="idref" href="#src:657"><span class="id" title="binder">src</span></a> <a id="r:658" class="idref" href="#r:658"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;(<a id="lwsrc:659" class="idref" href="#lwsrc:659"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:660" class="idref" href="#lwr:660"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:658"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:657"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:656"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:657"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:659"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:656"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:658"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:660"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:655"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:656"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:657"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:659"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:659"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:660"><span class="id" title="variable">lwr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="phys_log_corresponds_unique_in_registers" class="idref" href="#phys_log_corresponds_unique_in_registers"><span class="id" title="lemma">phys_log_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;(<a id="phr:661" class="idref" href="#phr:661"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:662" class="idref" href="#phm:662"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:663" class="idref" href="#lr:663"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:664" class="idref" href="#lm:664"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;(<a id="cur_map:665" class="idref" href="#cur_map:665"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:666" class="idref" href="#src:666"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:667" class="idref" href="#lwsrc:667"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:663"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:666"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:667"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:661"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:662"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:663"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:664"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:665"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_registers"><span class="id" title="definition">unique_in_registers</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:661"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:666"><span class="id" title="variable">src</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:667"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:663"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:666"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:667"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlr_src</span> [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hunique</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">lwr</span> <span class="id" title="var">Hlr_r</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_r</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_reg_get_word"><span class="id" title="axiom">state_phys_log_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)) ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_r</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_reg_get_word"><span class="id" title="axiom">state_phys_log_reg_get_word</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_reg_get_word"><span class="id" title="axiom">state_phys_log_reg_get_word</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="phys_log_corresponds_unique_in_memory" class="idref" href="#phys_log_corresponds_unique_in_memory"><span class="id" title="lemma">phys_log_corresponds_unique_in_memory</span></a><br/>
&nbsp;&nbsp;(<a id="phr:668" class="idref" href="#phr:668"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:669" class="idref" href="#phm:669"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:670" class="idref" href="#lr:670"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:671" class="idref" href="#lm:671"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;(<a id="cur_map:672" class="idref" href="#cur_map:672"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:673" class="idref" href="#src:673"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:674" class="idref" href="#lwsrc:674"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:670"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:673"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:674"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:668"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:669"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:670"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:671"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:672"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:669"><span class="id" title="variable">phm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:674"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:671"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:674"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlr_src</span> [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hunique</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a</span> <span class="id" title="var">v</span>] <span class="id" title="var">lw_la</span> <span class="id" title="var">Hlm_la</span> <span class="id" title="var">His_cur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_cur_addr_last_version_2"><span class="id" title="axiom">mem_phys_log_cur_addr_last_version_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_la</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphm_a</span> : <span class="id" title="var">phm</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw_la</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_get_word"><span class="id" title="axiom">mem_phys_log_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hphm_a</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'phm_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;link&nbsp;between<br/>
&nbsp;&nbsp;&nbsp;sweep&nbsp;of&nbsp;the&nbsp;physical&nbsp;machine<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;unique_in_machine&nbsp;of&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="sweep_true_specL" class="idref" href="#sweep_true_specL"><span class="id" title="lemma">sweep_true_specL</span></a><br/>
&nbsp;&nbsp;(<a id="phr:675" class="idref" href="#phr:675"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:676" class="idref" href="#phm:676"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:677" class="idref" href="#lr:677"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:678" class="idref" href="#lm:678"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;(<a id="cur_map:679" class="idref" href="#cur_map:679"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:680" class="idref" href="#src:680"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:681" class="idref" href="#lwsrc:681"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:677"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:680"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:681"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:675"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:676"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:677"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:678"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:679"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:676"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:675"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:680"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:678"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:677"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:680"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:681"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_src</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_reg_get_word"><span class="id" title="axiom">state_phys_log_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#sweep_spec"><span class="id" title="axiom">sweep_spec</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">wsrc</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsweep</span> <span class="id" title="var">Hphr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsweep</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#phys_log_corresponds_unique_in_registers"><span class="id" title="axiom">phys_log_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#phys_log_corresponds_unique_in_memory"><span class="id" title="axiom">phys_log_corresponds_unique_in_memory</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="no_overlap_word_no_access_addrL" class="idref" href="#no_overlap_word_no_access_addrL"><span class="id" title="lemma">no_overlap_word_no_access_addrL</span></a><br/>
&nbsp;&nbsp;(<a id="p:682" class="idref" href="#p:682"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:683" class="idref" href="#b:683"><span class="id" title="binder">b</span></a> <a id="e:684" class="idref" href="#e:684"><span class="id" title="binder">e</span></a> <a id="a:685" class="idref" href="#a:685"><span class="id" title="binder">a</span></a> <a id="a':686" class="idref" href="#a':686"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:687" class="idref" href="#v:687"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:688" class="idref" href="#lw:688"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':686"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:683"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:684"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:682"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:683"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:684"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:685"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:687"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lw:688"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':686"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:688"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Ha'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw</span>)); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p0</span> <span class="id" title="var">b0</span> <span class="id" title="var">e0</span> <span class="id" title="var">a0</span>|] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b0</span>)%<span class="id" title="var">a</span> ; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machine_no_accessL" class="idref" href="#unique_in_machine_no_accessL"><span class="id" title="lemma">unique_in_machine_no_accessL</span></a><br/>
&nbsp;&nbsp;(<a id="phm:689" class="idref" href="#phm:689"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:690" class="idref" href="#lm:690"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:691" class="idref" href="#lr:691"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="cur_map:692" class="idref" href="#cur_map:692"><span class="id" title="binder">cur_map</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:693" class="idref" href="#src:693"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:694" class="idref" href="#p:694"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:695" class="idref" href="#b:695"><span class="id" title="binder">b</span></a> <a id="e:696" class="idref" href="#e:696"><span class="id" title="binder">e</span></a> <a id="a:697" class="idref" href="#a:697"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:698" class="idref" href="#v:698"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="lw:699" class="idref" href="#lw:699"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:699"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:694"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:695"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:696"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:697"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:698"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:689"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:692"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:691"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:693"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:699"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:699"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:692"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:691"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:693"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:699"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':700" class="idref" href="#a':700"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:692"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':700"><span class="id" title="variable">a'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:695"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:696"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlw</span> <span class="id" title="var">Hmem_inv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">His_cur</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word_lea"><span class="id" title="axiom">is_cur_word_lea</span></a> <span class="id" title="var">cur_map</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">His_cur</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">His_cur'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcur_a'</span>: <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">cur_map</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;maybe&nbsp;I&nbsp;can&nbsp;extract&nbsp;that&nbsp;into&nbsp;a&nbsp;lemma&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span>) ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> //=.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span>) ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> //=.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hunique</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span> ; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique_mem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlast_v</span> <span class="id" title="var">Hcur_v0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#no_overlap_word_no_access_addrL"><span class="id" title="axiom">no_overlap_word_no_access_addrL</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlast_v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_cur_addr_last_version_1"><span class="id" title="axiom">mem_phys_log_cur_addr_last_version_1</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;CMRΑ&nbsp;for&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="memG" class="idref" href="#memG"><span class="id" title="record">memG</span></a> <a id="00d0e2d7812fbba1953d6ff958442ab1" class="idref" href="#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">MemG</span> {<br/>
&nbsp;&nbsp;<a id="mem_invG" class="idref" href="#mem_invG"><span class="id" title="projection">mem_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="mem_gen_memG" class="idref" href="#mem_gen_memG"><span class="id" title="projection">mem_gen_memG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="variable">Σ</span></a>}.<br/>

<br/>
<span class="comment">(*&nbsp;CMRA&nbsp;for&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="regG" class="idref" href="#regG"><span class="id" title="record">regG</span></a> <a id="1c7e47cd1af1c7608f9d6c5726fe13f1" class="idref" href="#1c7e47cd1af1c7608f9d6c5726fe13f1"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">RegG</span> {<br/>
&nbsp;&nbsp;<a id="reg_invG" class="idref" href="#reg_invG"><span class="id" title="projection">reg_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#1c7e47cd1af1c7608f9d6c5726fe13f1"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="reg_gen_regG" class="idref" href="#reg_gen_regG"><span class="id" title="projection">reg_gen_regG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#1c7e47cd1af1c7608f9d6c5726fe13f1"><span class="id" title="variable">Σ</span></a>; }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_interp_logical" class="idref" href="#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> (<a id="50907173111813ddac2657b9e57994e7" class="idref" href="#50907173111813ddac2657b9e57994e7"><span class="id" title="binder">σ</span></a> : <a class="idref" href="cap_machine.cap_lang.html#state"><span class="id" title="definition">cap_lang.state</span></a>) `{<a id="memG0:711" class="idref" href="#memG0:711"><span class="id" title="binder">!</span></a><a id="memG0:711" class="idref" href="#memG0:711"><span class="id" title="binder">memG</span></a> <a id="28bd7922753a05621944054429c28a28" class="idref" href="#28bd7922753a05621944054429c28a28"><span class="id" title="binder"><span id="memG0:711" class="id">Σ</span></span></a>, <a id="regG0:712" class="idref" href="#regG0:712"><span class="id" title="binder">!</span></a><a id="regG0:712" class="idref" href="#regG0:712"><span class="id" title="binder">regG</span></a> <a id="regG0:712" class="idref" href="#regG0:712"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.logical_mapsto.html#28bd7922753a05621944054429c28a28"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="lr:713" class="idref" href="#lr:713"><span class="id" title="binder">lr</span></a> <a id="lm:714" class="idref" href="#lm:714"><span class="id" title="binder">lm</span></a> <a id="cur_map:715" class="idref" href="#cur_map:715"><span class="id" title="binder">cur_map</span></a> <span class="id" title="notation">,</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:713"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">∗</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:714"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#50907173111813ddac2657b9e57994e7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#reg"><span class="id" title="projection">reg</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#50907173111813ddac2657b9e57994e7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#mem"><span class="id" title="projection">mem</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:713"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:714"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:715"><span class="id" title="variable">cur_map</span></a><span class="id" title="notation">⌝</span>.<br/>

<br/>
<span class="comment">(*&nbsp;invariants&nbsp;for&nbsp;memory,&nbsp;and&nbsp;a&nbsp;state&nbsp;interpretation&nbsp;for&nbsp;(mem,reg)&nbsp;*)</span><br/>
<span class="id" title="keyword">Global Instance</span> <a id="memG_irisG" class="idref" href="#memG_irisG"><span class="id" title="instance">memG_irisG</span></a> `{<a id="H:716" class="idref" href="#H:716"><span class="id" title="binder">MachineParameters</span></a>} `{<a id="memG0:718" class="idref" href="#memG0:718"><span class="id" title="binder">!</span></a><a id="memG0:718" class="idref" href="#memG0:718"><span class="id" title="binder">memG</span></a> <a id="b07aef13ea55ceab3208b3c384722e9c" class="idref" href="#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="binder"><span id="memG0:718" class="id">Σ</span></span></a>, <a id="regG0:719" class="idref" href="#regG0:719"><span class="id" title="binder">!</span></a><a id="regG0:719" class="idref" href="#regG0:719"><span class="id" title="binder">regG</span></a> <a id="regG0:719" class="idref" href="#regG0:719"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">irisGS</span> <a class="idref" href="cap_machine.cap_lang.html#cap_lang"><span class="id" title="definition">cap_lang</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a> := {<br/>
&nbsp;&nbsp;<span class="id" title="method">iris_invGS</span> := <a class="idref" href="cap_machine.logical_mapsto.html#mem_invG"><span class="id" title="method">mem_invG</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp</span> <a id="72e708e7e024afe880949cd8b2815336" class="idref" href="#72e708e7e024afe880949cd8b2815336"><span class="id" title="binder">σ</span></a> <span class="id" title="var">_</span> <a id="577d18328a943cffb32f1d7000245bcf" class="idref" href="#577d18328a943cffb32f1d7000245bcf"><span class="id" title="binder">κs</span></a> <span class="id" title="var">_</span> := <a class="idref" href="cap_machine.logical_mapsto.html#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#72e708e7e024afe880949cd8b2815336"><span class="id" title="variable">σ</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">fork_post</span> <span class="id" title="var">_</span> := <span class="id" title="notation">True</span>%<span class="id" title="var">I</span>;<br/>
&nbsp;&nbsp;<span class="id" title="method">num_laters_per_step</span> <span class="id" title="var">_</span> := 0;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> := <span class="id" title="lemma">fupd_intro</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
}.<br/>

<br/>
<span class="comment">(*&nbsp;Points&nbsp;to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="b4e695cd58dba538326a0ae97922fc83" class="idref" href="#b4e695cd58dba538326a0ae97922fc83"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "r  ↦ᵣ{ q } lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="db884c99aed36a9ddaddcd7edc424755" class="idref" href="#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Points-to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="1f356528680e66e063184d2852c70086" class="idref" href="#1f356528680e66e063184d2852c70086"><span class="id" title="notation">&quot;</span></a>la ↦ₐ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "la  ↦ₐ{ q }  lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="e389c97555835874498bb08a394266c6" class="idref" href="#e389c97555835874498bb08a394266c6"><span class="id" title="notation">&quot;</span></a>la ↦ₐ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">LAddr_scope</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">LAddr_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">la</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="eqb_laddr" class="idref" href="#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="a1:722" class="idref" href="#a1:722"><span class="id" title="binder">a1</span></a> <a id="a2:723" class="idref" href="#a2:723"><span class="id" title="binder">a2</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb"><span class="id" title="definition">Z.eqb</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:722"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.1</span> <a class="idref" href="cap_machine.logical_mapsto.html#a2:723"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:722"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:723"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="2075081701d58abc4fd86ad4dce27d74" class="idref" href="#2075081701d58abc4fd86ad4dce27d74"><span class="id" title="notation">&quot;</span></a>a1 =? a2" := (<a class="idref" href="cap_machine.logical_mapsto.html#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>) : <span class="id" title="var">LAddr_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="machine_param" class="idref" href="#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:724" class="idref" href="#H:724"><span class="id" title="binder">MachineParameters</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decodeInstrWL" class="idref" href="#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a id="lw:725" class="idref" href="#lw:725"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:725"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrWL" class="idref" href="#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> (<a id="i:726" class="idref" href="#i:726"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> (<a class="idref" href="cap_machine.machine_parameters.html#encodeInstr"><span class="id" title="method">encodeInstr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:726"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="decode_encode_instrLW_inv" class="idref" href="#decode_encode_instrLW_inv"><span class="id" title="lemma">decode_encode_instrLW_inv</span></a> (<a id="i:727" class="idref" href="#i:727"><span class="id" title="binder">i</span></a>: <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:727"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:727"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_parameters.html#decode_encode_instr_inv"><span class="id" title="method">decode_encode_instr_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrsLW" class="idref" href="#encodeInstrsLW"><span class="id" title="definition">encodeInstrsLW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.logical_mapsto.html#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="isCorrectLPC" class="idref" href="#isCorrectLPC"><span class="id" title="definition, inductive"><span id="isCorrectLPC_ind" class="id"><span id="isCorrectLPC_sind" class="id">isCorrectLPC</span></span></span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="isCorrectLPC_intro" class="idref" href="#isCorrectLPC_intro"><span class="id" title="constructor">isCorrectLPC_intro</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lpc:730" class="idref" href="#lpc:730"><span class="id" title="binder">lpc</span></a> <a id="p:731" class="idref" href="#p:731"><span class="id" title="binder">p</span></a> (<a id="b:732" class="idref" href="#b:732"><span class="id" title="binder">b</span></a> <a id="e:733" class="idref" href="#e:733"><span class="id" title="binder">e</span></a> <a id="a:734" class="idref" href="#a:734"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:730"><span class="id" title="variable">lpc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:731"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:732"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:733"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:734"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:731"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:732"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:733"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:734"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC:728"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:730"><span class="id" title="variable">lpc</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC" class="idref" href="#isCorrectLPC_isCorrectPC"><span class="id" title="lemma">isCorrectLPC_isCorrectPC</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:735" class="idref" href="#lw:735"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:735"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:735"><span class="id" title="variable">lw</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isCorrectPC_isCorrectLPC" class="idref" href="#isCorrectPC_isCorrectLPC"><span class="id" title="lemma">isCorrectPC_isCorrectLPC</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:736" class="idref" href="#lw:736"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:736"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:736"><span class="id" title="variable">lw</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC_iff" class="idref" href="#isCorrectLPC_isCorrectPC_iff"><span class="id" title="lemma">isCorrectLPC_isCorrectPC_iff</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:737" class="idref" href="#lw:737"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:737"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:737"><span class="id" title="variable">lw</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ; [<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC"><span class="id" title="axiom">isCorrectLPC_isCorrectPC</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectPC_isCorrectLPC"><span class="id" title="axiom">isCorrectPC_isCorrectLPC</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_perm" class="idref" href="#not_isCorrectLPC_perm"><span class="id" title="lemma">not_isCorrectLPC_perm</span></a> <a id="p:738" class="idref" href="#p:738"><span class="id" title="binder">p</span></a> <a id="b:739" class="idref" href="#b:739"><span class="id" title="binder">b</span></a> <a id="e:740" class="idref" href="#e:740"><span class="id" title="binder">e</span></a> <a id="a:741" class="idref" href="#a:741"><span class="id" title="binder">a</span></a> <a id="v:742" class="idref" href="#v:742"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#p:738"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:738"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:738"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:739"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:740"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:741"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:742"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_perm"><span class="id" title="axiom">not_isCorrectPC_perm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_bounds" class="idref" href="#not_isCorrectLPC_bounds"><span class="id" title="lemma">not_isCorrectLPC_bounds</span></a> <a id="p:743" class="idref" href="#p:743"><span class="id" title="binder">p</span></a> <a id="b:744" class="idref" href="#b:744"><span class="id" title="binder">b</span></a> <a id="e:745" class="idref" href="#e:745"><span class="id" title="binder">e</span></a> <a id="a:746" class="idref" href="#a:746"><span class="id" title="binder">a</span></a> <a id="v:747" class="idref" href="#v:747"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#b:744"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:746"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:745"><span class="id" title="variable">e</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:743"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:744"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:745"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:746"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:747"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_bounds"><span class="id" title="axiom">not_isCorrectPC_bounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_ExecPCPerm_InBounds" class="idref" href="#isCorrectLPC_ExecPCPerm_InBounds"><span class="id" title="lemma">isCorrectLPC_ExecPCPerm_InBounds</span></a> <a id="p:748" class="idref" href="#p:748"><span class="id" title="binder">p</span></a> <a id="b:749" class="idref" href="#b:749"><span class="id" title="binder">b</span></a> <a id="e:750" class="idref" href="#e:750"><span class="id" title="binder">e</span></a> <a id="a:751" class="idref" href="#a:751"><span class="id" title="binder">a</span></a> <a id="v:752" class="idref" href="#v:752"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:748"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:749"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:750"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:751"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:748"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:749"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:750"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:751"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:752"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a>, <a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_ExecPCPerm_InBounds"><span class="id" title="axiom">isCorrectPC_ExecPCPerm_InBounds</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_dec" class="idref" href="#isCorrectLPC_dec"><span class="id" title="lemma">isCorrectLPC_dec</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:753" class="idref" href="#lw:753"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:753"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:753"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">case_eq</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> | <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_le_dec"><span class="id" title="instance">finz_le_dec</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_lt_dec"><span class="id" title="instance">finz_lt_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_range_is_correctLPC" class="idref" href="#in_range_is_correctLPC"><span class="id" title="lemma">in_range_is_correctLPC</span></a> <a id="p:756" class="idref" href="#p:756"><span class="id" title="binder">p</span></a> <a id="b:757" class="idref" href="#b:757"><span class="id" title="binder">b</span></a> <a id="e:758" class="idref" href="#e:758"><span class="id" title="binder">e</span></a> <a id="a:759" class="idref" href="#a:759"><span class="id" title="binder">a</span></a> <a id="b':760" class="idref" href="#b':760"><span class="id" title="binder">b'</span></a> <a id="e':761" class="idref" href="#e':761"><span class="id" title="binder">e'</span></a> <a id="v:762" class="idref" href="#v:762"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:756"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:757"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:758"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:759"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:762"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':760"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:757"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#e:758"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':761"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':760"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:759"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:759"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#::Addr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':761"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hb</span> <span class="id" title="var">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvpc</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="dec_lpc" class="idref" href="#dec_lpc"><span class="id" title="instance">dec_lpc</span></a> <a id="lc:763" class="idref" href="#lc:763"><span class="id" title="binder">lc</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lc:763"><span class="id" title="variable">lc</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_dec"><span class="id" title="axiom">isCorrectLPC_dec</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lreg_lookup" class="idref" href="#lreg_lookup"><span class="id" title="lemma">lreg_lookup</span></a> <a id="regs:764" class="idref" href="#regs:764"><span class="id" title="binder">regs</span></a> (<a id="r:765" class="idref" href="#r:765"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:766" class="idref" href="#lw:766"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#regs:764"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:765"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:766"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#regs:764"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:765"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:766"><span class="id" title="variable">lw</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="method">lookup_fmap</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="laddr_neq" class="idref" href="#laddr_neq"><span class="id" title="lemma">laddr_neq</span></a> (<a id="la1:767" class="idref" href="#la1:767"><span class="id" title="binder">la1</span></a> <a id="la2:768" class="idref" href="#la2:768"><span class="id" title="binder">la2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#la2:768"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:767"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.1</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#la2:768"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:767"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la1:767"><span class="id" title="variable">la1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la2:768"><span class="id" title="variable">la2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="laddr_neq'" class="idref" href="#laddr_neq'"><span class="id" title="lemma">laddr_neq'</span></a> (<a id="a1:769" class="idref" href="#a1:769"><span class="id" title="binder">a1</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:770" class="idref" href="#v1:770"><span class="id" title="binder">v1</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a2:771" class="idref" href="#a2:771"><span class="id" title="binder">a2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v2:772" class="idref" href="#v2:772"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#a1:769"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:771"><span class="id" title="variable">a2</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v1:770"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:772"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:769"><span class="id" title="variable">a1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:770"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a2:771"><span class="id" title="variable">a2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:772"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="updatePcPermL" class="idref" href="#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> (<a id="lw:773" class="idref" href="#lw:773"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:773"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:773"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="updatePcPermL_spec" class="idref" href="#updatePcPermL_spec"><span class="id" title="lemma">updatePcPermL_spec</span></a> (<a id="lw:775" class="idref" href="#lw:775"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:775"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#updatePcPerm"><span class="id" title="definition">updatePcPerm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:775"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_updatePcPermL" class="idref" href="#is_cur_updatePcPermL"><span class="id" title="lemma">is_cur_updatePcPermL</span></a> (<a id="lw:776" class="idref" href="#lw:776"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="cur_map:777" class="idref" href="#cur_map:777"><span class="id" title="binder">cur_map</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:776"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:777"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:776"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:777"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_word_change" class="idref" href="#is_cur_word_change"><span class="id" title="lemma">is_cur_word_change</span></a> <a id="cur_map:778" class="idref" href="#cur_map:778"><span class="id" title="binder">cur_map</span></a> <a id="p:779" class="idref" href="#p:779"><span class="id" title="binder">p</span></a> <a id="p':780" class="idref" href="#p':780"><span class="id" title="binder">p'</span></a> <a id="b:781" class="idref" href="#b:781"><span class="id" title="binder">b</span></a> <a id="e:782" class="idref" href="#e:782"><span class="id" title="binder">e</span></a> <a id="a:783" class="idref" href="#a:783"><span class="id" title="binder">a</span></a> <a id="a':784" class="idref" href="#a':784"><span class="id" title="binder">a'</span></a> <a id="v:785" class="idref" href="#v:785"><span class="id" title="binder">v</span></a> <a id="lw:786" class="idref" href="#lw:786"><span class="id" title="binder">lw</span></a> <a id="lw':787" class="idref" href="#lw':787"><span class="id" title="binder">lw'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:786"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:779"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:781"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:782"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:783"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:785"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':787"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':780"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:781"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:782"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':784"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:785"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:786"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:778"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':787"><span class="id" title="variable">lw'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_map:778"><span class="id" title="variable">cur_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hlw'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="z_of_argumentL" class="idref" href="#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> (<a id="lregs:788" class="idref" href="#lregs:788"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:789" class="idref" href="#a:789"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:789"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:788"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_of_argumentL" class="idref" href="#word_of_argumentL"><span class="id" title="definition">word_of_argumentL</span></a> (<a id="lregs:791" class="idref" href="#lregs:791"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:792" class="idref" href="#a:792"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:792"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lregs:791"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addr_of_argumentL" class="idref" href="#addr_of_argumentL"><span class="id" title="definition">addr_of_argumentL</span></a> <a id="lregs:794" class="idref" href="#lregs:794"><span class="id" title="binder">lregs</span></a> <a id="src:795" class="idref" href="#src:795"><span class="id" title="binder">src</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:794"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:795"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="cap_machine.addr_reg.html#z_to_addr"><span class="id" title="abbreviation">z_to_addr</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="otype_of_argumentL" class="idref" href="#otype_of_argumentL"><span class="id" title="definition">otype_of_argumentL</span></a> <a id="lregs:796" class="idref" href="#lregs:796"><span class="id" title="binder">lregs</span></a> <a id="src:797" class="idref" href="#src:797"><span class="id" title="binder">src</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:796"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:797"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#z_to_otype"><span class="id" title="abbreviation">z_to_otype</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_mutable_rangeL" class="idref" href="#is_mutable_rangeL"><span class="id" title="definition">is_mutable_rangeL</span></a> (<a id="lw:798" class="idref" href="#lw:798"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:798"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> | <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="nonZeroL" class="idref" href="#nonZeroL"><span class="id" title="definition">nonZeroL</span></a> (<a id="lw:801" class="idref" href="#lw:801"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:801"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zbool.html#Zneq_bool"><span class="id" title="definition">Zneq_bool</span></a> <span class="id" title="var">n</span> 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealbL" class="idref" href="#is_sealbL"><span class="id" title="definition">is_sealbL</span></a> (<a id="lw:803" class="idref" href="#lw:803"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:803"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealrL" class="idref" href="#is_sealrL"><span class="id" title="definition">is_sealrL</span></a> (<a id="lw:805" class="idref" href="#lw:805"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:805"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealedL" class="idref" href="#is_sealedL"><span class="id" title="definition">is_sealedL</span></a> (<a id="lw:807" class="idref" href="#lw:807"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:807"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">a</span> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_zL" class="idref" href="#is_zL"><span class="id" title="definition">is_zL</span></a> (<a id="lw:809" class="idref" href="#lw:809"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:809"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealed_with_oL" class="idref" href="#is_sealed_with_oL"><span class="id" title="definition">is_sealed_with_oL</span></a> (<a id="lw:811" class="idref" href="#lw:811"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="o:812" class="idref" href="#o:812"><span class="id" title="binder">o</span></a> : <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:811"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o'</span> <span class="id" title="var">sb</span> =&gt; (<a class="idref" href="cap_machine.logical_mapsto.html#o:812"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.addr_reg.html#fc98ca1de87871caf368dfbeb46e594a"><span class="id" title="notation">=?</span></a> <span class="id" title="var">o'</span>)%<span class="id" title="var">ot</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_ne_reg_ne" class="idref" href="#laddr_ne_reg_ne"><span class="id" title="lemma">laddr_ne_reg_ne</span></a> {<a id="lregs:814" class="idref" href="#lregs:814"><span class="id" title="binder">lregs</span></a> : <span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>} {<a id="r1:815" class="idref" href="#r1:815"><span class="id" title="binder">r1</span></a> <a id="r2:816" class="idref" href="#r2:816"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>}<br/>
&nbsp;&nbsp;{<a id="p0:817" class="idref" href="#p0:817"><span class="id" title="binder">p0</span></a> <a id="b0:818" class="idref" href="#b0:818"><span class="id" title="binder">b0</span></a> <a id="e0:819" class="idref" href="#e0:819"><span class="id" title="binder">e0</span></a> <a id="a0:820" class="idref" href="#a0:820"><span class="id" title="binder">a0</span></a> <a id="v0:821" class="idref" href="#v0:821"><span class="id" title="binder">v0</span></a> <a id="p:822" class="idref" href="#p:822"><span class="id" title="binder">p</span></a> <a id="b:823" class="idref" href="#b:823"><span class="id" title="binder">b</span></a> <a id="e:824" class="idref" href="#e:824"><span class="id" title="binder">e</span></a> <a id="a:825" class="idref" href="#a:825"><span class="id" title="binder">a</span></a> <a id="v:826" class="idref" href="#v:826"><span class="id" title="binder">v</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:814"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r1:815"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p0:817"><span class="id" title="variable">p0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b0:818"><span class="id" title="variable">b0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e0:819"><span class="id" title="variable">e0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:820"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:821"><span class="id" title="variable">v0</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:814"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r2:816"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:822"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:823"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:824"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:825"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:826"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:820"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:821"><span class="id" title="variable">v0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:825"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:826"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r1:815"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r2:816"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span> <span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r2</span>)); <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;for&nbsp;the&nbsp;address&nbsp;a.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;lmem&nbsp;might&nbsp;not&nbsp;contain&nbsp;(a,v),<br/>
&nbsp;&nbsp;&nbsp;because&nbsp;lmem&nbsp;is&nbsp;only&nbsp;a&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;actual&nbsp;lmemory.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_addr_local" class="idref" href="#update_version_addr_local"><span class="id" title="definition">update_version_addr_local</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:827" class="idref" href="#lmem:827"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:828" class="idref" href="#a:828"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:829" class="idref" href="#v:829"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:827"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:828"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:829"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:827"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:828"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:829"><span class="id" title="variable">v</span></a> <span class="id" title="var">lw</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:827"><span class="id" title="variable">lmem</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;region&nbsp;for&nbsp;a&nbsp;given&nbsp;lregion.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;it&nbsp;only&nbsp;updates&nbsp;the&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;lmemory,<br/>
&nbsp;&nbsp;&nbsp;which&nbsp;might&nbsp;not&nbsp;contain&nbsp;some&nbsp;of&nbsp;the&nbsp;addresses&nbsp;in&nbsp;la.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_region_local" class="idref" href="#update_version_region_local"><span class="id" title="definition">update_version_region_local</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:830" class="idref" href="#lmem:830"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:831" class="idref" href="#la:831"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:832" class="idref" href="#v:832"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> <a id="a:833" class="idref" href="#a:833"><span class="id" title="binder">a</span></a> <a id="lmem':834" class="idref" href="#lmem':834"><span class="id" title="binder">lmem'</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_local"><span class="id" title="definition">update_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':834"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:833"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:832"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lmem:830"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:831"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;require&nbsp;⊆,&nbsp;because&nbsp;lmem&nbsp;might&nbsp;contain&nbsp;only&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;updated&nbsp;region,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;means&nbsp;that&nbsp;lmem'&nbsp;contains&nbsp;both:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;known&nbsp;from&nbsp;lmem<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;a&nbsp;∈&nbsp;<span class="inlinecode"><span class="id" title="var">b</span>,</span> <span class="inlinecode"><span class="id" title="var">e</span>),</span> <span class="inlinecode"><span class="id" title="var">unknown</span></span> <span class="inlinecode"><span class="id" title="var">from</span></span> <span class="inlinecode"><span class="id" title="var">lmem</span></span>

       <span class="inlinecode"><span class="id" title="var">We</span></span> <span class="inlinecode"><span class="id" title="var">also</span></span> <span class="inlinecode"><span class="id" title="var">require</span></span> <span class="inlinecode"><span class="id" title="var">that</span></span> <span class="inlinecode"><span class="id" title="var">every</span></span> <span class="inlinecode"><span class="id" title="var">addresses</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">the</span></span> <span class="inlinecode"><span class="id" title="var">region</span></span> <span class="inlinecode"><span class="id" title="var">have</span></span> <span class="inlinecode"><span class="id" title="var">actually</span></span> <span class="inlinecode"><span class="id" title="var">been</span></span> <span class="inlinecode"><span class="id" title="var">updated</span>,</span>
       <span class="inlinecode"><span class="id" title="var">although</span></span> <span class="inlinecode"><span class="id" title="var">we</span></span> <span class="inlinecode"><span class="id" title="var">might</span></span> <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">know</span></span> <span class="inlinecode"><span class="id" title="var">their</span></span> <span class="inlinecode"><span class="id" title="var">value</span></span>
 <span class="inlinecode"></span>*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="is_valid_updated_lmemory" class="idref" href="#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:835" class="idref" href="#lmem:835"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:836" class="idref" href="#la:836"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:837" class="idref" href="#v:837"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lmem':838" class="idref" href="#lmem':838"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_local"><span class="id" title="definition">update_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:835"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:836"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:837"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':838"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:839" class="idref" href="#a:839"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem':838"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:839"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:837"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:836"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;might&nbsp;not&nbsp;be&nbsp;what&nbsp;I&nbsp;actually&nbsp;want&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_global_mono_valid" class="idref" href="#update_cur_version_region_global_mono_valid"><span class="id" title="lemma">update_cur_version_region_global_mono_valid</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:840" class="idref" href="#lmem:840"><span class="id" title="binder">lmem</span></a> <a id="lmem':841" class="idref" href="#lmem':841"><span class="id" title="binder">lmem'</span></a> <a id="lm:842" class="idref" href="#lm:842"><span class="id" title="binder">lm</span></a> <a id="lm':843" class="idref" href="#lm':843"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:844" class="idref" href="#vmap:844"><span class="id" title="binder">vmap</span></a> <a id="vmap_mem':845" class="idref" href="#vmap_mem':845"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m':846" class="idref" href="#vmap_m':846"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:847" class="idref" href="#la:847"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:848" class="idref" href="#v:848"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:847"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:849" class="idref" href="#a:849"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:849"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:848"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:844"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:847"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:840"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:842"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:842"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:842"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:844"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:847"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':843"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':846"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:840"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:842"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:844"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:847"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':841"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':845"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:840"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:847"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:848"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':843"><span class="id" title="variable">lm'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;is&nbsp;this&nbsp;definition&nbsp;convenient&nbsp;enough&nbsp;?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;details&nbsp;does&nbsp;not&nbsp;really&nbsp;matter,&nbsp;as&nbsp;soon&nbsp;as&nbsp;the&nbsp;following&nbsp;lemma<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;proven.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;TODO&nbsp;move&nbsp;somewhere&nbsp;?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_word_region" class="idref" href="#update_version_word_region"><span class="id" title="definition">update_version_word_region</span></a> (<a id="lmem:850" class="idref" href="#lmem:850"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lwsrc:851" class="idref" href="#lwsrc:851"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:851"><span class="id" title="variable">lwsrc</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="keyword">fun</span> <a id="a:853" class="idref" href="#a:853"><span class="id" title="binder"><span id="a:855" class="id">a</span></span></a> <a id="lmem':854" class="idref" href="#lmem':854"><span class="id" title="binder"><span id="lmem':856" class="id">lmem'</span></span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_local"><span class="id" title="definition">update_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':854"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:853"><span class="id" title="variable">a</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:850"><span class="id" title="variable">lmem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:850"><span class="id" title="variable">lmem</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_implies_next_version_gen&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(lm&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(cur_map&nbsp;cur_map':&nbsp;VMap)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(∀&nbsp;a&nbsp;:&nbsp;Addr,&nbsp;a&nbsp;∈&nbsp;la&nbsp;→&nbsp;cur_map&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lm&nbsp;cur_map&nbsp;la&nbsp;=&nbsp;(lm',&nbsp;cur_map')&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;foldr&nbsp;(λ&nbsp;(a0&nbsp;:&nbsp;Addr)&nbsp;(lmem'&nbsp;:&nbsp;LMem),&nbsp;update_version_addr&nbsp;lmem'&nbsp;a0&nbsp;v)&nbsp;lm&nbsp;la&nbsp;=&nbsp;lm'.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lm&nbsp;lm'&nbsp;cur_map&nbsp;cur_map'&nbsp;v.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">Hla</span></span>;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;Hcur_addr&nbsp;Hupd.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;by&nbsp;cbn&nbsp;in&nbsp;*;&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;NoDup_cons&nbsp;in&nbsp;HNoDup&nbsp;;&nbsp;destruct&nbsp;HNoDup&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Ha_notin_la</span></span> <span class="inlinecode"><span class="id" title="var">HNoDup</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(Hcur_a&nbsp;:&nbsp;cur_map&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;apply&nbsp;Hcur_addr,&nbsp;elem_of_cons;&nbsp;by&nbsp;left.&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(Hcur_addr'&nbsp;:&nbsp;∀&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;a0&nbsp;∈&nbsp;la&nbsp;→&nbsp;cur_map&nbsp;!!&nbsp;a0&nbsp;=&nbsp;Some&nbsp;v).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;intros&nbsp;a'&nbsp;Hin.&nbsp;apply&nbsp;Hcur_addr,&nbsp;elem_of_cons;&nbsp;by&nbsp;right.&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;-/(update_cur_version_region&nbsp;lm&nbsp;cur_map&nbsp;la)&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(update_cur_version_region&nbsp;lm&nbsp;cur_map&nbsp;la)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lm0</span></span> <span class="inlinecode"><span class="id" title="var">cur_map0</span></span>&nbsp;eqn:Hupd0.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;bind_Some&nbsp;in&nbsp;Hupd.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd&nbsp;as&nbsp;(&nbsp;<span class="inlinecode"><span class="id" title="var">lmem0</span></span> <span class="inlinecode"><span class="id" title="var">cur_map0</span></span>&nbsp;&amp;&nbsp;Hupd&nbsp;&amp;&nbsp;Hupd0&nbsp;).&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;Hla&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cbn.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opose&nbsp;proof&nbsp;(&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_region_notin_preserves_cur_map&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lm&nbsp;lm0&nbsp;cur_map&nbsp;cur_map0&nbsp;la&nbsp;a&nbsp;v&nbsp;_&nbsp;_&nbsp;_)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;Hcur0_a;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;Hcur0_a&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm0&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw0</span>|</span>&nbsp;eqn:Hlw0;&nbsp;simplify_eq;&nbsp;first&nbsp;done.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion&nbsp;Hupd&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;Hupd0&nbsp;as&nbsp;(lm0&nbsp;&amp;&nbsp;Hlm0&nbsp;&amp;&nbsp;?)&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Admitted.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_implies_next_version&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(lm&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(cur_map&nbsp;cur_map':&nbsp;VMap)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;(LCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;cur_map&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lm&nbsp;cur_map&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lm',&nbsp;cur_map')&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_word_region&nbsp;lm&nbsp;(LCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;=&nbsp;lm'.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hcur_word&nbsp;Hupd.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_region_implies_next_version_gen;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;apply&nbsp;finz_seq_between_NoDup.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="next_version_lword" class="idref" href="#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> (<a id="lw:857" class="idref" href="#lw:857"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:857"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:857"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_valid_mono" class="idref" href="#update_cur_version_region_valid_mono"><span class="id" title="lemma">update_cur_version_region_valid_mono</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:859" class="idref" href="#lmem:859"><span class="id" title="binder">lmem</span></a> <a id="lmem':860" class="idref" href="#lmem':860"><span class="id" title="binder">lmem'</span></a> <a id="lm:861" class="idref" href="#lm:861"><span class="id" title="binder">lm</span></a> <a id="lm':862" class="idref" href="#lm':862"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:863" class="idref" href="#vmap:863"><span class="id" title="binder">vmap</span></a> <a id="vmap_mem':864" class="idref" href="#vmap_mem':864"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m':865" class="idref" href="#vmap_m':865"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:866" class="idref" href="#la:866"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:867" class="idref" href="#v:867"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:866"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:868" class="idref" href="#a:868"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:868"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:867"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:863"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:866"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:859"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:861"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:859"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:861"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:863"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:866"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':860"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':864"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:861"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:863"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:866"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':862"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':865"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:859"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:866"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:867"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':860"><span class="id" title="variable">lmem'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_inter" class="idref" href="#update_cur_version_inter"><span class="id" title="lemma">update_cur_version_inter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:869" class="idref" href="#lmem:869"><span class="id" title="binder">lmem</span></a> <a id="lmem0:870" class="idref" href="#lmem0:870"><span class="id" title="binder">lmem0</span></a> <a id="lmem':871" class="idref" href="#lmem':871"><span class="id" title="binder">lmem'</span></a> <a id="lm:872" class="idref" href="#lm:872"><span class="id" title="binder">lm</span></a> <a id="lm0:873" class="idref" href="#lm0:873"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="vmap_mem:874" class="idref" href="#vmap_mem:874"><span class="id" title="binder">vmap_mem</span></a> <a id="vmap_mem0:875" class="idref" href="#vmap_mem0:875"><span class="id" title="binder">vmap_mem0</span></a> <a id="vmap_mem':876" class="idref" href="#vmap_mem':876"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m:877" class="idref" href="#vmap_m:877"><span class="id" title="binder">vmap_m</span></a> <a id="vmap_m0:878" class="idref" href="#vmap_m0:878"><span class="id" title="binder">vmap_m0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <a id="a0:879" class="idref" href="#a0:879"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> ) (<a id="la:880" class="idref" href="#la:880"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a0:879"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:880"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:880"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:869"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:872"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:874"><span class="id" title="variable">vmap_mem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:877"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:869"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:872"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:874"><span class="id" title="variable">vmap_mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:880"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem0:870"><span class="id" title="variable">lmem0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem0:875"><span class="id" title="variable">vmap_mem0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:872"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:877"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:880"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm0:873"><span class="id" title="variable">lm0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m0:878"><span class="id" title="variable">vmap_m0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:870"><span class="id" title="variable">lmem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:872"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem0:875"><span class="id" title="variable">vmap_mem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:879"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':871"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':876"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:870"><span class="id" title="variable">lmem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:873"><span class="id" title="variable">lm0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem0:875"><span class="id" title="variable">vmap_mem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:879"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':871"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':876"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem0</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm0</span> <span class="id" title="var">vmap_mem</span> <span class="id" title="var">vmap_mem0</span> <span class="id" title="var">vmap_mem'</span> <span class="id" title="var">vmap_m</span> <span class="id" title="var">vmap_m0</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha0_notin_la</span> <span class="id" title="var">HNoDup_la</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hvmap_incl</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="var">Hupd_lmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">HNoDup_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha0_notin_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha0_notin_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha0_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem1</span> &amp; <span class="id" title="var">vmap_mem1</span> &amp; <span class="id" title="var">Hupd_lmem</span> &amp; <span class="id" title="var">Hupd_lmem1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm1</span> &amp; <span class="id" title="var">vmap_m1</span> &amp; <span class="id" title="var">Hupd_lm</span> &amp; <span class="id" title="var">Hupd_lm1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hupd_lmem0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va0</span>|] ; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_region_local_preserves_content_lmem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">a0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_addr_local_preserves_content_lmem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">a0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_inter_incl_vmap" class="idref" href="#update_cur_version_addr_inter_incl_vmap"><span class="id" title="lemma">update_cur_version_addr_inter_incl_vmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:881" class="idref" href="#lmem:881"><span class="id" title="binder">lmem</span></a> <a id="lmem':882" class="idref" href="#lmem':882"><span class="id" title="binder">lmem'</span></a> <a id="lm:883" class="idref" href="#lm:883"><span class="id" title="binder">lm</span></a> <a id="lm':884" class="idref" href="#lm':884"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap_mem:885" class="idref" href="#vmap_mem:885"><span class="id" title="binder">vmap_mem</span></a> <a id="vmap_mem':886" class="idref" href="#vmap_mem':886"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m:887" class="idref" href="#vmap_m:887"><span class="id" title="binder">vmap_m</span></a> <a id="vmap_m':888" class="idref" href="#vmap_m':888"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:889" class="idref" href="#a:889"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:881"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:883"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:885"><span class="id" title="variable">vmap_mem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:887"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:881"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:883"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:885"><span class="id" title="variable">vmap_mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:889"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':882"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':886"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:883"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:887"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:889"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':884"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':888"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':886"><span class="id" title="variable">vmap_mem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':888"><span class="id" title="variable">vmap_m'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hvmap_incl</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_mem_a</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem_a</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_m_a</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_inter_incl_lmem" class="idref" href="#update_cur_version_addr_inter_incl_lmem"><span class="id" title="lemma">update_cur_version_addr_inter_incl_lmem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:890" class="idref" href="#lmem:890"><span class="id" title="binder">lmem</span></a> <a id="lmem':891" class="idref" href="#lmem':891"><span class="id" title="binder">lmem'</span></a> <a id="lm:892" class="idref" href="#lm:892"><span class="id" title="binder">lm</span></a> <a id="lm':893" class="idref" href="#lm':893"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap_mem:894" class="idref" href="#vmap_mem:894"><span class="id" title="binder">vmap_mem</span></a> <a id="vmap_mem':895" class="idref" href="#vmap_mem':895"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m:896" class="idref" href="#vmap_m:896"><span class="id" title="binder">vmap_m</span></a> <a id="vmap_m':897" class="idref" href="#vmap_m':897"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:898" class="idref" href="#a:898"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:890"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:892"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:894"><span class="id" title="variable">vmap_mem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:896"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="v:899" class="idref" href="#v:899"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:898"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:899"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:896"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:892"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:898"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:899"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:890"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:892"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:894"><span class="id" title="variable">vmap_mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:898"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':891"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':895"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:892"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:896"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:898"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':893"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':897"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':891"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':893"><span class="id" title="variable">lm'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hvmap_incl</span> <span class="id" title="var">Hmaxv_a</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_mem_a</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem_a</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_m_a</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlm_a</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_inter_incl" class="idref" href="#update_cur_version_addr_inter_incl"><span class="id" title="lemma">update_cur_version_addr_inter_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:900" class="idref" href="#lmem:900"><span class="id" title="binder">lmem</span></a> <a id="lmem':901" class="idref" href="#lmem':901"><span class="id" title="binder">lmem'</span></a> <a id="lm:902" class="idref" href="#lm:902"><span class="id" title="binder">lm</span></a> <a id="lm':903" class="idref" href="#lm':903"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap_mem:904" class="idref" href="#vmap_mem:904"><span class="id" title="binder">vmap_mem</span></a> <a id="vmap_mem':905" class="idref" href="#vmap_mem':905"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m:906" class="idref" href="#vmap_m:906"><span class="id" title="binder">vmap_m</span></a> <a id="vmap_m':907" class="idref" href="#vmap_m':907"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:908" class="idref" href="#a:908"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:900"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:902"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:904"><span class="id" title="variable">vmap_mem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:906"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="v:909" class="idref" href="#v:909"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:908"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:909"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:906"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:902"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:908"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:909"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:900"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:902"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:904"><span class="id" title="variable">vmap_mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:908"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':901"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':905"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:902"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:906"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:908"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':903"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':907"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':901"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':903"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':905"><span class="id" title="variable">vmap_mem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':907"><span class="id" title="variable">vmap_m'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hvmap_incl</span> <span class="id" title="var">Hmaxv_a</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_mem_a</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem_a</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_m_a</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlm_a</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_inter_incl" class="idref" href="#update_cur_version_region_inter_incl"><span class="id" title="lemma">update_cur_version_region_inter_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:910" class="idref" href="#lmem:910"><span class="id" title="binder">lmem</span></a> <a id="lmem':911" class="idref" href="#lmem':911"><span class="id" title="binder">lmem'</span></a> <a id="lm:912" class="idref" href="#lm:912"><span class="id" title="binder">lm</span></a> <a id="lm':913" class="idref" href="#lm':913"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap_mem:914" class="idref" href="#vmap_mem:914"><span class="id" title="binder">vmap_mem</span></a> <a id="vmap_mem':915" class="idref" href="#vmap_mem':915"><span class="id" title="binder">vmap_mem'</span></a> <a id="vmap_m:916" class="idref" href="#vmap_m:916"><span class="id" title="binder">vmap_m</span></a> <a id="vmap_m':917" class="idref" href="#vmap_m':917"><span class="id" title="binder">vmap_m'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:918" class="idref" href="#la:918"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:918"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:910"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:912"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:914"><span class="id" title="variable">vmap_mem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:916"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:919" class="idref" href="#a:919"><span class="id" title="binder">a</span></a> =&gt; (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="v:920" class="idref" href="#v:920"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:919"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:920"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:916"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:912"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:919"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:920"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:918"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:910"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:912"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem:914"><span class="id" title="variable">vmap_mem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:918"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':911"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':915"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:912"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m:916"><span class="id" title="variable">vmap_m</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:918"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':913"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':917"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':911"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':913"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':915"><span class="id" title="variable">vmap_mem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':917"><span class="id" title="variable">vmap_m'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap_mem</span> <span class="id" title="var">vmap_mem'</span> <span class="id" title="var">vmap_m</span> <span class="id" title="var">vmap_m'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hvmap_incl</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hupd_lm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">simplify_map_eq</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="var">set_solver</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">HNoDup_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaxv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaxv</span> <span class="id" title="var">Hmaxv_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem0</span> &amp; <span class="id" title="var">vmap_mem0</span> &amp; <span class="id" title="var">Hupd_lmem</span> &amp; <span class="id" title="var">Hupd_lmem0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd_lm</span> &amp; <span class="id" title="var">Hupd_lm0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;assert&nbsp;(vmap_mem0&nbsp;⊆&nbsp;vmap_m0)&nbsp;as&nbsp;Hvmap0_incl&nbsp;by&nbsp;(eapply&nbsp;IHla;&nbsp;eauto).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lm0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">vmap_mem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">vmap_m0</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Hlmem0_incl</span> <span class="id" title="var">Hvmap0_incl</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_inter_incl"><span class="id" title="axiom">update_cur_version_addr_inter_incl</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hcur_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_region_local_preserves_content_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hlmem0_incl</span> <span class="id" title="var">Hvmap0_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_inter"><span class="id" title="axiom">update_cur_version_inter</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_inter_incl_vmap'" class="idref" href="#update_cur_version_region_inter_incl_vmap'"><span class="id" title="lemma">update_cur_version_region_inter_incl_vmap'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lmem:921" class="idref" href="#lmem:921"><span class="id" title="binder">lmem</span></a> <a id="lmem':922" class="idref" href="#lmem':922"><span class="id" title="binder">lmem'</span></a> <a id="lm:923" class="idref" href="#lm:923"><span class="id" title="binder">lm</span></a> <a id="lm':924" class="idref" href="#lm':924"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:925" class="idref" href="#vmap:925"><span class="id" title="binder">vmap</span></a> <a id="vmap_m':926" class="idref" href="#vmap_m':926"><span class="id" title="binder">vmap_m'</span></a> <a id="vmap_mem':927" class="idref" href="#vmap_mem':927"><span class="id" title="binder">vmap_mem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:928" class="idref" href="#la:928"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="a0:929" class="idref" href="#a0:929"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> ):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:928"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a0:929"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:928"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:923"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:925"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:928"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':924"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':926"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:921"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:923"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:925"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:928"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':922"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':927"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':927"><span class="id" title="variable">vmap_mem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:929"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':926"><span class="id" title="variable">vmap_m'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:929"><span class="id" title="variable">a0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap_m'</span> <span class="id" title="var">vmap_mem'</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha0_notint_la</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="var">Hupd_lmem</span> ; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">HNoDup_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha0_notint_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha0_notint_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha0_neq_a</span> <span class="id" title="var">Ha0_notin_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd_lm</span> &amp; <span class="id" title="var">Hupd_lm0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem0</span> &amp; <span class="id" title="var">vmap_mem0</span> &amp; <span class="id" title="var">Hupd_lmem</span> &amp; <span class="id" title="var">Hupd_lmem0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_m'</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va0</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlva0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">vmap_m'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlva0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlva0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlva0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_global_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_global_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem'</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va0'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlva0'</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_addr_global_notin_preserves_cur_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_notin_preserves_cur_2"><span class="id" title="axiom">update_cur_version_region_global_notin_preserves_cur_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_addr_local_notin_preserves_cur_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">eauto</span> |]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlva0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_heap_lmem_version_update" class="idref" href="#gen_heap_lmem_version_update"><span class="id" title="lemma">gen_heap_lmem_version_update</span></a> `{<a id="HmemG:931" class="idref" href="#HmemG:931"><span class="id" title="binder">HmemG</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#memG"><span class="id" title="class">memG</span></a> <a id="024ae0b42718a7e315e037c5005f42fa" class="idref" href="#024ae0b42718a7e315e037c5005f42fa"><span class="id" title="binder">Σ</span></a>, <a id="HregG:932" class="idref" href="#HregG:932"><span class="id" title="binder">HregG</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#regG"><span class="id" title="class">regG</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#024ae0b42718a7e315e037c5005f42fa"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lm:933" class="idref" href="#lm:933"><span class="id" title="binder">lm</span></a> <a id="lmem:934" class="idref" href="#lmem:934"><span class="id" title="binder">lmem</span></a> <a id="lm':935" class="idref" href="#lm':935"><span class="id" title="binder">lm'</span></a> <a id="lmem':936" class="idref" href="#lmem':936"><span class="id" title="binder">lmem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:937" class="idref" href="#vmap:937"><span class="id" title="binder">vmap</span></a> <a id="vmap_m':938" class="idref" href="#vmap_m':938"><span class="id" title="binder">vmap_m'</span></a> <a id="vmap_mem':939" class="idref" href="#vmap_mem':939"><span class="id" title="binder">vmap_mem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:940" class="idref" href="#la:940"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:941" class="idref" href="#v:941"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:940"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:934"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:933"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local"><span class="id" title="definition">update_cur_version_region_local</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:933"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:937"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:940"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm':935"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_m':938"><span class="id" title="variable">vmap_m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global"><span class="id" title="definition">update_cur_version_region_global</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:934"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:933"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:937"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:940"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':936"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap_mem':939"><span class="id" title="variable">vmap_mem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:942" class="idref" href="#a:942"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:933"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:942"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:941"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:940"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:943" class="idref" href="#a:943"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:943"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:941"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:937"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:940"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:933"><span class="id" title="variable">lm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:944" class="idref" href="#k:944"><span class="id" title="binder"><span id="k:945" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:946" class="idref" href="#y:946"><span class="id" title="binder"><span id="y:947" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:934"><span class="id" title="variable">lmem</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">mapsto</span> <a class="idref" href="cap_machine.logical_mapsto.html#k:944"><span class="id" title="variable">k</span></a> (<span class="id" title="constructor">DfracOwn</span> 1) <a class="idref" href="cap_machine.logical_mapsto.html#y:946"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">==∗</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':935"><span class="id" title="variable">lm'</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:948" class="idref" href="#k:948"><span class="id" title="binder"><span id="k:949" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:950" class="idref" href="#y:950"><span class="id" title="binder"><span id="y:951" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':936"><span class="id" title="variable">lmem'</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">mapsto</span> <a class="idref" href="cap_machine.logical_mapsto.html#k:948"><span class="id" title="variable">k</span></a> (<span class="id" title="constructor">DfracOwn</span> 1) <a class="idref" href="cap_machine.logical_mapsto.html#y:950"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lm'</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap_m'</span> <span class="id" title="var">vmap_mem'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lm'</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap_m'</span> <span class="id" title="var">vmap_mem'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="var">iIntros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">lm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lm'</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap_m'</span> <span class="id" title="var">vmap_mem'</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">HNoDup_la</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="var">Hmaxv_lm</span> <span class="id" title="var">Hcur_lm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Hgen Hmem".<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;no&nbsp;addresses&nbsp;updated&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span>, <span class="id" title="var">Hupd_lmem</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_not_la</span> <span class="id" title="var">HNoDup_la</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hcur_a_lm</span> &amp; <span class="id" title="var">Hcur_lm</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaxv_lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmaxv_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hmaxv_a</span> &amp; <span class="id" title="var">Hmaxv_lm</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_cons"><span class="id" title="axiom">update_cur_version_region_local_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap_m0</span> &amp; <span class="id" title="var">Hupd_lm</span> &amp; <span class="id" title="var">Hupd_lm0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_global_cons"><span class="id" title="axiom">update_cur_version_region_global_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd_lmem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem0</span> &amp; <span class="id" title="var">vmap_mem0</span> &amp; <span class="id" title="var">Hupd_lmem</span> &amp; <span class="id" title="var">Hupd_lmem0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_inter"><span class="id" title="axiom">update_cur_version_inter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem0</span> ; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lm0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">vmap_mem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">vmap_m0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlmem0_incl</span> <span class="id" title="var">Hvmap0_incl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_inter_incl"><span class="id" title="axiom">update_cur_version_region_inter_incl</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hcur_a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> <span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaxv_lm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">opose</span> <span class="id" title="var">proof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_inter_incl_vmap"><span class="id" title="axiom">update_cur_version_addr_inter_incl_vmap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hupd_lmem0</span> <span class="id" title="var">Hupd_lm0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hvmap_incl</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_global"><span class="id" title="definition">update_cur_version_addr_global</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_local"><span class="id" title="definition">update_cur_version_addr_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap_mem0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hvmap_mem0_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_inter_incl_vmap'"><span class="id" title="axiom">update_cur_version_region_inter_incl_vmap'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem0_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvmap_mem0_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lm0</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span> <span class="id" title="notation">with</span> "Hgen"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_notin_preserves_cur_1"><span class="id" title="axiom">update_cur_version_region_local_notin_preserves_cur_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a_lm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem0_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">vmap_m0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hvmap_mem0_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a_lm</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlm0_a</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span> <span class="id" title="notation">with</span> "Hgen"<span class="id" title="notation">)</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lm0</span> <span class="id" title="var">lmem0</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap_m0</span> <span class="id" title="var">vmap_mem0</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">HNoDup_la</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hupd_lm</span> <span class="id" title="var">Hupd_lmem</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span> <span class="id" title="notation">with</span> "Hgen Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "&gt;[Hgen Hmem]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_local_preserves_content_lmem"><span class="id" title="axiom">update_cur_version_region_local_preserves_content_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaxv_a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="notation">((</span><span class="id" title="lemma">gen_heap_alloc</span> <span class="id" title="var">lm0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">lw</span><span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hgen"<span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "(Hgen &amp; Ha &amp; _)"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_lmemory_lword"><span class="id" title="definition">update_lmemory_lword</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span> ; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_insert</span> <span class="id" title="notation">with</span> "[Hmem Ha]"<span class="id" title="notation">)</span>; <span class="id" title="var">last</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
