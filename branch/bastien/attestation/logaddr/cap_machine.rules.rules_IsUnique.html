<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.rules.rules_IsUnique</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">invariants</span> <span class="id" title="library">gen_heap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">ectx_lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">frac</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="cap_machine.rules.rules_base.html#"><span class="id" title="library">rules_base</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="cap_lang_rules" class="idref" href="#cap_lang_rules"><span class="id" title="section">cap_lang_rules</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">memG</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="H:2" class="id">Σ</span></span></a>, <a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">regG</span></a> <a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">Σ</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H1:4" class="idref" href="#H1:4"><span class="id" title="binder">MachineParameters</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#c83beb9a67378c40938d18b1e249d990"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> σ : <a class="idref" href="cap_machine.cap_lang.html#ExecConf"><span class="id" title="record">ExecConf</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">c</span> : <a class="idref" href="cap_machine.cap_lang.html#expr"><span class="id" title="inductive">cap_lang.expr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">r</span> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">lw</span>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">reg</span> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">lregs</span> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">mem</span> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">lmem</span> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;and&nbsp;version&nbsp;are&nbsp;equals&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="overlap_lwords" class="idref" href="#overlap_lwords"><span class="id" title="definition">overlap_lwords</span></a> (<a id="lw1:5" class="idref" href="#lw1:5"><span class="id" title="binder">lw1</span></a> <a id="lw2:6" class="idref" href="#lw2:6"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw1:5"><span class="id" title="variable">lw1</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw2:6"><span class="id" title="variable">lw2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;all&nbsp;addresses&nbsp;in&nbsp;the&nbsp;given&nbsp;region,&nbsp;update&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;address&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="update_version" class="idref" href="#update_version"><span class="id" title="definition">update_version</span></a> (<a id="lmem:7" class="idref" href="#lmem:7"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="region:8" class="idref" href="#region:8"><span class="id" title="binder">region</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="old_v:9" class="idref" href="#old_v:9"><span class="id" title="binder">old_v</span></a> <a id="new_v:10" class="idref" href="#new_v:10"><span class="id" title="binder">new_v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">foldl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="opt_lmem':11" class="idref" href="#opt_lmem':11"><span class="id" title="binder">opt_lmem'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:12" class="idref" href="#a:12"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="lmem':13" class="idref" href="#lmem':13"><span class="id" title="binder">lmem'</span></a> <span class="id" title="notation">←</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#opt_lmem':11"><span class="id" title="variable">opt_lmem'</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="lw:14" class="idref" href="#lw:14"><span class="id" title="binder">lw</span></a> <span class="id" title="notation">←</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':13"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:12"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#old_v:9"><span class="id" title="variable">old_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:12"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#new_v:10"><span class="id" title="variable">new_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:14"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:7"><span class="id" title="variable">lmem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#region:8"><span class="id" title="variable">region</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="IsUnique_fail" class="idref" href="#IsUnique_fail"><span class="id" title="definition, inductive"><span id="IsUnique_fail_ind" class="id"><span id="IsUnique_fail_sind" class="id">IsUnique_fail</span></span></span></a> (<a id="lregs:15" class="idref" href="#lregs:15"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:16" class="idref" href="#lmem:16"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="dst:17" class="idref" href="#dst:17"><span class="id" title="binder">dst</span></a> <a id="src:18" class="idref" href="#src:18"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="IsUnique_fail_cap" class="idref" href="#IsUnique_fail_cap"><span class="id" title="constructor">IsUnique_fail_cap</span></a> (<a id="lwsrc:21" class="idref" href="#lwsrc:21"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:21"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:21"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail:19"><span class="id" title="inductive">IsUnique_fail</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:16"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:17"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a><br/>
<br/>
&nbsp;&nbsp;| <a id="IsUnique_fail_invalid_PC_true" class="idref" href="#IsUnique_fail_invalid_PC_true"><span class="id" title="constructor">IsUnique_fail_invalid_PC_true</span></a> (<a id="lwsrc:22" class="idref" href="#lwsrc:22"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:23" class="idref" href="#p:23"><span class="id" title="binder">p</span></a> <a id="b:24" class="idref" href="#b:24"><span class="id" title="binder">b</span></a> <a id="e:25" class="idref" href="#e:25"><span class="id" title="binder">e</span></a> <a id="a:26" class="idref" href="#a:26"><span class="id" title="binder">a</span></a> <a id="v:27" class="idref" href="#v:27"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:22"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:22"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:23"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:24"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:25"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:26"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:27"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:17"><span class="id" title="variable">dst</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span> <span class="id" title="notation">src</span> <span class="id" title="notation">:=</span> <span class="id" title="notation">LCap</span> <span class="id" title="notation">p</span> <span class="id" title="notation">b</span> <span class="id" title="notation">e</span> <span class="id" title="notation">a</span> <span class="id" title="notation">(</span><span class="id" title="notation">v</span><span class="id" title="notation">+1)</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail:19"><span class="id" title="inductive">IsUnique_fail</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:16"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:17"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a><br/>
<br/>
&nbsp;&nbsp;| <a id="IsUnique_fail_invalid_PC_false" class="idref" href="#IsUnique_fail_invalid_PC_false"><span class="id" title="constructor">IsUnique_fail_invalid_PC_false</span></a> (<a id="lwsrc:28" class="idref" href="#lwsrc:28"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:28"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:17"><span class="id" title="variable">dst</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lregs</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail:19"><span class="id" title="inductive">IsUnique_fail</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:15"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:16"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:17"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:18"><span class="id" title="variable">src</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="unique_in_memoryL" class="idref" href="#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> (<a id="lmem:29" class="idref" href="#lmem:29"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lwsrc:30" class="idref" href="#lwsrc:30"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="v:31" class="idref" href="#v:31"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="la:32" class="idref" href="#la:32"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:29"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:32"><span class="id" title="variable">la</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#overlap_lwords"><span class="id" title="definition">overlap_lwords</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:30"><span class="id" title="variable">lwsrc</span></a> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> <a class="idref" href="cap_machine.addr_reg.html#all_memory"><span class="id" title="definition">all_memory</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:31"><span class="id" title="variable">v</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="unique_in_registersL" class="idref" href="#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a>  (<a id="lregs:33" class="idref" href="#lregs:33"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lwsrc:34" class="idref" href="#lwsrc:34"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="src:35" class="idref" href="#src:35"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="r:36" class="idref" href="#r:36"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:33"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:36"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:36"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:35"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#overlap_lwords"><span class="id" title="definition">overlap_lwords</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:34"><span class="id" title="variable">lwsrc</span></a> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.addr_reg.html#all_registers"><span class="id" title="definition">all_registers</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="unique_in_machineL" class="idref" href="#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> (<a id="lregs:37" class="idref" href="#lregs:37"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:38" class="idref" href="#lmem:38"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lwsrc:39" class="idref" href="#lwsrc:39"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="src:40" class="idref" href="#src:40"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="v:41" class="idref" href="#v:41"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="full_lregs:42" class="idref" href="#full_lregs:42"><span class="id" title="binder">full_lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="full_lmem:43" class="idref" href="#full_lmem:43"><span class="id" title="binder">full_lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE&nbsp;We&nbsp;need&nbsp;to&nbsp;consider&nbsp;any&nbsp;/compatible/&nbsp;logical&nbsp;registers/memory<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;such&nbsp;that,&nbsp;the&nbsp;given&nbsp;logical&nbsp;state&nbsp;in&nbsp;included&nbsp;in.&nbsp;This&nbsp;way,&nbsp;although&nbsp;we<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;working&nbsp;on&nbsp;a&nbsp;local&nbsp;view,&nbsp;the&nbsp;sweep&nbsp;is&nbsp;over&nbsp;any&nbsp;bigger<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logical&nbsp;register/memory.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:37"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#full_lregs:42"><span class="id" title="variable">full_lregs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:38"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#full_lmem:43"><span class="id" title="variable">full_lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#full_lmem:43"><span class="id" title="variable">full_lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:39"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:41"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#full_lregs:42"><span class="id" title="variable">full_lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:39"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:40"><span class="id" title="variable">src</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;lemmas&nbsp;to&nbsp;express&nbsp;<span class="inlinecode"><span class="id" title="var">unique_in_</span>*<span class="id" title="var">L</span></span>&nbsp;in&nbsp;terms&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">unique_in_</span>*</span>&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_weaken" class="idref" href="#unique_in_machineL_weaken"><span class="id" title="lemma">unique_in_machineL_weaken</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lregs:44" class="idref" href="#lregs:44"><span class="id" title="binder">lregs</span></a> <a id="lregs':45" class="idref" href="#lregs':45"><span class="id" title="binder">lregs'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:46" class="idref" href="#lmem:46"><span class="id" title="binder">lmem</span></a> <a id="lmem':47" class="idref" href="#lmem':47"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lwsrc:48" class="idref" href="#lwsrc:48"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="src:49" class="idref" href="#src:49"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="v:50" class="idref" href="#v:50"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':45"><span class="id" title="variable">lregs'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:44"><span class="id" title="variable">lregs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':47"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:46"><span class="id" title="variable">lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:44"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:46"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:48"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:49"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:50"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':45"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':47"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:48"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:49"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:50"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="not_unique_in_machineL_weaken" class="idref" href="#not_unique_in_machineL_weaken"><span class="id" title="lemma">not_unique_in_machineL_weaken</span></a> (<a id="lregs:51" class="idref" href="#lregs:51"><span class="id" title="binder">lregs</span></a> <a id="lregs':52" class="idref" href="#lregs':52"><span class="id" title="binder">lregs'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:53" class="idref" href="#lmem:53"><span class="id" title="binder">lmem</span></a> <a id="lmem':54" class="idref" href="#lmem':54"><span class="id" title="binder">lmem'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="p:55" class="idref" href="#p:55"><span class="id" title="binder">p</span></a> <a id="b:56" class="idref" href="#b:56"><span class="id" title="binder">b</span></a> <a id="e:57" class="idref" href="#e:57"><span class="id" title="binder">e</span></a> <a id="a:58" class="idref" href="#a:58"><span class="id" title="binder">a</span></a> <a id="v:59" class="idref" href="#v:59"><span class="id" title="binder">v</span></a> <a id="src:60" class="idref" href="#src:60"><span class="id" title="binder">src</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':52"><span class="id" title="variable">lregs'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:51"><span class="id" title="variable">lregs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':54"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:53"><span class="id" title="variable">lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:51"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:53"><span class="id" title="variable">lmem</span></a>  (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:55"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:56"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:57"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:58"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:59"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:60"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:59"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':52"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':54"><span class="id" title="variable">lmem'</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:55"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:56"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:57"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:58"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:59"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:60"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:59"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="IsUnique_spec" class="idref" href="#IsUnique_spec"><span class="id" title="definition, inductive"><span id="IsUnique_spec_ind" class="id"><span id="IsUnique_spec_sind" class="id">IsUnique_spec</span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lregs:61" class="idref" href="#lregs:61"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:62" class="idref" href="#lmem:62"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="dst:63" class="idref" href="#dst:63"><span class="id" title="binder">dst</span></a> <a id="src:64" class="idref" href="#src:64"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lregs':65" class="idref" href="#lregs':65"><span class="id" title="binder">lregs'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem':66" class="idref" href="#lmem':66"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <a class="idref" href="cap_machine.cap_lang.html#val"><span class="id" title="inductive">cap_lang.val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
<br/>
&nbsp;&nbsp;| <a id="IsUnique_success_true" class="idref" href="#IsUnique_success_true"><span class="id" title="constructor">IsUnique_success_true</span></a> (<a id="lwsrc:69" class="idref" href="#lwsrc:69"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:70" class="idref" href="#p:70"><span class="id" title="binder">p</span></a> <a id="b:71" class="idref" href="#b:71"><span class="id" title="binder">b</span></a> <a id="e:72" class="idref" href="#e:72"><span class="id" title="binder">e</span></a> <a id="a:73" class="idref" href="#a:73"><span class="id" title="binder">a</span></a> <a id="v:74" class="idref" href="#v:74"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:69"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:69"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:70"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:71"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:72"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:73"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:74"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;check&nbsp;if&nbsp;the&nbsp;words&nbsp;overlap&nbsp;only&nbsp;if&nbsp;the&nbsp;versions&nbsp;matches&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:69"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:74"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;update&nbsp;the&nbsp;region&nbsp;of&nbsp;memory&nbsp;with&nbsp;the&nbsp;new&nbsp;version&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#update_version"><span class="id" title="definition">update_version</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:71"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:72"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:74"><span class="id" title="variable">v</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:74"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span> <span class="id" title="notation">src</span> <span class="id" title="notation">:=</span> <span class="id" title="notation">LCap</span> <span class="id" title="notation">p</span> <span class="id" title="notation">b</span> <span class="id" title="notation">e</span> <span class="id" title="notation">a</span> <span class="id" title="notation">(</span><span class="id" title="notation">v</span><span class="id" title="notation">+1)</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_spec:67"><span class="id" title="inductive">IsUnique_spec</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><br/>
<br/>
&nbsp;&nbsp;| <a id="IsUnique_success_false" class="idref" href="#IsUnique_success_false"><span class="id" title="constructor">IsUnique_success_false</span></a> (<a id="lwsrc:75" class="idref" href="#lwsrc:75"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:76" class="idref" href="#p:76"><span class="id" title="binder">p</span></a> <a id="b:77" class="idref" href="#b:77"><span class="id" title="binder">b</span></a> <a id="e:78" class="idref" href="#e:78"><span class="id" title="binder">e</span></a> <a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> <a id="v:80" class="idref" href="#v:80"><span class="id" title="binder">v</span></a> :<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:75"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:75"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:76"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:77"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:78"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:80"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;it&nbsp;exists&nbsp;a&nbsp;word&nbsp;in&nbsp;the&nbsp;memory&nbsp;that&nbsp;overlaps&nbsp;somewhere&nbsp;in&nbsp;the&nbsp;machine&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lwsrc:75"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:80"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lregs</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_spec:67"><span class="id" title="inductive">IsUnique_spec</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.cap_lang.html#NextIV"><span class="id" title="constructor">NextIV</span></a><br/>
<br/>
&nbsp;&nbsp;| <a id="IsUnique_failure" class="idref" href="#IsUnique_failure"><span class="id" title="constructor">IsUnique_failure</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail"><span class="id" title="inductive">IsUnique_fail</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_spec:67"><span class="id" title="inductive">IsUnique_spec</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:61"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:62"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:63"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:64"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':65"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':66"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.cap_lang.html#FailedV"><span class="id" title="constructor">FailedV</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;@Bastien&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="allow_access_map_or_true" class="idref" href="#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a> (<a id="r:81" class="idref" href="#r:81"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lregs:82" class="idref" href="#lregs:82"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:83" class="idref" href="#lmem:83"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="p:84" class="idref" href="#p:84"><span class="id" title="binder">p</span></a> <a id="b:85" class="idref" href="#b:85"><span class="id" title="binder">b</span></a> <a id="e:86" class="idref" href="#e:86"><span class="id" title="binder">e</span></a> <a id="a:87" class="idref" href="#a:87"><span class="id" title="binder">a</span></a> <a id="v:88" class="idref" href="#v:88"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:82"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:81"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:84"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:85"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:86"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:87"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:88"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:82"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:81"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:84"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:85"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:86"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:87"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:88"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a':89" class="idref" href="#a':89"><span class="id" title="binder">a'</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="lw:90" class="idref" href="#lw:90"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:83"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a':89"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:88"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:90"><span class="id" title="variable">lw</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:85"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:86"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="notation">True</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;should&nbsp;it&nbsp;also&nbsp;implies&nbsp;a&nbsp;modification&nbsp;in&nbsp;cur_map&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sweep_true_spec" class="idref" href="#sweep_true_spec"><span class="id" title="lemma">sweep_true_spec</span></a> <a id="reg:91" class="idref" href="#reg:91"><span class="id" title="binder">reg</span></a> <a id="mem:92" class="idref" href="#mem:92"><span class="id" title="binder">mem</span></a> <a id="lr:93" class="idref" href="#lr:93"><span class="id" title="binder">lr</span></a> <a id="lm:94" class="idref" href="#lm:94"><span class="id" title="binder">lm</span></a> <a id="cur_map:95" class="idref" href="#cur_map:95"><span class="id" title="binder">cur_map</span></a> <a id="r:96" class="idref" href="#r:96"><span class="id" title="binder">r</span></a> <a id="p:97" class="idref" href="#p:97"><span class="id" title="binder">p</span></a> <a id="b:98" class="idref" href="#b:98"><span class="id" title="binder">b</span></a> <a id="e:99" class="idref" href="#e:99"><span class="id" title="binder">e</span></a> <a id="a:100" class="idref" href="#a:100"><span class="id" title="binder">a</span></a> <a id="v:101" class="idref" href="#v:101"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#reg:91"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:92"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lr:93"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lm:94"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#cur_map:95"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:92"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#reg:91"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:96"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#reg:91"><span class="id" title="variable">reg</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:96"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:97"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:98"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:99"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:100"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lr:93"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lm:94"><span class="id" title="variable">lm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:97"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:98"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:99"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:100"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:101"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:96"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:101"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sweep_memory_spec_false" class="idref" href="#sweep_memory_spec_false"><span class="id" title="lemma">sweep_memory_spec_false</span></a> (<a id="mem:102" class="idref" href="#mem:102"><span class="id" title="binder">mem</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="regs:103" class="idref" href="#regs:103"><span class="id" title="binder">regs</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="src:104" class="idref" href="#src:104"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="wsrc:105" class="idref" href="#wsrc:105"><span class="id" title="binder">wsrc</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep_memory"><span class="id" title="definition">sweep_memory</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:102"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#regs:103"><span class="id" title="variable">regs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:104"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#regs:103"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:104"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#wsrc:105"><span class="id" title="variable">wsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:102"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#wsrc:105"><span class="id" title="variable">wsrc</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsweep</span> <span class="id" title="var">Hsrc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sweep_false_spec" class="idref" href="#sweep_false_spec"><span class="id" title="lemma">sweep_false_spec</span></a> <a id="reg:106" class="idref" href="#reg:106"><span class="id" title="binder">reg</span></a> <a id="mem:107" class="idref" href="#mem:107"><span class="id" title="binder">mem</span></a> <a id="lr:108" class="idref" href="#lr:108"><span class="id" title="binder">lr</span></a> <a id="lm:109" class="idref" href="#lm:109"><span class="id" title="binder">lm</span></a> <a id="cur_map:110" class="idref" href="#cur_map:110"><span class="id" title="binder">cur_map</span></a> <a id="r:111" class="idref" href="#r:111"><span class="id" title="binder">r</span></a> <a id="p:112" class="idref" href="#p:112"><span class="id" title="binder">p</span></a> <a id="b:113" class="idref" href="#b:113"><span class="id" title="binder">b</span></a> <a id="e:114" class="idref" href="#e:114"><span class="id" title="binder">e</span></a> <a id="a:115" class="idref" href="#a:115"><span class="id" title="binder">a</span></a> <a id="v:116" class="idref" href="#v:116"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#reg:106"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:107"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lr:108"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lm:109"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#cur_map:110"><span class="id" title="variable">cur_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#mem:107"><span class="id" title="variable">mem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#reg:106"><span class="id" title="variable">reg</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:111"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lr:108"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:111"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:112"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:113"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:114"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:115"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:116"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lr:108"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lm:109"><span class="id" title="variable">lm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:112"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:113"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:114"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:115"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:116"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:111"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:116"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">HinvReg</span> <span class="id" title="var">HinvMem</span>] <span class="id" title="var">Hsweep</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">reg</span> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_get_word"><span class="id" title="axiom">reg_phys_log_get_word</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HuniqueL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HuniqueL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsweep</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsweep</span> | <span class="id" title="var">Hsweep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#sweep_memory_spec_false"><span class="id" title="axiom">sweep_memory_spec_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<span class="id" title="var">HuniqueL</span> <span class="id" title="var">lr</span> <span class="id" title="var">lm</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">HuniqueL_mem</span> <span class="id" title="var">HuniqueL_reg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2:<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HuniqueL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsweep</span> ; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HinvMem</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) <span class="id" title="var">cur_map</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_lw</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_read_iscur"><span class="id" title="axiom">lreg_read_iscur</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HuniqueL_mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;move&nbsp;stdpp_extra&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="submseteq_incl" class="idref" href="#submseteq_incl"><span class="id" title="lemma">submseteq_incl</span></a> `{<a id="A:117" class="idref" href="#A:117"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l1:118" class="idref" href="#l1:118"><span class="id" title="binder">l1</span></a> <a id="l2:119" class="idref" href="#l2:119"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#A:117"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#l1:118"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#l2:119"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#l1:118"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#l2:119"><span class="id" title="variable">l2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsubset</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">Hsubset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_eq_implies_allow_access_map" class="idref" href="#mem_eq_implies_allow_access_map"><span class="id" title="lemma">mem_eq_implies_allow_access_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lregs:120" class="idref" href="#lregs:120"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:121" class="idref" href="#lmem:121"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="r:122" class="idref" href="#r:122"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:123" class="idref" href="#lw:123"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:124" class="idref" href="#p:124"><span class="id" title="binder">p</span></a> <a id="b:125" class="idref" href="#b:125"><span class="id" title="binder">b</span></a> <a id="e:126" class="idref" href="#e:126"><span class="id" title="binder">e</span></a> <a id="a:127" class="idref" href="#a:127"><span class="id" title="binder">a</span></a> <a id="v:128" class="idref" href="#v:128"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':129" class="idref" href="#a':129"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw0:130" class="idref" href="#lw0:130"><span class="id" title="binder">lw0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:121"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a':129"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:128"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw0:130"><span class="id" title="variable">lw0</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:125"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:126"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:120"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:122"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:124"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:125"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:127"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:128"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:122"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:120"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:121"><span class="id" title="variable">lmem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lregs</span> <span class="id" title="var">lmem</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">Hmem</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>,<span class="id" title="var">b</span>,<span class="id" title="var">e</span>,<span class="id" title="var">a</span>,<span class="id" title="var">v</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">case_decide</span>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;probably&nbsp;misses&nbsp;hypothesis&nbsp;to&nbsp;prove&nbsp;this*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mem_implies_allow_access_map" class="idref" href="#mem_implies_allow_access_map"><span class="id" title="lemma">mem_implies_allow_access_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lregs:131" class="idref" href="#lregs:131"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:132" class="idref" href="#lmem:132"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="r:133" class="idref" href="#r:133"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pc_a:134" class="idref" href="#pc_a:134"><span class="id" title="binder">pc_a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="pc_v:135" class="idref" href="#pc_v:135"><span class="id" title="binder">pc_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lw:136" class="idref" href="#lw:136"><span class="id" title="binder">lw</span></a> <a id="lw':137" class="idref" href="#lw':137"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="p:138" class="idref" href="#p:138"><span class="id" title="binder">p</span></a> <a id="b:139" class="idref" href="#b:139"><span class="id" title="binder">b</span></a> <a id="e:140" class="idref" href="#e:140"><span class="id" title="binder">e</span></a> <a id="a:141" class="idref" href="#a:141"><span class="id" title="binder">a</span></a> <a id="v:142" class="idref" href="#v:142"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;(if&nbsp;((a,v)&nbsp;=?&nbsp;(pc_a,&nbsp;pc_v))*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;then&nbsp;lmem&nbsp;=&nbsp;&lt;<span class="inlinecode">(<span class="id" title="var">pc_a</span>,</span> <span class="inlinecode"><span class="id" title="var">pc_v</span>):=<span class="id" title="var">lw</span></span>&gt;&nbsp;∅&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;else&nbsp;lmem&nbsp;=&nbsp;&lt;<span class="inlinecode">(<span class="id" title="var">pc_a</span>,</span> <span class="inlinecode"><span class="id" title="var">pc_v</span>):=<span class="id" title="var">lw</span></span>&gt;&nbsp;(&lt;<span class="inlinecode">(<span class="id" title="var">a</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>):=<span class="id" title="var">lw'</span></span>&gt;&nbsp;∅))&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':143" class="idref" href="#a':143"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw0:144" class="idref" href="#lw0:144"><span class="id" title="binder">lw0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:132"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a':143"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_v:135"><span class="id" title="variable">pc_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw0:144"><span class="id" title="variable">lw0</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:139"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:140"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:131"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:133"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:138"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:139"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:140"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:141"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:142"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:133"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:131"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:132"><span class="id" title="variable">lmem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lregs</span> <span class="id" title="var">lmem</span> <span class="id" title="var">r</span> <span class="id" title="var">pc_a</span> <span class="id" title="var">pc_v</span> <span class="id" title="var">lw</span> <span class="id" title="var">lw'</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">Hcond</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;((a,v)&nbsp;=?&nbsp;(pc_a,&nbsp;pc_v))*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;andb_true_iff&nbsp;in&nbsp;Heq.&nbsp;destruct&nbsp;Heq&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Heq1</span></span> <span class="inlinecode"><span class="id" title="var">Heq2</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Z.eqb_eq,&nbsp;finz_to_z_eq&nbsp;in&nbsp;Heq1.&nbsp;subst&nbsp;a.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Nat.eqb_eq&nbsp;in&nbsp;Heq2.&nbsp;subst&nbsp;v.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;mem_eq_implies_allow_access_map;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;andb_false_iff&nbsp;in&nbsp;Heq.&nbsp;destruct&nbsp;Heq&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Heq</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Heq</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">Z.eqb_neq</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Heq</span></span> <span class="inlinecode">|</span>  <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">Nat.eqb_neq</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Heq</span></span> <span class="inlinecode"></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;eapply&nbsp;(mem_neq_implies_allow_access_map&nbsp;_&nbsp;_&nbsp;_&nbsp;pc_a&nbsp;pc_v&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;a&nbsp;v)&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;;&nbsp;solve_addr.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="allow_access_implies_memmap" class="idref" href="#allow_access_implies_memmap"><span class="id" title="lemma">allow_access_implies_memmap</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="r:145" class="idref" href="#r:145"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lmem:146" class="idref" href="#lmem:146"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lregs:147" class="idref" href="#lregs:147"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="p:148" class="idref" href="#p:148"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:149" class="idref" href="#b:149"><span class="id" title="binder">b</span></a> <a id="e:150" class="idref" href="#e:150"><span class="id" title="binder">e</span></a> <a id="a:151" class="idref" href="#a:151"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="v:152" class="idref" href="#v:152"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:145"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:147"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:146"><span class="id" title="variable">lmem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:147"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#r:145"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#p:148"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:150"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:151"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:152"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> ( <span class="id" title="keyword">fun</span> <a id="a:153" class="idref" href="#a:153"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="lw:154" class="idref" href="#lw:154"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:146"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:153"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:152"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:154"><span class="id" title="variable">lw</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:150"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lregs</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">HaAccess</span> <span class="id" title="var">Hrv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a>, <a class="idref" href="cap_machine.rules.rules_base.html#read_reg_inr"><span class="id" title="definition">read_reg_inr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HaAccess</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HaAccess</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp; <span class="id" title="var">Hrinr</span> &amp; <span class="id" title="var">Hmem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrinr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrinr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hrega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradiction</span> <span class="id" title="var">Hrega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;@bastien&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="map_insert_list" class="idref" href="#map_insert_list"><span class="id" title="definition">map_insert_list</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="L:155" class="idref" href="#L:155"><span class="id" title="binder">L</span></a> <a id="V:156" class="idref" href="#V:156"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} {<a id="EqDecision0:157" class="idref" href="#EqDecision0:157"><span class="id" title="binder">EqDecision0</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:155"><span class="id" title="variable">L</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="H:158" class="idref" href="#H:158"><span class="id" title="binder">H</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:155"><span class="id" title="variable">L</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:159" class="idref" href="#m:159"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:155"><span class="id" title="variable">L</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:156"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:160" class="idref" href="#l:160"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:155"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:156"><span class="id" title="variable">V</span></a>)) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:155"><span class="id" title="variable">L</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:156"><span class="id" title="variable">V</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">foldl</span> (<span class="id" title="keyword">fun</span> <a id="mres:161" class="idref" href="#mres:161"><span class="id" title="binder">mres</span></a> <a id="ins:162" class="idref" href="#ins:162"><span class="id" title="binder">ins</span></a> =&gt; <span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#ins:162"><span class="id" title="variable">ins</span></a><span class="id" title="notation">.1</span> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#ins:162"><span class="id" title="variable">ins</span></a><span class="id" title="notation">.2</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">mres</span>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#m:159"><span class="id" title="variable">m</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#l:160"><span class="id" title="variable">l</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;@bastien&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_heap_update_list_inSepM" class="idref" href="#gen_heap_update_list_inSepM"><span class="id" title="lemma">gen_heap_update_list_inSepM</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">{</span></a><a id="L:163" class="idref" href="#L:163"><span class="id" title="binder">L</span></a> <a id="V:164" class="idref" href="#V:164"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} {<a id="EqDecision0:165" class="idref" href="#EqDecision0:165"><span class="id" title="binder">EqDecision0</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:163"><span class="id" title="variable">L</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="H:166" class="idref" href="#H:166"><span class="id" title="binder">H</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:163"><span class="id" title="variable">L</span></a>} {<a id="def0ae1d6f53f9edf7fdc46f0ff85f41" class="idref" href="#def0ae1d6f53f9edf7fdc46f0ff85f41"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="gen_heapG0:168" class="idref" href="#gen_heapG0:168"><span class="id" title="binder">gen_heapG0</span></a> : <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:163"><span class="id" title="variable">L</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:164"><span class="id" title="variable">V</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#def0ae1d6f53f9edf7fdc46f0ff85f41"><span class="id" title="variable">Σ</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dde5bb14789107ec722c71dc979db6bf" class="idref" href="#dde5bb14789107ec722c71dc979db6bf"><span class="id" title="binder">σ</span></a> <a id="b270ac3b0db7c06c86d7077a669ca5c1" class="idref" href="#b270ac3b0db7c06c86d7077a669ca5c1"><span class="id" title="binder">σ'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:163"><span class="id" title="variable">L</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:164"><span class="id" title="variable">V</span></a>) (<a id="ll:171" class="idref" href="#ll:171"><span class="id" title="binder">ll</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#L:163"><span class="id" title="variable">L</span></a>) (<a id="lv:172" class="idref" href="#lv:172"><span class="id" title="binder">lv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#V:164"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="l:173" class="idref" href="#l:173"><span class="id" title="binder">l</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#b270ac3b0db7c06c86d7077a669ca5c1"><span class="id" title="variable">σ'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#l:173"><span class="id" title="variable">l</span></a>)) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#ll:171"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dde5bb14789107ec722c71dc979db6bf"><span class="id" title="variable">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:174" class="idref" href="#k:174"><span class="id" title="binder"><span id="k:175" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:176" class="idref" href="#y:176"><span class="id" title="binder"><span id="y:177" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b270ac3b0db7c06c86d7077a669ca5c1"><span class="id" title="variable">σ'</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">mapsto</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#k:174"><span class="id" title="variable">k</span></a> (<span class="id" title="constructor">DfracOwn</span> 1) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#y:176"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">==∗</span> <span class="id" title="definition">gen_heap_interp</span> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dde5bb14789107ec722c71dc979db6bf"><span class="id" title="variable">σ</span></a> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#ll:171"><span class="id" title="variable">ll</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:172"><span class="id" title="variable">lv</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:178" class="idref" href="#k:178"><span class="id" title="binder"><span id="k:179" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:180" class="idref" href="#y:180"><span class="id" title="binder"><span id="y:181" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b270ac3b0db7c06c86d7077a669ca5c1"><span class="id" title="variable">σ'</span></a> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#ll:171"><span class="id" title="variable">ll</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:172"><span class="id" title="variable">lv</span></a>)<span class="id" title="notation">),</span> <span class="id" title="definition">mapsto</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#k:178"><span class="id" title="variable">k</span></a> (<span class="id" title="constructor">DfracOwn</span> 1) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#y:180"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ll</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">H</span>σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hh H"; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hh"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;(big_sepM_delete&nbsp;_&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">l</span>:=<span class="id" title="var">v</span></span>&gt;&nbsp;σ')&nbsp;l).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;{&nbsp;rewrite&nbsp;delete_insert_delete.&nbsp;iFrame.&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;lookup_insert&nbsp;//.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;ugly&nbsp;lemma,&nbsp;how&nbsp;to&nbsp;get&nbsp;a&nbsp;better&nbsp;one&nbsp;?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="insert_update_spec" class="idref" href="#insert_update_spec"><span class="id" title="lemma">insert_update_spec</span></a> <a id="a:182" class="idref" href="#a:182"><span class="id" title="binder">a</span></a> <a id="pc_v:183" class="idref" href="#pc_v:183"><span class="id" title="binder">pc_v</span></a> <a id="v:184" class="idref" href="#v:184"><span class="id" title="binder">v</span></a> <a id="v':185" class="idref" href="#v':185"><span class="id" title="binder">v'</span></a> <a id="lw:186" class="idref" href="#lw:186"><span class="id" title="binder">lw</span></a> <a id="lregion:187" class="idref" href="#lregion:187"><span class="id" title="binder">lregion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:188" class="idref" href="#b:188"><span class="id" title="binder">b</span></a> <a id="e:189" class="idref" href="#e:189"><span class="id" title="binder">e</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:188"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:189"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:184"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lmem:190" class="idref" href="#lmem:190"><span class="id" title="binder">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:182"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_v:183"><span class="id" title="variable">pc_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:186"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:191" class="idref" href="#a:191"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw0:192" class="idref" href="#lw0:192"><span class="id" title="binder">lw0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:191"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:184"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw0:192"><span class="id" title="variable">lw0</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:188"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:189"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:193" class="idref" href="#la:193"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:193"><span class="id" title="variable">la</span></a>)) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lv:194" class="idref" href="#lv:194"><span class="id" title="binder">lv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="kv:195" class="idref" href="#kv:195"><span class="id" title="binder">kv</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:195"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.1.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:184"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:195"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:194"><span class="id" title="variable">lv</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:194"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="definition">foldl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="opt_lmem':196" class="idref" href="#opt_lmem':196"><span class="id" title="binder">opt_lmem'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:197" class="idref" href="#la:197"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#opt_lmem':196"><span class="id" title="variable">opt_lmem'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">≫=</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lmem':198" class="idref" href="#lmem':198"><span class="id" title="binder">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':198"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:197"><span class="id" title="variable">la</span></a> <span class="id" title="notation">≫=</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw0:199" class="idref" href="#lw0:199"><span class="id" title="binder">lw0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:197"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v':185"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw0:199"><span class="id" title="variable">lw0</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem'</span>)<span class="id" title="notation">))</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:190"><span class="id" title="variable">lmem</span></a> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:187"><span class="id" title="variable">lregion</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:194"><span class="id" title="variable">lv</span></a>))<br/>
&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">lregion</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">la</span> <span class="id" title="var">lregion'</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">Hlregion</span> <span class="id" title="var">lmem</span> <span class="id" title="var">Hlapc</span> <span class="id" title="var">HmemMap</span> <span class="id" title="var">HmemMap_isSome</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span> <span class="id" title="var">Hlen_lv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lv</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">w</span> <span class="id" title="var">lv'</span>] ; [<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen_lv</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmemMap_isSome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HmemMap_isSome</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hla</span> <span class="id" title="var">HmemMap_isSome</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlmem</span> <span class="id" title="var">Hlv</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHlregion'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmemMap_isSome</span>;<span class="id" title="tactic">eauto</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHlregion'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;(lmem&nbsp;!!&nbsp;la)&nbsp;as&nbsp;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">a_lw</span>|</span>&nbsp;eqn:Heq&nbsp;;&nbsp;<span class="inlinecode"><span class="id" title="var">cbn</span>|</span> <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">Hla</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">done</span></span> <span class="inlinecode"></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(foldl&nbsp;(λ&nbsp;(mres&nbsp;:&nbsp;gmap&nbsp;LAddr&nbsp;LWord)&nbsp;(ins&nbsp;:&nbsp;LAddr&nbsp;*&nbsp;LWord),&nbsp;&lt;<span class="inlinecode"><span class="id" title="var">ins</span>.1:=<span class="id" title="var">ins</span>.2</span>&gt;&nbsp;mres)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">la</span>:=<span class="id" title="var">v</span></span>&gt;&nbsp;lmem)&nbsp;(zip&nbsp;lregion'&nbsp;lv'))&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;with&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">la</span>:=<span class="id" title="var">v</span></span>&gt;&nbsp;(foldl&nbsp;(λ&nbsp;(mres&nbsp;:&nbsp;gmap&nbsp;LAddr&nbsp;LWord)&nbsp;(ins&nbsp;:&nbsp;LAddr&nbsp;*&nbsp;LWord),&nbsp;&lt;<span class="inlinecode"><span class="id" title="var">ins</span>.1:=<span class="id" title="var">ins</span>.2</span>&gt;&nbsp;mres)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lmem)&nbsp;(zip&nbsp;lregion'&nbsp;lv'))).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;2:&nbsp;{&nbsp;admit.&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;-/(map_insert_list&nbsp;lmem&nbsp;(zip&nbsp;lregion'&nbsp;lv')).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;It&nbsp;misses&nbsp;hypothesis&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="update_version_spec" class="idref" href="#update_version_spec"><span class="id" title="lemma">update_version_spec</span></a> <a id="b:200" class="idref" href="#b:200"><span class="id" title="binder">b</span></a> <a id="e:201" class="idref" href="#e:201"><span class="id" title="binder">e</span></a> <a id="v:202" class="idref" href="#v:202"><span class="id" title="binder">v</span></a> <a id="v':203" class="idref" href="#v':203"><span class="id" title="binder">v'</span></a> <a id="lregion:204" class="idref" href="#lregion:204"><span class="id" title="binder">lregion</span></a> <a id="lv:205" class="idref" href="#lv:205"><span class="id" title="binder">lv</span></a> <a id="lmem:206" class="idref" href="#lmem:206"><span class="id" title="binder">lmem</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:204"><span class="id" title="variable">lregion</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:207" class="idref" href="#a:207"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#a:207"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v':203"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:200"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:201"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#update_version"><span class="id" title="definition">update_version</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:206"><span class="id" title="variable">lmem</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#b:200"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#e:201"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v:202"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#v':203"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:206"><span class="id" title="variable">lmem</span></a> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregion:204"><span class="id" title="variable">lregion</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:205"><span class="id" title="variable">lv</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE/TODO:&nbsp;Sum&nbsp;up.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;the&nbsp;case&nbsp;where&nbsp;is_unique&nbsp;succeed,&nbsp;the&nbsp;specification&nbsp;gives&nbsp;us&nbsp;that,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;given&nbsp;word&nbsp;is&nbsp;unique&nbsp;in&nbsp;the&nbsp;machine&nbsp;(both&nbsp;registers&nbsp;and&nbsp;memory)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;predicate&nbsp;=unique_in_machineL&nbsp;lregs&nbsp;lmem&nbsp;lwsrc&nbsp;src&nbsp;v=<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;new&nbsp;memory&nbsp;and&nbsp;register&nbsp;file&nbsp;has&nbsp;an&nbsp;updated&nbsp;version&nbsp;of&nbsp;the&nbsp;word/addresses<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;predicates<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;update_version&nbsp;lmem&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;v&nbsp;(v&nbsp;+&nbsp;1)&nbsp;=&nbsp;Some&nbsp;lmem'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;incrementLPC&nbsp;(&lt;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">dst</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">LInt</span></span> <span class="inlinecode">1</span> <span class="inlinecode"></span>&gt;&nbsp;(&lt;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">src</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">LCap</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">(<span class="id" title="var">v</span>+1)</span> <span class="inlinecode"></span>&gt;&nbsp;lregs))&nbsp;=&nbsp;Some&nbsp;lregs'<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;particular,&nbsp;what&nbsp;is&nbsp;necessary&nbsp;is&nbsp;to&nbsp;prove&nbsp;that,&nbsp;lmem'&nbsp;and&nbsp;lreg'&nbsp;still&nbsp;hold&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;WP&nbsp;invariant&nbsp;(link&nbsp;between&nbsp;logical&nbsp;and&nbsp;physical&nbsp;world).&nbsp;The&nbsp;main&nbsp;glue&nbsp;between&nbsp;everything<br/>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;the&nbsp;=cur_map&nbsp;:&nbsp;VMap=,&nbsp;which&nbsp;records&nbsp;what&nbsp;is&nbsp;the&nbsp;current&nbsp;version&nbsp;of&nbsp;an&nbsp;address.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;One&nbsp;thing&nbsp;to&nbsp;do&nbsp;then&nbsp;is&nbsp;to&nbsp;update&nbsp;the&nbsp;current_view&nbsp;with&nbsp;a&nbsp;new&nbsp;version&nbsp;number.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;when&nbsp;upgrading&nbsp;the&nbsp;version&nbsp;number,&nbsp;it&nbsp;cancels&nbsp;all&nbsp;of&nbsp;the&nbsp;others&nbsp;versions<br/>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;addresses/words.&nbsp;From&nbsp;=unique_in_machineL=,&nbsp;we&nbsp;know&nbsp;that&nbsp;it&nbsp;will&nbsp;actually&nbsp;cancel<br/>
&nbsp;&nbsp;&nbsp;&nbsp;nothing&nbsp;else.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_isunique" class="idref" href="#wp_isunique"><span class="id" title="lemma">wp_isunique</span></a> <a id="Ep:208" class="idref" href="#Ep:208"><span class="id" title="binder">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="pc_p:209" class="idref" href="#pc_p:209"><span class="id" title="binder">pc_p</span></a> <a id="pc_b:210" class="idref" href="#pc_b:210"><span class="id" title="binder">pc_b</span></a> <a id="pc_e:211" class="idref" href="#pc_e:211"><span class="id" title="binder">pc_e</span></a> <a id="pc_a:212" class="idref" href="#pc_a:212"><span class="id" title="binder">pc_a</span></a> <a id="pc_v:213" class="idref" href="#pc_v:213"><span class="id" title="binder">pc_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dst:214" class="idref" href="#dst:214"><span class="id" title="binder">dst</span></a> <a id="src:215" class="idref" href="#src:215"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) <a id="lw:216" class="idref" href="#lw:216"><span class="id" title="binder">lw</span></a> <a id="lmem:217" class="idref" href="#lmem:217"><span class="id" title="binder">lmem</span></a> <a id="lregs:218" class="idref" href="#lregs:218"><span class="id" title="binder">lregs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:216"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#IsUnique"><span class="id" title="constructor">IsUnique</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:214"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:215"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_p:209"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_b:210"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_e:211"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_a:212"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_v:213"><span class="id" title="variable">pc_v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:218"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_p:209"><span class="id" title="variable">pc_p</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_b:210"><span class="id" title="variable">pc_b</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_e:211"><span class="id" title="variable">pc_e</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_a:212"><span class="id" title="variable">pc_a</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_v:213"><span class="id" title="variable">pc_v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_base.html#regs_of"><span class="id" title="definition">regs_of</span></a> (<a class="idref" href="cap_machine.machine_base.html#IsUnique"><span class="id" title="constructor">IsUnique</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:214"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:215"><span class="id" title="variable">src</span></a>) <span class="id" title="notation">⊆</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:218"><span class="id" title="variable">lregs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:217"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_a:212"><span class="id" title="variable">pc_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#pc_v:213"><span class="id" title="variable">pc_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:216"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_map_or_true"><span class="id" title="definition">allow_access_map_or_true</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:215"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:218"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:217"><span class="id" title="variable">lmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <span class="id" title="notation">(</span><span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="la:219" class="idref" href="#la:219"><span class="id" title="binder"><span id="la:220" class="id">la</span></span></a><span class="id" title="notation">↦</span><a id="lw:221" class="idref" href="#lw:221"><span class="id" title="binder"><span id="lw:222" class="id">lw</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:217"><span class="id" title="variable">lmem</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:219"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:221"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">▷</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:223" class="idref" href="#k:223"><span class="id" title="binder"><span id="k:224" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:225" class="idref" href="#y:225"><span class="id" title="binder"><span id="y:226" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:218"><span class="id" title="variable">lregs</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#k:223"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#y:225"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="notation">@</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#Ep:208"><span class="id" title="variable">Ep</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{{{</span> <a id="lregs':227" class="idref" href="#lregs':227"><span class="id" title="binder">lregs'</span></a> <a id="lmem':228" class="idref" href="#lmem':228"><span class="id" title="binder">lmem'</span></a> <a id="retv:229" class="idref" href="#retv:229"><span class="id" title="binder">retv</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#retv:229"><span class="id" title="variable">retv</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_spec"><span class="id" title="inductive">IsUnique_spec</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs:218"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem:217"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#dst:214"><span class="id" title="variable">dst</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#src:215"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':227"><span class="id" title="variable">lregs'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':228"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#retv:229"><span class="id" title="variable">retv</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="la:230" class="idref" href="#la:230"><span class="id" title="binder"><span id="la:231" class="id">la</span></span></a><span class="id" title="notation">↦</span><a id="lw:232" class="idref" href="#lw:232"><span class="id" title="binder"><span id="lw:233" class="id">lw</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lmem':228"><span class="id" title="variable">lmem'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:230"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e389c97555835874498bb08a394266c6"><span class="id" title="notation">↦ₐ</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:232"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:234" class="idref" href="#k:234"><span class="id" title="binder"><span id="k:235" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:236" class="idref" href="#y:236"><span class="id" title="binder"><span id="y:237" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lregs':227"><span class="id" title="variable">lregs'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#k:234"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">↦ᵣ</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#y:236"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}}}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinstr</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">HPC</span> <span class="id" title="var">Dregs</span> <span class="id" title="var">Hmem_pc</span> <span class="id" title="var">HaAccess</span> φ) "(&gt;Hmem &amp; &gt;Hmap) Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_lift_atomic_head_step_no_fork</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (σ1 <span class="id" title="var">ns</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">nt</span>) "Hσ1 /=". <span class="id" title="tactic">destruct</span> σ1; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hσ1" <span class="id" title="keyword">as</span> (<span class="id" title="var">lr</span> <span class="id" title="var">lm</span> <span class="id" title="var">cur_map</span>) "(Hr &amp; Hm &amp; %HLinv)"; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HLinv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Derive&nbsp;necessary&nbsp;register&nbsp;values&nbsp;in&nbsp;r&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_valid_inclSepM"><span class="id" title="axiom">gen_heap_valid_inclSepM</span></a> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hregs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hregs_pc</span> := <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HPC</span> <span class="id" title="var">Hregs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.rules.rules_base.html#indom_lregs_incl"><span class="id" title="axiom">indom_lregs_incl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Dregs</span> <span class="id" title="var">Hregs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hri</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.rules.rules_base.html#regs_of"><span class="id" title="definition">regs_of</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hri</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">odestruct</span> (<span class="id" title="var">Hri</span> <span class="id" title="var">dst</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ldstv</span> [<span class="id" title="var">Hldst'</span> <span class="id" title="var">Hldst</span>]]. <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>+.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">odestruct</span> (<span class="id" title="var">Hri</span> <span class="id" title="var">src</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lsrcv</span> [<span class="id" title="var">Hlsrc'</span> <span class="id" title="var">Hlsrc</span>]]. <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>+.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Derive&nbsp;necessary&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_valid_inclSepM"><span class="id" title="axiom">gen_heap_valid_inclSepM</span></a> <span class="id" title="notation">with</span> "Hm Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_mem_valid_inSepM"><span class="id" title="axiom">gen_mem_valid_inSepM</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="notation">with</span> "Hm Hmem"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hma</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#normal_always_head_reducible"><span class="id" title="axiom">normal_always_head_reducible</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> <span class="id" title="var">Hpstep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#prim_step_exec_inv"><span class="id" title="lemma">prim_step_exec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpstep</span> <span class="id" title="keyword">as</span> (-&gt; &amp; -&gt; &amp; (<span class="id" title="var">c</span> &amp; -&gt; &amp; <span class="id" title="var">Hstep</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "_".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.cap_lang.html#step_exec_inv"><span class="id" title="axiom">step_exec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_corresponds_reg"><span class="id" title="axiom">state_phys_corresponds_reg</span></a> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_corresponds_mem_PC"><span class="id" title="axiom">state_phys_corresponds_mem_PC</span></a> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">srcv</span> := <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lsrcv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">reg</span> <span class="id" title="notation">!!</span> <span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">srcv</span> ) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsrc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_reg_get_word"><span class="id" title="axiom">state_phys_log_reg_get_word</span></a> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#exec"><span class="id" title="definition">exec</span></a> /= <span class="id" title="var">Hsrc</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Start&nbsp;the&nbsp;different&nbsp;cases&nbsp;now&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;src&nbsp;contains&nbsp;a&nbsp;capability&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <span class="id" title="var">lsrcv</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlsrcv</span>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">subst</span> <span class="id" title="var">srcv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Fail&nbsp;:&nbsp;not&nbsp;a&nbsp;capability&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lsrcv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlsrcv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: (<span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="var">iExists</span> <span class="id" title="var">lr</span>, <span class="id" title="var">lm</span>, <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iFailCore</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail_cap"><span class="id" title="constructor">IsUnique_fail_cap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lsrcv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlsrcv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.rules.rules_IsUnique.html#allow_access_implies_memmap"><span class="id" title="axiom">allow_access_implies_memmap</span></a> <span class="id" title="var">src</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lregs</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">HaAccess</span> <span class="id" title="var">Hlsrc'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HmemMap</span> ; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;sweep&nbsp;success&nbsp;or&nbsp;sweep&nbsp;fail&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <span class="id" title="var">mem</span> <span class="id" title="var">reg</span> <span class="id" title="var">src</span>) <span class="id" title="keyword">as</span> [|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hsweep</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;sweep&nbsp;is&nbsp;true&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Derive&nbsp;spec&nbsp;of&nbsp;sweep&nbsp;that&nbsp;returns&nbsp;true&nbsp;-&gt;&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#sweep_true_spec"><span class="id" title="axiom">sweep_true_spec</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#unique_in_machineL_weaken"><span class="id" title="axiom">unique_in_machineL_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <span class="id" title="var">dst</span> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1 <span class="id" title="notation">]&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(&lt;[</span> <span class="id" title="notation">src</span> <span class="id" title="notation">:=</span> <span class="id" title="notation">LCap</span> <span class="id" title="notation">p</span> <span class="id" title="notation">b</span> <span class="id" title="notation">e</span> <span class="id" title="notation">a</span> <span class="id" title="notation">(</span><span class="id" title="notation">v</span><span class="id" title="notation">+1)]&gt;</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span>  [ <span class="id" title="var">lregs'</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hlregs'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'lregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Failure:&nbsp;the&nbsp;PC&nbsp;could&nbsp;not&nbsp;be&nbsp;incremented&nbsp;correctly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC_fail_updatePC"><span class="id" title="axiom">incrementLPC_fail_updatePC</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#updatePC_fail_incl"><span class="id" title="axiom">updatePC_fail_incl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m'</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl'</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur'</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="method">lookup_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">fmap_is_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>)) ;  <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>)) ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_fmap_mono</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">insert_mono</span> <span class="id" title="var">_</span> ( <span class="id" title="notation">&lt;[</span><span class="id" title="var">src</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_pair_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw:238" class="idref" href="#lw:238"><span class="id" title="binder"><span id="lw:239" class="id">lw</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:238"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">src</span><span class="id" title="notation">:=</span><span class="id" title="notation">LCap</span> <span class="id" title="notation">p</span> <span class="id" title="notation">b</span> <span class="id" title="notation">e</span> <span class="id" title="notation">a</span> <span class="id" title="notation">(</span><span class="id" title="notation">v</span> <span class="id" title="notation">+</span> <span class="id" title="notation">1)]&gt;</span> <span class="id" title="notation">lr</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 1<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">reg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> !<span class="id" title="lemma">fmap_insert</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#insert_cap_lreg_strip"><span class="id" title="axiom">insert_cap_lreg_strip</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlregs'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="var">iExists</span> <span class="id" title="var">lr</span>, <span class="id" title="var">lm</span>, <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iFailCore</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail_invalid_PC_true"><span class="id" title="constructor">IsUnique_fail_invalid_PC_true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;PC&nbsp;has&nbsp;been&nbsp;incremented&nbsp;correctly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#update_reg"><span class="id" title="definition">update_reg</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC_success_updatePC"><span class="id" title="axiom">incrementLPC_success_updatePC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">mem</span> <span class="id" title="var">etable</span> <span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">p1</span> &amp; <span class="id" title="var">b1</span> &amp; <span class="id" title="var">e1</span> &amp; <span class="id" title="var">a1</span> &amp; <span class="id" title="var">a_pc1</span> &amp; <span class="id" title="var">v1</span> &amp; <span class="id" title="var">HPC''</span> &amp; <span class="id" title="var">Ha_pc'</span> &amp; <span class="id" title="var">HuPC</span> &amp; -&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdst</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#updatePC_success_incl"><span class="id" title="axiom">updatePC_success_incl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m'</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl'</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur'</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_fmap_mono</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">insert_mono</span> <span class="id" title="var">_</span> ( <span class="id" title="notation">&lt;[</span><span class="id" title="var">src</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1)<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw:240" class="idref" href="#lw:240"><span class="id" title="binder"><span id="lw:241" class="id">lw</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:240"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">src</span><span class="id" title="notation">:=</span><span class="id" title="notation">LCap</span> <span class="id" title="notation">p</span> <span class="id" title="notation">b</span> <span class="id" title="notation">e</span> <span class="id" title="notation">a</span> <span class="id" title="notation">(</span><span class="id" title="notation">v</span> <span class="id" title="notation">+</span> <span class="id" title="notation">1)]&gt;</span> <span class="id" title="notation">lr</span><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 1<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">reg</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> !<span class="id" title="lemma">fmap_insert</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) //=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#insert_cap_lreg_strip"><span class="id" title="axiom">insert_cap_lreg_strip</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HuPC</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;destruct&nbsp;the&nbsp;cases&nbsp;when&nbsp;the&nbsp;registers&nbsp;are&nbsp;equals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>)); <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;src&nbsp;=&nbsp;PC&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">insert_commute</span> <span class="id" title="var">_</span> <span class="id" title="var">dst</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>) //= <span class="id" title="lemma">insert_insert</span> <span class="id" title="lemma">insert_commute</span> //= <span class="id" title="tactic">in</span> <span class="id" title="var">H'lregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;update&nbsp;the&nbsp;registers&nbsp;with&nbsp;their&nbsp;new&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">dst</span> <span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;update&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;memory&nbsp;region&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">lregion</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b1</span> <span class="id" title="var">e1</span>) (<span class="id" title="var">pc_v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1))).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="lv:242" class="idref" href="#lv:242"><span class="id" title="binder"><span id="lv:244" class="id">lv</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:242"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <span class="id" title="var">lregion</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="kv:243" class="idref" href="#kv:243"><span class="id" title="binder"><span id="kv:245" class="id">kv</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:243"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.1.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">pc_v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:243"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">zip</span> <span class="id" title="var">lregion</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:242"><span class="id" title="variable">lv</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="keyword">as</span>  (<span class="id" title="var">lv</span> &amp; <span class="id" title="var">Hlen_lv</span> &amp; <span class="id" title="var">Hlv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  <span class="id" title="var">admit</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HmemMap_isSome</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:246" class="idref" href="#la:246"><span class="id" title="binder"><span id="la:247" class="id">la</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:246"><span class="id" title="variable">la</span></a>)) <span class="id" title="var">lregion</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  <span class="id" title="var">admit</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_IsUnique.html#gen_heap_update_list_inSepM"><span class="id" title="axiom">gen_heap_update_list_inSepM</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">lv</span> <span class="id" title="var">HmemMap_isSome</span><span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hm Hmem"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "[Hm Hmem]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>; <span class="id" title="var">iModIntro</span> ; <span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#update_version_spec"><span class="id" title="axiom">update_version_spec</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <span class="id" title="var">lm</span> (<span class="id" title="abbreviation">zip</span> <span class="id" title="var">lregion</span> <span class="id" title="var">lv</span>)), <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcur_reg</span>] [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>]]<br/>
        ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> !<span class="id" title="lemma">fmap_insert</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hbounds_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;need&nbsp;a&nbsp;lemma&nbsp;with&nbsp;map_insert_list&nbsp;for&nbsp;mem_phys_log&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;I&nbsp;think&nbsp;that&nbsp;I&nbsp;also&nbsp;need&nbsp;a&nbsp;lemma&nbsp;that&nbsp;bumps&nbsp;the&nbsp;version&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addresses&nbsp;in&nbsp;cur_map,&nbsp;but&nbsp;probably&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;src&nbsp;&lt;&gt;&nbsp;PC&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;also&nbsp;need&nbsp;to&nbsp;destruct&nbsp;on&nbsp;(dst&nbsp;=&nbsp;src)&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">dst</span>)) ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;src&nbsp;=&nbsp;dst&nbsp;*)</span> <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;src&nbsp;&lt;&gt;&nbsp;dst&nbsp;*)</span><br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">src</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1))<span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">dst</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 1)<span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p1</span> <span class="id" title="var">b1</span> <span class="id" title="var">e1</span> <span class="id" title="var">a_pc1</span> <span class="id" title="var">v1</span>)<span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;update&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;memory&nbsp;region&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">lregion</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>) (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1))).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="lv:248" class="idref" href="#lv:248"><span class="id" title="binder"><span id="lv:250" class="id">lv</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:248"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <span class="id" title="var">lregion</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="kv:249" class="idref" href="#kv:249"><span class="id" title="binder"><span id="kv:251" class="id">kv</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:249"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.1.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#kv:249"><span class="id" title="variable">kv</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">zip</span> <span class="id" title="var">lregion</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lv:248"><span class="id" title="variable">lv</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="keyword">as</span>  (<span class="id" title="var">lv</span> &amp; <span class="id" title="var">Hlen_lv</span> &amp; <span class="id" title="var">Hlv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  <span class="id" title="var">admit</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HmemMap_isSome</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:252" class="idref" href="#la:252"><span class="id" title="binder"><span id="la:253" class="id">la</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#la:252"><span class="id" title="variable">la</span></a>)) <span class="id" title="var">lregion</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  <span class="id" title="var">admit</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_IsUnique.html#gen_heap_update_list_inSepM"><span class="id" title="axiom">gen_heap_update_list_inSepM</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">lv</span> <span class="id" title="var">HmemMap_isSome</span><span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hm Hmem"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "[Hm Hmem]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>; <span class="id" title="var">iModIntro</span> ; <span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#update_version_spec"><span class="id" title="axiom">update_version_spec</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, (<a class="idref" href="cap_machine.rules.rules_IsUnique.html#map_insert_list"><span class="id" title="definition">map_insert_list</span></a> <span class="id" title="var">lm</span> (<span class="id" title="abbreviation">zip</span> <span class="id" title="var">lregion</span> <span class="id" title="var">lv</span>)), <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcur_reg</span>] [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>]]<br/>
        ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> !<span class="id" title="lemma">fmap_insert</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">src</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">((</span><span class="id" title="notation">λ</span> <a id="lw0:254" class="idref" href="#lw0:254"><span class="id" title="binder"><span id="lw0:256" class="id">lw0</span></span></a><span class="id" title="notation">,</span> <span class="id" title="notation">lword_get_word</span> <span class="id" title="notation">lw0</span><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="notation">lr</span><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw0:255" class="idref" href="#lw0:255"><span class="id" title="binder"><span id="lw0:257" class="id">lw0</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw0:255"><span class="id" title="variable">lw0</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">lr</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">fmap_insert</span>, <span class="id" title="lemma">insert_id</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hbounds_a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;need&nbsp;a&nbsp;lemma&nbsp;with&nbsp;map_insert_list&nbsp;for&nbsp;mem_phys_log&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;I&nbsp;think&nbsp;that&nbsp;I&nbsp;also&nbsp;need&nbsp;a&nbsp;lemma&nbsp;that&nbsp;bumps&nbsp;the&nbsp;version&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addresses&nbsp;in&nbsp;cur_map,&nbsp;but&nbsp;probably&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;the&nbsp;kind&nbsp;of&nbsp;lemma&nbsp;would&nbsp;be:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;map_Forall&nbsp;(λ&nbsp;(_&nbsp;:&nbsp;RegName)&nbsp;lw,&nbsp;is_cur_word&nbsp;lw&nbsp;cur_map)&nbsp;lr<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;map_Forall&nbsp;(λ&nbsp;(la&nbsp;:&nbsp;LAddr)&nbsp;(_&nbsp;:&nbsp;LWord),&nbsp;is_cur_addr&nbsp;la&nbsp;cur_map)&nbsp;lm<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;map_Forall<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(λ&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;v,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∃&nbsp;lw,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;Some&nbsp;lw<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∧&nbsp;mem&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;(lword_get_word&nbsp;lw)&nbsp;∧&nbsp;is_cur_word&nbsp;lw&nbsp;cur_map)&nbsp;cur_map<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THEN:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=we&nbsp;update&nbsp;the&nbsp;version&nbsp;of&nbsp;a&nbsp;word&nbsp;w=:&nbsp;update_version&nbsp;w&nbsp;cur_map<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=the&nbsp;previous&nbsp;invariant&nbsp;holds&nbsp;with&nbsp;the&nbsp;new&nbsp;cur_map,&nbsp;modification&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logical&nbsp;memory&nbsp;/&nbsp;registers=<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;----------------------&nbsp;----------------------<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Example&nbsp;for&nbsp;lregs:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;(LCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;map_Forall&nbsp;(λ&nbsp;(_&nbsp;:&nbsp;RegName)&nbsp;lw,&nbsp;is_cur_word&nbsp;lw&nbsp;cur_map)&nbsp;lr<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_Forall<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(λ&nbsp;(_&nbsp;:&nbsp;RegName)&nbsp;lw,&nbsp;is_cur_word&nbsp;lw&nbsp;(update_vmap&nbsp;(range&nbsp;b&nbsp;e)&nbsp;v'&nbsp;cur_map))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">src</span>:=<span class="id" title="var">LCap</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">v'</span></span>&gt;&nbsp;lr)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Similar&nbsp;lemmas&nbsp;for&nbsp;lmem:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;update&nbsp;one&nbsp;address<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;update&nbsp;a&nbsp;whole&nbsp;region<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;split;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;sweep&nbsp;=&nbsp;false&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#sweep_false_spec"><span class="id" title="axiom">sweep_false_spec</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span> ; [|<span class="id" title="tactic">eauto</span>|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#not_unique_in_machineL_weaken"><span class="id" title="axiom">not_unique_in_machineL_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span> ; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC"><span class="id" title="definition">incrementLPC</span></a> (<span class="id" title="notation">&lt;[</span> <span class="id" title="var">dst</span> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lregs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span>  [ <span class="id" title="var">lregs'</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hlregs'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'lregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  <span class="comment">(*&nbsp;Failure:&nbsp;the&nbsp;PC&nbsp;could&nbsp;not&nbsp;be&nbsp;incremented&nbsp;correctly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC_fail_updatePC"><span class="id" title="axiom">incrementLPC_fail_updatePC</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#updatePC_fail_incl"><span class="id" title="axiom">updatePC_fail_incl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m'</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl'</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur'</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="method">lookup_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">fmap_is_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>)) ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_fmap_mono</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw:258" class="idref" href="#lw:258"><span class="id" title="binder"><span id="lw:259" class="id">lw</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:258"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">reg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> !<span class="id" title="lemma">fmap_insert</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlregs'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="var">iExists</span> <span class="id" title="var">lr</span>, <span class="id" title="var">lm</span>, <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span> ; <span class="id" title="var">iFailCore</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_fail_invalid_PC_false"><span class="id" title="constructor">IsUnique_fail_invalid_PC_false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;PC&nbsp;has&nbsp;been&nbsp;incremented&nbsp;correctly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.cap_lang.html#update_reg"><span class="id" title="definition">update_reg</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.rules.rules_base.html#incrementLPC_success_updatePC"><span class="id" title="axiom">incrementLPC_success_updatePC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">mem</span> <span class="id" title="var">etable</span> <span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">p1</span> &amp; <span class="id" title="var">b1</span> &amp; <span class="id" title="var">e1</span> &amp; <span class="id" title="var">a1</span> &amp; <span class="id" title="var">a_pc1</span> &amp; <span class="id" title="var">v1</span> &amp; <span class="id" title="var">HPC''</span> &amp; <span class="id" title="var">Ha_pc'</span> &amp; <span class="id" title="var">HuPC</span> &amp; -&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdst</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_base.html#updatePC_success_incl"><span class="id" title="axiom">updatePC_success_incl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m'</span>:=<span class="id" title="var">mem</span>) (<span class="id" title="var">etbl'</span>:=<span class="id" title="var">etable</span>) (<span class="id" title="var">ecur'</span>:=<span class="id" title="var">enumcur</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_fmap_mono</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="lw:260" class="idref" href="#lw:260"><span class="id" title="binder"><span id="lw:261" class="id">lw</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#lw:260"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">dst</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">reg</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> !<span class="id" title="lemma">fmap_insert</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HuPC</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">HuPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;we&nbsp;(need&nbsp;to)&nbsp;destruct&nbsp;the&nbsp;cases&nbsp;when&nbsp;the&nbsp;registers&nbsp;are&nbsp;equals&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">dst</span> <span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">((</span><a class="idref" href="cap_machine.rules.rules_base.html#gen_heap_update_inSepM"><span class="id" title="axiom">gen_heap_update_inSepM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <span class="id" title="notation">)</span> <span class="id" title="notation">with</span> "Hr Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr Hmap]"; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>; <span class="id" title="var">iModIntro</span> ; <span class="id" title="var">iSplitR</span> "Hφ Hmap Hmem".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="var">iApply</span> "Hφ" ; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#IsUnique_success_false"><span class="id" title="constructor">IsUnique_success_false</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">lm</span>, <span class="id" title="var">cur_map</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstrips</span> <span class="id" title="var">Hcur_reg</span>] [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>]]<br/>
      ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [|<span class="id" title="tactic">split</span>;<span class="id" title="tactic">eauto</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hstrips</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> !<span class="id" title="lemma">fmap_insert</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span> ; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">cbn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;for&nbsp;proving&nbsp;this&nbsp;automatically&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HPC</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HPC''</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word_cap_change"><span class="id" title="axiom">is_cur_word_cap_change</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;derive&nbsp;a&nbsp;valid&nbsp;version&nbsp;of&nbsp;the&nbsp;rule:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Because&nbsp;I&nbsp;don't&nbsp;know&nbsp;the&nbsp;whole&nbsp;content&nbsp;of&nbsp;the&nbsp;memory&nbsp;(only&nbsp;a&nbsp;local&nbsp;view),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;sucessful&nbsp;IsUnique&nbsp;wp-rule&nbsp;can&nbsp;have&nbsp;2&nbsp;outcomes:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;either&nbsp;the&nbsp;sweep&nbsp;success&nbsp;or&nbsp;the&nbsp;sweep&nbsp;fails.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Importantly,&nbsp;we&nbsp;cannot&nbsp;derive&nbsp;any&nbsp;sweep&nbsp;success&nbsp;rule,&nbsp;because&nbsp;we&nbsp;would&nbsp;need<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;entire&nbsp;footprint&nbsp;of&nbsp;the&nbsp;registers/memory.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.rules.rules_IsUnique.html#cap_lang_rules"><span class="id" title="section">cap_lang_rules</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
