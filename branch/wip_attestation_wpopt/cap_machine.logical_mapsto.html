<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.logical_mapsto</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">invariants</span> <span class="id" title="library">gen_heap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">ectx_lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="cap_machine.cap_lang.html#"><span class="id" title="library">cap_lang</span></a> <a class="idref" href="cap_machine.iris_extra.html#"><span class="id" title="library">iris_extra</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a> <a class="idref" href="cap_machine.machine_parameters.html#"><span class="id" title="library">machine_parameters</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Version" class="idref" href="#Version"><span class="id" title="definition">Version</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="LAddr" class="idref" href="#LAddr"><span class="id" title="definition">LAddr</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Inductive</span> <a id="LSealable" class="idref" href="#LSealable"><span class="id" title="definition, inductive"><span id="LSealable_rect" class="id"><span id="LSealable_ind" class="id"><span id="LSealable_rec" class="id"><span id="LSealable_sind" class="id">LSealable</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LSCap" class="idref" href="#LSCap"><span class="id" title="constructor">LSCap</span></a>: <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a><br/>
| <a id="LSSealRange" class="idref" href="#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a>: <a class="idref" href="cap_machine.machine_base.html#SealPerms"><span class="id" title="definition">SealPerms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="LWord" class="idref" href="#LWord"><span class="id" title="definition, inductive"><span id="LWord_rect" class="id"><span id="LWord_ind" class="id"><span id="LWord_rec" class="id"><span id="LWord_sind" class="id">LWord</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LWInt" class="idref" href="#LWInt"><span class="id" title="constructor">LWInt</span></a> (<a id="z:5" class="idref" href="#z:5"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
| <a id="LWSealable" class="idref" href="#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a id="sb:6" class="idref" href="#sb:6"><span class="id" title="binder">sb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>)<br/>
| <a id="LWSealed" class="idref" href="#LWSealed"><span class="id" title="constructor">LWSealed</span></a>: <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord:3"><span class="id" title="inductive">LWord</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="LCap" class="idref" href="#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealRange" class="idref" href="#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealedCap" class="idref" href="#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LInt" class="idref" href="#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="lword_inhabited" class="idref" href="#lword_inhabited"><span class="id" title="instance">lword_inhabited</span></a>: <span class="id" title="class">Inhabited</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="version_eq_dec" class="idref" href="#version_eq_dec"><span class="id" title="instance">version_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lsealb_eq_dec" class="idref" href="#lsealb_eq_dec"><span class="id" title="instance">lsealb_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lword_eq_dec" class="idref" href="#lword_eq_dec"><span class="id" title="instance">lword_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="lsealable_countable" class="idref" href="#lsealable_countable"><span class="id" title="instance">lsealable_countable</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">enc</span> := <span class="id" title="keyword">fun</span> <a id="sb:7" class="idref" href="#sb:7"><span class="id" title="binder"><span id="sb:9" class="id">sb</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#sb:7"><span class="id" title="variable">sb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">dec</span> := <span class="id" title="keyword">fun</span> <a id="e:11" class="idref" href="#e:11"><span class="id" title="binder"><span id="e:13" class="id">e</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="var">a</span> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="definition">inj_countable'</span> <span class="id" title="var">enc</span> <span class="id" title="var">dec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="lword_countable" class="idref" href="#lword_countable"><span class="id" title="instance">lword_countable</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">enc</span> := <span class="id" title="keyword">fun</span> <a id="w:15" class="idref" href="#w:15"><span class="id" title="binder"><span id="w:17" class="id">w</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:15"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">sb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">x</span> <span class="id" title="var">x0</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">dec</span> := <span class="id" title="keyword">fun</span> <a id="e:19" class="idref" href="#e:19"><span class="id" title="binder"><span id="e:21" class="id">e</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:19"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">sb</span>) =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">x</span> <span class="id" title="var">x0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="definition">inj_countable'</span> <span class="id" title="var">enc</span> <span class="id" title="var">dec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="tactic">fresh</span> "z" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="tactic">fresh</span> "p" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">b</span> := <span class="id" title="tactic">fresh</span> "b" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">fresh</span> "e" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="tactic">fresh</span> "a" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">fresh</span> "v" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">o</span> := <span class="id" title="tactic">fresh</span> "o" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sr</span> := <span class="id" title="tactic">fresh</span> "sr" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sd</span> := <span class="id" title="tactic">fresh</span> "sd" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">z</span> | [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>] | <span class="id" title="var">o</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>]].<br/>

<br/>
<span class="comment">(*&nbsp;Getters&nbsp;lword&nbsp;and&nbsp;laddr&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lsealable_get_sealable" class="idref" href="#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> (<a id="lsb:23" class="idref" href="#lsb:23"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Sealable"><span class="id" title="inductive">Sealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:23"><span class="id" title="variable">lsb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SSealRange"><span class="id" title="constructor">SSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_word" class="idref" href="#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a id="lw:25" class="idref" href="#lw:25"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:25"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealable"><span class="id" title="constructor">WSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealed"><span class="id" title="constructor">WSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_version" class="idref" href="#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> (<a id="lw:27" class="idref" href="#lw:27"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:27"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | (<a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_addr" class="idref" href="#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> (<a id="la:29" class="idref" href="#la:29"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:29"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_version" class="idref" href="#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> (<a id="la:30" class="idref" href="#la:30"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:30"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_inv" class="idref" href="#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a> <a id="la:31" class="idref" href="#la:31"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="logical_region" class="idref" href="#logical_region"><span class="id" title="definition">logical_region</span></a> ( <a id="region:32" class="idref" href="#region:32"><span class="id" title="binder">region</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> ) (<a id="v:33" class="idref" href="#v:33"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="a:34" class="idref" href="#a:34"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:34"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:33"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#region:32"><span class="id" title="variable">region</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lcap" class="idref" href="#is_lcap"><span class="id" title="definition">is_lcap</span></a> (<a id="w:35" class="idref" href="#w:35"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:35"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_lcap" class="idref" href="#get_lcap"><span class="id" title="definition">get_lcap</span></a> (<a id="w:37" class="idref" href="#w:37"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:37"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_is_lcap" class="idref" href="#get_is_lcap"><span class="id" title="lemma">get_is_lcap</span></a> <a id="lw:39" class="idref" href="#lw:39"><span class="id" title="binder">lw</span></a> <a id="lsb:40" class="idref" href="#lsb:40"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:39"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:40"><span class="id" title="variable">lsb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:39"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a>, <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a>. <span class="id" title="tactic">repeat</span> (<span class="id" title="var">case_match</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_is_lcap_inv" class="idref" href="#get_is_lcap_inv"><span class="id" title="lemma">get_is_lcap_inv</span></a> (<a id="lw:41" class="idref" href="#lw:41"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:41"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="p:42" class="idref" href="#p:42"><span class="id" title="binder">p</span></a> <a id="b:43" class="idref" href="#b:43"><span class="id" title="binder">b</span></a> <a id="e:44" class="idref" href="#e:44"><span class="id" title="binder">e</span></a> <a id="a:45" class="idref" href="#a:45"><span class="id" title="binder">a</span></a> <a id="v:46" class="idref" href="#v:46"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:41"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:42"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:43"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:44"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:46"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span> ; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_log_cap" class="idref" href="#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> (<a id="lw:47" class="idref" href="#lw:47"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:47"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_true_iff" class="idref" href="#is_log_cap_is_cap_true_iff"><span class="id" title="lemma">is_log_cap_is_cap_true_iff</span></a> (<a id="lw:49" class="idref" href="#lw:49"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_false_iff" class="idref" href="#is_log_cap_is_cap_false_iff"><span class="id" title="lemma">is_log_cap_is_cap_false_iff</span></a> (<a id="lw:50" class="idref" href="#lw:50"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:50"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:50"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VMap" class="idref" href="#VMap"><span class="id" title="definition">VMap</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LReg" class="idref" href="#LReg"><span class="id" title="definition">LReg</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LMem" class="idref" href="#LMem"><span class="id" title="definition">LMem</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LDFrac" class="idref" href="#LDFrac"><span class="id" title="definition">LDFrac</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <span class="id" title="inductive">iris.algebra.dfrac.dfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lreg_strip" class="idref" href="#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> (<a id="lr:51" class="idref" href="#lr:51"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a> :=<br/>
&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="lw:52" class="idref" href="#lw:52"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:52"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:51"><span class="id" title="variable">lr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_addr" class="idref" href="#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> (<a id="la:53" class="idref" href="#la:53"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="vmap:54" class="idref" href="#vmap:54"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:54"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:53"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:53"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>. <span class="comment">(*&nbsp;check&nbsp;whether&nbsp;the&nbsp;version&nbsp;of&nbsp;`la`&nbsp;matches&nbsp;in&nbsp;cur_map&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_word" class="idref" href="#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a id="lw:55" class="idref" href="#lw:55"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="vmap:56" class="idref" href="#vmap:56"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:55"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:58" class="idref" href="#a:58"><span class="id" title="binder"><span id="a:59" class="id">a</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:58"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#vmap:56"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:58"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_regs" class="idref" href="#is_cur_regs"><span class="id" title="definition">is_cur_regs</span></a> (<a id="lr:60" class="idref" href="#lr:60"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:61" class="idref" href="#vmap:61"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <a id="lw:62" class="idref" href="#lw:62"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:62"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:61"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:60"><span class="id" title="variable">lr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_regs_mono" class="idref" href="#is_cur_regs_mono"><span class="id" title="lemma">is_cur_regs_mono</span></a> {<a id="lr1:63" class="idref" href="#lr1:63"><span class="id" title="binder">lr1</span></a> <a id="lr2:64" class="idref" href="#lr2:64"><span class="id" title="binder">lr2</span></a> <a id="vmap:65" class="idref" href="#vmap:65"><span class="id" title="binder">vmap</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr1:63"><span class="id" title="variable">lr1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr2:64"><span class="id" title="variable">lr2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_regs"><span class="id" title="definition">is_cur_regs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr2:64"><span class="id" title="variable">lr2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:65"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_regs"><span class="id" title="definition">is_cur_regs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr1:63"><span class="id" title="variable">lr1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:65"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsubset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">map_subseteq_union</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsubset</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_union_1_1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="is_cur_addr_dec" class="idref" href="#is_cur_addr_dec"><span class="id" title="instance">is_cur_addr_dec</span></a> (<a id="la:66" class="idref" href="#la:66"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="vmap:67" class="idref" href="#vmap:67"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:66"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:67"><span class="id" title="variable">vmap</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">la</span><span class="id" title="notation">.1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_same" class="idref" href="#is_cur_addr_same"><span class="id" title="lemma">is_cur_addr_same</span></a> (<a id="a:68" class="idref" href="#a:68"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:69" class="idref" href="#v:69"><span class="id" title="binder">v</span></a> <a id="v':70" class="idref" href="#v':70"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:71" class="idref" href="#vmap:71"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:68"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:69"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:71"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:68"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':70"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:71"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#v:69"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':70"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hcur_a</span> <span class="id" title="var">Hcur_a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lword_version" class="idref" href="#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> (<a id="lw:72" class="idref" href="#lw:72"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:73" class="idref" href="#p:73"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:74" class="idref" href="#b:74"><span class="id" title="binder">b</span></a> <a id="e:75" class="idref" href="#e:75"><span class="id" title="binder">e</span></a> <a id="a:76" class="idref" href="#a:76"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:77" class="idref" href="#v:77"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:72"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:76"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:77"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_lword_inv" class="idref" href="#is_lword_inv"><span class="id" title="lemma">is_lword_inv</span></a> (<a id="lw:78" class="idref" href="#lw:78"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:79" class="idref" href="#p:79"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:80" class="idref" href="#b:80"><span class="id" title="binder">b</span></a> <a id="e:81" class="idref" href="#e:81"><span class="id" title="binder">e</span></a> <a id="a:82" class="idref" href="#a:82"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:83" class="idref" href="#v:83"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:78"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:81"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:82"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:83"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="o:84" class="idref" href="#o:84"><span class="id" title="binder">o</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:78"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#o:84"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:81"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:82"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:83"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:78"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:81"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:82"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:83"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hversion</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span>; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">eexists</span>]; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cur_lword_cur_addr" class="idref" href="#cur_lword_cur_addr"><span class="id" title="lemma">cur_lword_cur_addr</span></a> <a id="lw:85" class="idref" href="#lw:85"><span class="id" title="binder">lw</span></a> <a id="p:86" class="idref" href="#p:86"><span class="id" title="binder">p</span></a> <a id="b:87" class="idref" href="#b:87"><span class="id" title="binder">b</span></a> <a id="e:88" class="idref" href="#e:88"><span class="id" title="binder">e</span></a> <a id="a:89" class="idref" href="#a:89"><span class="id" title="binder">a</span></a> (<a id="v:90" class="idref" href="#v:90"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:91" class="idref" href="#vmap:91"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:85"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:86"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:87"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:88"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:90"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:85"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:91"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:87"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:88"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:89"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:90"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:91"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlword</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> ; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_lword_inv"><span class="id" title="axiom">is_lword_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlword</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlword</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">o</span> ?]| ?] ; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>, <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbounds</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_lw</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_lword_lea" class="idref" href="#is_cur_lword_lea"><span class="id" title="lemma">is_cur_lword_lea</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:92" class="idref" href="#vmap:92"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="p:93" class="idref" href="#p:93"><span class="id" title="binder">p</span></a> <a id="p':94" class="idref" href="#p':94"><span class="id" title="binder">p'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:95" class="idref" href="#b:95"><span class="id" title="binder">b</span></a> <a id="e:96" class="idref" href="#e:96"><span class="id" title="binder">e</span></a> <a id="a:97" class="idref" href="#a:97"><span class="id" title="binder">a</span></a> <a id="a':98" class="idref" href="#a':98"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:99" class="idref" href="#v:99"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:100" class="idref" href="#lw:100"><span class="id" title="binder">lw</span></a> <a id="lw':101" class="idref" href="#lw':101"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:100"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:93"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:95"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:97"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':101"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':94"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:95"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':98"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:100"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:92"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':101"><span class="id" title="variable">lw'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:92"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hlw'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_insert_ne" class="idref" href="#is_cur_addr_insert_ne"><span class="id" title="lemma">is_cur_addr_insert_ne</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:102" class="idref" href="#vmap:102"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:103" class="idref" href="#a:103"><span class="id" title="binder">a</span></a> <a id="a':104" class="idref" href="#a':104"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:105" class="idref" href="#v:105"><span class="id" title="binder">v</span></a> <a id="v':106" class="idref" href="#v':106"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:103"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':104"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:103"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:105"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:102"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:103"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:105"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a':104"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v':106"><span class="id" title="variable">v'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_insert" class="idref" href="#is_cur_addr_insert"><span class="id" title="lemma">is_cur_addr_insert</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:107" class="idref" href="#vmap:107"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:108" class="idref" href="#a:108"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:109" class="idref" href="#v:109"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:108"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:109"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a:108"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v:109"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_reg_lreg_strip" class="idref" href="#insert_reg_lreg_strip"><span class="id" title="lemma">insert_reg_lreg_strip</span></a> (<a id="lregs:110" class="idref" href="#lregs:110"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:111" class="idref" href="#r:111"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:112" class="idref" href="#lw:112"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:110"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:111"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:112"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:111"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:112"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:110"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_lcap_lreg_strip" class="idref" href="#insert_lcap_lreg_strip"><span class="id" title="lemma">insert_lcap_lreg_strip</span></a><br/>
&nbsp;&nbsp;(<a id="lregs:113" class="idref" href="#lregs:113"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:114" class="idref" href="#r:114"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:115" class="idref" href="#lw:115"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:115"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:113"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:114"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:115"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:114"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:115"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:113"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="next_version_lword" class="idref" href="#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> (<a id="lw:116" class="idref" href="#lw:116"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> ) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:116"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:116"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lword_get_word_next_version" class="idref" href="#lword_get_word_next_version"><span class="id" title="lemma">lword_get_word_next_version</span></a> (<a id="lw:118" class="idref" href="#lw:118"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:118"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:118"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_lcap_update_version_lword" class="idref" href="#is_lcap_update_version_lword"><span class="id" title="lemma">is_lcap_update_version_lword</span></a> (<a id="lw:119" class="idref" href="#lw:119"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:119"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:119"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
The `reg_phys_log_corresponds` states that, the physical register file `phr` corresponds
    to the the logical register file `lr`, according to the view map `vmap` if:
<ul class="doclist">
<li> the content of the register `phr` is the same as the words in `lr` w/o the version

</li>
<li> the version of the capabilities in `lr` are the same as the version of its addresses
      in the view map `vmap`

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="reg_phys_log_corresponds" class="idref" href="#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<a id="phr:120" class="idref" href="#phr:120"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:121" class="idref" href="#lr:121"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:122" class="idref" href="#vmap:122"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:121"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:120"><span class="id" title="variable">phr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_regs"><span class="id" title="definition">is_cur_regs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:121"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:122"><span class="id" title="variable">vmap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_legal_address" class="idref" href="#is_legal_address"><span class="id" title="definition">is_legal_address</span></a> (<a id="lm:123" class="idref" href="#lm:123"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) <a id="vmap:124" class="idref" href="#vmap:124"><span class="id" title="binder">vmap</span></a> <a id="la:125" class="idref" href="#la:125"><span class="id" title="binder">la</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="cur_v:126" class="idref" href="#cur_v:126"><span class="id" title="binder">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:125"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:126"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:124"><span class="id" title="variable">vmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:125"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:126"><span class="id" title="variable">cur_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">is_Some</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#lm:123"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:125"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:126"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
</div>

<div class="doc">
for each logical address in the logical memory,
<ul class="doclist">
<li> the version is less than or equal to the current version of the address

</li>
<li> the current version of the address also exists in the logical memory 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mem_current_version" class="idref" href="#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> (<a id="lm:127" class="idref" href="#lm:127"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:128" class="idref" href="#vmap:128"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:129" class="idref" href="#la:129"><span class="id" title="binder">la</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_legal_address"><span class="id" title="definition">is_legal_address</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:127"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:128"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:129"><span class="id" title="variable">la</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lm:127"><span class="id" title="variable">lm</span></a>.<br/>

<br/>
</div>

<div class="doc">
for all entries in the view/curr map,
<ul class="doclist">
<li> there exists a logical word `lw` in the logical memory `lm`
      ( i.e. dom(vmap) ⊆ dom(lm) ) s.t.

</li>
<li> the logical word `lw` corresponds to the actual word in the physical memory `phm`
      for the same address

</li>
<li> the logical word `lw` is the current view of the word 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mem_vmap_root" class="idref" href="#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> (<a id="phm:130" class="idref" href="#phm:130"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:131" class="idref" href="#lm:131"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:132" class="idref" href="#vmap:132"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:133" class="idref" href="#a:133"><span class="id" title="binder">a</span></a> <a id="v:134" class="idref" href="#v:134"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:135" class="idref" href="#lw:135"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:131"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:133"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:134"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:135"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:130"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:133"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:135"><span class="id" title="variable">lw</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:135"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:132"><span class="id" title="variable">vmap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:132"><span class="id" title="variable">vmap</span></a>. <span class="comment">(*&nbsp;subset&nbsp;in&nbsp;other&nbsp;direction,&nbsp;and&nbsp;every&nbsp;current&nbsp;address&nbsp;is&nbsp;gc&nbsp;root&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mem_phys_log_corresponds" class="idref" href="#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> (<a id="phm:136" class="idref" href="#phm:136"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:137" class="idref" href="#lm:137"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:138" class="idref" href="#vmap:138"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:137"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:138"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:136"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:137"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:138"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_phys_log_corresponds" class="idref" href="#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phr:139" class="idref" href="#phr:139"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:140" class="idref" href="#phm:140"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:141" class="idref" href="#lr:141"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:142" class="idref" href="#lm:142"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:143" class="idref" href="#vmap:143"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:139"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:141"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:143"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:140"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:142"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:143"><span class="id" title="variable">vmap</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;lreg_corresponds&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_read_iscur" class="idref" href="#lreg_corresponds_read_iscur"><span class="id" title="lemma">lreg_corresponds_read_iscur</span></a><br/>
&nbsp;&nbsp;(<a id="phr:144" class="idref" href="#phr:144"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:145" class="idref" href="#lr:145"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:146" class="idref" href="#vmap:146"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:147" class="idref" href="#r:147"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:148" class="idref" href="#lw:148"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:144"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:145"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:146"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:145"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:147"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:148"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:148"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:146"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_get_word" class="idref" href="#lreg_corresponds_get_word"><span class="id" title="lemma">lreg_corresponds_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:149" class="idref" href="#phr:149"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:150" class="idref" href="#lr:150"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:151" class="idref" href="#vmap:151"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:152" class="idref" href="#r:152"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:153" class="idref" href="#lw:153"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:149"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:150"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:151"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:150"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:152"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:153"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:149"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:152"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:153"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [&lt;- <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_fmap_Some</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_insert_respects" class="idref" href="#lreg_corresponds_insert_respects"><span class="id" title="lemma">lreg_corresponds_insert_respects</span></a><br/>
&nbsp;&nbsp;(<a id="phr:154" class="idref" href="#phr:154"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:155" class="idref" href="#lr:155"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:156" class="idref" href="#vmap:156"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:157" class="idref" href="#r:157"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:158" class="idref" href="#lw:158"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:154"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:155"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:156"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:158"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:156"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:157"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:158"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phr</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:157"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:158"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:156"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fmap_insert</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_delete" class="idref" href="#lreg_corresponds_delete"><span class="id" title="lemma">lreg_corresponds_delete</span></a><br/>
&nbsp;&nbsp;(<a id="phr:159" class="idref" href="#phr:159"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:160" class="idref" href="#lr:160"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:161" class="idref" href="#vmap:161"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:162" class="idref" href="#src:162"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:159"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:160"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:161"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:162"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:159"><span class="id" title="variable">phr</span></a>) (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:162"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:160"><span class="id" title="variable">lr</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:161"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word_1" class="idref" href="#lreg_corresponds_cap_cur_word_1"><span class="id" title="lemma">lreg_corresponds_cap_cur_word_1</span></a><br/>
&nbsp;&nbsp;(<a id="phr:163" class="idref" href="#phr:163"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:164" class="idref" href="#lr:164"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:165" class="idref" href="#vmap:165"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:166" class="idref" href="#lw:166"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:167" class="idref" href="#p:167"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:168" class="idref" href="#b:168"><span class="id" title="binder">b</span></a> <a id="e:169" class="idref" href="#e:169"><span class="id" title="binder">e</span></a> <a id="a:170" class="idref" href="#a:170"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:171" class="idref" href="#la:171"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:172" class="idref" href="#r:172"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:163"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:164"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:165"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:166"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:167"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:168"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:169"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:170"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:171"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:170"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:168"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:169"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:170"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:164"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:172"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:166"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:166"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:171"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:171"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:165"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlcap</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word_2" class="idref" href="#lreg_corresponds_cap_cur_word_2"><span class="id" title="lemma">lreg_corresponds_cap_cur_word_2</span></a><br/>
&nbsp;&nbsp;(<a id="phr:173" class="idref" href="#phr:173"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:174" class="idref" href="#lr:174"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:175" class="idref" href="#vmap:175"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:176" class="idref" href="#lw:176"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:177" class="idref" href="#p:177"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:178" class="idref" href="#b:178"><span class="id" title="binder">b</span></a> <a id="e:179" class="idref" href="#e:179"><span class="id" title="binder">e</span></a> <a id="a:180" class="idref" href="#a:180"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:181" class="idref" href="#la:181"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:182" class="idref" href="#r:182"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:173"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:174"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:175"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:176"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:177"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:178"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:179"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:180"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:181"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:180"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:178"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:179"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:180"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:174"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:176"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:181"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:175"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:176"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:181"><span class="id" title="variable">la</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlr</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hinbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_regs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word" class="idref" href="#lreg_corresponds_cap_cur_word"><span class="id" title="lemma">lreg_corresponds_cap_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:183" class="idref" href="#phr:183"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:184" class="idref" href="#lr:184"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:185" class="idref" href="#vmap:185"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:186" class="idref" href="#lw:186"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:187" class="idref" href="#p:187"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:188" class="idref" href="#b:188"><span class="id" title="binder">b</span></a> <a id="e:189" class="idref" href="#e:189"><span class="id" title="binder">e</span></a> <a id="a:190" class="idref" href="#a:190"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:191" class="idref" href="#la:191"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:192" class="idref" href="#r:192"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:183"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:184"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:185"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:186"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:187"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:188"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:189"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:190"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:191"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:190"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:188"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:189"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:190"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:184"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:192"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:186"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:186"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:191"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:191"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:185"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HInvReg</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hinbounds</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word_1"><span class="id" title="axiom">lreg_corresponds_cap_cur_word_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word_2"><span class="id" title="axiom">lreg_corresponds_cap_cur_word_2</span></a> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_correct_PC" class="idref" href="#lreg_corresponds_correct_PC"><span class="id" title="lemma">lreg_corresponds_correct_PC</span></a><br/>
&nbsp;&nbsp;(<a id="phr:193" class="idref" href="#phr:193"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:194" class="idref" href="#lr:194"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:195" class="idref" href="#vmap:195"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:196" class="idref" href="#lw:196"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:197" class="idref" href="#p:197"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:198" class="idref" href="#b:198"><span class="id" title="binder">b</span></a> <a id="e:199" class="idref" href="#e:199"><span class="id" title="binder">e</span></a> <a id="a:200" class="idref" href="#a:200"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:201" class="idref" href="#la:201"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:202" class="idref" href="#r:202"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:193"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:194"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:195"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:196"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:197"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:198"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:199"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:200"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:201"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:200"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:197"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:198"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:199"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:200"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:194"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:202"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:196"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:196"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:201"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:201"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:195"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HinvReg</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_withinBounds"><span class="id" title="axiom">isCorrectPC_withinBounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word"><span class="id" title="axiom">lreg_corresponds_cap_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_is_cur" class="idref" href="#lreg_corresponds_cap_is_cur"><span class="id" title="lemma">lreg_corresponds_cap_is_cur</span></a><br/>
&nbsp;&nbsp;(<a id="phr:203" class="idref" href="#phr:203"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:204" class="idref" href="#lr:204"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:205" class="idref" href="#vmap:205"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:206" class="idref" href="#src:206"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:207" class="idref" href="#p:207"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>)  (<a id="b:208" class="idref" href="#b:208"><span class="id" title="binder">b</span></a> <a id="e:209" class="idref" href="#e:209"><span class="id" title="binder">e</span></a> <a id="a:210" class="idref" href="#a:210"><span class="id" title="binder">a</span></a> <a id="a':211" class="idref" href="#a':211"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:212" class="idref" href="#v:212"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:203"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:204"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:205"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:204"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:206"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:207"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:208"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:209"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:210"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:212"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':211"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:208"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:209"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':211"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:212"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:205"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_read_iscur"><span class="id" title="axiom">lreg_corresponds_read_iscur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw'</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq_2"><span class="id" title="axiom">withinBounds_in_seq_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;lmem_corresponds&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_read_iscur" class="idref" href="#lmem_corresponds_read_iscur"><span class="id" title="lemma">lmem_corresponds_read_iscur</span></a><br/>
&nbsp;&nbsp;(<a id="phm:213" class="idref" href="#phm:213"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:214" class="idref" href="#lm:214"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:215" class="idref" href="#vmap:215"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:216" class="idref" href="#la:216"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:217" class="idref" href="#lw:217"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:213"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:214"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:215"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:216"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:215"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:214"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:216"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:217"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:217"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:215"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hphm</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw'</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_insert_respects" class="idref" href="#lmem_corresponds_insert_respects"><span class="id" title="lemma">lmem_corresponds_insert_respects</span></a><br/>
&nbsp;&nbsp;(<a id="phm:218" class="idref" href="#phm:218"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:219" class="idref" href="#lm:219"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:220" class="idref" href="#vmap:220"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:221" class="idref" href="#la:221"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:222" class="idref" href="#lw:222"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:218"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:219"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:221"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:222"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:221"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:222"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#la:221"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:222"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <span class="id" title="var">la</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">H1</span> &amp; <span class="id" title="var">H2</span> &amp; <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v</span>. <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">la</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <span class="id" title="var">la'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cur_v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hp</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hp'</span> := <span class="id" title="var">Hp</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hneq</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> ;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">intro</span>; <span class="id" title="var">simplify_pair_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_get_word" class="idref" href="#lmem_corresponds_get_word"><span class="id" title="lemma">lmem_corresponds_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phm:223" class="idref" href="#phm:223"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:224" class="idref" href="#lm:224"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:225" class="idref" href="#vmap:225"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:226" class="idref" href="#a:226"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:227" class="idref" href="#v:227"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:228" class="idref" href="#lw:228"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:223"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:224"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:225"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:226"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:227"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:225"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:224"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:226"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:227"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:228"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:223"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:226"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:228"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hcur</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_current_word" class="idref" href="#lmem_corresponds_current_word"><span class="id" title="lemma">lmem_corresponds_current_word</span></a><br/>
&nbsp;&nbsp;(<a id="phm:229" class="idref" href="#phm:229"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:230" class="idref" href="#lm:230"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:231" class="idref" href="#vmap:231"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:232" class="idref" href="#a:232"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:233" class="idref" href="#v:233"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:234" class="idref" href="#lw:234"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:229"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:230"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:231"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:230"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:232"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:233"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:234"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:232"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:233"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:231"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:234"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:231"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hlm</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;state_corresponds&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_reg_get_word" class="idref" href="#state_corresponds_reg_get_word"><span class="id" title="lemma">state_corresponds_reg_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:235" class="idref" href="#phr:235"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:236" class="idref" href="#phm:236"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:237" class="idref" href="#lr:237"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:238" class="idref" href="#lm:238"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:239" class="idref" href="#vmap:239"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:240" class="idref" href="#r:240"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:241" class="idref" href="#lw:241"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:235"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:236"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:237"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:238"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:239"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:237"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:240"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:241"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:235"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:240"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:241"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hreg</span> <span class="id" title="var">_</span>] ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_get_word"><span class="id" title="axiom">lreg_corresponds_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_reg_get_word_cap" class="idref" href="#state_corresponds_reg_get_word_cap"><span class="id" title="lemma">state_corresponds_reg_get_word_cap</span></a><br/>
&nbsp;&nbsp;(<a id="phr:242" class="idref" href="#phr:242"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:243" class="idref" href="#phm:243"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:244" class="idref" href="#lr:244"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:245" class="idref" href="#lm:245"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:246" class="idref" href="#vmap:246"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:247" class="idref" href="#r:247"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:248" class="idref" href="#p:248"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:249" class="idref" href="#b:249"><span class="id" title="binder">b</span></a> <a id="e:250" class="idref" href="#e:250"><span class="id" title="binder">e</span></a> <a id="a:251" class="idref" href="#a:251"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:252" class="idref" href="#v:252"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:242"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:243"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:244"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:245"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:246"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:244"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:247"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:248"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:249"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:250"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:251"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:252"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:242"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:247"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:248"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:249"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:250"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:251"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_mem_get_word" class="idref" href="#state_corresponds_mem_get_word"><span class="id" title="lemma">state_corresponds_mem_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:253" class="idref" href="#phr:253"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:254" class="idref" href="#phm:254"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:255" class="idref" href="#lr:255"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:256" class="idref" href="#lm:256"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:257" class="idref" href="#vmap:257"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:258" class="idref" href="#a:258"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:259" class="idref" href="#v:259"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:260" class="idref" href="#lw:260"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:253"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:254"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:255"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:256"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:257"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:258"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:259"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:257"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:256"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:258"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:259"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:260"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:254"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:258"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:260"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmem</span>] ? ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_corresponds_get_word"><span class="id" title="axiom">lmem_corresponds_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_cap_cur_word" class="idref" href="#state_corresponds_cap_cur_word"><span class="id" title="lemma">state_corresponds_cap_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:261" class="idref" href="#phr:261"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:262" class="idref" href="#phm:262"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:263" class="idref" href="#lr:263"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:264" class="idref" href="#lm:264"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:265" class="idref" href="#vmap:265"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:266" class="idref" href="#lw:266"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:267" class="idref" href="#p:267"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:268" class="idref" href="#b:268"><span class="id" title="binder">b</span></a> <a id="e:269" class="idref" href="#e:269"><span class="id" title="binder">e</span></a> <a id="a:270" class="idref" href="#a:270"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:271" class="idref" href="#la:271"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:272" class="idref" href="#r:272"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:261"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:262"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:263"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:264"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:265"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:266"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:267"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:268"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:269"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:270"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:271"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:270"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:268"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:269"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:270"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:263"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:272"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:266"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:266"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:271"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:271"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:265"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span>] <span class="id" title="var">Hlw</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word"><span class="id" title="axiom">lreg_corresponds_cap_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_mem_correct_PC" class="idref" href="#state_corresponds_mem_correct_PC"><span class="id" title="lemma">state_corresponds_mem_correct_PC</span></a><br/>
&nbsp;&nbsp;(<a id="phr:273" class="idref" href="#phr:273"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:274" class="idref" href="#phm:274"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:275" class="idref" href="#lr:275"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:276" class="idref" href="#lm:276"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:277" class="idref" href="#vmap:277"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:278" class="idref" href="#p:278"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:279" class="idref" href="#b:279"><span class="id" title="binder">b</span></a> <a id="e:280" class="idref" href="#e:280"><span class="id" title="binder">e</span></a> <a id="a:281" class="idref" href="#a:281"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:282" class="idref" href="#v:282"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="r:283" class="idref" href="#r:283"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:284" class="idref" href="#lw:284"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:273"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:274"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:275"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:276"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:277"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:278"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:279"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:280"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:281"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:275"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:283"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:278"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:279"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:280"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:281"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:282"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:276"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:281"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:282"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:284"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:274"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:281"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:284"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">HLinv</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_mem_get_word"><span class="id" title="axiom">state_corresponds_mem_get_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_correct_PC"><span class="id" title="axiom">lreg_corresponds_correct_PC</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_cap_all_current" class="idref" href="#state_corresponds_cap_all_current"><span class="id" title="lemma">state_corresponds_cap_all_current</span></a><br/>
&nbsp;&nbsp;(<a id="phr:285" class="idref" href="#phr:285"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:286" class="idref" href="#phm:286"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:287" class="idref" href="#lm:287"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:288" class="idref" href="#lr:288"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:289" class="idref" href="#vmap:289"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:290" class="idref" href="#src:290"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:291" class="idref" href="#lwsrc:291"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:292" class="idref" href="#p:292"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:293" class="idref" href="#b:293"><span class="id" title="binder">b</span></a> <a id="e:294" class="idref" href="#e:294"><span class="id" title="binder">e</span></a> <a id="a:295" class="idref" href="#a:295"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:296" class="idref" href="#v:296"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:285"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:286"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:288"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:287"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:289"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:291"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:292"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:293"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:294"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:295"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:296"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:288"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:290"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:291"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:297" class="idref" href="#a0:297"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:289"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:297"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:296"><span class="id" title="variable">v</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:293"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:294"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [ [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget_lw</span> <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="var">lwsrc</span> <span class="id" title="var">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_last_version_lword_region" class="idref" href="#state_corresponds_last_version_lword_region"><span class="id" title="lemma">state_corresponds_last_version_lword_region</span></a><br/>
&nbsp;&nbsp;(<a id="phr:298" class="idref" href="#phr:298"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:299" class="idref" href="#phm:299"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:300" class="idref" href="#lm:300"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:301" class="idref" href="#lr:301"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:302" class="idref" href="#vmap:302"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:303" class="idref" href="#p:303"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:304" class="idref" href="#b:304"><span class="id" title="binder">b</span></a> <a id="e:305" class="idref" href="#e:305"><span class="id" title="binder">e</span></a> <a id="a:306" class="idref" href="#a:306"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:307" class="idref" href="#v:307"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="src:308" class="idref" href="#src:308"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:309" class="idref" href="#lwsrc:309"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:298"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:299"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:301"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:300"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:302"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:309"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:303"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:304"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:305"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:306"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:307"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:301"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:308"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:309"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:310" class="idref" href="#a0:310"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:300"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:310"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:307"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:304"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:305"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [ [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget</span> <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="var">lwsrc</span> <span class="id" title="var">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="abbreviation">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_a0</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hv'</span> ; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmem_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hroot</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">cur</span> &amp; <span class="id" title="var">Hsome</span> &amp; <span class="id" title="var">Hmaxv</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw</span> &amp; <span class="id" title="var">Hlm</span> &amp; <span class="id" title="var">_</span>) ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_access_lword_region" class="idref" href="#state_corresponds_access_lword_region"><span class="id" title="lemma">state_corresponds_access_lword_region</span></a><br/>
&nbsp;&nbsp;(<a id="phr:311" class="idref" href="#phr:311"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:312" class="idref" href="#phm:312"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:313" class="idref" href="#lr:313"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:314" class="idref" href="#lm:314"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:315" class="idref" href="#vmap:315"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:316" class="idref" href="#src:316"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:317" class="idref" href="#lwsrc:317"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:318" class="idref" href="#p:318"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:319" class="idref" href="#b:319"><span class="id" title="binder">b</span></a> <a id="e:320" class="idref" href="#e:320"><span class="id" title="binder">e</span></a> <a id="a:321" class="idref" href="#a:321"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:322" class="idref" href="#v:322"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:311"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:312"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:313"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:314"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:315"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:317"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:318"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:319"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:320"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:321"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:322"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:313"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:316"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:317"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':323" class="idref" href="#a':323"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:314"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':323"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:322"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:319"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:320"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [ [<span class="id" title="var">_</span> ?] [? ?] ] <span class="id" title="var">Hget</span> <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlsrc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery for word access and unique_in_machine 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addr" class="idref" href="#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> (<a id="a:324" class="idref" href="#a:324"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="w:325" class="idref" href="#w:325"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:325"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span>) =&gt; (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:324"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">e</span>)%<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addrL" class="idref" href="#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> (<a id="a:326" class="idref" href="#a:326"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lw:327" class="idref" href="#lw:327"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:326"><span class="id" title="variable">a</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:327"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_word" class="idref" href="#update_cur_word"><span class="id" title="lemma">update_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="lm:328" class="idref" href="#lm:328"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:329" class="idref" href="#vmap:329"><span class="id" title="binder">vmap</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:330" class="idref" href="#a:330"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:331" class="idref" href="#v:331"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:332" class="idref" href="#lw:332"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:330"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:332"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:332"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:329"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:332"><span class="id" title="variable">lw</span></a> ( <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a:330"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v:331"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span> ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnaccess</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>; <span class="id" title="var">solve_addr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;version&nbsp;number&nbsp;of&nbsp;a&nbsp;memory&nbsp;region&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;all&nbsp;the&nbsp;content&nbsp;of&nbsp;a&nbsp;logical&nbsp;memory&nbsp;`lm`,<br/>
&nbsp;&nbsp;&nbsp;no&nbsp;current&nbsp;logical&nbsp;address&nbsp;has&nbsp;a&nbsp;lword&nbsp;that&nbsp;can&nbsp;access&nbsp;the&nbsp;address&nbsp;`a`.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Put&nbsp;another&nbsp;way,&nbsp;the&nbsp;"current&nbsp;view"&nbsp;of&nbsp;the&nbsp;memory&nbsp;cannot&nbsp;access&nbsp;`a`.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lmem_not_access_addrL" class="idref" href="#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> (<a id="lm:333" class="idref" href="#lm:333"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:334" class="idref" href="#vmap:334"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:335" class="idref" href="#a:335"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:336" class="idref" href="#la:336"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:337" class="idref" href="#lw:337"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:336"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:334"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:335"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:337"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;) <a class="idref" href="cap_machine.logical_mapsto.html#lm:333"><span class="id" title="variable">lm</span></a>.<br/>

<br/>
</div>

<div class="doc">
Sweep in logical memory 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="overlap_wordL" class="idref" href="#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a id="lw1:338" class="idref" href="#lw1:338"><span class="id" title="binder">lw1</span></a> <a id="lw2:339" class="idref" href="#lw2:339"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:338"><span class="id" title="variable">lw1</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:339"><span class="id" title="variable">lw2</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="overlap_wordL_dec" class="idref" href="#overlap_wordL_dec"><span class="id" title="instance">overlap_wordL_dec</span></a> (<a id="lw1:340" class="idref" href="#lw1:340"><span class="id" title="binder">lw1</span></a> <a id="lw2:341" class="idref" href="#lw2:341"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:340"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:341"><span class="id" title="variable">lw2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_word_leaL" class="idref" href="#not_overlap_word_leaL"><span class="id" title="lemma">not_overlap_word_leaL</span></a><br/>
&nbsp;&nbsp;(<a id="p1:342" class="idref" href="#p1:342"><span class="id" title="binder">p1</span></a> <a id="p2:343" class="idref" href="#p2:343"><span class="id" title="binder">p2</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b1:344" class="idref" href="#b1:344"><span class="id" title="binder">b1</span></a> <a id="b2:345" class="idref" href="#b2:345"><span class="id" title="binder">b2</span></a> <a id="e1:346" class="idref" href="#e1:346"><span class="id" title="binder">e1</span></a> <a id="e2:347" class="idref" href="#e2:347"><span class="id" title="binder">e2</span></a> <a id="a1:348" class="idref" href="#a1:348"><span class="id" title="binder">a1</span></a> <a id="a1':349" class="idref" href="#a1':349"><span class="id" title="binder">a1'</span></a> <a id="a2:350" class="idref" href="#a2:350"><span class="id" title="binder">a2</span></a> <a id="a2':351" class="idref" href="#a2':351"><span class="id" title="binder">a2'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:352" class="idref" href="#v1:352"><span class="id" title="binder">v1</span></a> <a id="v2:353" class="idref" href="#v2:353"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw1:354" class="idref" href="#lw1:354"><span class="id" title="binder">lw1</span></a> <a id="lw1':355" class="idref" href="#lw1':355"><span class="id" title="binder">lw1'</span></a> <a id="lw2:356" class="idref" href="#lw2:356"><span class="id" title="binder">lw2</span></a> <a id="lw2':357" class="idref" href="#lw2':357"><span class="id" title="binder">lw2'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:354"><span class="id" title="variable">lw1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:342"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:344"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:346"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:348"><span class="id" title="variable">a1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:352"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':355"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:342"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:344"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:346"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1':349"><span class="id" title="variable">a1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:352"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:356"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:343"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:345"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:347"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:350"><span class="id" title="variable">a2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:353"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':357"><span class="id" title="variable">lw2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:343"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:345"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:347"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2':351"><span class="id" title="variable">a2'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:353"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:354"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:356"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':355"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':357"><span class="id" title="variable">lw2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlw1</span> <span class="id" title="var">Hlw1'</span> <span class="id" title="var">Hlw2</span> <span class="id" title="var">Hlw2'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Hoverlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_wordL_seq_between" class="idref" href="#not_overlap_wordL_seq_between"><span class="id" title="lemma">not_overlap_wordL_seq_between</span></a><br/>
&nbsp;&nbsp;(<a id="p:358" class="idref" href="#p:358"><span class="id" title="binder">p</span></a> <a id="p':359" class="idref" href="#p':359"><span class="id" title="binder">p'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:360" class="idref" href="#b:360"><span class="id" title="binder">b</span></a> <a id="b':361" class="idref" href="#b':361"><span class="id" title="binder">b'</span></a> <a id="e:362" class="idref" href="#e:362"><span class="id" title="binder">e</span></a> <a id="e':363" class="idref" href="#e':363"><span class="id" title="binder">e'</span></a> <a id="a:364" class="idref" href="#a:364"><span class="id" title="binder">a</span></a> <a id="a':365" class="idref" href="#a':365"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:366" class="idref" href="#v:366"><span class="id" title="binder">v</span></a> <a id="v':367" class="idref" href="#v':367"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:368" class="idref" href="#lw:368"><span class="id" title="binder">lw</span></a> <a id="lw':369" class="idref" href="#lw':369"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:368"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:358"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:360"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:362"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:364"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:366"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':369"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':359"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':361"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':363"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':365"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':367"><span class="id" title="variable">v'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:368"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':369"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a0:370" class="idref" href="#a0:370"><span class="id" title="binder">a0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:370"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':361"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':363"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:370"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:360"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:362"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget_lw</span> <span class="id" title="var">Hget_lw'</span> <span class="id" title="var">Hnot_overlap</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha_in</span> <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnot_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /= /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_in</span>, <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b'</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hb</span>; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_registersL" class="idref" href="#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> (<a id="lregs:371" class="idref" href="#lregs:371"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:372" class="idref" href="#src:372"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:373" class="idref" href="#lwsrc:373"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="r:374" class="idref" href="#r:374"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwr:375" class="idref" href="#lwr:375"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.logical_mapsto.html#r:374"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:372"><span class="id" title="variable">src</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">True</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:373"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:375"><span class="id" title="variable">lwr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:371"><span class="id" title="variable">lregs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_registersL_dec" class="idref" href="#unique_in_registersL_dec"><span class="id" title="instance">unique_in_registersL_dec</span></a> (<a id="lregs:376" class="idref" href="#lregs:376"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:377" class="idref" href="#src:377"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:378" class="idref" href="#lwsrc:378"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:376"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:377"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:378"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">rw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Returns&nbsp;<span class="inlinecode"><span class="id" title="var">true</span></span>&nbsp;if&nbsp;<span class="inlinecode"><span class="id" title="var">r</span></span>&nbsp;is&nbsp;unique.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_memoryL" class="idref" href="#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> (<a id="lmem:379" class="idref" href="#lmem:379"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:380" class="idref" href="#vmap:380"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lwsrc:381" class="idref" href="#lwsrc:381"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:382" class="idref" href="#la:382"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lwa:383" class="idref" href="#lwa:383"><span class="id" title="binder">lwa</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:382"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:380"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:381"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:383"><span class="id" title="variable">lwa</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:379"><span class="id" title="variable">lmem</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_memoryL_dec" class="idref" href="#unique_in_memoryL_dec"><span class="id" title="instance">unique_in_memoryL_dec</span></a> (<a id="lmem:384" class="idref" href="#lmem:384"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:385" class="idref" href="#vmap:385"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lwsrc:386" class="idref" href="#lwsrc:386"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:384"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:385"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:386"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">la</span> <span class="id" title="var">lwa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">impl_dec</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_machineL" class="idref" href="#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lregs:387" class="idref" href="#lregs:387"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:388" class="idref" href="#lmem:388"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:389" class="idref" href="#vmap:389"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:390" class="idref" href="#src:390"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:391" class="idref" href="#lwsrc:391"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:387"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:390"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:391"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:387"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:390"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:391"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:388"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:389"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:391"><span class="id" title="variable">lwsrc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_registersL_mono" class="idref" href="#unique_in_registersL_mono"><span class="id" title="lemma">unique_in_registersL_mono</span></a><br/>
&nbsp;&nbsp;(<a id="lregs:392" class="idref" href="#lregs:392"><span class="id" title="binder">lregs</span></a> <a id="lr:393" class="idref" href="#lr:393"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:394" class="idref" href="#src:394"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:395" class="idref" href="#lwsrc:395"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:392"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:393"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:393"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:394"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:395"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:392"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:394"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:395"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hlregs_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hr</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="lemma">decide_False</span> // <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_insert_reg" class="idref" href="#unique_in_machineL_insert_reg"><span class="id" title="lemma">unique_in_machineL_insert_reg</span></a><br/>
&nbsp;&nbsp;(<a id="lr:396" class="idref" href="#lr:396"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:397" class="idref" href="#lm:397"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)  (<a id="vmap:398" class="idref" href="#vmap:398"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:399" class="idref" href="#src:399"><span class="id" title="binder">src</span></a> <a id="r:400" class="idref" href="#r:400"><span class="id" title="binder">r</span></a>: <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:401" class="idref" href="#lwsrc:401"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:402" class="idref" href="#lwr:402"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:400"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:399"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:396"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:399"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:401"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:401"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:402"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:396"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:397"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:398"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:399"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:401"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:400"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:402"><span class="id" title="variable">lwr</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#lm:397"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:398"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:399"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:401"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_src</span>] <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_not_overlap_word" class="idref" href="#unique_in_machineL_not_overlap_word"><span class="id" title="lemma">unique_in_machineL_not_overlap_word</span></a><br/>
&nbsp;&nbsp;(<a id="lr:403" class="idref" href="#lr:403"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:404" class="idref" href="#lm:404"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:405" class="idref" href="#vmap:405"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:406" class="idref" href="#src:406"><span class="id" title="binder">src</span></a> <a id="r:407" class="idref" href="#r:407"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:408" class="idref" href="#lwsrc:408"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:409" class="idref" href="#lwr:409"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:407"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:406"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:403"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:406"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:408"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:403"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:407"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:409"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:403"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:404"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:405"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:406"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:408"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:408"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:409"><span class="id" title="variable">lwr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_unique_in_registers" class="idref" href="#state_corresponds_unique_in_registers"><span class="id" title="lemma">state_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;(<a id="phr:410" class="idref" href="#phr:410"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:411" class="idref" href="#phm:411"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:412" class="idref" href="#lr:412"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:413" class="idref" href="#lm:413"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:414" class="idref" href="#vmap:414"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:415" class="idref" href="#src:415"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:416" class="idref" href="#lwsrc:416"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:410"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:411"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:412"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:413"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:414"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:412"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:415"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:416"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_registers"><span class="id" title="definition">unique_in_registers</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:410"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:415"><span class="id" title="variable">src</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:416"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:412"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:415"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:416"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">lwr</span> <span class="id" title="var">Hlr_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_r</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)) ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_r</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_unique_in_memory" class="idref" href="#state_corresponds_unique_in_memory"><span class="id" title="lemma">state_corresponds_unique_in_memory</span></a><br/>
&nbsp;&nbsp;(<a id="phr:417" class="idref" href="#phr:417"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:418" class="idref" href="#phm:418"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:419" class="idref" href="#lr:419"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:420" class="idref" href="#lm:420"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:421" class="idref" href="#vmap:421"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:422" class="idref" href="#src:422"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:423" class="idref" href="#lwsrc:423"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:417"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:418"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:419"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:420"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:421"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:419"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:422"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:423"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:418"><span class="id" title="variable">phm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:423"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:420"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:421"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:423"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a</span> <span class="id" title="var">v</span>] <span class="id" title="var">lw_la</span> <span class="id" title="var">Hlm_la</span> <span class="id" title="var">His_cur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphm_a</span> : <span class="id" title="var">phm</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw_la</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_corresponds_get_word"><span class="id" title="axiom">lmem_corresponds_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hphm_a</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'phm_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;link&nbsp;between<br/>
&nbsp;&nbsp;&nbsp;sweep&nbsp;of&nbsp;the&nbsp;physical&nbsp;machine<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;unique_in_machine&nbsp;of&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="sweep_true_specL" class="idref" href="#sweep_true_specL"><span class="id" title="lemma">sweep_true_specL</span></a><br/>
&nbsp;&nbsp;(<a id="phr:424" class="idref" href="#phr:424"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:425" class="idref" href="#phm:425"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:426" class="idref" href="#lr:426"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:427" class="idref" href="#lm:427"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:428" class="idref" href="#vmap:428"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:429" class="idref" href="#src:429"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:430" class="idref" href="#lwsrc:430"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:424"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:425"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:426"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:427"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:428"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:426"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:429"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:430"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:425"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:424"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:429"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:426"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:427"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:428"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:429"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:430"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_src</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#sweep_spec"><span class="id" title="axiom">sweep_spec</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">wsrc</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsweep</span> <span class="id" title="var">Hphr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsweep</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_unique_in_registers"><span class="id" title="axiom">state_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_unique_in_memory"><span class="id" title="axiom">state_corresponds_unique_in_memory</span></a> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="no_overlap_word_no_access_addrL" class="idref" href="#no_overlap_word_no_access_addrL"><span class="id" title="lemma">no_overlap_word_no_access_addrL</span></a><br/>
&nbsp;&nbsp;(<a id="p:431" class="idref" href="#p:431"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:432" class="idref" href="#b:432"><span class="id" title="binder">b</span></a> <a id="e:433" class="idref" href="#e:433"><span class="id" title="binder">e</span></a> <a id="a:434" class="idref" href="#a:434"><span class="id" title="binder">a</span></a> <a id="a':435" class="idref" href="#a':435"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:436" class="idref" href="#v:436"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:437" class="idref" href="#lw:437"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':435"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:432"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:433"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:431"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:432"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:433"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:434"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:436"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lw:437"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':435"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:437"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Ha'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw</span>)); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p0</span> <span class="id" title="var">b0</span> <span class="id" title="var">e0</span> <span class="id" title="var">a0</span>|] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b0</span>)%<span class="id" title="var">a</span> ; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machine_no_accessL" class="idref" href="#unique_in_machine_no_accessL"><span class="id" title="lemma">unique_in_machine_no_accessL</span></a><br/>
&nbsp;&nbsp;(<a id="phm:438" class="idref" href="#phm:438"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:439" class="idref" href="#lm:439"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:440" class="idref" href="#lr:440"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:441" class="idref" href="#vmap:441"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:442" class="idref" href="#p:442"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:443" class="idref" href="#b:443"><span class="id" title="binder">b</span></a> <a id="e:444" class="idref" href="#e:444"><span class="id" title="binder">e</span></a> <a id="a:445" class="idref" href="#a:445"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:446" class="idref" href="#v:446"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="src:447" class="idref" href="#src:447"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:448" class="idref" href="#lw:448"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:438"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:439"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:441"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:448"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:442"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:443"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:444"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:445"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:446"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:440"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:447"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:448"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:448"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:441"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:440"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:439"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:441"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:447"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:448"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':449" class="idref" href="#a':449"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:439"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:441"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':449"><span class="id" title="variable">a'</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:443"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:444"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hmem_inv</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">His_cur</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="var">vmap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="var">vmap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcur_a'</span>: <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="abbreviation">vmap</span>).<br/>
&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; [|<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; [|<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hunique</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span> ; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique_mem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlast_v</span> <span class="id" title="var">Hcur_v0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#no_overlap_word_no_access_addrL"><span class="id" title="axiom">no_overlap_word_no_access_addrL</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlast_v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">mem_corresponds_cur_addr_last_version_1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery to update the lmemory 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;We&nbsp;assume&nbsp;that&nbsp;*lmem*&nbsp;is&nbsp;a&nbsp;local&nbsp;view&nbsp;compatible&nbsp;with&nbsp;the&nbsp;global&nbsp;view&nbsp;*lm*.<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;also&nbsp;assume&nbsp;that&nbsp;*lm*&nbsp;contains&nbsp;the&nbsp;laddress&nbsp;*(a,v)*,<br/>
&nbsp;&nbsp;&nbsp;whereas&nbsp;*lmem*&nbsp;might&nbsp;not&nbsp;contain&nbsp;it.<br/>
<br/>
&nbsp;&nbsp;&nbsp;This&nbsp;way,&nbsp;the&nbsp;local&nbsp;view&nbsp;*lmem*&nbsp;can&nbsp;be&nbsp;updated,<br/>
&nbsp;&nbsp;&nbsp;even&nbsp;if&nbsp;it&nbsp;does&nbsp;not&nbsp;contain&nbsp;the&nbsp;address&nbsp;(a,v)<br/>
&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;update_cur_version_addr&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;:&nbsp;(LMem&nbsp;*&nbsp;LMem&nbsp;*&nbsp;VMap)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;match&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;with&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;v&nbsp;=&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;lm&nbsp;!!&nbsp;(a,v)&nbsp;with&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;lw&nbsp;=&gt;&nbsp;(&nbsp;&lt;<span class="inlinecode"></span> <span class="inlinecode">(<span class="id" title="var">a</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>+1)</span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">lw</span></span> <span class="inlinecode"></span>&gt;&nbsp;lmem,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="inlinecode"></span> <span class="inlinecode">(<span class="id" title="var">a</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>+1)</span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">lw</span></span> <span class="inlinecode"></span>&gt;&nbsp;lm,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span>+1</span> <span class="inlinecode"></span>&gt;&nbsp;vmap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;(lmem,&nbsp;lm,&nbsp;vmap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;(lmem,&nbsp;lm,&nbsp;vmap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;end.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;update_cur_version_region&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;:&nbsp;VMap)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;:&nbsp;(LMem&nbsp;*&nbsp;LMem&nbsp;*&nbsp;VMap)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;foldr&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;fun&nbsp;a&nbsp;(upd&nbsp;:&nbsp;LMem&nbsp;*&nbsp;LMem&nbsp;*&nbsp;VMap)&nbsp;=&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;'(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;:=&nbsp;upd&nbsp;in&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem'&nbsp;lm'&nbsp;vmap'&nbsp;a)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lmem,&nbsp;lm,&nbsp;vmap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;la.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;update_cur_version_word_region&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;:&nbsp;VMap)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;(LMem&nbsp;*&nbsp;LMem&nbsp;*&nbsp;VMap)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;match&nbsp;get_lcap&nbsp;lw&nbsp;with&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;=&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;_&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;(lmem,&nbsp;lm,&nbsp;vmap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;end.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_cons&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(a&nbsp;::&nbsp;la)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;exists&nbsp;(lmem0&nbsp;lm0&nbsp;:&nbsp;LMem)&nbsp;(vmap0&nbsp;:&nbsp;VMap),&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem0,&nbsp;lm0,&nbsp;vmap0)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∧&nbsp;update_cur_version_addr&nbsp;lmem0&nbsp;lm0&nbsp;vmap0&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap').&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/=&nbsp;-/(update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la)&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;<span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">lmem0</span></span> <span class="inlinecode"><span class="id" title="var">lm0</span>]</span> <span class="inlinecode"><span class="id" title="var">vmap0</span></span>&nbsp;eqn:Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;exists&nbsp;lmem0,&nbsp;lm0,&nbsp;vmap0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;split&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Ltac&nbsp;destruct_cons_upd&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;match&nbsp;goal&nbsp;with&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Hupd&nbsp;:&nbsp;update_cur_version_region&nbsp;?lmem&nbsp;?lm&nbsp;?vmap&nbsp;(?a&nbsp;::&nbsp;?la)&nbsp;=&nbsp;(?lmem',&nbsp;?lm',&nbsp;?vmap')&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;lmem0&nbsp;:=&nbsp;fresh&nbsp;lmem&nbsp;"0"&nbsp;in&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;lm0&nbsp;:=&nbsp;fresh&nbsp;lm&nbsp;"0"&nbsp;in&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vmap0&nbsp;:=&nbsp;fresh&nbsp;vmap&nbsp;"0"&nbsp;in&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;Hupd0&nbsp;:=&nbsp;fresh&nbsp;Hupd&nbsp;"0"&nbsp;in&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;update_cur_version_region_cons&nbsp;in&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;destruct&nbsp;Hupd&nbsp;as&nbsp;(lmem0&nbsp;&amp;&nbsp;lm0&nbsp;&amp;&nbsp;vmap0&nbsp;&amp;&nbsp;Hupd&nbsp;&amp;&nbsp;Hupd0)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;end.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Ltac&nbsp;destruct_cons_hook2&nbsp;:=&nbsp;destruct_cons_upd&nbsp;||&nbsp;destruct_cons_hook1.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Ltac&nbsp;destruct_cons_hook&nbsp;::=&nbsp;destruct_cons_hook2.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_next&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lwa&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;Some&nbsp;lwa&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;!!&nbsp;(a,&nbsp;v+1)&nbsp;=&nbsp;Some&nbsp;lwa.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hupd&nbsp;Hcur&nbsp;Hlm.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;rewrite&nbsp;Hcur&nbsp;Hlm&nbsp;in&nbsp;Hupd&nbsp;;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_notin_preserves_cur&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;a'&nbsp;:&nbsp;Addr)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a'&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;a&nbsp;≠&nbsp;a'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;vmap'&nbsp;!!&nbsp;a&nbsp;=&nbsp;vmap&nbsp;!!&nbsp;a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;Hupd&nbsp;Hneq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(vmap&nbsp;!!&nbsp;a')&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">va'</span>|</span>;&nbsp;last&nbsp;by&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a',&nbsp;va'))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa'</span></span> <span class="inlinecode">|</span>eqn:Heq&nbsp;;&nbsp;simplify_map_eq;&nbsp;by&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_notin_preserves_cur:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;∀&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a&nbsp;:&nbsp;Addr),&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;a&nbsp;∉&nbsp;la&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;vmap'&nbsp;!!&nbsp;a&nbsp;=&nbsp;vmap&nbsp;!!&nbsp;a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;la.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IH</span></span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;intros&nbsp;*&nbsp;Hupd&nbsp;Ha_notin_la&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(cbn&nbsp;in&nbsp;*;&nbsp;by&nbsp;simplify_eq).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(vmap&nbsp;!!&nbsp;a0&nbsp;=&nbsp;vmap0&nbsp;!!&nbsp;a0)&nbsp;as&nbsp;Hcur0&nbsp;by&nbsp;(symmetry&nbsp;;&nbsp;eapply&nbsp;IH&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hcur0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_addr_notin_preserves_cur;&nbsp;cycle&nbsp;1&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_notin_preserves_lmem&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;a':&nbsp;Addr)&nbsp;(v&nbsp;:Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;≠&nbsp;a'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a'&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lmem&nbsp;!!&nbsp;(a,&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hneq&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(vmap&nbsp;!!&nbsp;a')&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">va'</span>|</span>&nbsp;eqn:Hva'&nbsp;;&nbsp;last&nbsp;(simplify_eq;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a',va'))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw'</span>|</span>&nbsp;eqn:Hlw'&nbsp;;&nbsp;last&nbsp;(simplify_eq;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_insert_ne&nbsp;//=;&nbsp;intro&nbsp;;&nbsp;simplify_eq;&nbsp;lia.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_notin_preserves_lmem&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:Version):&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;∉&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lmem&nbsp;!!&nbsp;(a,&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;a&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>;&nbsp;intros&nbsp;*&nbsp;Ha_notin_la&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(by&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lmem&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lmem0&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;as&nbsp;Hlmem0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(symmetry&nbsp;;&nbsp;eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_notin_preserves_lmem&nbsp;with&nbsp;(v&nbsp;:=&nbsp;v)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;Hupd0;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;rewrite&nbsp;Hlmem0&nbsp;Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_notin_preserves_lm&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;a':&nbsp;Addr)&nbsp;(v&nbsp;:Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;≠&nbsp;a'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a'&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm'&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hneq&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(vmap&nbsp;!!&nbsp;a')&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">va'</span>|</span>&nbsp;eqn:Hva'&nbsp;;&nbsp;last&nbsp;(simplify_eq;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a',va'))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw'</span>|</span>&nbsp;eqn:Hlw'&nbsp;;&nbsp;last&nbsp;(simplify_eq;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_insert_ne&nbsp;//=;&nbsp;intro&nbsp;;&nbsp;simplify_eq;&nbsp;lia.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_notin_preserves_lm&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:Version):&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;∉&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm'&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;a&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>;&nbsp;intros&nbsp;*&nbsp;Ha_notin_la&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(by&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lm&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;lm0&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;as&nbsp;Hlmem0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(symmetry&nbsp;;&nbsp;eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_notin_preserves_lm&nbsp;with&nbsp;(v&nbsp;:=&nbsp;v)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;Hupd0;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;rewrite&nbsp;Hlmem0&nbsp;Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_incl_lmem&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;!!&nbsp;(a,&nbsp;v+1)&nbsp;=&nbsp;None&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lmem'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hcur&nbsp;Hmaxv&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hcur&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a,v))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa</span>|</span>&nbsp;eqn:Hlwa&nbsp;;&nbsp;simplify_map_eq;&nbsp;last&nbsp;set_solver.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;insert_subseteq_r;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_update_vmap&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version):&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;∈&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a,v))&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_addr&nbsp;(a,&nbsp;v)&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_addr&nbsp;(a,&nbsp;v+1)&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lmem'&nbsp;lm&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;a&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">la'</span></span> <span class="inlinecode"><span class="id" title="var">IH</span></span>&nbsp;;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;Ha&nbsp;Hupd&nbsp;<span class="inlinecode"><span class="id" title="var">lwa</span></span> <span class="inlinecode"><span class="id" title="var">Hlwa</span></span>&nbsp;Hcur_a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;by&nbsp;apply&nbsp;elem_of_nil&nbsp;in&nbsp;Ha.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Ha&nbsp;as&nbsp;<span class="inlinecode">?</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Ha</span></span>&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;<span class="comment">(*&nbsp;case&nbsp;(a&nbsp;=&nbsp;a'&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_lm&nbsp;in&nbsp;Hlwa;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_region_notin_preserves_cur&nbsp;in&nbsp;Hupd;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;Hupd&nbsp;Hcur_a&nbsp;/=&nbsp;Hlwa&nbsp;in&nbsp;Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;//=&nbsp;;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;<span class="comment">(*&nbsp;case&nbsp;(a&nbsp;&lt;&gt;&nbsp;a'&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(a&nbsp;&lt;&gt;&nbsp;a')&nbsp;as&nbsp;Ha_neq_a'&nbsp;by&nbsp;set_solver.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;/=.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_addr_notin_preserves_cur;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;IH;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_notin_preserves_lm_inv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;a'&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a'&nbsp;≠&nbsp;a&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a'&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hneq&nbsp;Hlmem_incl&nbsp;Hupd&nbsp;Hlw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(vmap&nbsp;!!&nbsp;a')&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">v'</span>|</span>&nbsp;eqn:?&nbsp;;&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;last&nbsp;(eapply&nbsp;lookup_weaken&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a',&nbsp;v'))&nbsp;eqn:?&nbsp;;&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;last&nbsp;(eapply&nbsp;lookup_weaken&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_insert_ne&nbsp;/=&nbsp;in&nbsp;Hlw;&nbsp;eauto;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">intro</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">simplify_eq</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_notin_preserves_lm_inv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;∉&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;a&nbsp;v&nbsp;lw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>;&nbsp;intros&nbsp;*&nbsp;Ha_notin_la&nbsp;Hlmem_incl&nbsp;Hupd&nbsp;Hlw&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(by&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq;&nbsp;eapply&nbsp;lookup_weaken&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;IHla;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_addr_notin_preserves_lmem;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_preserves_lmem_incl&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lmem'&nbsp;lm&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;⊆&nbsp;lm'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hlmem_incl&nbsp;Hcur_a&nbsp;Hmaxv_a&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hcur_a&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a,v))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw</span>|</span>&nbsp;eqn:Hlw;&nbsp;simplify_map_eq;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;apply&nbsp;insert_mono.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_preserves_lmem_incl&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lmem'&nbsp;lm&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a&nbsp;:&nbsp;Addr,&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a&nbsp;:&nbsp;Addr,&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem'&nbsp;⊆&nbsp;lm'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lmem'&nbsp;lm&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;Hlmem_incl&nbsp;HcurMap&nbsp;HmaxMap&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(simplify_map_eq&nbsp;;&nbsp;set_solver).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lmem0&nbsp;⊆&nbsp;lm0)&nbsp;as&nbsp;Hlmem0_incl&nbsp;by&nbsp;(eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(vmap0&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v)&nbsp;as&nbsp;HcurMap_a0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_cur&nbsp;;&nbsp;cycle&nbsp;1&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_preserves_lmem_incl;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_region_notin_preserves_lm;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_notin_is_cur_word&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lw&nbsp;lwsrc&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lwsrc&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;¬&nbsp;overlap_wordL&nbsp;lwsrc&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;lw&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;lw&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;Hget&nbsp;Hupd&nbsp;Hno_overlap&nbsp;His_cur_lw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_lword&nbsp;lw&nbsp;;&nbsp;cbn;&nbsp;try&nbsp;done&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;intros&nbsp;a'0&nbsp;Ha'0&nbsp;;&nbsp;cbn&nbsp;in&nbsp;His_cur_lw&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;pose&nbsp;proof&nbsp;(His_cur_lw&nbsp;a'0&nbsp;Ha'0)&nbsp;as&nbsp;Ha'0_cur&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;(erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_cur&nbsp;in&nbsp;Ha'0_cur;&nbsp;eauto)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;by&nbsp;eapply&nbsp;not_overlap_wordL_seq_between;&nbsp;<span class="inlinecode">|</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="tactic">eauto</span>..</span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;has_access_lword_range&nbsp;(lm&nbsp;:&nbsp;LMem)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;Prop&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(&nbsp;match&nbsp;lw&nbsp;with&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;LCap&nbsp;_&nbsp;b&nbsp;e&nbsp;a&nbsp;v&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;LSealedCap&nbsp;_&nbsp;_&nbsp;b&nbsp;e&nbsp;a&nbsp;v&nbsp;=&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forall&nbsp;(fun&nbsp;a&nbsp;=&gt;&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a,v))&nbsp;)&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;_&nbsp;=&gt;&nbsp;True&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_word_region_update_lword&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_word_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;lw&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;has_access_lword_range&nbsp;lm&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;lw&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;(next_version_lword&nbsp;lw)&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;Hupd&nbsp;Hsome&nbsp;Hcur.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_lword&nbsp;lw&nbsp;;&nbsp;try&nbsp;done;&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;all:&nbsp;move=&gt;&nbsp;a'&nbsp;Ha'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;all:&nbsp;specialize&nbsp;(Hcur&nbsp;_&nbsp;Ha').&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;all:&nbsp;eapply&nbsp;update_cur_version_region_update_vmap&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;eauto;&nbsp;try&nbsp;apply&nbsp;finz_seq_between_NoDup.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;all:&nbsp;rewrite&nbsp;elem_of_list_lookup&nbsp;in&nbsp;Ha'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;destruct&nbsp;Ha'&nbsp;as&nbsp;<span class="inlinecode">?</span> <span class="inlinecode"><span class="id" title="var">Ha'</span></span>;&nbsp;eapply&nbsp;Forall_lookup&nbsp;in&nbsp;Hsome&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_lcap_update_lword&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lw&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(fun&nbsp;a&nbsp;=&gt;&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a,v)))&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;lw&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;(next_version_lword&nbsp;lw)&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;Hget&nbsp;Hupd&nbsp;Hsome&nbsp;Hcur.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_lword&nbsp;lw&nbsp;;&nbsp;cbn&nbsp;in&nbsp;Hget&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;all:&nbsp;eapply&nbsp;update_cur_version_word_region_update_lword;&nbsp;cbn&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;address&nbsp;`a`&nbsp;is&nbsp;not&nbsp;reachable&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;still&nbsp;holds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;after&nbsp;updating&nbsp;its&nbsp;version&nbsp;number.&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_preserves_mem_corresponds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem_not_access_addrL&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm'&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hupd&nbsp;Hnaccess_mem&nbsp;<span class="inlinecode"><span class="id" title="var">Hdom</span></span> <span class="inlinecode"><span class="id" title="var">Hroot</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(vmap&nbsp;!!&nbsp;a)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">|</span>&nbsp;eqn:Hcur_la;&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_eq;&nbsp;last&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lm&nbsp;!!&nbsp;(a,v))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lw</span></span> <span class="inlinecode">|</span>&nbsp;eqn:Hla;&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_eq;&nbsp;last&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;-/(is_cur_addr&nbsp;(a,v)&nbsp;vmap)&nbsp;in&nbsp;Hcur_la.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(not&nbsp;(word_access_addrL&nbsp;a&nbsp;lw))&nbsp;as&nbsp;Hnaccess&nbsp;by&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;pose&nbsp;proof&nbsp;(Hla'&nbsp;:=&nbsp;Hla).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hla';&nbsp;eauto;&nbsp;cbn&nbsp;in&nbsp;Hla'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;Hla'&nbsp;as&nbsp;(va&nbsp;&amp;&nbsp;Hcur_va&nbsp;&amp;&nbsp;Hle_va&nbsp;&amp;&nbsp;<span class="inlinecode"><span class="id" title="var">lwa</span></span> <span class="inlinecode"><span class="id" title="var">Hlwa</span></span>).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;/=&nbsp;in&nbsp;Hcur_la,&nbsp;Hcur_va.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hcur_la&nbsp;in&nbsp;Hcur_va&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;eapply&nbsp;lmem_corresponds_read_iscur&nbsp;in&nbsp;Hla&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;split&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_word&nbsp;with&nbsp;(v&nbsp;:=&nbsp;va+1)&nbsp;in&nbsp;Hla;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;map_Forall_insert_2.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;eexists&nbsp;(va+1).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;//=&nbsp;;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;la'&nbsp;lw'&nbsp;Hroot'&nbsp;;&nbsp;cbn&nbsp;in&nbsp;Hroot'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;la'&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">v'</span></span>&nbsp;;&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hroot'&nbsp;;&nbsp;eauto&nbsp;;&nbsp;cbn&nbsp;in&nbsp;Hroot'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hroot'&nbsp;as&nbsp;(cur_v&nbsp;&amp;&nbsp;Hcur_v&nbsp;&amp;&nbsp;Hcur_max&nbsp;&amp;&nbsp;<span class="inlinecode"><span class="id" title="var">cur_lw</span></span> <span class="inlinecode"><span class="id" title="var">Hcur_lw</span></span>).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(decide&nbsp;(a&nbsp;=&nbsp;a'));&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;exists&nbsp;(va+1).&nbsp;split&nbsp;;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">split</span></span>&nbsp;;&nbsp;try&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/is_cur_addr;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;va&nbsp;with&nbsp;cur_v&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(&nbsp;by&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;/=&nbsp;Hcur_la&nbsp;in&nbsp;Hcur_v;&nbsp;simplify_eq).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lia.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;exists&nbsp;cur_v.&nbsp;split;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">split</span></span>;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;is_cur_addr_insert_ne;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;cur_lw.&nbsp;rewrite&nbsp;lookup_insert_ne&nbsp;//=;&nbsp;congruence.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;apply&nbsp;map_Forall_insert_2.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;pose&nbsp;proof&nbsp;(Hla'&nbsp;:=&nbsp;Hla).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hla;&nbsp;eauto&nbsp;;&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hla&nbsp;as&nbsp;(cur_v&nbsp;&amp;&nbsp;Hcur_v&nbsp;&amp;&nbsp;Hcur_max&nbsp;&amp;&nbsp;<span class="inlinecode"><span class="id" title="var">cur_lw</span></span> <span class="inlinecode"><span class="id" title="var">Hcur_lw</span></span>).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/is_cur_addr&nbsp;/=&nbsp;Hcur_la&nbsp;in&nbsp;Hcur_v;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;lw.&nbsp;split.&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hcur_la&nbsp;;&nbsp;eauto&nbsp;;&nbsp;cbn&nbsp;in&nbsp;Hcur_la.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hcur_la&nbsp;as&nbsp;(lw'&nbsp;&amp;&nbsp;Hlw'&nbsp;&amp;&nbsp;Hw'&nbsp;&amp;&nbsp;Hcur_lw').&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hlw'&nbsp;in&nbsp;Hla'&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_word&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;a'&nbsp;v'&nbsp;Hcur_a'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pose&nbsp;proof&nbsp;(Hcur_a''&nbsp;:=&nbsp;Hcur_a').&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hcur_a''&nbsp;;&nbsp;eauto&nbsp;;&nbsp;cbn&nbsp;in&nbsp;Hcur_a''.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hcur_a''&nbsp;as&nbsp;(lw'&nbsp;&amp;&nbsp;Hlw'&nbsp;&amp;&nbsp;Hw'&nbsp;&amp;&nbsp;Hcur_lw').&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(decide&nbsp;(a&nbsp;=&nbsp;a'));&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;eapply&nbsp;update_cur_word&nbsp;with&nbsp;(v&nbsp;:=&nbsp;va+1)&nbsp;in&nbsp;Hcur_lw';&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;lw.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;((a',&nbsp;va&nbsp;+&nbsp;1)&nbsp;≠&nbsp;(a',&nbsp;va))&nbsp;by&nbsp;(intro&nbsp;;&nbsp;simplify_eq&nbsp;;&nbsp;lia).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hcur_la&nbsp;in&nbsp;Hcur_a'&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hlwa&nbsp;in&nbsp;Hla&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;exists&nbsp;lw'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;((a,&nbsp;va&nbsp;+&nbsp;1)&nbsp;≠&nbsp;(a',&nbsp;v'))&nbsp;by&nbsp;(intro&nbsp;;&nbsp;simplify_eq).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split&nbsp;;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">split</span></span>&nbsp;;&nbsp;try&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_word;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_preserves_mem_corresponds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr):&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(fun&nbsp;a&nbsp;=&gt;&nbsp;lmem_not_access_addrL&nbsp;lm&nbsp;vmap&nbsp;a)&nbsp;la&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm'&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;phm&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IH</span></span>;&nbsp;intros&nbsp;*&nbsp;Hno_dup&nbsp;Hupd&nbsp;Hall_naccess_mem&nbsp;Hmem_corr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;by&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(mem_phys_log_corresponds&nbsp;phm&nbsp;lm0&nbsp;vmap0)&nbsp;as&nbsp;Hinv0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(eapply&nbsp;IH&nbsp;;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_preserves_mem_corresponds&nbsp;in&nbsp;Hupd0&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;eapply&nbsp;update_cur_version_region_notin_preserves_no_access.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;a&nbsp;memory&nbsp;region&nbsp;that&nbsp;is&nbsp;not&nbsp;reacheable,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;preserves&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_word_region_preserves_mem_corresponds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem_not_access_wordL&nbsp;lm&nbsp;vmap&nbsp;lw&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_word_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;lw&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;→&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm'&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hno_access&nbsp;Hupd&nbsp;Hmem_phys_log.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_word_region&nbsp;in&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/lmem_not_access_wordL&nbsp;in&nbsp;Hno_access.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(get_lcap&nbsp;lw)&nbsp;as&nbsp;<span class="inlinecode">[]</span> <span class="inlinecode">|</span>&nbsp;;&nbsp;simplify_eq&nbsp;;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_region_preserves_mem_corresponds&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;apply&nbsp;finz_seq_between_NoDup.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_lmem_corresponds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phr&nbsp;:&nbsp;Reg)&nbsp;(lr&nbsp;:&nbsp;LReg)&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(src&nbsp;:&nbsp;RegName)&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;state_phys_log_corresponds&nbsp;phr&nbsp;phm&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lw&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unique_in_machineL&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;src&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;mem_phys_log_corresponds&nbsp;phm&nbsp;lm'&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;<span class="inlinecode"><span class="id" title="var">Hreg_inv</span></span> <span class="inlinecode"><span class="id" title="var">Hmem_inv</span></span>&nbsp;Hget&nbsp;Hsrc&nbsp;Hunique&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_region_preserves_mem_corresponds;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;finz_seq_between_NoDup.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;unique_in_machine_no_accessL&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lreg_corresponds_read_iscur;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_lreg_corresponds_src&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phr&nbsp;:&nbsp;Reg)&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lr&nbsp;:&nbsp;LReg)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(src&nbsp;:&nbsp;RegName)&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(&nbsp;v&nbsp;:&nbsp;Version&nbsp;)&nbsp;(lwsrc:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;state_phys_log_corresponds&nbsp;phr&nbsp;phm&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lwsrc&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;(next_version_lword&nbsp;lwsrc)&nbsp;vmap'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unique_in_machineL&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;src&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;reg_phys_log_corresponds&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">src</span>:=</span> <span class="inlinecode">(<span class="id" title="var">lword_get_word</span></span> <span class="inlinecode">(<span class="id" title="var">next_version_lword</span></span> <span class="inlinecode"><span class="id" title="var">lwsrc</span>))</span>&gt;&nbsp;phr)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">src</span>:=</span> <span class="inlinecode">(<span class="id" title="var">next_version_lword</span></span> <span class="inlinecode"><span class="id" title="var">lwsrc</span>)</span>&gt;&nbsp;lr)&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">Hreg_inv</span></span> <span class="inlinecode"><span class="id" title="var">Hmem_inv</span></span>&nbsp;Hget&nbsp;Hcur_lw&nbsp;Hlr_src&nbsp;Hunique&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;rewrite&nbsp;/lreg_strip&nbsp;fmap_insert&nbsp;/=&nbsp;-/(lreg_strip&nbsp;lr).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;replace&nbsp;phr&nbsp;with&nbsp;(lreg_strip&nbsp;lr)&nbsp;by&nbsp;(by&nbsp;destruct&nbsp;Hreg_inv&nbsp;as&nbsp;<span class="inlinecode">?</span> <span class="inlinecode"><span class="id" title="var">_</span></span>).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;rewrite&nbsp;-insert_delete_insert.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lreg_corresponds_insert_respects&nbsp;with&nbsp;(phr&nbsp;:=&nbsp;(delete&nbsp;src&nbsp;phr)).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{&nbsp;by&nbsp;cbn.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hreg_inv&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hstrip</span></span> <span class="inlinecode"><span class="id" title="var">Hcur_reg</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;by&nbsp;rewrite&nbsp;/lreg_strip&nbsp;fmap_delete&nbsp;-/(lreg_strip&nbsp;lr)&nbsp;Hstrip.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;map_Forall_lookup_2.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;r&nbsp;lw'&nbsp;Hr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(decide&nbsp;(r&nbsp;=&nbsp;src));&nbsp;subst.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_delete&nbsp;in&nbsp;Hr;&nbsp;congruence.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_delete_ne&nbsp;in&nbsp;Hr;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Hunique&nbsp;in&nbsp;Hlr_src.&nbsp;destruct&nbsp;Hlr_src&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hunique_reg</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/unique_in_registersL&nbsp;in&nbsp;Hunique_reg.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hunique_reg&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;decide_False&nbsp;in&nbsp;Hunique_reg;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hcur_reg&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_notin_is_cur_word&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_lreg_corresponds_src'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phr&nbsp;:&nbsp;Reg)&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lr&nbsp;:&nbsp;LReg)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(src&nbsp;:&nbsp;RegName)&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(&nbsp;v&nbsp;:&nbsp;Version&nbsp;)&nbsp;(lwsrc:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;state_phys_log_corresponds&nbsp;phr&nbsp;phm&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lwsrc&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;(next_version_lword&nbsp;lwsrc)&nbsp;vmap'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unique_in_machineL&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;src&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;reg_phys_log_corresponds&nbsp;phr&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">src</span>:=</span> <span class="inlinecode"><span class="id" title="var">next_version_lword</span></span> <span class="inlinecode"><span class="id" title="var">lwsrc</span></span>&gt;&nbsp;lr)&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;HLinv&nbsp;Hget&nbsp;Hcur_lw&nbsp;Hlr_src&nbsp;Hunique&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;(_:&nbsp;phr&nbsp;=&nbsp;(&lt;<span class="inlinecode"><span class="id" title="var">src</span>:=(<span class="id" title="var">lword_get_word</span></span> <span class="inlinecode">(<span class="id" title="var">next_version_lword</span></span> <span class="inlinecode"><span class="id" title="var">lwsrc</span>))</span>&gt;&nbsp;phr)).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;*&nbsp;eapply&nbsp;update_cur_version_region_lreg_corresponds_src;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;*&nbsp;rewrite&nbsp;insert_id;&nbsp;first&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;lword_get_word_next_version.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;state_corresponds_reg_get_word;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_lreg_corresponds_notin&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phr&nbsp;:&nbsp;Reg)&nbsp;(phm&nbsp;:&nbsp;Mem)&nbsp;(lr&nbsp;:&nbsp;LReg)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(src&nbsp;:&nbsp;RegName)&nbsp;(p&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;:&nbsp;Addr)&nbsp;(&nbsp;v&nbsp;:&nbsp;Version&nbsp;)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;state_phys_log_corresponds&nbsp;phr&nbsp;phm&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;(LCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b&nbsp;e)&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unique_in_machineL&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;src&nbsp;(LCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;src&nbsp;∉&nbsp;dom&nbsp;phr&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;src&nbsp;∉&nbsp;dom&nbsp;lr&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;reg_phys_log_corresponds&nbsp;phr&nbsp;lr&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move=&gt;&nbsp;HLinv&nbsp;Hlr_src&nbsp;Hupd&nbsp;Hunique&nbsp;Hsrc_notin_phr&nbsp;Hsrc_notin_lr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;pose&nbsp;proof&nbsp;HLinv&nbsp;as&nbsp;<span class="inlinecode">[<span class="id" title="var">Hreg_strip</span></span> <span class="inlinecode"><span class="id" title="var">Hreg_current</span>]</span> <span class="inlinecode">[<span class="id" title="var">Hroot</span></span> <span class="inlinecode"><span class="id" title="var">Hdom</span>]</span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;split;&nbsp;first&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;apply&nbsp;map_Forall_lookup&nbsp;;&nbsp;move=&gt;&nbsp;r&nbsp;lwr&nbsp;Hlr_lwr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(Hr_neq_src&nbsp;:&nbsp;r&nbsp;≠&nbsp;src).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;{&nbsp;apply&nbsp;not_elem_of_dom&nbsp;in&nbsp;Hsrc_notin_lr;&nbsp;congruence.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hreg_current&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;specialize&nbsp;(Hunique&nbsp;Hlr_src).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;Hunique&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hunique_reg</span></span> <span class="inlinecode"><span class="id" title="var">Hunique_mem</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;map_Forall_lookup_1&nbsp;in&nbsp;Hunique_reg&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;case_decide&nbsp;as&nbsp;H;&nbsp;simplify_eq;&nbsp;clear&nbsp;H.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_notin_is_cur_word;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;cbn.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;lreg_corresponds_insert_respects_updated_vmap&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(phr&nbsp;:&nbsp;Reg)&nbsp;(lr&nbsp;:&nbsp;LReg)&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(p&nbsp;p'&nbsp;p_src&nbsp;:&nbsp;Perm)&nbsp;(b&nbsp;e&nbsp;a&nbsp;a'&nbsp;b_src&nbsp;e_src&nbsp;a_src&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;v_src:&nbsp;Version)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lw&nbsp;lw'&nbsp;lwsrc&nbsp;:&nbsp;LWord)&nbsp;(r&nbsp;src&nbsp;:&nbsp;RegName)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;reg_phys_log_corresponds&nbsp;phr&nbsp;lr&nbsp;vmap&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lw&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p&nbsp;b&nbsp;e&nbsp;a&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lw'&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p'&nbsp;b&nbsp;e&nbsp;a'&nbsp;v)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;get_lcap&nbsp;lwsrc&nbsp;=&nbsp;Some&nbsp;(LSCap&nbsp;p_src&nbsp;b_src&nbsp;e_src&nbsp;a_src&nbsp;v_src)&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;(finz.seq_between&nbsp;b_src&nbsp;e_src)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unique_in_machineL&nbsp;lr&nbsp;lm&nbsp;vmap&nbsp;src&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;r&nbsp;≠&nbsp;src&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;r&nbsp;=&nbsp;Some&nbsp;lw&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lr&nbsp;!!&nbsp;src&nbsp;=&nbsp;Some&nbsp;lwsrc&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_cur_word&nbsp;lw'&nbsp;vmap'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;is_cur_lword_lea&nbsp;with&nbsp;(lw&nbsp;:=&nbsp;lw);&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_notin_is_cur_word;&nbsp;cycle&nbsp;1&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;unique_in_machineL_not_overlap_word&nbsp;with&nbsp;(r&nbsp;:=&nbsp;r);&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lreg_corresponds_read_iscur;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Machinery to update the memory for a given version,
    without knowing the view map 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;for&nbsp;the&nbsp;address&nbsp;a.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;llmem&nbsp;might&nbsp;not&nbsp;contain&nbsp;(a,v),<br/>
&nbsp;&nbsp;&nbsp;because&nbsp;llmem&nbsp;is&nbsp;only&nbsp;a&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;actual&nbsp;lmemory.<br/>
&nbsp;&nbsp;&nbsp;For&nbsp;this&nbsp;reason,&nbsp;we&nbsp;take&nbsp;the&nbsp;new&nbsp;values&nbsp;from&nbsp;global&nbsp;view&nbsp;glmem.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_addr" class="idref" href="#update_version_addr"><span class="id" title="definition">update_version_addr</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:450" class="idref" href="#glmem:450"><span class="id" title="binder">glmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:451" class="idref" href="#a:451"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:452" class="idref" href="#v:452"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="llmem:453" class="idref" href="#llmem:453"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>): <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:450"><span class="id" title="variable">glmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:451"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:452"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:451"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:452"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">lw</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">llmem</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#llmem:453"><span class="id" title="variable">llmem</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;region&nbsp;for&nbsp;a&nbsp;given&nbsp;lregion.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;it&nbsp;only&nbsp;updates&nbsp;the&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;lmemory,<br/>
&nbsp;&nbsp;&nbsp;which&nbsp;might&nbsp;not&nbsp;contain&nbsp;some&nbsp;of&nbsp;the&nbsp;addresses&nbsp;in&nbsp;la.<br/>
&nbsp;&nbsp;&nbsp;For&nbsp;this&nbsp;reason,&nbsp;we&nbsp;take&nbsp;the&nbsp;new&nbsp;values&nbsp;from&nbsp;global&nbsp;view&nbsp;glmem.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_region" class="idref" href="#update_version_region"><span class="id" title="definition">update_version_region</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:454" class="idref" href="#glmem:454"><span class="id" title="binder">glmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:455" class="idref" href="#la:455"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:456" class="idref" href="#v:456"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="llmem:457" class="idref" href="#llmem:457"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> <a id="a:458" class="idref" href="#a:458"><span class="id" title="binder">a</span></a> <a id="lmem':459" class="idref" href="#lmem':459"><span class="id" title="binder">lmem'</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:454"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:458"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:456"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':459"><span class="id" title="variable">lmem'</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#llmem:457"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:455"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_addr_vmap" class="idref" href="#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a><br/>
&nbsp;&nbsp;(<a id="a:460" class="idref" href="#a:460"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:461" class="idref" href="#v:461"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:462" class="idref" href="#vmap:462"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:460"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v:461"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_region_vmap" class="idref" href="#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a><br/>
&nbsp;&nbsp;(<a id="la:463" class="idref" href="#la:463"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:464" class="idref" href="#v:464"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:465" class="idref" href="#vmap:465"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> <a id="a:466" class="idref" href="#a:466"><span class="id" title="binder">a</span></a> <a id="vm:467" class="idref" href="#vm:467"><span class="id" title="binder">vm</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:466"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:464"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vm:467"><span class="id" title="variable">vm</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:465"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:463"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_lookup" class="idref" href="#update_version_addr_lookup"><span class="id" title="lemma">update_version_addr_lookup</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:468" class="idref" href="#glmem:468"><span class="id" title="binder">glmem</span></a> <a id="llmem:469" class="idref" href="#llmem:469"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:470" class="idref" href="#a:470"><span class="id" title="binder">a</span></a> <a id="a':471" class="idref" href="#a':471"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:472" class="idref" href="#v:472"><span class="id" title="binder">v</span></a> <a id="v':473" class="idref" href="#v':473"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw':474" class="idref" href="#lw':474"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:469"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':471"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':473"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':474"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:469"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:470"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:472"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:468"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:470"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:472"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:469"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':471"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':473"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':474"><span class="id" title="variable">lw'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw'</span> <span class="id" title="var">Hmax</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hglm</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="var">simplify_map_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hmax</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw'</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_vmap_lookup" class="idref" href="#update_version_region_vmap_lookup"><span class="id" title="lemma">update_version_region_vmap_lookup</span></a> {<a id="vmap:475" class="idref" href="#vmap:475"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>} {<a id="v:476" class="idref" href="#v:476"><span class="id" title="binder">v</span></a> <a id="la:477" class="idref" href="#la:477"><span class="id" title="binder">la</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:477"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:478" class="idref" href="#a:478"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:478"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:477"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:477"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:476"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:475"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:478"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#v:476"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hnd</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [-&gt;|<span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">NoDup_cons_1_2</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">NoDup_cons_1_1</span> <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">Hnd</span> <span class="id" title="var">Ha'</span>).<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_lookup_neq" class="idref" href="#update_version_addr_lookup_neq"><span class="id" title="lemma">update_version_addr_lookup_neq</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:479" class="idref" href="#glmem:479"><span class="id" title="binder">glmem</span></a> <a id="llmem:480" class="idref" href="#llmem:480"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:481" class="idref" href="#a:481"><span class="id" title="binder">a</span></a> <a id="a':482" class="idref" href="#a':482"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:483" class="idref" href="#v:483"><span class="id" title="binder">v</span></a> <a id="v':484" class="idref" href="#v':484"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:481"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':482"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:479"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:481"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:483"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:480"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':482"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':484"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:480"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':482"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':484"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_mono" class="idref" href="#update_version_addr_mono"><span class="id" title="lemma">update_version_addr_mono</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:485" class="idref" href="#glmem:485"><span class="id" title="binder">glmem</span></a> <a id="lmem1:486" class="idref" href="#lmem1:486"><span class="id" title="binder">lmem1</span></a> <a id="lmem2:487" class="idref" href="#lmem2:487"><span class="id" title="binder">lmem2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:488" class="idref" href="#a:488"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:489" class="idref" href="#v:489"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem1:486"><span class="id" title="variable">lmem1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem2:487"><span class="id" title="variable">lmem2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:485"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:488"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:489"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem1:486"><span class="id" title="variable">lmem1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:485"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:488"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:489"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem2:487"><span class="id" title="variable">lmem2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_mono" class="idref" href="#update_version_region_mono"><span class="id" title="lemma">update_version_region_mono</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:490" class="idref" href="#glmem:490"><span class="id" title="binder">glmem</span></a> <a id="lmem1:491" class="idref" href="#lmem1:491"><span class="id" title="binder">lmem1</span></a> <a id="lmem2:492" class="idref" href="#lmem2:492"><span class="id" title="binder">lmem2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:493" class="idref" href="#la:493"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:494" class="idref" href="#v:494"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem1:491"><span class="id" title="variable">lmem1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem2:492"><span class="id" title="variable">lmem2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:490"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:493"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:494"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem1:491"><span class="id" title="variable">lmem1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:490"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:493"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:494"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem2:492"><span class="id" title="variable">lmem2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hincl</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">rename</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">into</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lmem1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lmem2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_mono"><span class="id" title="axiom">update_version_addr_mono</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_version_addr_mono&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(glmem1&nbsp;glmem2&nbsp;lmem1&nbsp;lmem2&nbsp;:&nbsp;LMem)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem1&nbsp;!!&nbsp;(a,v+1)&nbsp;=&nbsp;None&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;glmem1&nbsp;⊆&nbsp;glmem2&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem1&nbsp;⊆&nbsp;lmem2&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_addr&nbsp;glmem1&nbsp;a&nbsp;v&nbsp;lmem1&nbsp;⊆&nbsp;update_version_addr&nbsp;glmem2&nbsp;a&nbsp;v&nbsp;lmem2.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;HlmemN&nbsp;Hglmem&nbsp;Hlmem.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unfold&nbsp;update_version_addr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(glmem1&nbsp;!!&nbsp;(a,v))&nbsp;eqn:Hglm1.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;rewrite&nbsp;(lookup_weaken&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;Hglm1&nbsp;Hglmem).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;eapply&nbsp;insert_mono.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;destruct&nbsp;(glmem2&nbsp;!!&nbsp;(a,v));&nbsp;last&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;eapply&nbsp;insert_subseteq_r.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_lmem" class="idref" href="#update_version_region_preserves_lmem"><span class="id" title="lemma">update_version_region_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:495" class="idref" href="#glmem:495"><span class="id" title="binder">glmem</span></a> <a id="llmem:496" class="idref" href="#llmem:496"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:497" class="idref" href="#la:497"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:498" class="idref" href="#a:498"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:499" class="idref" href="#v:499"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:495"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:497"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:499"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:496"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:498"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:499"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:496"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:498"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:499"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_notin_preserves_lmem" class="idref" href="#update_version_region_notin_preserves_lmem"><span class="id" title="lemma">update_version_region_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:500" class="idref" href="#glmem:500"><span class="id" title="binder">glmem</span></a> <a id="llmem:501" class="idref" href="#llmem:501"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:502" class="idref" href="#la:502"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':503" class="idref" href="#a':503"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:504" class="idref" href="#v:504"><span class="id" title="binder">v</span></a> <a id="v':505" class="idref" href="#v':505"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':503"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:502"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:500"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:502"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:504"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:501"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':503"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':505"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:501"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':503"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':505"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha'_notin_la</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">llmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_version_region_mono2&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(glmem1&nbsp;glmem2&nbsp;lmem&nbsp;:&nbsp;LMem)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(fun&nbsp;a&nbsp;=&gt;&nbsp;lmem&nbsp;!!&nbsp;(a,v+1)&nbsp;=&nbsp;None)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;glmem1&nbsp;⊆&nbsp;glmem2&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_region&nbsp;glmem1&nbsp;la&nbsp;v&nbsp;lmem&nbsp;⊆&nbsp;update_version_region&nbsp;glmem2&nbsp;la&nbsp;v&nbsp;lmem.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;HNoDup&nbsp;HlmemNone&nbsp;Hglmem.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la;&nbsp;first&nbsp;done.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;simpl.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_version_addr_mono;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;update_version_region_notin_preserves_lmem;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_version_region_preserves_lmem'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(glmem&nbsp;llmem&nbsp;:&nbsp;LMem)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(a'&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;v':&nbsp;Version)&nbsp;(lw'&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(fun&nbsp;a&nbsp;=&gt;&nbsp;llmem&nbsp;!!&nbsp;(a,&nbsp;v+1)&nbsp;=&nbsp;None)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;llmem&nbsp;!!&nbsp;(a',&nbsp;v')&nbsp;=&nbsp;Some&nbsp;lw'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_region&nbsp;glmem&nbsp;la&nbsp;v&nbsp;llmem&nbsp;!!&nbsp;(a',&nbsp;v')&nbsp;=&nbsp;Some&nbsp;lw'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;a'&nbsp;v&nbsp;v'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>&nbsp;;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;HmaxMap&nbsp;Hlw'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;by&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;destruct_cons.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/update_version_region&nbsp;/=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(update_version_region&nbsp;lmem&nbsp;la&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;!!&nbsp;(a',&nbsp;v')&nbsp;=&nbsp;Some&nbsp;lw')&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;IH&nbsp;by&nbsp;(eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_version_addr_lookup;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;update_version_region_notin_preserves_lmem;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_lmem_next" class="idref" href="#update_version_region_preserves_lmem_next"><span class="id" title="lemma">update_version_region_preserves_lmem_next</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:506" class="idref" href="#glmem:506"><span class="id" title="binder">glmem</span></a> <a id="llmem:507" class="idref" href="#llmem:507"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:508" class="idref" href="#la:508"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':509" class="idref" href="#a':509"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:510" class="idref" href="#v:510"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:508"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':509"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:508"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:507"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':509"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:510"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:506"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:508"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:510"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:507"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':509"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:510"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:506"><span class="id" title="variable">glmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':509"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:510"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlmem_next</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Ha'_in_la</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //= ; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_updated_incl" class="idref" href="#update_version_addr_updated_incl"><span class="id" title="lemma">update_version_addr_updated_incl</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:511" class="idref" href="#glmem:511"><span class="id" title="binder">glmem</span></a> <a id="llmem:512" class="idref" href="#llmem:512"><span class="id" title="binder">llmem</span></a> <a id="llmem':513" class="idref" href="#llmem':513"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:514" class="idref" href="#la:514"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:515" class="idref" href="#a:515"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:516" class="idref" href="#v:516"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:511"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:514"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:516"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:512"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:515"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:516"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:511"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:515"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:516"><span class="id" title="variable">v</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:511"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:514"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:516"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:512"><span class="id" title="variable">llmem</span></a>) <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':513"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:511"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:514"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:516"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:512"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':513"><span class="id" title="variable">llmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd_max</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#insert_subseteq_r_inv"><span class="id" title="axiom">insert_subseteq_r_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_insert" class="idref" href="#update_version_addr_insert"><span class="id" title="lemma">update_version_addr_insert</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:517" class="idref" href="#glmem:517"><span class="id" title="binder">glmem</span></a> <a id="lmem:518" class="idref" href="#lmem:518"><span class="id" title="binder">lmem</span></a> <a id="lmem':519" class="idref" href="#lmem':519"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:520" class="idref" href="#a:520"><span class="id" title="binder">a</span></a> <a id="a':521" class="idref" href="#a':521"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:522" class="idref" href="#v:522"><span class="id" title="binder">v</span></a> <a id="v':523" class="idref" href="#v':523"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="la:524" class="idref" href="#la:524"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lw:525" class="idref" href="#lw:525"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:518"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':521"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':523"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:517"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:520"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:522"><span class="id" title="variable">v</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:517"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:524"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:522"><span class="id" title="variable">v</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':521"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':523"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:525"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>)) <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':519"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:517"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:524"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:522"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:518"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':519"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:517"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:520"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:522"><span class="id" title="variable">v</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:517"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:524"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:522"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:518"><span class="id" title="variable">lmem</span></a>) <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':519"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hupd_mem_incl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_insert" class="idref" href="#update_version_region_insert"><span class="id" title="lemma">update_version_region_insert</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:526" class="idref" href="#glmem:526"><span class="id" title="binder">glmem</span></a> <a id="lmem:527" class="idref" href="#lmem:527"><span class="id" title="binder">lmem</span></a> <a id="lmem':528" class="idref" href="#lmem':528"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:529" class="idref" href="#la:529"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':530" class="idref" href="#a':530"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:531" class="idref" href="#v:531"><span class="id" title="binder">v</span></a> <a id="v':532" class="idref" href="#v':532"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:533" class="idref" href="#lw:533"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:529"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':530"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:529"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:527"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':530"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':532"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:534" class="idref" href="#a:534"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:527"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:534"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:531"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:529"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:526"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:529"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:531"><span class="id" title="variable">v</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':530"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':532"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:533"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':528"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:526"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:529"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:531"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:527"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':528"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_notin_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_delete_subseteq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><span class="id" title="var">lw</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <span class="id" title="var">la</span> <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_insert"><span class="id" title="axiom">update_version_addr_insert</span></a> ; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">a'</span> := <span class="id" title="var">a'</span>) (<span class="id" title="var">v'</span> := <span class="id" title="var">v'</span>) (<span class="id" title="var">lw</span> := <span class="id" title="var">lw</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_updated_incl"><span class="id" title="axiom">update_version_addr_updated_incl</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_insert_inv" class="idref" href="#update_version_region_insert_inv"><span class="id" title="lemma">update_version_region_insert_inv</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:535" class="idref" href="#glmem:535"><span class="id" title="binder">glmem</span></a> <a id="lmem:536" class="idref" href="#lmem:536"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:537" class="idref" href="#la:537"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':538" class="idref" href="#a':538"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:539" class="idref" href="#v:539"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:540" class="idref" href="#lw:540"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:537"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:536"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':538"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:539"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:541" class="idref" href="#a:541"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:536"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:541"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:539"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:537"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:535"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:537"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:539"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:536"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:535"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:537"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:539"><span class="id" title="variable">v</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':538"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:539"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:540"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">glmem</span> <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -!/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHla</span> <span class="id" title="var">glmem</span> <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span> <span class="id" title="var">HNoDup_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_addr_update_version_addr&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_addr&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_addr&nbsp;lmem&nbsp;a&nbsp;v&nbsp;⊆&nbsp;lmem'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hlmem_incl&nbsp;Hmaxv&nbsp;<span class="inlinecode"><span class="id" title="var">lw</span></span> <span class="inlinecode"><span class="id" title="var">Hlw_a</span></span>&nbsp;Hcur&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;Hcur&nbsp;Hlw_a&nbsp;in&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_version_addr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(lmem&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;eqn:Hlmem_a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;eapply&nbsp;lookup_weaken&nbsp;in&nbsp;Hlmem_a&nbsp;;&nbsp;eauto&nbsp;;&nbsp;rewrite&nbsp;Hlmem_a&nbsp;in&nbsp;Hlw_a&nbsp;;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken_None&nbsp;in&nbsp;Hmaxv;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;insert_subseteq_r;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_update_version_region_aux&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem0&nbsp;lm0&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap0&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(a&nbsp;:&nbsp;Addr)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;(lw&nbsp;:&nbsp;LWord)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;a&nbsp;∉&nbsp;la&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;vmap&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&gt;&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;Some&nbsp;lw&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;lm&nbsp;!!&nbsp;(a,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&gt;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem0,&nbsp;lm0,&nbsp;vmap0)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&gt;&nbsp;update_cur_version_addr&nbsp;lmem0&nbsp;lm0&nbsp;vmap0&nbsp;a&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;⊆&nbsp;lmem0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;→&nbsp;update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;⊆&nbsp;lmem'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Ha_notin_la&nbsp;Hlmem_incl&nbsp;HcurMap_a&nbsp;Hlwa&nbsp;HmaxMap_a&nbsp;Hupd&nbsp;Hupd0&nbsp;IH.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_version_addr&nbsp;in&nbsp;Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(vmap0&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v)&nbsp;as&nbsp;Hvmap_mem0_a&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_cur;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;map_subseteq_spec;&nbsp;intros&nbsp;a'&nbsp;lwa'&nbsp;Hlwa'0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lmem0&nbsp;!!&nbsp;a'&nbsp;=&nbsp;Some&nbsp;lwa')&nbsp;as&nbsp;Hlmem0_a'&nbsp;by&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(eapply&nbsp;lookup_weaken&nbsp;in&nbsp;Hlwa'0;&nbsp;<span class="inlinecode">|<span class="id" title="var">eassumption</span></span>&nbsp;;&nbsp;by&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken.&nbsp;eapply&nbsp;Hlmem0_a'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_incl_lmem;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_region_notin_preserves_lmem;cycle&nbsp;1&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken_None;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_notin_preserves_cur" class="idref" href="#update_version_addr_notin_preserves_cur"><span class="id" title="lemma">update_version_addr_notin_preserves_cur</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:542" class="idref" href="#vmap:542"><span class="id" title="binder">vmap</span></a> <a id="vmap':543" class="idref" href="#vmap':543"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:544" class="idref" href="#a:544"><span class="id" title="binder">a</span></a> <a id="a':545" class="idref" href="#a':545"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:546" class="idref" href="#v:546"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':543"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':545"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:546"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:542"><span class="id" title="variable">vmap</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':545"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':543"><span class="id" title="variable">vmap'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:542"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:544"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; -&gt; <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_notin_preserves_cur" class="idref" href="#update_version_region_notin_preserves_cur"><span class="id" title="lemma">update_version_region_notin_preserves_cur</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="vmap:547" class="idref" href="#vmap:547"><span class="id" title="binder">vmap</span></a> <a id="vmap':548" class="idref" href="#vmap':548"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:549" class="idref" href="#la:549"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:550" class="idref" href="#a:550"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:551" class="idref" href="#v:551"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':548"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:549"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:551"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:547"><span class="id" title="variable">vmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:550"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:549"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':548"><span class="id" title="variable">vmap'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:550"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:547"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:550"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">vmap0</span> := <span class="id" title="abbreviation">foldr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="a:552" class="idref" href="#a:552"><span class="id" title="binder"><span id="a:554" class="id">a</span></span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="vm:553" class="idref" href="#vm:553"><span class="id" title="binder"><span id="vm:555" class="id">vm</span></span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:552"><span class="id" title="variable">a</span></a> <span class="id" title="var">v</span> <a class="idref" href="cap_machine.logical_mapsto.html#vm:553"><span class="id" title="variable">vm</span></a>) <span class="id" title="var">vmap</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">vmap0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur0</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_notin_preserves_cur"><span class="id" title="axiom">update_version_addr_notin_preserves_cur</span></a>; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_notin_is_cur_word" class="idref" href="#update_version_notin_is_cur_word"><span class="id" title="lemma">update_version_notin_is_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:556" class="idref" href="#vmap:556"><span class="id" title="binder">vmap</span></a> <a id="vmap':557" class="idref" href="#vmap':557"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:558" class="idref" href="#p:558"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:559" class="idref" href="#b:559"><span class="id" title="binder">b</span></a> <a id="e:560" class="idref" href="#e:560"><span class="id" title="binder">e</span></a> <a id="a:561" class="idref" href="#a:561"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:562" class="idref" href="#v:562"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:563" class="idref" href="#lw:563"><span class="id" title="binder">lw</span></a> <a id="lwsrc:564" class="idref" href="#lwsrc:564"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:564"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:558"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:559"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:560"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:561"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:562"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':557"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:559"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:560"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:562"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:556"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:564"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:563"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:563"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:556"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:563"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':557"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_lw</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">His_cur_lw</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'0_cur</span><br/>
&nbsp;&nbsp;; (<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_cur"><span class="id" title="axiom">update_version_region_notin_preserves_cur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'0_cur</span>; <span class="id" title="tactic">eauto</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#not_overlap_wordL_seq_between"><span class="id" title="axiom">not_overlap_wordL_seq_between</span></a>; [| | <span class="id" title="tactic">eauto</span>..].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_lreg_corresponds_src" class="idref" href="#update_version_region_lreg_corresponds_src"><span class="id" title="lemma">update_version_region_lreg_corresponds_src</span></a><br/>
&nbsp;&nbsp;(<a id="phr:565" class="idref" href="#phr:565"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:566" class="idref" href="#phm:566"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:567" class="idref" href="#lr:567"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:568" class="idref" href="#lmem:568"><span class="id" title="binder">lmem</span></a> <a id="lm:569" class="idref" href="#lm:569"><span class="id" title="binder">lm</span></a> <a id="lmem':570" class="idref" href="#lmem':570"><span class="id" title="binder">lmem'</span></a> <a id="lm':571" class="idref" href="#lm':571"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:572" class="idref" href="#vmap:572"><span class="id" title="binder">vmap</span></a> <a id="vmap':573" class="idref" href="#vmap':573"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:574" class="idref" href="#src:574"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:575" class="idref" href="#p:575"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:576" class="idref" href="#b:576"><span class="id" title="binder">b</span></a> <a id="e:577" class="idref" href="#e:577"><span class="id" title="binder">e</span></a> <a id="a:578" class="idref" href="#a:578"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:579" class="idref" href="#v:579"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="lwsrc:580" class="idref" href="#lwsrc:580"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:565"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:566"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:567"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:569"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:572"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:575"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:576"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:577"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:578"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:579"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':573"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:567"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:574"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:567"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:569"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:572"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:574"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':573"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:576"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:577"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:579"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:572"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:574"><span class="id" title="variable">src</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a>)<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phr</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:574"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:580"><span class="id" title="variable">lwsrc</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':573"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;  [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">vmap'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_insert</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">replace</span> <span class="id" title="var">phr</span> <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">_</span>]).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">insert_delete_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_insert_respects"><span class="id" title="axiom">lreg_corresponds_insert_respects</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">phr</span> := (<span class="id" title="definition">delete</span> <span class="id" title="var">src</span> <span class="id" title="var">phr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: {  <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_reg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hunique</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_notin_is_cur_word"><span class="id" title="axiom">update_version_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_lreg_corresponds_src'" class="idref" href="#update_version_region_lreg_corresponds_src'"><span class="id" title="lemma">update_version_region_lreg_corresponds_src'</span></a><br/>
&nbsp;&nbsp;(<a id="phr:581" class="idref" href="#phr:581"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:582" class="idref" href="#phm:582"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:583" class="idref" href="#lr:583"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:584" class="idref" href="#lm:584"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:585" class="idref" href="#vmap:585"><span class="id" title="binder">vmap</span></a> <a id="vmap':586" class="idref" href="#vmap':586"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:587" class="idref" href="#src:587"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:588" class="idref" href="#p:588"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:589" class="idref" href="#b:589"><span class="id" title="binder">b</span></a> <a id="e:590" class="idref" href="#e:590"><span class="id" title="binder">e</span></a> <a id="a:591" class="idref" href="#a:591"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:592" class="idref" href="#v:592"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="lwsrc:593" class="idref" href="#lwsrc:593"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:581"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:582"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:583"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:584"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:585"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:593"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:588"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:589"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:590"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:591"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:592"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:593"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':586"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:583"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:587"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:593"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:583"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:584"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:585"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:587"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:593"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':586"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:589"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:590"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:592"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:585"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:581"><span class="id" title="variable">phr</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:587"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:593"><span class="id" title="variable">lwsrc</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':586"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">HLinv</span> <span class="id" title="var">Hget</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="var">phr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="notation">&lt;[</span><span class="id" title="var">src</span><span class="id" title="notation">:=(</span><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <span class="id" title="var">lwsrc</span>)<span class="id" title="notation">)]&gt;</span> <span class="id" title="notation">phr</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_lreg_corresponds_src"><span class="id" title="axiom">update_version_region_lreg_corresponds_src</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_id</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word_next_version"><span class="id" title="axiom">lword_get_word_next_version</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_word_region_update_lword" class="idref" href="#update_version_word_region_update_lword"><span class="id" title="lemma">update_version_word_region_update_lword</span></a> {<a id="vmap:594" class="idref" href="#vmap:594"><span class="id" title="binder">vmap</span></a> <a id="vmap':595" class="idref" href="#vmap':595"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>} {<a id="lw:596" class="idref" href="#lw:596"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>} {<a id="p:597" class="idref" href="#p:597"><span class="id" title="binder">p</span></a> <a id="b:598" class="idref" href="#b:598"><span class="id" title="binder">b</span></a> <a id="e:599" class="idref" href="#e:599"><span class="id" title="binder">e</span></a> <a id="a:600" class="idref" href="#a:600"><span class="id" title="binder">a</span></a> <a id="v:601" class="idref" href="#v:601"><span class="id" title="binder">v</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:596"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:597"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:598"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:599"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:600"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:601"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:598"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:599"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:601"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:594"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':595"><span class="id" title="variable">vmap'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:596"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:594"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:596"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':595"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hgclw</span> &lt;- <span class="id" title="var">Hcw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span> <span class="id" title="keyword">as</span> [|[*|]|<span class="id" title="var">f</span> [*|*]]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hgclw</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap_lookup"><span class="id" title="axiom">update_version_region_vmap_lookup</span></a>, <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_update_version_region&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;:&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a0,&nbsp;v)))&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;vmap&nbsp;!!&nbsp;a0&nbsp;=&nbsp;Some&nbsp;v)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;(lm&nbsp;!!&nbsp;(a0,&nbsp;v&nbsp;+1)&nbsp;=&nbsp;None))&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;⊆&nbsp;lmem'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;Hlmem_incl&nbsp;HmemMap&nbsp;HcurMap&nbsp;HmaxMap&nbsp;Hupd&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;first&nbsp;(&nbsp;cbn&nbsp;in&nbsp;*&nbsp;;&nbsp;simplify_map_eq&nbsp;;&nbsp;by&nbsp;set_solver&nbsp;).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct_cons;&nbsp;destruct&nbsp;HmemMap_a&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa</span></span> <span class="inlinecode"><span class="id" title="var">Hlwa</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;cbn;&nbsp;rewrite&nbsp;-/(update_version_region&nbsp;lmem&nbsp;la&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;pose&nbsp;proof&nbsp;Hupd0&nbsp;as&nbsp;Hupd0'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lm0&nbsp;!!&nbsp;(a,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None)&nbsp;as&nbsp;Hlm0_max&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_lm;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(lm0&nbsp;!!&nbsp;(a,&nbsp;v)&nbsp;=&nbsp;Some&nbsp;lwa)&nbsp;as&nbsp;Hlwa'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_lm;&nbsp;cycle&nbsp;1;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_update_version_addr&nbsp;in&nbsp;Hupd0;&nbsp;eauto;&nbsp;cycle&nbsp;1.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;{&nbsp;eapply&nbsp;update_cur_version_region_preserves_lmem_incl&nbsp;;eauto.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;{&nbsp;erewrite&nbsp;update_cur_version_region_notin_preserves_cur;&nbsp;eauto.&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;((update_version_region&nbsp;lmem&nbsp;la&nbsp;v)&nbsp;⊆&nbsp;lmem0)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;Hlmem_incl0&nbsp;by&nbsp;(eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;assert&nbsp;(update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;⊆&nbsp;lmem')&nbsp;as&nbsp;Hlmem_incl'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(eapply&nbsp;update_cur_version_region_update_version_region_aux;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_version_addr&nbsp;in&nbsp;Hupd0&nbsp;|-&nbsp;*.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;eqn:Hupd_a;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;insert_subseteq_l;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;update_version_region_preserves_lmem&nbsp;in&nbsp;Hupd_a&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken&nbsp;in&nbsp;Hlmem_incl&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hlmem_incl&nbsp;in&nbsp;Hlwa;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_lmem&nbsp;in&nbsp;Hupd_a;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_lm&nbsp;in&nbsp;Hlmem_incl;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_cur&nbsp;in&nbsp;HcurMap_a;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;HcurMap_a&nbsp;/=&nbsp;Hlmem_incl&nbsp;/=&nbsp;in&nbsp;Hupd0'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_preserves_mem_current_version" class="idref" href="#update_version_addr_preserves_mem_current_version"><span class="id" title="lemma">update_version_addr_preserves_mem_current_version</span></a><br/>
&nbsp;&nbsp;(<a id="lm:602" class="idref" href="#lm:602"><span class="id" title="binder">lm</span></a> <a id="lm':603" class="idref" href="#lm':603"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:604" class="idref" href="#vmap:604"><span class="id" title="binder">vmap</span></a> <a id="vmap':605" class="idref" href="#vmap':605"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:606" class="idref" href="#a:606"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="v:607" class="idref" href="#v:607"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:602"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:607"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:607"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:604"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':603"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:602"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:607"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:602"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':605"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:607"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:604"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:602"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:604"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:602"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:604"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':603"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':605"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="var">Hcur_addr</span> -&gt; -&gt; <span class="id" title="var">Hnaccess_mem</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hla</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_insert</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_insert"><span class="id" title="axiom">is_cur_addr_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hlegal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlegal</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v'</span> &amp; <span class="id" title="var">Hcur_la'</span> &amp; <span class="id" title="var">Hcurv'_max</span> &amp; <span class="id" title="var">Hsome_la'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <span class="id" title="var">la'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>] ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_insert"><span class="id" title="axiom">is_cur_addr_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_addr</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la'</span> |- * ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq</span> ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_addr</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hlegal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlegal</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v'</span> &amp; <span class="id" title="var">Hcur_la'</span> &amp; <span class="id" title="var">Hcurv'_max</span> &amp; <span class="id" title="var">Hsome_la'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <span class="id" title="var">la'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> ; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsome_la'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_addr</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la'</span> |- * ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_notin_is_cur_word" class="idref" href="#update_cur_version_notin_is_cur_word"><span class="id" title="lemma">update_cur_version_notin_is_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="lm:608" class="idref" href="#lm:608"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:609" class="idref" href="#vmap:609"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:610" class="idref" href="#a:610"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:611" class="idref" href="#v:611"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:612" class="idref" href="#lw:612"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:608"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:609"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:610"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:608"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:610"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:611"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:612"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:610"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:611"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:609"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:612"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:609"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:612"><span class="id" title="variable">lw</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a:610"><span class="id" title="variable">a</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#v:611"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hno_access</span> <span class="id" title="var">Hlm</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_lw</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">His_cur_lw</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'_cur</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_preserves_mem_vmap_root" class="idref" href="#update_version_addr_preserves_mem_vmap_root"><span class="id" title="lemma">update_version_addr_preserves_mem_vmap_root</span></a><br/>
&nbsp;&nbsp;(<a id="phm:613" class="idref" href="#phm:613"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:614" class="idref" href="#lm:614"><span class="id" title="binder">lm</span></a> <a id="lm':615" class="idref" href="#lm':615"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:616" class="idref" href="#vmap:616"><span class="id" title="binder">vmap</span></a> <a id="vmap':617" class="idref" href="#vmap':617"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:618" class="idref" href="#a:618"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="v:619" class="idref" href="#v:619"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:614"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:618"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:619"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:618"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:619"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:616"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':615"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:614"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:618"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:619"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:614"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':617"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:618"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:619"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:616"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:614"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:616"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:618"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:613"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:614"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:616"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:613"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':615"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':617"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hmax</span> <span class="id" title="var">Hcur_addr</span> -&gt; -&gt; <span class="id" title="var">Hnaccess_mem</span> <span class="id" title="var">Hroot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hcur_addr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_addr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_addr</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_addr</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw</span> &amp; <span class="id" title="var">Hlm_lw</span> &amp; <span class="id" title="var">Hphm_lw</span> &amp; <span class="id" title="var">Hcur_lw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_insert_2</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm_lw'</span> &amp; <span class="id" title="var">Hphm_lw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) <span class="id" title="keyword">as</span> [?|<span class="id" title="var">Hneq_a</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;a&nbsp;=&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span>)) <span class="id" title="keyword">as</span> [?|<span class="id" title="var">Hneq_v</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;v&nbsp;=&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;v&nbsp;≠&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span>)) <span class="id" title="keyword">as</span> [?|<span class="id" title="var">Hneq_v'</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">simplify_map_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnaccess_mem</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;provable&nbsp;??&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;a&nbsp;≠&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; [|<span class="id" title="tactic">intro</span>;<span class="id" title="var">simplify_eq</span>;<span class="id" title="var">lia</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;provable&nbsp;??&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;(decide&nbsp;((a,&nbsp;v)&nbsp;=&nbsp;(a',&nbsp;v')))&nbsp;as&nbsp;<span class="inlinecode">?|<span class="id" title="var">Hneq</span></span>;&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;{&nbsp;exists&nbsp;lw.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;split;<span class="inlinecode">|<span class="id" title="tactic">split</span></span>;auto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_insert_ne;&nbsp;auto.&nbsp;intro&nbsp;;&nbsp;simplify_eq&nbsp;;&nbsp;lia.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_notin_is_cur_word;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;}&nbsp;*)</span><br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;(decide&nbsp;((a,&nbsp;v+1)&nbsp;=&nbsp;(la',&nbsp;v')))&nbsp;as&nbsp;<span class="inlinecode">?|<span class="id" title="var">Hneq</span></span>;&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;+&nbsp;rewrite&nbsp;Hlw'&nbsp;in&nbsp;Hmax&nbsp;;&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;+&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;(decide&nbsp;(a&nbsp;=&nbsp;la'))&nbsp;as&nbsp;<span class="inlinecode">?|<span class="id" title="var">Hneq'</span></span>&nbsp;;&nbsp;subst.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;*&nbsp;rewrite&nbsp;Hphm'&nbsp;in&nbsp;Hphm_lw;&nbsp;simplify_eq.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;lw'.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;<span class="inlinecode">|<span class="id" title="tactic">split</span></span>;auto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;by&nbsp;rewrite&nbsp;lookup_insert_ne;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">intro</span>;<span class="id" title="var">simplify_eq</span>;<span class="id" title="var">lia</span></span>.&nbsp;}&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{eapply&nbsp;update_cur_version_notin_is_cur_word&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;provable&nbsp;??&nbsp;*)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;admit.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_preserves_mem_corresponds" class="idref" href="#update_version_addr_preserves_mem_corresponds"><span class="id" title="lemma">update_version_addr_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phm:620" class="idref" href="#phm:620"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:621" class="idref" href="#lm:621"><span class="id" title="binder">lm</span></a> <a id="lm':622" class="idref" href="#lm':622"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:623" class="idref" href="#vmap:623"><span class="id" title="binder">vmap</span></a> <a id="vmap':624" class="idref" href="#vmap':624"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:625" class="idref" href="#a:625"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="v:626" class="idref" href="#v:626"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:621"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:625"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:626"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:625"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:626"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:623"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':622"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:621"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:625"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:626"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:621"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':624"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:625"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:626"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:623"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:621"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:623"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:625"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:620"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:621"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:623"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:620"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':622"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':624"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hmax</span> <span class="id" title="var">Hcur_addr</span> -&gt; -&gt; <span class="id" title="var">Hnaccess_mem</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_preserves_mem_current_version"><span class="id" title="axiom">update_version_addr_preserves_mem_current_version</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_preserves_mem_vmap_root"><span class="id" title="axiom">update_version_addr_preserves_mem_vmap_root</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;If&nbsp;an&nbsp;address&nbsp;`a'`&nbsp;is&nbsp;not&nbsp;reachable&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;updating&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;another&nbsp;address&nbsp;`a`&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;does&nbsp;not&nbsp;make&nbsp;it&nbsp;reachable&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_preserves_notin_not_access" class="idref" href="#update_version_addr_preserves_notin_not_access"><span class="id" title="lemma">update_version_addr_preserves_notin_not_access</span></a><br/>
&nbsp;&nbsp;(<a id="lm:627" class="idref" href="#lm:627"><span class="id" title="binder">lm</span></a> <a id="lm':628" class="idref" href="#lm':628"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:629" class="idref" href="#a:629"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="vmap:630" class="idref" href="#vmap:630"><span class="id" title="binder">vmap</span></a> <a id="vmap':631" class="idref" href="#vmap':631"><span class="id" title="binder">vmap'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="v:632" class="idref" href="#v:632"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a':633" class="idref" href="#a':633"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:629"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:627"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':628"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:627"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':631"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:627"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':628"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':631"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:629"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:627"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':628"><span class="id" title="variable">lm'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':633"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:632"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':631"><span class="id" title="variable">vmap'</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#a:629"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hincl</span> [<span class="id" title="var">lw</span> <span class="id" title="var">Hlm</span>] <span class="id" title="var">Hcur</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hsome'</span> <span class="id" title="var">Hcur'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur'</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hno_access</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_expands" class="idref" href="#update_version_addr_expands"><span class="id" title="lemma">update_version_addr_expands</span></a> (<a id="lm:634" class="idref" href="#lm:634"><span class="id" title="binder">lm</span></a> <a id="lm':635" class="idref" href="#lm':635"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:636" class="idref" href="#a:636"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:637" class="idref" href="#v:637"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:634"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':635"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:634"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:636"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:637"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:634"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:634"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:636"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:637"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':635"><span class="id" title="variable">lm'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hmaxv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_expands" class="idref" href="#update_version_region_expands"><span class="id" title="lemma">update_version_region_expands</span></a> (<a id="lm:638" class="idref" href="#lm:638"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:639" class="idref" href="#la:639"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:640" class="idref" href="#v:640"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:639"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:641" class="idref" href="#a:641"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:641"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:640"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:639"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:639"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:640"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">HmaxMap</span> ; <span class="id" title="var">destruct_cons</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup_la</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lm</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_expands"><span class="id" title="axiom">update_version_addr_expands</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_vmap_neq_preserves_cur" class="idref" href="#update_version_addr_vmap_neq_preserves_cur"><span class="id" title="lemma">update_version_addr_vmap_neq_preserves_cur</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:642" class="idref" href="#vmap:642"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a':643" class="idref" href="#a':643"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:644" class="idref" href="#v:644"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a:645" class="idref" href="#a:645"><span class="id" title="binder">a</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:645"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':643"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:645"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:644"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:642"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:645"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:644"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':643"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:644"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:642"><span class="id" title="variable">vmap</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap"><span class="id" title="definition">update_version_addr_vmap</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_vmap_notin_preserves_cur" class="idref" href="#update_version_region_vmap_notin_preserves_cur"><span class="id" title="lemma">update_version_region_vmap_notin_preserves_cur</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:646" class="idref" href="#vmap:646"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:647" class="idref" href="#la:647"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:648" class="idref" href="#v:648"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a:649" class="idref" href="#a:649"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:649"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:647"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:649"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:648"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:646"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:649"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:648"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:647"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:648"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:646"><span class="id" title="variable">vmap</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hnot_in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">vmap</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_notin_la</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_vmap_neq_preserves_cur"><span class="id" title="axiom">update_version_addr_vmap_neq_preserves_cur</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_notin_not_access" class="idref" href="#update_version_region_preserves_notin_not_access"><span class="id" title="lemma">update_version_region_preserves_notin_not_access</span></a><br/>
&nbsp;&nbsp;(<a id="lm:650" class="idref" href="#lm:650"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:651" class="idref" href="#la:651"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="vmap:652" class="idref" href="#vmap:652"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="v:653" class="idref" href="#v:653"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a:654" class="idref" href="#a:654"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:654"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:655" class="idref" href="#a:655"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:650"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:655"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:653"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:656" class="idref" href="#a:656"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:656"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:653"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:652"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:657" class="idref" href="#a:657"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lm:650"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:657"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:653"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:650"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:652"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:654"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:650"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:653"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:650"><span class="id" title="variable">lm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:651"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:653"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:652"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#a:654"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hnotin</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hmap</span> <span class="id" title="var">HcurMap</span> <span class="id" title="var">HmaxvMap</span> <span class="id" title="var">Hnot_access</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lm</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">vmap</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnot_access</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_preserves_notin_not_access"><span class="id" title="axiom">update_version_addr_preserves_notin_not_access</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_expands"><span class="id" title="axiom">update_version_region_expands</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap_notin_preserves_cur"><span class="id" title="axiom">update_version_region_vmap_notin_preserves_cur</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_mem_corresponds" class="idref" href="#update_version_region_preserves_mem_corresponds"><span class="id" title="lemma">update_version_region_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phm:658" class="idref" href="#phm:658"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:659" class="idref" href="#lm:659"><span class="id" title="binder">lm</span></a> <a id="lm':660" class="idref" href="#lm':660"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:661" class="idref" href="#vmap:661"><span class="id" title="binder">vmap</span></a> <a id="vmap':662" class="idref" href="#vmap':662"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:663" class="idref" href="#la:663"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) <a id="v:664" class="idref" href="#v:664"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap':662"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:664"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:661"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':660"><span class="id" title="variable">lm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:664"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:665" class="idref" href="#a:665"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:665"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:664"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:666" class="idref" href="#a:666"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:666"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:664"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:661"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:667" class="idref" href="#a:667"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:667"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:664"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:668" class="idref" href="#a:668"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:661"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:668"><span class="id" title="variable">a</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:658"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:659"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:661"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:658"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':660"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':662"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">phm</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> * -&gt; -&gt; <span class="id" title="var">Hno_dup</span> <span class="id" title="var">Hmap</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hmax</span> <span class="id" title="var">Hall_naccess_mem</span> <span class="id" title="var">Hmem_corr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <span class="id" title="var">phm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_vmap"><span class="id" title="definition">update_version_region_vmap</span></a> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">vmap</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ;<span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_preserves_mem_corresponds"><span class="id" title="axiom">update_version_addr_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hinv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> ; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_cur"><span class="id" title="axiom">update_version_region_notin_preserves_cur</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_notin_not_access"><span class="id" title="axiom">update_version_region_preserves_notin_not_access</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery for valid update of the lmemory 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;We&nbsp;require&nbsp;⊆,&nbsp;because&nbsp;lmem&nbsp;might&nbsp;contain&nbsp;only&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;updated&nbsp;region,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;means&nbsp;that&nbsp;lmem'&nbsp;contains&nbsp;both:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;known&nbsp;from&nbsp;lmem<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;a&nbsp;∈&nbsp;<span class="inlinecode"><span class="id" title="var">b</span>,</span> <span class="inlinecode"><span class="id" title="var">e</span>),</span> <span class="inlinecode"><span class="id" title="var">unknown</span></span> <span class="inlinecode"><span class="id" title="var">from</span></span> <span class="inlinecode"><span class="id" title="var">lmem</span></span>

       <span class="inlinecode"><span class="id" title="var">We</span></span> <span class="inlinecode"><span class="id" title="var">also</span></span> <span class="inlinecode"><span class="id" title="var">require</span></span> <span class="inlinecode"><span class="id" title="var">that</span></span> <span class="inlinecode"><span class="id" title="var">every</span></span> <span class="inlinecode"><span class="id" title="var">addresses</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">the</span></span> <span class="inlinecode"><span class="id" title="var">region</span></span> <span class="inlinecode"><span class="id" title="var">have</span></span> <span class="inlinecode"><span class="id" title="var">actually</span></span> <span class="inlinecode"><span class="id" title="var">been</span></span> <span class="inlinecode"><span class="id" title="var">updated</span>,</span>
       <span class="inlinecode"><span class="id" title="var">although</span></span> <span class="inlinecode"><span class="id" title="var">we</span></span> <span class="inlinecode"><span class="id" title="var">might</span></span> <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">know</span></span> <span class="inlinecode"><span class="id" title="var">their</span></span> <span class="inlinecode"><span class="id" title="var">value</span></span>
 <span class="inlinecode"></span>*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="is_valid_updated_lmemory" class="idref" href="#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:669" class="idref" href="#glmem:669"><span class="id" title="binder">glmem</span></a> <a id="llmem:670" class="idref" href="#llmem:670"><span class="id" title="binder">llmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:671" class="idref" href="#la:671"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:672" class="idref" href="#v:672"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="llmem':673" class="idref" href="#llmem':673"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:669"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:671"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:672"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:670"><span class="id" title="variable">llmem</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':673"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;unclear&nbsp;whether&nbsp;this&nbsp;is&nbsp;useful&nbsp;in&nbsp;the&nbsp;def&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:674" class="idref" href="#a:674"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#llmem:670"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:674"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:672"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:671"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:675" class="idref" href="#a:675"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#llmem':673"><span class="id" title="variable">llmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:675"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:672"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:671"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_notin_preserves_lmem" class="idref" href="#is_valid_updated_lmemory_notin_preserves_lmem"><span class="id" title="lemma">is_valid_updated_lmemory_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:676" class="idref" href="#glmem:676"><span class="id" title="binder">glmem</span></a> <a id="llmem:677" class="idref" href="#llmem:677"><span class="id" title="binder">llmem</span></a> <a id="llmem':678" class="idref" href="#llmem':678"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:679" class="idref" href="#la:679"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':680" class="idref" href="#a':680"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:681" class="idref" href="#v:681"><span class="id" title="binder">v</span></a> <a id="v':682" class="idref" href="#v':682"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:683" class="idref" href="#lw:683"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':680"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:679"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:676"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:677"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:679"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:681"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':678"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:677"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':680"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':682"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:683"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem':678"><span class="id" title="variable">llmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':680"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':682"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:683"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">llmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha'_notin_la</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="lemma">map_subseteq_spec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa'</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_preserves_lmem" class="idref" href="#is_valid_updated_lmemory_preserves_lmem"><span class="id" title="lemma">is_valid_updated_lmemory_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:684" class="idref" href="#glmem:684"><span class="id" title="binder">glmem</span></a> <a id="llmem:685" class="idref" href="#llmem:685"><span class="id" title="binder">llmem</span></a> <a id="llmem':686" class="idref" href="#llmem':686"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:687" class="idref" href="#la:687"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':688" class="idref" href="#a':688"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:689" class="idref" href="#v:689"><span class="id" title="binder">v</span></a> <a id="v':690" class="idref" href="#v':690"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:691" class="idref" href="#lw:691"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:687"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:684"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:685"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:687"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:689"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':686"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:685"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':688"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':690"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:691"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem':686"><span class="id" title="variable">llmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':688"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':690"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:691"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">llmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HmaxMem_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha'_neq_a</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq_v</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_lookup"><span class="id" title="axiom">update_version_addr_lookup</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_updated_incl"><span class="id" title="axiom">update_version_addr_updated_incl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_lmem_incl" class="idref" href="#is_valid_updated_lmemory_lmem_incl"><span class="id" title="lemma">is_valid_updated_lmemory_lmem_incl</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:692" class="idref" href="#glmem:692"><span class="id" title="binder">glmem</span></a> <a id="llmem:693" class="idref" href="#llmem:693"><span class="id" title="binder">llmem</span></a> <a id="llmem':694" class="idref" href="#llmem':694"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:695" class="idref" href="#la:695"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:696" class="idref" href="#v:696"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:695"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:692"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:693"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:695"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:696"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':694"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:693"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':694"><span class="id" title="variable">llmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory_preserves_lmem"><span class="id" title="axiom">is_valid_updated_lmemory_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_preserves_lmem_next" class="idref" href="#is_valid_updated_lmemory_preserves_lmem_next"><span class="id" title="lemma">is_valid_updated_lmemory_preserves_lmem_next</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:697" class="idref" href="#glmem:697"><span class="id" title="binder">glmem</span></a> <a id="llmem:698" class="idref" href="#llmem:698"><span class="id" title="binder">llmem</span></a> <a id="llmem':699" class="idref" href="#llmem':699"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:700" class="idref" href="#la:700"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':701" class="idref" href="#a':701"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:702" class="idref" href="#v:702"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:703" class="idref" href="#lw:703"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:700"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':701"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:700"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:697"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:698"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:700"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:702"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':699"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:698"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:697"><span class="id" title="variable">glmem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:704" class="idref" href="#a:704"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#llmem:698"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:704"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:702"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:700"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:698"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':701"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:702"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:703"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem':699"><span class="id" title="variable">llmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':701"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:702"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:703"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">llmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hlgmem</span> <span class="id" title="var">Hmax_la</span> <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">glmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">llmem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="lemma">map_subseteq_spec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="var">glmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha'_in_la</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'_in_la'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_in_la'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'_lookup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax_la</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem_next"><span class="id" title="axiom">update_version_region_preserves_lmem_next</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Ha'</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem_next"><span class="id" title="axiom">update_version_region_preserves_lmem_next</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax_la</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_insert" class="idref" href="#is_valid_updated_lmemory_insert"><span class="id" title="lemma">is_valid_updated_lmemory_insert</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:705" class="idref" href="#glmem:705"><span class="id" title="binder">glmem</span></a> <a id="llmem:706" class="idref" href="#llmem:706"><span class="id" title="binder">llmem</span></a> <a id="llmem':707" class="idref" href="#llmem':707"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:708" class="idref" href="#la:708"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':709" class="idref" href="#a':709"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:710" class="idref" href="#v:710"><span class="id" title="binder">v</span></a> <a id="v':711" class="idref" href="#v':711"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:712" class="idref" href="#lw:712"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:708"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':709"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:708"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:706"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':709"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':711"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:713" class="idref" href="#a:713"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#llmem:706"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:713"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:710"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:708"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:705"><span class="id" title="variable">glmem</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':709"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':711"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:712"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">llmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:708"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:710"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':707"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:705"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:706"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:708"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:710"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':707"><span class="id" title="variable">llmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">llmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_notin_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">HmaxMap'</span> &amp; <span class="id" title="var">HnextMap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_insert"><span class="id" title="axiom">update_version_region_insert</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_insert'" class="idref" href="#is_valid_updated_lmemory_insert'"><span class="id" title="lemma">is_valid_updated_lmemory_insert'</span></a><br/>
&nbsp;&nbsp;(<a id="glmem:714" class="idref" href="#glmem:714"><span class="id" title="binder">glmem</span></a> <a id="llmem:715" class="idref" href="#llmem:715"><span class="id" title="binder">llmem</span></a> <a id="llmem':716" class="idref" href="#llmem':716"><span class="id" title="binder">llmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:717" class="idref" href="#la:717"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':718" class="idref" href="#a':718"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:719" class="idref" href="#v:719"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:720" class="idref" href="#lw:720"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:717"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':718"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:717"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#llmem:715"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':718"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:721" class="idref" href="#a:721"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#llmem:715"><span class="id" title="variable">llmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:721"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:717"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:714"><span class="id" title="variable">glmem</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':718"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:720"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">llmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:717"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':716"><span class="id" title="variable">llmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#glmem:714"><span class="id" title="variable">glmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem:715"><span class="id" title="variable">llmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:717"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#llmem':716"><span class="id" title="variable">llmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">glmem</span> <span class="id" title="var">llmem</span> <span class="id" title="var">llmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">HmaxMap'</span> &amp; <span class="id" title="var">HnextMap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_subseteq_trans"><span class="id" title="axiom">map_subseteq_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_insert_inv"><span class="id" title="axiom">update_version_region_insert_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;Maybe&nbsp;the&nbsp;induction&nbsp;case&nbsp;of&nbsp;this&nbsp;proof&nbsp;could&nbsp;be&nbsp;done&nbsp;separately&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;update_cur_version_region_valid&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;(lmem&nbsp;lm&nbsp;lmem'&nbsp;lm':&nbsp;LMem)&nbsp;(vmap&nbsp;vmap'&nbsp;:&nbsp;VMap)&nbsp;(la&nbsp;:&nbsp;list&nbsp;Addr)&nbsp;(v&nbsp;:&nbsp;Version)&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;NoDup&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;vmap&nbsp;!!&nbsp;a0&nbsp;=&nbsp;Some&nbsp;v)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;is_Some&nbsp;(lm&nbsp;!!&nbsp;(a0,&nbsp;v)))&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;Forall&nbsp;(λ&nbsp;a0&nbsp;:&nbsp;Addr,&nbsp;lm&nbsp;!!&nbsp;(a0,&nbsp;v&nbsp;+&nbsp;1)&nbsp;=&nbsp;None)&nbsp;la&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;update_cur_version_region&nbsp;lmem&nbsp;lm&nbsp;vmap&nbsp;la&nbsp;=&nbsp;(lmem',&nbsp;lm',&nbsp;vmap')&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;is_valid_updated_lmemory&nbsp;lmem&nbsp;la&nbsp;v&nbsp;lmem'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;move:&nbsp;lmem&nbsp;lm&nbsp;lmem'&nbsp;lm'&nbsp;vmap&nbsp;vmap'&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;la&nbsp;as&nbsp;<span class="inlinecode">|<span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">la</span></span> <span class="inlinecode"><span class="id" title="var">IHla</span></span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;;&nbsp;intros&nbsp;*&nbsp;HNoDup&nbsp;Hlmem_incl&nbsp;HcurMap&nbsp;HmemMap&nbsp;HmaxMap&nbsp;Hupd.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;cbn&nbsp;in&nbsp;*;&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;cbn.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_solver.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;by&nbsp;apply&nbsp;Forall_nil.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;destruct_cons;&nbsp;destruct&nbsp;HmemMap_a&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa</span></span> <span class="inlinecode"><span class="id" title="var">Hlwa</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(&nbsp;is_valid_updated_lmemory&nbsp;lmem&nbsp;la&nbsp;v&nbsp;lmem0)&nbsp;as&nbsp;Hvalid&nbsp;by&nbsp;(eapply&nbsp;IHla&nbsp;;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;rewrite&nbsp;/=&nbsp;-/(update_version_region&nbsp;lmem&nbsp;la&nbsp;v).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hvalid&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hupd'</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(vmap0&nbsp;!!&nbsp;a&nbsp;=&nbsp;Some&nbsp;v)&nbsp;as&nbsp;Hcur0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_cur;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(&nbsp;lmem0&nbsp;⊆&nbsp;lmem')&nbsp;as&nbsp;Hlmem_incl'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_incl_lmem;&nbsp;cycle&nbsp;1;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_region_notin_preserves_lmem;&nbsp;cycle&nbsp;1;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken_None&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;⊆&nbsp;lmem')&nbsp;as&nbsp;Hupd_incl_lmem'&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(eapply&nbsp;map_subseteq_trans;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_version_addr.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(update_version_region&nbsp;lmem&nbsp;la&nbsp;v&nbsp;!!&nbsp;(a,&nbsp;v))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa'</span>|</span>eqn:Hupd_lmem&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;insert_subseteq_l;&nbsp;auto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(lmem&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lwa')&nbsp;as&nbsp;Hlmem_a&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(rewrite&nbsp;update_version_region_preserves_lmem&nbsp;in&nbsp;Hupd_lmem;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(lmem0&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lwa')&nbsp;as&nbsp;Hlmem0_a&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(erewrite&nbsp;update_cur_version_region_notin_preserves_lmem;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(lm0&nbsp;!!&nbsp;(a,v)&nbsp;=&nbsp;Some&nbsp;lwa')&nbsp;as&nbsp;Hlm0_a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;eapply&nbsp;update_cur_version_region_preserves_lmem_incl&nbsp;in&nbsp;Hupd;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;update_cur_version_addr_next;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;apply&nbsp;Forall_cons;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken_None;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;Forall_impl;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;;&nbsp;cbn&nbsp;in&nbsp;*.&nbsp;eapply&nbsp;lookup_weaken_None;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Forall_cons.&nbsp;<span class="comment">(*&nbsp;easy,&nbsp;because&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_cur&nbsp;in&nbsp;HcurMap_a&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;&lt;-&nbsp;update_cur_version_region_notin_preserves_lm&nbsp;in&nbsp;Hlwa&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;/update_cur_version_addr&nbsp;HcurMap_a&nbsp;Hlwa&nbsp;in&nbsp;Hupd0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;simplify_map_eq.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;Forall_forall.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;a'&nbsp;Ha'_in_la.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hvalid&nbsp;as&nbsp;(_&nbsp;&amp;&nbsp;_&nbsp;&amp;&nbsp;Hsome).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;elem_of_list_lookup&nbsp;in&nbsp;Ha'_in_la&nbsp;;&nbsp;destruct&nbsp;Ha'_in_la&nbsp;as&nbsp;<span class="inlinecode">?</span> <span class="inlinecode"><span class="id" title="var">Ha'</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;Forall_lookup&nbsp;in&nbsp;Hsome&nbsp;;&nbsp;eauto&nbsp;;&nbsp;destruct&nbsp;Hsome&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">lwa0</span></span> <span class="inlinecode"><span class="id" title="var">Hlwa0</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;lwa0.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(decide&nbsp;(a&nbsp;=&nbsp;a'))&nbsp;as&nbsp;<span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Ha'_neq_a</span></span>;&nbsp;simplify_map_eq&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;last&nbsp;(erewrite&nbsp;update_cur_version_addr_notin_preserves_lmem;&nbsp;eauto).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exfalso.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;update_cur_version_region_notin_preserves_lmem&nbsp;in&nbsp;Hlwa0;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;lookup_weaken&nbsp;in&nbsp;Hlwa0&nbsp;;&nbsp;eauto.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;rewrite&nbsp;Hlwa0&nbsp;in&nbsp;HmaxMap_a.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Logical machine 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="isCorrectLPC" class="idref" href="#isCorrectLPC"><span class="id" title="definition, inductive"><span id="isCorrectLPC_ind" class="id"><span id="isCorrectLPC_sind" class="id">isCorrectLPC</span></span></span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="isCorrectLPC_intro" class="idref" href="#isCorrectLPC_intro"><span class="id" title="constructor">isCorrectLPC_intro</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lpc:724" class="idref" href="#lpc:724"><span class="id" title="binder">lpc</span></a> <a id="p:725" class="idref" href="#p:725"><span class="id" title="binder">p</span></a> (<a id="b:726" class="idref" href="#b:726"><span class="id" title="binder">b</span></a> <a id="e:727" class="idref" href="#e:727"><span class="id" title="binder">e</span></a> <a id="a:728" class="idref" href="#a:728"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:724"><span class="id" title="variable">lpc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:725"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:726"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:727"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:728"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:725"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:726"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:727"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:728"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC:722"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:724"><span class="id" title="variable">lpc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC" class="idref" href="#isCorrectLPC_isCorrectPC"><span class="id" title="lemma">isCorrectLPC_isCorrectPC</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:729" class="idref" href="#lw:729"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:729"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:729"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectPC_isCorrectLPC" class="idref" href="#isCorrectPC_isCorrectLPC"><span class="id" title="lemma">isCorrectPC_isCorrectLPC</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:730" class="idref" href="#lw:730"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:730"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:730"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC_iff" class="idref" href="#isCorrectLPC_isCorrectPC_iff"><span class="id" title="lemma">isCorrectLPC_isCorrectPC_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:731" class="idref" href="#lw:731"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:731"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:731"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ; [<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC"><span class="id" title="axiom">isCorrectLPC_isCorrectPC</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectPC_isCorrectLPC"><span class="id" title="axiom">isCorrectPC_isCorrectLPC</span></a>].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_perm" class="idref" href="#not_isCorrectLPC_perm"><span class="id" title="lemma">not_isCorrectLPC_perm</span></a> <a id="p:732" class="idref" href="#p:732"><span class="id" title="binder">p</span></a> <a id="b:733" class="idref" href="#b:733"><span class="id" title="binder">b</span></a> <a id="e:734" class="idref" href="#e:734"><span class="id" title="binder">e</span></a> <a id="a:735" class="idref" href="#a:735"><span class="id" title="binder">a</span></a> <a id="v:736" class="idref" href="#v:736"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#p:732"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:732"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:732"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:733"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:734"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:735"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:736"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_perm"><span class="id" title="axiom">not_isCorrectPC_perm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_bounds" class="idref" href="#not_isCorrectLPC_bounds"><span class="id" title="lemma">not_isCorrectLPC_bounds</span></a> <a id="p:737" class="idref" href="#p:737"><span class="id" title="binder">p</span></a> <a id="b:738" class="idref" href="#b:738"><span class="id" title="binder">b</span></a> <a id="e:739" class="idref" href="#e:739"><span class="id" title="binder">e</span></a> <a id="a:740" class="idref" href="#a:740"><span class="id" title="binder">a</span></a> <a id="v:741" class="idref" href="#v:741"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#b:738"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:740"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:739"><span class="id" title="variable">e</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:737"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:738"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:739"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:740"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:741"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_bounds"><span class="id" title="axiom">not_isCorrectPC_bounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_ExecPCPerm_InBounds" class="idref" href="#isCorrectLPC_ExecPCPerm_InBounds"><span class="id" title="lemma">isCorrectLPC_ExecPCPerm_InBounds</span></a> <a id="p:742" class="idref" href="#p:742"><span class="id" title="binder">p</span></a> <a id="b:743" class="idref" href="#b:743"><span class="id" title="binder">b</span></a> <a id="e:744" class="idref" href="#e:744"><span class="id" title="binder">e</span></a> <a id="a:745" class="idref" href="#a:745"><span class="id" title="binder">a</span></a> <a id="v:746" class="idref" href="#v:746"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:742"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:743"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:744"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:745"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:742"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:743"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:744"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:745"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:746"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a>, <a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_ExecPCPerm_InBounds"><span class="id" title="axiom">isCorrectPC_ExecPCPerm_InBounds</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_dec" class="idref" href="#isCorrectLPC_dec"><span class="id" title="lemma">isCorrectLPC_dec</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:747" class="idref" href="#lw:747"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:747"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:747"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">case_eq</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> | <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_le_dec"><span class="id" title="instance">finz_le_dec</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_lt_dec"><span class="id" title="instance">finz_lt_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_range_is_correctLPC" class="idref" href="#in_range_is_correctLPC"><span class="id" title="lemma">in_range_is_correctLPC</span></a> <a id="p:750" class="idref" href="#p:750"><span class="id" title="binder">p</span></a> <a id="b:751" class="idref" href="#b:751"><span class="id" title="binder">b</span></a> <a id="e:752" class="idref" href="#e:752"><span class="id" title="binder">e</span></a> <a id="a:753" class="idref" href="#a:753"><span class="id" title="binder">a</span></a> <a id="b':754" class="idref" href="#b':754"><span class="id" title="binder">b'</span></a> <a id="e':755" class="idref" href="#e':755"><span class="id" title="binder">e'</span></a> <a id="v:756" class="idref" href="#v:756"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:750"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:751"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:752"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:753"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:756"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':754"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:751"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#e:752"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':755"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':754"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:753"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:753"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#::Addr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':755"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hb</span> <span class="id" title="var">He</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvpc</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="dec_lpc" class="idref" href="#dec_lpc"><span class="id" title="instance">dec_lpc</span></a> <a id="lc:757" class="idref" href="#lc:757"><span class="id" title="binder">lc</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lc:757"><span class="id" title="variable">lc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_dec"><span class="id" title="axiom">isCorrectLPC_dec</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_lookup" class="idref" href="#lreg_lookup"><span class="id" title="lemma">lreg_lookup</span></a> <a id="regs:758" class="idref" href="#regs:758"><span class="id" title="binder">regs</span></a> (<a id="r:759" class="idref" href="#r:759"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:760" class="idref" href="#lw:760"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#regs:758"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:759"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:760"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#regs:758"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:759"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:760"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="method">lookup_fmap</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_neq" class="idref" href="#laddr_neq"><span class="id" title="lemma">laddr_neq</span></a> (<a id="la1:761" class="idref" href="#la1:761"><span class="id" title="binder">la1</span></a> <a id="la2:762" class="idref" href="#la2:762"><span class="id" title="binder">la2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#la2:762"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:761"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.1</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#la2:762"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:761"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la1:761"><span class="id" title="variable">la1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la2:762"><span class="id" title="variable">la2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_neq'" class="idref" href="#laddr_neq'"><span class="id" title="lemma">laddr_neq'</span></a> (<a id="a1:763" class="idref" href="#a1:763"><span class="id" title="binder">a1</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:764" class="idref" href="#v1:764"><span class="id" title="binder">v1</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a2:765" class="idref" href="#a2:765"><span class="id" title="binder">a2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v2:766" class="idref" href="#v2:766"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#a1:763"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:765"><span class="id" title="variable">a2</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v1:764"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:766"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:763"><span class="id" title="variable">a1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:764"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a2:765"><span class="id" title="variable">a2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:766"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="updatePcPermL" class="idref" href="#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> (<a id="lw:767" class="idref" href="#lw:767"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:767"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:767"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="updatePcPermL_spec" class="idref" href="#updatePcPermL_spec"><span class="id" title="lemma">updatePcPermL_spec</span></a> (<a id="lw:769" class="idref" href="#lw:769"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:769"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#updatePcPerm"><span class="id" title="definition">updatePcPerm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:769"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_updatePcPermL" class="idref" href="#is_cur_updatePcPermL"><span class="id" title="lemma">is_cur_updatePcPermL</span></a> (<a id="lw:770" class="idref" href="#lw:770"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="vmap:771" class="idref" href="#vmap:771"><span class="id" title="binder">vmap</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:770"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:771"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:770"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:771"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="z_of_argumentL" class="idref" href="#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> (<a id="lregs:772" class="idref" href="#lregs:772"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:773" class="idref" href="#a:773"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:773"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:772"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_cap" class="idref" href="#lword_get_cap"><span class="id" title="definition">lword_get_cap</span></a> (<a id="lword:775" class="idref" href="#lword:775"><span class="id" title="binder">lword</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword:775"><span class="id" title="variable">lword</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_of_argumentL" class="idref" href="#word_of_argumentL"><span class="id" title="definition">word_of_argumentL</span></a> (<a id="lregs:777" class="idref" href="#lregs:777"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:778" class="idref" href="#a:778"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:778"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lregs:777"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addr_of_argumentL" class="idref" href="#addr_of_argumentL"><span class="id" title="definition">addr_of_argumentL</span></a> <a id="lregs:780" class="idref" href="#lregs:780"><span class="id" title="binder">lregs</span></a> <a id="src:781" class="idref" href="#src:781"><span class="id" title="binder">src</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:780"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:781"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="cap_machine.addr_reg.html#z_to_addr"><span class="id" title="abbreviation">z_to_addr</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="otype_of_argumentL" class="idref" href="#otype_of_argumentL"><span class="id" title="definition">otype_of_argumentL</span></a> <a id="lregs:782" class="idref" href="#lregs:782"><span class="id" title="binder">lregs</span></a> <a id="src:783" class="idref" href="#src:783"><span class="id" title="binder">src</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:782"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:783"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#z_to_otype"><span class="id" title="abbreviation">z_to_otype</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_mutable_rangeL" class="idref" href="#is_mutable_rangeL"><span class="id" title="definition">is_mutable_rangeL</span></a> (<a id="lw:784" class="idref" href="#lw:784"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:784"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> | <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="nonZeroL" class="idref" href="#nonZeroL"><span class="id" title="definition">nonZeroL</span></a> (<a id="lw:787" class="idref" href="#lw:787"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:787"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zbool.html#Zneq_bool"><span class="id" title="definition">Zneq_bool</span></a> <span class="id" title="var">n</span> 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealbL" class="idref" href="#is_sealbL"><span class="id" title="definition">is_sealbL</span></a> (<a id="lw:789" class="idref" href="#lw:789"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:789"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealrL" class="idref" href="#is_sealrL"><span class="id" title="definition">is_sealrL</span></a> (<a id="lw:791" class="idref" href="#lw:791"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:791"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealedL" class="idref" href="#is_sealedL"><span class="id" title="definition">is_sealedL</span></a> (<a id="lw:793" class="idref" href="#lw:793"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:793"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">a</span> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_zL" class="idref" href="#is_zL"><span class="id" title="definition">is_zL</span></a> (<a id="lw:795" class="idref" href="#lw:795"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:795"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealed_with_oL" class="idref" href="#is_sealed_with_oL"><span class="id" title="definition">is_sealed_with_oL</span></a> (<a id="lw:797" class="idref" href="#lw:797"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="o:798" class="idref" href="#o:798"><span class="id" title="binder">o</span></a> : <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:797"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o'</span> <span class="id" title="var">sb</span> =&gt; (<a class="idref" href="cap_machine.logical_mapsto.html#o:798"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.addr_reg.html#fc98ca1de87871caf368dfbeb46e594a"><span class="id" title="notation">=?</span></a> <span class="id" title="var">o'</span>)%<span class="id" title="var">ot</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_ne_reg_ne" class="idref" href="#laddr_ne_reg_ne"><span class="id" title="lemma">laddr_ne_reg_ne</span></a> {<a id="lregs:800" class="idref" href="#lregs:800"><span class="id" title="binder">lregs</span></a> : <span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>} {<a id="r1:801" class="idref" href="#r1:801"><span class="id" title="binder">r1</span></a> <a id="r2:802" class="idref" href="#r2:802"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>}<br/>
&nbsp;&nbsp;{<a id="p0:803" class="idref" href="#p0:803"><span class="id" title="binder">p0</span></a> <a id="b0:804" class="idref" href="#b0:804"><span class="id" title="binder">b0</span></a> <a id="e0:805" class="idref" href="#e0:805"><span class="id" title="binder">e0</span></a> <a id="a0:806" class="idref" href="#a0:806"><span class="id" title="binder">a0</span></a> <a id="v0:807" class="idref" href="#v0:807"><span class="id" title="binder">v0</span></a> <a id="p:808" class="idref" href="#p:808"><span class="id" title="binder">p</span></a> <a id="b:809" class="idref" href="#b:809"><span class="id" title="binder">b</span></a> <a id="e:810" class="idref" href="#e:810"><span class="id" title="binder">e</span></a> <a id="a:811" class="idref" href="#a:811"><span class="id" title="binder">a</span></a> <a id="v:812" class="idref" href="#v:812"><span class="id" title="binder">v</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:800"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r1:801"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p0:803"><span class="id" title="variable">p0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b0:804"><span class="id" title="variable">b0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e0:805"><span class="id" title="variable">e0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:806"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:807"><span class="id" title="variable">v0</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:800"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r2:802"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:808"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:809"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:810"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:811"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:812"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:806"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:807"><span class="id" title="variable">v0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:811"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:812"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r1:801"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r2:802"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span> <span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r2</span>)); <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Instantiation of the program logic 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;CMRΑ&nbsp;for&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="memG" class="idref" href="#memG"><span class="id" title="record">memG</span></a> <a id="97d92384705576d03bfb30f953167a0d" class="idref" href="#97d92384705576d03bfb30f953167a0d"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">MemG</span> {<br/>
&nbsp;&nbsp;<a id="mem_invG" class="idref" href="#mem_invG"><span class="id" title="projection">mem_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#97d92384705576d03bfb30f953167a0d"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="mem_gen_memG" class="idref" href="#mem_gen_memG"><span class="id" title="projection">mem_gen_memG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#97d92384705576d03bfb30f953167a0d"><span class="id" title="variable">Σ</span></a>}.<br/>

<br/>
<span class="comment">(*&nbsp;CMRA&nbsp;for&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="regG" class="idref" href="#regG"><span class="id" title="record">regG</span></a> <a id="503dc5bcecf6ea0f3c71bdf4341097a4" class="idref" href="#503dc5bcecf6ea0f3c71bdf4341097a4"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">RegG</span> {<br/>
&nbsp;&nbsp;<a id="reg_invG" class="idref" href="#reg_invG"><span class="id" title="projection">reg_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#503dc5bcecf6ea0f3c71bdf4341097a4"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="reg_gen_regG" class="idref" href="#reg_gen_regG"><span class="id" title="projection">reg_gen_regG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#503dc5bcecf6ea0f3c71bdf4341097a4"><span class="id" title="variable">Σ</span></a>; }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_interp_logical" class="idref" href="#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> (<a id="598155668765195eec960c853bb2a1d7" class="idref" href="#598155668765195eec960c853bb2a1d7"><span class="id" title="binder">σ</span></a> : <a class="idref" href="cap_machine.cap_lang.html#state"><span class="id" title="definition">cap_lang.state</span></a>) `{<a id="memG0:823" class="idref" href="#memG0:823"><span class="id" title="binder">!</span></a><a id="memG0:823" class="idref" href="#memG0:823"><span class="id" title="binder">memG</span></a> <a id="72a4fd6c669c053b07bed00a0283a911" class="idref" href="#72a4fd6c669c053b07bed00a0283a911"><span class="id" title="binder"><span id="memG0:823" class="id">Σ</span></span></a>, <a id="regG0:824" class="idref" href="#regG0:824"><span class="id" title="binder">!</span></a><a id="regG0:824" class="idref" href="#regG0:824"><span class="id" title="binder">regG</span></a> <a id="regG0:824" class="idref" href="#regG0:824"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.logical_mapsto.html#72a4fd6c669c053b07bed00a0283a911"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="lr:825" class="idref" href="#lr:825"><span class="id" title="binder">lr</span></a> <a id="lm:826" class="idref" href="#lm:826"><span class="id" title="binder">lm</span></a> <a id="vmap:827" class="idref" href="#vmap:827"><span class="id" title="binder">vmap</span></a> <span class="id" title="notation">,</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:825"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">∗</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:826"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#598155668765195eec960c853bb2a1d7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#reg"><span class="id" title="projection">reg</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#598155668765195eec960c853bb2a1d7"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#mem"><span class="id" title="projection">mem</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:825"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:826"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:827"><span class="id" title="variable">vmap</span></a><span class="id" title="notation">⌝</span>.<br/>

<br/>
<span class="comment">(*&nbsp;invariants&nbsp;for&nbsp;memory,&nbsp;and&nbsp;a&nbsp;state&nbsp;interpretation&nbsp;for&nbsp;(mem,reg)&nbsp;*)</span><br/>
<span class="id" title="keyword">Global Instance</span> <a id="memG_irisG" class="idref" href="#memG_irisG"><span class="id" title="instance">memG_irisG</span></a> `{<a id="H:828" class="idref" href="#H:828"><span class="id" title="binder">MachineParameters</span></a>} `{<a id="memG0:830" class="idref" href="#memG0:830"><span class="id" title="binder">!</span></a><a id="memG0:830" class="idref" href="#memG0:830"><span class="id" title="binder">memG</span></a> <a id="994400002188acfcbd5f32ab2b90d1e7" class="idref" href="#994400002188acfcbd5f32ab2b90d1e7"><span class="id" title="binder"><span id="memG0:830" class="id">Σ</span></span></a>, <a id="regG0:831" class="idref" href="#regG0:831"><span class="id" title="binder">!</span></a><a id="regG0:831" class="idref" href="#regG0:831"><span class="id" title="binder">regG</span></a> <a id="regG0:831" class="idref" href="#regG0:831"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">irisGS</span> <a class="idref" href="cap_machine.cap_lang.html#cap_lang"><span class="id" title="definition">cap_lang</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#994400002188acfcbd5f32ab2b90d1e7"><span class="id" title="variable">Σ</span></a> := {<br/>
&nbsp;&nbsp;<span class="id" title="method">iris_invGS</span> := <a class="idref" href="cap_machine.logical_mapsto.html#mem_invG"><span class="id" title="method">mem_invG</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp</span> <a id="ceabf27add809b2ba3d07000c44d6d70" class="idref" href="#ceabf27add809b2ba3d07000c44d6d70"><span class="id" title="binder">σ</span></a> <span class="id" title="var">_</span> <a id="bcf999990c5f402556276037d1d3a36a" class="idref" href="#bcf999990c5f402556276037d1d3a36a"><span class="id" title="binder">κs</span></a> <span class="id" title="var">_</span> := <a class="idref" href="cap_machine.logical_mapsto.html#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#ceabf27add809b2ba3d07000c44d6d70"><span class="id" title="variable">σ</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">fork_post</span> <span class="id" title="var">_</span> := <span class="id" title="notation">True</span>%<span class="id" title="var">I</span>;<br/>
&nbsp;&nbsp;<span class="id" title="method">num_laters_per_step</span> <span class="id" title="var">_</span> := 0;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> := <span class="id" title="lemma">fupd_intro</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
}.<br/>

<br/>
<span class="comment">(*&nbsp;Points&nbsp;to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="b4e695cd58dba538326a0ae97922fc83" class="idref" href="#b4e695cd58dba538326a0ae97922fc83"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "r  ↦ᵣ{ q } lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="db884c99aed36a9ddaddcd7edc424755" class="idref" href="#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Points-to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="1f356528680e66e063184d2852c70086" class="idref" href="#1f356528680e66e063184d2852c70086"><span class="id" title="notation">&quot;</span></a>la ↦ₐ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "la  ↦ₐ{ q }  lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="e389c97555835874498bb08a394266c6" class="idref" href="#e389c97555835874498bb08a394266c6"><span class="id" title="notation">&quot;</span></a>la ↦ₐ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">LAddr_scope</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">LAddr_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">la</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="eqb_laddr" class="idref" href="#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="a1:834" class="idref" href="#a1:834"><span class="id" title="binder">a1</span></a> <a id="a2:835" class="idref" href="#a2:835"><span class="id" title="binder">a2</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb"><span class="id" title="definition">Z.eqb</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:834"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.1</span> <a class="idref" href="cap_machine.logical_mapsto.html#a2:835"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:834"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:835"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="2075081701d58abc4fd86ad4dce27d74" class="idref" href="#2075081701d58abc4fd86ad4dce27d74"><span class="id" title="notation">&quot;</span></a>a1 =? a2" := (<a class="idref" href="cap_machine.logical_mapsto.html#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>) : <span class="id" title="var">LAddr_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="machine_param" class="idref" href="#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:836" class="idref" href="#H:836"><span class="id" title="binder">MachineParameters</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decodeInstrWL" class="idref" href="#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a id="lw:837" class="idref" href="#lw:837"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:837"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrWL" class="idref" href="#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> (<a id="i:838" class="idref" href="#i:838"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> (<a class="idref" href="cap_machine.machine_parameters.html#encodeInstr"><span class="id" title="method">encodeInstr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:838"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="decode_encode_instrLW_inv" class="idref" href="#decode_encode_instrLW_inv"><span class="id" title="lemma">decode_encode_instrLW_inv</span></a> (<a id="i:839" class="idref" href="#i:839"><span class="id" title="binder">i</span></a>: <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:839"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:839"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_parameters.html#decode_encode_instr_inv"><span class="id" title="method">decode_encode_instr_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrsLW" class="idref" href="#encodeInstrsLW"><span class="id" title="definition">encodeInstrsLW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.logical_mapsto.html#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>

<br/>
</div>

<div class="doc">
Miscellaneous about logical regions 
</div>
<div class="code">
<span class="comment">(*&nbsp;TODO&nbsp;move&nbsp;definition&nbsp;to&nbsp;regions.v&nbsp;?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="logical_region_map" class="idref" href="#logical_region_map"><span class="id" title="definition">logical_region_map</span></a><br/>
&nbsp;&nbsp;(<a id="la:840" class="idref" href="#la:840"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:841" class="idref" href="#lws:841"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="v:842" class="idref" href="#v:842"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:840"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:842"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lws:841"><span class="id" title="variable">lws</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_notin" class="idref" href="#logical_region_notin"><span class="id" title="lemma">logical_region_notin</span></a><br/>
&nbsp;&nbsp;(<a id="la:843" class="idref" href="#la:843"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:844" class="idref" href="#a:844"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:845" class="idref" href="#v:845"><span class="id" title="binder">v</span></a> <a id="v':846" class="idref" href="#v':846"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:847" class="idref" href="#lws:847"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:847"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:843"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:844"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:843"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:843"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:847"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:845"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:844"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':846"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_list_to_map_1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontra</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_version_neq" class="idref" href="#logical_region_version_neq"><span class="id" title="lemma">logical_region_version_neq</span></a><br/>
&nbsp;&nbsp;(<a id="la:848" class="idref" href="#la:848"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:849" class="idref" href="#a:849"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:850" class="idref" href="#v:850"><span class="id" title="binder">v</span></a> <a id="v':851" class="idref" href="#v':851"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:852" class="idref" href="#lws:852"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:852"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:848"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:850"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':851"><span class="id" title="variable">v'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:848"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:852"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:850"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:849"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':851"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_list_to_map_1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontra</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_cons" class="idref" href="#logical_region_map_cons"><span class="id" title="lemma">logical_region_map_cons</span></a><br/>
&nbsp;&nbsp;(<a id="la:853" class="idref" href="#la:853"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:854" class="idref" href="#a:854"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:855" class="idref" href="#v:855"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:856" class="idref" href="#lws:856"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="lw:857" class="idref" href="#lw:857"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> ):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:854"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:853"><span class="id" title="variable">la</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lw:857"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:856"><span class="id" title="variable">lws</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:854"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:857"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">logical_region_map</span> <span class="id" title="notation">la</span> <span class="id" title="notation">lws</span> <span class="id" title="notation">v</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_some_inv" class="idref" href="#logical_region_map_some_inv"><span class="id" title="lemma">logical_region_map_some_inv</span></a><br/>
&nbsp;&nbsp;(<a id="a:858" class="idref" href="#a:858"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:859" class="idref" href="#v:859"><span class="id" title="binder">v</span></a> <a id="v':860" class="idref" href="#v':860"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> )<br/>
&nbsp;&nbsp;(<a id="la:861" class="idref" href="#la:861"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:862" class="idref" href="#lws:862"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:861"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:862"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:861"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:861"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:862"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:859"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:858"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':860"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':860"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:859"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:858"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:861"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlen</span> [<span class="id" title="var">lw</span> <span class="id" title="var">Hlw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_zip_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlw</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span>  (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_fmap</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_lookup_versions" class="idref" href="#logical_region_map_lookup_versions"><span class="id" title="lemma">logical_region_map_lookup_versions</span></a><br/>
&nbsp;&nbsp;(<a id="la:863" class="idref" href="#la:863"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':864" class="idref" href="#a':864"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:865" class="idref" href="#v:865"><span class="id" title="binder">v</span></a> <a id="v':866" class="idref" href="#v':866"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:867" class="idref" href="#lws:867"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:863"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':864"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:863"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:867"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:863"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:863"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:867"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:865"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':864"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:865"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:863"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:867"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':866"><span class="id" title="variable">v'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':864"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':866"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lws</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lws</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">lw</span> <span class="id" title="var">lws</span>] ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hlen</span> ; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlen</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span>; <span class="id" title="var">cbn</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> /= ; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> /= ; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_inv" class="idref" href="#logical_region_map_inv"><span class="id" title="lemma">logical_region_map_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:868" class="idref" href="#lmem:868"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:869" class="idref" href="#la:869"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:870" class="idref" href="#v:870"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:869"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:871" class="idref" href="#a:871"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem:868"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:871"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:869"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lws:872" class="idref" href="#lws:872"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:872"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:869"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:869"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:872"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:868"><span class="id" title="variable">lmem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">HnextMap</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_empty_subseteq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HnextMap_a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HnextMap</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HnextMap</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lws</span> &amp; <span class="id" title="var">Hlen</span> &amp; <span class="id" title="var">Hincl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">lwa</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">lws</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_cons"><span class="id" title="axiom">logical_region_map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="logical_range_map" class="idref" href="#logical_range_map"><span class="id" title="definition">logical_range_map</span></a><br/>
&nbsp;&nbsp;(<a id="b:873" class="idref" href="#b:873"><span class="id" title="binder">b</span></a> <a id="e:874" class="idref" href="#e:874"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:875" class="idref" href="#lws:875"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="v:876" class="idref" href="#v:876"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:873"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:874"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:876"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lws:875"><span class="id" title="variable">lws</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_notin" class="idref" href="#logical_range_notin"><span class="id" title="lemma">logical_range_notin</span></a><br/>
&nbsp;&nbsp;(<a id="b:877" class="idref" href="#b:877"><span class="id" title="binder">b</span></a> <a id="e:878" class="idref" href="#e:878"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:879" class="idref" href="#a:879"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:880" class="idref" href="#v:880"><span class="id" title="binder">v</span></a> <a id="v':881" class="idref" href="#v':881"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:882" class="idref" href="#lws:882"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:882"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:877"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:878"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:879"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <span class="id" title="notation">(</span><a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:877"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:878"><span class="id" title="variable">e</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:877"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:878"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:882"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:880"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:879"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':881"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_notin"><span class="id" title="axiom">logical_region_notin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_version_neq" class="idref" href="#logical_range_version_neq"><span class="id" title="lemma">logical_range_version_neq</span></a><br/>
&nbsp;&nbsp;(<a id="b:883" class="idref" href="#b:883"><span class="id" title="binder">b</span></a> <a id="e:884" class="idref" href="#e:884"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:885" class="idref" href="#a:885"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:886" class="idref" href="#v:886"><span class="id" title="binder">v</span></a> <a id="v':887" class="idref" href="#v':887"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:888" class="idref" href="#lws:888"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:888"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:883"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:884"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:886"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':887"><span class="id" title="variable">v'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:883"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:884"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:888"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:886"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:885"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':887"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_version_neq"><span class="id" title="axiom">logical_region_version_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_some_inv" class="idref" href="#logical_range_map_some_inv"><span class="id" title="lemma">logical_range_map_some_inv</span></a><br/>
&nbsp;&nbsp;(<a id="a:889" class="idref" href="#a:889"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:890" class="idref" href="#v:890"><span class="id" title="binder">v</span></a> <a id="v':891" class="idref" href="#v':891"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> )<br/>
&nbsp;&nbsp;(<a id="b:892" class="idref" href="#b:892"><span class="id" title="binder">b</span></a> <a id="e:893" class="idref" href="#e:893"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:894" class="idref" href="#lws:894"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:894"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:892"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:893"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:892"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:893"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:894"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:890"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:889"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':891"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':891"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:890"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:889"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:892"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:893"><span class="id" title="variable">e</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_some_inv"><span class="id" title="axiom">logical_region_map_some_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_lookup_versions" class="idref" href="#logical_range_map_lookup_versions"><span class="id" title="lemma">logical_range_map_lookup_versions</span></a><br/>
&nbsp;&nbsp;(<a id="b:895" class="idref" href="#b:895"><span class="id" title="binder">b</span></a> <a id="e:896" class="idref" href="#e:896"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':897" class="idref" href="#a':897"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:898" class="idref" href="#v:898"><span class="id" title="binder">v</span></a> <a id="v':899" class="idref" href="#v':899"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:900" class="idref" href="#lws:900"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':897"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:895"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:896"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:900"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:895"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:896"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:895"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:896"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:900"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:898"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':897"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:898"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:895"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:896"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:900"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':899"><span class="id" title="variable">v'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':897"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':899"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_lookup_versions"><span class="id" title="axiom">logical_region_map_lookup_versions</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_inv" class="idref" href="#logical_range_map_inv"><span class="id" title="lemma">logical_range_map_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:901" class="idref" href="#lmem:901"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="b:902" class="idref" href="#b:902"><span class="id" title="binder">b</span></a> <a id="e:903" class="idref" href="#e:903"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:904" class="idref" href="#v:904"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:905" class="idref" href="#a:905"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem:901"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:905"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:904"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:902"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:903"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lws:906" class="idref" href="#lws:906"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:906"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:902"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:903"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:902"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:903"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:906"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:904"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:901"><span class="id" title="variable">lmem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_inv"><span class="id" title="axiom">logical_region_map_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
