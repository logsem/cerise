<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.logical_mapsto</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">invariants</span> <span class="id" title="library">gen_heap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span> <span class="id" title="library">ectx_lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="cap_machine.cap_lang.html#"><span class="id" title="library">cap_lang</span></a> <a class="idref" href="cap_machine.iris_extra.html#"><span class="id" title="library">iris_extra</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a> <a class="idref" href="cap_machine.machine_parameters.html#"><span class="id" title="library">machine_parameters</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Version" class="idref" href="#Version"><span class="id" title="definition">Version</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="LAddr" class="idref" href="#LAddr"><span class="id" title="definition">LAddr</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Inductive</span> <a id="LSealable" class="idref" href="#LSealable"><span class="id" title="definition, inductive"><span id="LSealable_rect" class="id"><span id="LSealable_ind" class="id"><span id="LSealable_rec" class="id"><span id="LSealable_sind" class="id">LSealable</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LSCap" class="idref" href="#LSCap"><span class="id" title="constructor">LSCap</span></a>: <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a><br/>
| <a id="LSSealRange" class="idref" href="#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a>: <a class="idref" href="cap_machine.machine_base.html#SealPerms"><span class="id" title="definition">SealPerms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable:1"><span class="id" title="inductive">LSealable</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="LWord" class="idref" href="#LWord"><span class="id" title="definition, inductive"><span id="LWord_rect" class="id"><span id="LWord_ind" class="id"><span id="LWord_rec" class="id"><span id="LWord_sind" class="id">LWord</span></span></span></span></span></a>: <span class="id" title="keyword">Type</span> :=<br/>
| <a id="LWInt" class="idref" href="#LWInt"><span class="id" title="constructor">LWInt</span></a> (<a id="z:5" class="idref" href="#z:5"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
| <a id="LWSealable" class="idref" href="#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a id="sb:6" class="idref" href="#sb:6"><span class="id" title="binder">sb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>)<br/>
| <a id="LWSealed" class="idref" href="#LWSealed"><span class="id" title="constructor">LWSealed</span></a>: <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord:3"><span class="id" title="inductive">LWord</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="LCap" class="idref" href="#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealRange" class="idref" href="#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LSealedCap" class="idref" href="#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="LInt" class="idref" href="#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="lword_inhabited" class="idref" href="#lword_inhabited"><span class="id" title="instance">lword_inhabited</span></a>: <span class="id" title="class">Inhabited</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> 0).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="version_eq_dec" class="idref" href="#version_eq_dec"><span class="id" title="instance">version_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lsealb_eq_dec" class="idref" href="#lsealb_eq_dec"><span class="id" title="instance">lsealb_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a id="lword_eq_dec" class="idref" href="#lword_eq_dec"><span class="id" title="instance">lword_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="lsealable_countable" class="idref" href="#lsealable_countable"><span class="id" title="instance">lsealable_countable</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">enc</span> := <span class="id" title="keyword">fun</span> <a id="sb:7" class="idref" href="#sb:7"><span class="id" title="binder"><span id="sb:9" class="id">sb</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#sb:7"><span class="id" title="variable">sb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">dec</span> := <span class="id" title="keyword">fun</span> <a id="e:11" class="idref" href="#e:11"><span class="id" title="binder"><span id="e:13" class="id">e</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:11"><span class="id" title="variable">e</span></a> <span class="id" title="var">a</span> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="definition">inj_countable'</span> <span class="id" title="var">enc</span> <span class="id" title="var">dec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="lword_countable" class="idref" href="#lword_countable"><span class="id" title="instance">lword_countable</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">enc</span> := <span class="id" title="keyword">fun</span> <a id="w:15" class="idref" href="#w:15"><span class="id" title="binder"><span id="w:17" class="id">w</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:15"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">sb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">x</span> <span class="id" title="var">x0</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">dec</span> := <span class="id" title="keyword">fun</span> <a id="e:19" class="idref" href="#e:19"><span class="id" title="binder"><span id="e:21" class="id">e</span></span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#e:19"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">sb</span>) =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">x</span> <span class="id" title="var">x0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="definition">inj_countable'</span> <span class="id" title="var">enc</span> <span class="id" title="var">dec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="tactic">fresh</span> "z" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="tactic">fresh</span> "p" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">b</span> := <span class="id" title="tactic">fresh</span> "b" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">fresh</span> "e" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="tactic">fresh</span> "a" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">fresh</span> "v" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">o</span> := <span class="id" title="tactic">fresh</span> "o" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sr</span> := <span class="id" title="tactic">fresh</span> "sr" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sd</span> := <span class="id" title="tactic">fresh</span> "sd" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">z</span> | [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>] | <span class="id" title="var">o</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>]].<br/>

<br/>
<span class="comment">(*&nbsp;Getters&nbsp;lword&nbsp;and&nbsp;laddr&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lsealable_get_sealable" class="idref" href="#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> (<a id="lsb:23" class="idref" href="#lsb:23"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Sealable"><span class="id" title="inductive">Sealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:23"><span class="id" title="variable">lsb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSSealRange"><span class="id" title="constructor">LSSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#SSealRange"><span class="id" title="constructor">SSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ob</span> <span class="id" title="var">oe</span> <span class="id" title="var">oa</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_word" class="idref" href="#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a id="lw:25" class="idref" href="#lw:25"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:25"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWInt"><span class="id" title="constructor">LWInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealable"><span class="id" title="constructor">WSealable</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o</span> <span class="id" title="var">lsb</span> =&gt; <a class="idref" href="cap_machine.machine_base.html#WSealed"><span class="id" title="constructor">WSealed</span></a> <span class="id" title="var">o</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lsealable_get_sealable"><span class="id" title="definition">lsealable_get_sealable</span></a> <span class="id" title="var">lsb</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lword_get_version" class="idref" href="#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> (<a id="lw:27" class="idref" href="#lw:27"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:27"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | (<a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_addr" class="idref" href="#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> (<a id="la:29" class="idref" href="#la:29"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:29"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="laddr_get_version" class="idref" href="#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> (<a id="la:30" class="idref" href="#la:30"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) := <a class="idref" href="cap_machine.logical_mapsto.html#la:30"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_inv" class="idref" href="#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a> <a id="la:31" class="idref" href="#la:31"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:31"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="logical_region" class="idref" href="#logical_region"><span class="id" title="definition">logical_region</span></a> ( <a id="region:32" class="idref" href="#region:32"><span class="id" title="binder">region</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> ) (<a id="v:33" class="idref" href="#v:33"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="a:34" class="idref" href="#a:34"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:34"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:33"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#region:32"><span class="id" title="variable">region</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lcap" class="idref" href="#is_lcap"><span class="id" title="definition">is_lcap</span></a> (<a id="w:35" class="idref" href="#w:35"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:35"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_lcap" class="idref" href="#get_lcap"><span class="id" title="definition">get_lcap</span></a> (<a id="w:37" class="idref" href="#w:37"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealable"><span class="id" title="inductive">LSealable</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#w:37"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_is_lcap" class="idref" href="#get_is_lcap"><span class="id" title="lemma">get_is_lcap</span></a> <a id="lw:39" class="idref" href="#lw:39"><span class="id" title="binder">lw</span></a> <a id="lsb:40" class="idref" href="#lsb:40"><span class="id" title="binder">lsb</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:39"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lsb:40"><span class="id" title="variable">lsb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:39"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a>, <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a>. <span class="id" title="tactic">repeat</span> (<span class="id" title="var">case_match</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="get_is_lcap_inv" class="idref" href="#get_is_lcap_inv"><span class="id" title="lemma">get_is_lcap_inv</span></a> (<a id="lw:41" class="idref" href="#lw:41"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:41"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="p:42" class="idref" href="#p:42"><span class="id" title="binder">p</span></a> <a id="b:43" class="idref" href="#b:43"><span class="id" title="binder">b</span></a> <a id="e:44" class="idref" href="#e:44"><span class="id" title="binder">e</span></a> <a id="a:45" class="idref" href="#a:45"><span class="id" title="binder">a</span></a> <a id="v:46" class="idref" href="#v:46"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:41"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:42"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:43"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:44"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:45"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:46"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span> ; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_log_cap" class="idref" href="#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> (<a id="lw:47" class="idref" href="#lw:47"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:47"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_true_iff" class="idref" href="#is_log_cap_is_cap_true_iff"><span class="id" title="lemma">is_log_cap_is_cap_true_iff</span></a> (<a id="lw:49" class="idref" href="#lw:49"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:49"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_log_cap_is_cap_false_iff" class="idref" href="#is_log_cap_is_cap_false_iff"><span class="id" title="lemma">is_log_cap_is_cap_false_iff</span></a> (<a id="lw:50" class="idref" href="#lw:50"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#is_log_cap"><span class="id" title="definition">is_log_cap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:50"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#is_cap"><span class="id" title="definition">is_cap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:50"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VMap" class="idref" href="#VMap"><span class="id" title="definition">VMap</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LReg" class="idref" href="#LReg"><span class="id" title="definition">LReg</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LMem" class="idref" href="#LMem"><span class="id" title="definition">LMem</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="LDFrac" class="idref" href="#LDFrac"><span class="id" title="definition">LDFrac</span></a> := <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <span class="id" title="inductive">iris.algebra.dfrac.dfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lreg_strip" class="idref" href="#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> (<a id="lr:51" class="idref" href="#lr:51"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a> :=<br/>
&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="lw:52" class="idref" href="#lw:52"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:52"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:51"><span class="id" title="variable">lr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_addr" class="idref" href="#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> (<a id="la:53" class="idref" href="#la:53"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="vmap:54" class="idref" href="#vmap:54"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:54"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:53"><span class="id" title="variable">la</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:53"><span class="id" title="variable">la</span></a><span class="id" title="notation">.2</span>. <span class="comment">(*&nbsp;check&nbsp;whether&nbsp;the&nbsp;version&nbsp;of&nbsp;`la`&nbsp;matches&nbsp;in&nbsp;cur_map&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_cur_word" class="idref" href="#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a id="lw:55" class="idref" href="#lw:55"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="vmap:56" class="idref" href="#vmap:56"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:55"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> | <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:58" class="idref" href="#a:58"><span class="id" title="binder"><span id="a:59" class="id">a</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:58"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#vmap:56"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:58"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="is_cur_addr_dec" class="idref" href="#is_cur_addr_dec"><span class="id" title="instance">is_cur_addr_dec</span></a> (<a id="la:60" class="idref" href="#la:60"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="vmap:61" class="idref" href="#vmap:61"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:60"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:61"><span class="id" title="variable">vmap</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">la</span><span class="id" title="notation">.1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_same" class="idref" href="#is_cur_addr_same"><span class="id" title="lemma">is_cur_addr_same</span></a> (<a id="a:62" class="idref" href="#a:62"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:63" class="idref" href="#v:63"><span class="id" title="binder">v</span></a> <a id="v':64" class="idref" href="#v':64"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:65" class="idref" href="#vmap:65"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:62"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:63"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:65"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:62"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':64"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:65"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#v:63"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':64"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hcur_a</span> <span class="id" title="var">Hcur_a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lword_version" class="idref" href="#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> (<a id="lw:66" class="idref" href="#lw:66"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:67" class="idref" href="#p:67"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:68" class="idref" href="#b:68"><span class="id" title="binder">b</span></a> <a id="e:69" class="idref" href="#e:69"><span class="id" title="binder">e</span></a> <a id="a:70" class="idref" href="#a:70"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:71" class="idref" href="#v:71"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:66"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:67"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:68"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:69"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:71"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_lword_inv" class="idref" href="#is_lword_inv"><span class="id" title="lemma">is_lword_inv</span></a> (<a id="lw:72" class="idref" href="#lw:72"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:73" class="idref" href="#p:73"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:74" class="idref" href="#b:74"><span class="id" title="binder">b</span></a> <a id="e:75" class="idref" href="#e:75"><span class="id" title="binder">e</span></a> <a id="a:76" class="idref" href="#a:76"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:77" class="idref" href="#v:77"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:72"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:76"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:77"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="o:78" class="idref" href="#o:78"><span class="id" title="binder">o</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:72"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#o:78"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:76"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:77"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:72"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:76"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:77"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hversion</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hversion</span>; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">eexists</span>]; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cur_lword_cur_addr" class="idref" href="#cur_lword_cur_addr"><span class="id" title="lemma">cur_lword_cur_addr</span></a> <a id="lw:79" class="idref" href="#lw:79"><span class="id" title="binder">lw</span></a> <a id="p:80" class="idref" href="#p:80"><span class="id" title="binder">p</span></a> <a id="b:81" class="idref" href="#b:81"><span class="id" title="binder">b</span></a> <a id="e:82" class="idref" href="#e:82"><span class="id" title="binder">e</span></a> <a id="a:83" class="idref" href="#a:83"><span class="id" title="binder">a</span></a> (<a id="v:84" class="idref" href="#v:84"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="vmap:85" class="idref" href="#vmap:85"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:79"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:80"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:81"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:82"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:83"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:84"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:79"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:85"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:81"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:82"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:83"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:83"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:84"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:85"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlword</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> ; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_lword_inv"><span class="id" title="axiom">is_lword_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlword</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlword</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">o</span> ?]| ?] ; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_true_iff"><span class="id" title="axiom">withinBounds_true_iff</span></a>, <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbounds</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_lw</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_lword_lea" class="idref" href="#is_cur_lword_lea"><span class="id" title="lemma">is_cur_lword_lea</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:86" class="idref" href="#vmap:86"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="p:87" class="idref" href="#p:87"><span class="id" title="binder">p</span></a> <a id="p':88" class="idref" href="#p':88"><span class="id" title="binder">p'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:89" class="idref" href="#b:89"><span class="id" title="binder">b</span></a> <a id="e:90" class="idref" href="#e:90"><span class="id" title="binder">e</span></a> <a id="a:91" class="idref" href="#a:91"><span class="id" title="binder">a</span></a> <a id="a':92" class="idref" href="#a':92"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:94" class="idref" href="#lw:94"><span class="id" title="binder">lw</span></a> <a id="lw':95" class="idref" href="#lw':95"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:94"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:87"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:89"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:93"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':95"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':88"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:89"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':92"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:93"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:94"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:86"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':95"><span class="id" title="variable">lw'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:86"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hlw'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_addr_insert_ne" class="idref" href="#is_cur_addr_insert_ne"><span class="id" title="lemma">is_cur_addr_insert_ne</span></a><br/>
&nbsp;&nbsp;(<a id="vmap:96" class="idref" href="#vmap:96"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:97" class="idref" href="#a:97"><span class="id" title="binder">a</span></a> <a id="a':98" class="idref" href="#a':98"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:99" class="idref" href="#v:99"><span class="id" title="binder">v</span></a> <a id="v':100" class="idref" href="#v':100"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:97"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':98"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:97"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:96"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:97"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:99"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a':98"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v':100"><span class="id" title="variable">v'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_reg_lreg_strip" class="idref" href="#insert_reg_lreg_strip"><span class="id" title="lemma">insert_reg_lreg_strip</span></a> (<a id="lregs:101" class="idref" href="#lregs:101"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:102" class="idref" href="#r:102"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:103" class="idref" href="#lw:103"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:101"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:102"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:103"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:102"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:103"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:101"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_lcap_lreg_strip" class="idref" href="#insert_lcap_lreg_strip"><span class="id" title="lemma">insert_lcap_lreg_strip</span></a><br/>
&nbsp;&nbsp;(<a id="lregs:104" class="idref" href="#lregs:104"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="r:105" class="idref" href="#r:105"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:106" class="idref" href="#lw:106"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:106"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:104"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:105"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:106"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:105"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:106"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">lreg_strip</span> <span class="id" title="notation">lregs</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:104"><span class="id" title="variable">lregs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">fmap_insert</span> <span class="id" title="lemma">insert_id</span> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="next_version_lword" class="idref" href="#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> (<a id="lw:107" class="idref" href="#lw:107"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> ) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:107"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">ot</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:107"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lword_get_word_next_version" class="idref" href="#lword_get_word_next_version"><span class="id" title="lemma">lword_get_word_next_version</span></a> (<a id="lw:109" class="idref" href="#lw:109"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:109"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:109"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_lcap_update_version_lword" class="idref" href="#is_lcap_update_version_lword"><span class="id" title="lemma">is_lcap_update_version_lword</span></a> (<a id="lw:110" class="idref" href="#lw:110"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:110"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_lcap"><span class="id" title="definition">is_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:110"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;state_phys_log_corresponds&nbsp;definition&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
The `reg_phys_log_corresponds` states that, the physical register file `phr` corresponds
    to the the logical register file `lr`, according to the view map `vmap` if:
<ul class="doclist">
<li> the content of the register `phr` is the same as the words in `lr` w/o the version

</li>
<li> the version of the capabilities in `lr` are the same as the version of its addresses
      in the view map `vmap`

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="reg_phys_log_corresponds" class="idref" href="#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<a id="phr:111" class="idref" href="#phr:111"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:112" class="idref" href="#lr:112"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:113" class="idref" href="#vmap:113"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:112"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:111"><span class="id" title="variable">phr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="definition">map_Forall</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <a id="lw:114" class="idref" href="#lw:114"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:114"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:113"><span class="id" title="variable">vmap</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:112"><span class="id" title="variable">lr</span></a>.<br/>

<br/>
</div>

<div class="doc">
for each logical addresses in the logical memory,
<ul class="doclist">
<li> the version is less or equal the current version of the address

</li>
<li> the current version of the address also exists in the logical memory 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mem_current_version" class="idref" href="#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> (<a id="lm:115" class="idref" href="#lm:115"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:116" class="idref" href="#vmap:116"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="la:117" class="idref" href="#la:117"><span class="id" title="binder">la</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="cur_v:118" class="idref" href="#cur_v:118"><span class="id" title="binder">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:117"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:118"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:116"><span class="id" title="variable">vmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:117"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:118"><span class="id" title="variable">cur_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">is_Some</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#lm:115"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:117"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#cur_v:118"><span class="id" title="variable">cur_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;) <a class="idref" href="cap_machine.logical_mapsto.html#lm:115"><span class="id" title="variable">lm</span></a>.<br/>

<br/>
</div>

<div class="doc">
for all entries in the view map,
<ul class="doclist">
<li> it exists is a logical word `lw` in the logical memory `lm`
      ( i.e. dom(vmap) ⊆ dom(lm) )

</li>
<li> the logical word `lw` corresponds to the actual word in the physical memory `phm`
      for the same address

</li>
<li> the logical word `lw` is the current view of the word 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mem_vmap_root" class="idref" href="#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> (<a id="phm:119" class="idref" href="#phm:119"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:120" class="idref" href="#lm:120"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:121" class="idref" href="#vmap:121"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:122" class="idref" href="#a:122"><span class="id" title="binder">a</span></a> <a id="v:123" class="idref" href="#v:123"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lw:124" class="idref" href="#lw:124"><span class="id" title="binder">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:120"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:122"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:123"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:124"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:119"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:122"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:124"><span class="id" title="variable">lw</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:124"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:121"><span class="id" title="variable">vmap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:121"><span class="id" title="variable">vmap</span></a>. <span class="comment">(*&nbsp;subset&nbsp;in&nbsp;other&nbsp;direction,&nbsp;and&nbsp;every&nbsp;current&nbsp;address&nbsp;is&nbsp;gc&nbsp;root&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mem_phys_log_corresponds" class="idref" href="#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> (<a id="phm:125" class="idref" href="#phm:125"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:126" class="idref" href="#lm:126"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:127" class="idref" href="#vmap:127"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#mem_current_version"><span class="id" title="definition">mem_current_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:126"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:127"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#mem_vmap_root"><span class="id" title="definition">mem_vmap_root</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:125"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:126"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:127"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_phys_log_corresponds" class="idref" href="#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phr:128" class="idref" href="#phr:128"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:129" class="idref" href="#phm:129"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:130" class="idref" href="#lr:130"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:131" class="idref" href="#lm:131"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:132" class="idref" href="#vmap:132"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>):=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:128"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:130"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:132"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:129"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:131"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:132"><span class="id" title="variable">vmap</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;lreg_corresponds&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_read_iscur" class="idref" href="#lreg_corresponds_read_iscur"><span class="id" title="lemma">lreg_corresponds_read_iscur</span></a><br/>
&nbsp;&nbsp;(<a id="phr:133" class="idref" href="#phr:133"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:134" class="idref" href="#lr:134"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:135" class="idref" href="#vmap:135"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:136" class="idref" href="#r:136"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:137" class="idref" href="#lw:137"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:133"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:134"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:135"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:134"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:136"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:137"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:137"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:135"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_get_word" class="idref" href="#lreg_corresponds_get_word"><span class="id" title="lemma">lreg_corresponds_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:138" class="idref" href="#phr:138"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:139" class="idref" href="#lr:139"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:140" class="idref" href="#vmap:140"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:141" class="idref" href="#r:141"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:142" class="idref" href="#lw:142"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:138"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:139"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:140"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:139"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:141"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:142"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:138"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:141"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:142"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [&lt;- <span class="id" title="var">Hcurreg</span>] <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_fmap_Some</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_insert_respects" class="idref" href="#lreg_corresponds_insert_respects"><span class="id" title="lemma">lreg_corresponds_insert_respects</span></a><br/>
&nbsp;&nbsp;(<a id="phr:143" class="idref" href="#phr:143"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:144" class="idref" href="#lr:144"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:145" class="idref" href="#vmap:145"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="r:146" class="idref" href="#r:146"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:147" class="idref" href="#lw:147"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:143"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:144"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:145"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:147"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:145"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:146"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:147"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phr</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:146"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:147"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:145"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fmap_insert</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_delete" class="idref" href="#lreg_corresponds_delete"><span class="id" title="lemma">lreg_corresponds_delete</span></a><br/>
&nbsp;&nbsp;(<a id="phr:148" class="idref" href="#phr:148"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:149" class="idref" href="#lr:149"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:150" class="idref" href="#vmap:150"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:151" class="idref" href="#src:151"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:148"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:149"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:150"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:151"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:148"><span class="id" title="variable">phr</span></a>) (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:151"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:149"><span class="id" title="variable">lr</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:150"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word_1" class="idref" href="#lreg_corresponds_cap_cur_word_1"><span class="id" title="lemma">lreg_corresponds_cap_cur_word_1</span></a><br/>
&nbsp;&nbsp;(<a id="phr:152" class="idref" href="#phr:152"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:153" class="idref" href="#lr:153"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:154" class="idref" href="#vmap:154"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:155" class="idref" href="#lw:155"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:156" class="idref" href="#p:156"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:157" class="idref" href="#b:157"><span class="id" title="binder">b</span></a> <a id="e:158" class="idref" href="#e:158"><span class="id" title="binder">e</span></a> <a id="a:159" class="idref" href="#a:159"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:160" class="idref" href="#la:160"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:161" class="idref" href="#r:161"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:152"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:153"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:154"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:155"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:156"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:157"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:158"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:159"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:160"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:159"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:157"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:158"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:159"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:153"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:161"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:155"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:155"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:160"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:160"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:154"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlcap</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word_2" class="idref" href="#lreg_corresponds_cap_cur_word_2"><span class="id" title="lemma">lreg_corresponds_cap_cur_word_2</span></a><br/>
&nbsp;&nbsp;(<a id="phr:162" class="idref" href="#phr:162"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:163" class="idref" href="#lr:163"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:164" class="idref" href="#vmap:164"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:165" class="idref" href="#lw:165"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:166" class="idref" href="#p:166"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:167" class="idref" href="#b:167"><span class="id" title="binder">b</span></a> <a id="e:168" class="idref" href="#e:168"><span class="id" title="binder">e</span></a> <a id="a:169" class="idref" href="#a:169"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:170" class="idref" href="#la:170"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:171" class="idref" href="#r:171"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:162"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:163"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:164"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:165"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:166"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:167"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:168"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:169"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:170"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:169"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:167"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:168"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:169"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:163"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:171"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:165"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:170"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:164"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:165"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:170"><span class="id" title="variable">la</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hlr</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hinbounds</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_regs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_cur_word" class="idref" href="#lreg_corresponds_cap_cur_word"><span class="id" title="lemma">lreg_corresponds_cap_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:172" class="idref" href="#phr:172"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:173" class="idref" href="#lr:173"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:174" class="idref" href="#vmap:174"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:175" class="idref" href="#lw:175"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:176" class="idref" href="#p:176"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:177" class="idref" href="#b:177"><span class="id" title="binder">b</span></a> <a id="e:178" class="idref" href="#e:178"><span class="id" title="binder">e</span></a> <a id="a:179" class="idref" href="#a:179"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:180" class="idref" href="#la:180"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:181" class="idref" href="#r:181"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:172"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:173"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:174"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:175"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:176"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:177"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:178"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:179"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:180"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:179"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:177"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:178"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:179"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:173"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:181"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:175"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:175"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:180"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:180"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:174"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HInvReg</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hinbounds</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word_1"><span class="id" title="axiom">lreg_corresponds_cap_cur_word_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word_2"><span class="id" title="axiom">lreg_corresponds_cap_cur_word_2</span></a> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_correct_PC" class="idref" href="#lreg_corresponds_correct_PC"><span class="id" title="lemma">lreg_corresponds_correct_PC</span></a><br/>
&nbsp;&nbsp;(<a id="phr:182" class="idref" href="#phr:182"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:183" class="idref" href="#lr:183"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:184" class="idref" href="#vmap:184"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:185" class="idref" href="#lw:185"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:186" class="idref" href="#p:186"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:187" class="idref" href="#b:187"><span class="id" title="binder">b</span></a> <a id="e:188" class="idref" href="#e:188"><span class="id" title="binder">e</span></a> <a id="a:189" class="idref" href="#a:189"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:190" class="idref" href="#la:190"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:191" class="idref" href="#r:191"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:182"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:183"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:184"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:185"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:186"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:187"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:188"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:189"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:190"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:189"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:186"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:187"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:188"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:189"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:183"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:191"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:185"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:185"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:190"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:190"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:184"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HinvReg</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_withinBounds"><span class="id" title="axiom">isCorrectPC_withinBounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvpc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word"><span class="id" title="axiom">lreg_corresponds_cap_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_cap_is_cur" class="idref" href="#lreg_corresponds_cap_is_cur"><span class="id" title="lemma">lreg_corresponds_cap_is_cur</span></a><br/>
&nbsp;&nbsp;(<a id="phr:192" class="idref" href="#phr:192"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:193" class="idref" href="#lr:193"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:194" class="idref" href="#vmap:194"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:195" class="idref" href="#src:195"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:196" class="idref" href="#p:196"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>)  (<a id="b:197" class="idref" href="#b:197"><span class="id" title="binder">b</span></a> <a id="e:198" class="idref" href="#e:198"><span class="id" title="binder">e</span></a> <a id="a:199" class="idref" href="#a:199"><span class="id" title="binder">a</span></a> <a id="a':200" class="idref" href="#a':200"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:201" class="idref" href="#v:201"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:192"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:193"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:194"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:193"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:195"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:196"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:198"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:199"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:201"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':200"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:198"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':200"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:201"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:194"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_read_iscur"><span class="id" title="axiom">lreg_corresponds_read_iscur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw'</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq_2"><span class="id" title="axiom">withinBounds_in_seq_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;lmem_corresponds&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_read_iscur" class="idref" href="#lmem_corresponds_read_iscur"><span class="id" title="lemma">lmem_corresponds_read_iscur</span></a><br/>
&nbsp;&nbsp;(<a id="phm:202" class="idref" href="#phm:202"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:203" class="idref" href="#lm:203"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:204" class="idref" href="#vmap:204"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:205" class="idref" href="#la:205"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:206" class="idref" href="#lw:206"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:202"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:203"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:204"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:205"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:204"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:203"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:205"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:206"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:206"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:204"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hphm</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw'</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_insert_respects" class="idref" href="#lmem_corresponds_insert_respects"><span class="id" title="lemma">lmem_corresponds_insert_respects</span></a><br/>
&nbsp;&nbsp;(<a id="phm:207" class="idref" href="#phm:207"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:208" class="idref" href="#lm:208"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:209" class="idref" href="#vmap:209"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:210" class="idref" href="#la:210"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:211" class="idref" href="#lw:211"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:207"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:208"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:209"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:210"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:209"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:211"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:209"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:210"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:211"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">phm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#la:210"><span class="id" title="variable">la</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:211"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:209"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hla</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <span class="id" title="var">la</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#laddr_inv"><span class="id" title="lemma">laddr_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">H1</span> &amp; <span class="id" title="var">H2</span> &amp; <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v</span>. <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">la</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <span class="id" title="var">la'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cur_v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hp</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hp'</span> := <span class="id" title="var">Hp</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hneq</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> ;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">intro</span>; <span class="id" title="var">simplify_pair_eq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_get_word" class="idref" href="#lmem_corresponds_get_word"><span class="id" title="lemma">lmem_corresponds_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phm:212" class="idref" href="#phm:212"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:213" class="idref" href="#lm:213"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:214" class="idref" href="#vmap:214"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:215" class="idref" href="#a:215"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:216" class="idref" href="#v:216"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:217" class="idref" href="#lw:217"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:212"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:213"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:214"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:215"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:216"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:214"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:213"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:215"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:216"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:217"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:212"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:215"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:217"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hcur</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lmem_corresponds_current_word" class="idref" href="#lmem_corresponds_current_word"><span class="id" title="lemma">lmem_corresponds_current_word</span></a><br/>
&nbsp;&nbsp;(<a id="phm:218" class="idref" href="#phm:218"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:219" class="idref" href="#lm:219"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:220" class="idref" href="#vmap:220"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:221" class="idref" href="#a:221"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:222" class="idref" href="#v:222"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:223" class="idref" href="#lw:223"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:218"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:219"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:219"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:221"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:222"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:223"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:221"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:222"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:223"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:220"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>] <span class="id" title="var">Hlm</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_addr</span> &amp; <span class="id" title="var">Hle_cur</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>, <span class="id" title="var">Hcur_addr</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlm'</span> &amp; <span class="id" title="var">Hpm'</span> &amp; <span class="id" title="var">Hcurword</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlm'</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemmas&nbsp;about&nbsp;state_corresponds&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_reg_get_word" class="idref" href="#state_corresponds_reg_get_word"><span class="id" title="lemma">state_corresponds_reg_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:224" class="idref" href="#phr:224"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:225" class="idref" href="#phm:225"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:226" class="idref" href="#lr:226"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:227" class="idref" href="#lm:227"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:228" class="idref" href="#vmap:228"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:229" class="idref" href="#r:229"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:230" class="idref" href="#lw:230"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:224"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:225"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:226"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:227"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:228"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:226"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:229"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:230"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phr:224"><span class="id" title="variable">phr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:229"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:230"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hreg</span> <span class="id" title="var">_</span>] ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_get_word"><span class="id" title="axiom">lreg_corresponds_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_mem_get_word" class="idref" href="#state_corresponds_mem_get_word"><span class="id" title="lemma">state_corresponds_mem_get_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:231" class="idref" href="#phr:231"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:232" class="idref" href="#phm:232"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:233" class="idref" href="#lr:233"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:234" class="idref" href="#lm:234"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:235" class="idref" href="#vmap:235"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:236" class="idref" href="#a:236"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:237" class="idref" href="#v:237"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:238" class="idref" href="#lw:238"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:231"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:232"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:233"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:234"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:235"><span class="id" title="variable">vmap</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:236"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:237"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:235"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:234"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:236"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:237"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:238"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:232"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:236"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:238"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmem</span>] ? ? ; <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_corresponds_get_word"><span class="id" title="axiom">lmem_corresponds_get_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_cap_cur_word" class="idref" href="#state_corresponds_cap_cur_word"><span class="id" title="lemma">state_corresponds_cap_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="phr:239" class="idref" href="#phr:239"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:240" class="idref" href="#phm:240"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:241" class="idref" href="#lr:241"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:242" class="idref" href="#lm:242"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:243" class="idref" href="#vmap:243"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:244" class="idref" href="#lw:244"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:245" class="idref" href="#p:245"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:246" class="idref" href="#b:246"><span class="id" title="binder">b</span></a> <a id="e:247" class="idref" href="#e:247"><span class="id" title="binder">e</span></a> <a id="a:248" class="idref" href="#a:248"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:249" class="idref" href="#la:249"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="r:250" class="idref" href="#r:250"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:239"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:240"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:241"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:242"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:243"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:244"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:245"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:246"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:247"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:248"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_addr"><span class="id" title="definition">laddr_get_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:249"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:248"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#withinBounds"><span class="id" title="definition">withinBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:246"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:247"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:248"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:241"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:250"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:244"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_version"><span class="id" title="definition">lword_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:244"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#laddr_get_version"><span class="id" title="definition">laddr_get_version</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:249"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:249"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:243"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span>] <span class="id" title="var">Hlw</span> <span class="id" title="var">Hla</span> <span class="id" title="var">Hbounds</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_cap_cur_word"><span class="id" title="axiom">lreg_corresponds_cap_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_mem_correct_PC" class="idref" href="#state_corresponds_mem_correct_PC"><span class="id" title="lemma">state_corresponds_mem_correct_PC</span></a><br/>
&nbsp;&nbsp;(<a id="phr:251" class="idref" href="#phr:251"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:252" class="idref" href="#phm:252"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:253" class="idref" href="#lr:253"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:254" class="idref" href="#lm:254"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:255" class="idref" href="#vmap:255"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:256" class="idref" href="#p:256"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:257" class="idref" href="#b:257"><span class="id" title="binder">b</span></a> <a id="e:258" class="idref" href="#e:258"><span class="id" title="binder">e</span></a> <a id="a:259" class="idref" href="#a:259"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:260" class="idref" href="#v:260"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="r:261" class="idref" href="#r:261"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:262" class="idref" href="#lw:262"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:251"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:252"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:253"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:254"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:255"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:256"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:257"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:258"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:259"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:253"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:261"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:256"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:257"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:258"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:259"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:260"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:254"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:259"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:260"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:262"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#phm:252"><span class="id" title="variable">phm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:259"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:262"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">HLinv</span> <span class="id" title="var">Hvpc</span> <span class="id" title="var">Hlr</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_mem_get_word"><span class="id" title="axiom">state_corresponds_mem_get_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">HinvReg</span> <span class="id" title="var">_</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_correct_PC"><span class="id" title="axiom">lreg_corresponds_correct_PC</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_cap_all_current" class="idref" href="#state_corresponds_cap_all_current"><span class="id" title="lemma">state_corresponds_cap_all_current</span></a><br/>
&nbsp;&nbsp;(<a id="phr:263" class="idref" href="#phr:263"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:264" class="idref" href="#phm:264"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:265" class="idref" href="#lm:265"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:266" class="idref" href="#lr:266"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:267" class="idref" href="#vmap:267"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:268" class="idref" href="#src:268"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:269" class="idref" href="#lwsrc:269"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:270" class="idref" href="#p:270"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:271" class="idref" href="#b:271"><span class="id" title="binder">b</span></a> <a id="e:272" class="idref" href="#e:272"><span class="id" title="binder">e</span></a> <a id="a:273" class="idref" href="#a:273"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:274" class="idref" href="#v:274"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:263"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:264"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:266"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:265"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:267"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:269"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:270"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:271"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:272"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:273"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:274"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:266"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:268"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:269"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:275" class="idref" href="#a0:275"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:267"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:275"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:274"><span class="id" title="variable">v</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:271"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:272"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [ [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget_lw</span> <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="var">lwsrc</span> <span class="id" title="var">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_last_version_lword_region" class="idref" href="#state_corresponds_last_version_lword_region"><span class="id" title="lemma">state_corresponds_last_version_lword_region</span></a><br/>
&nbsp;&nbsp;(<a id="phr:276" class="idref" href="#phr:276"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:277" class="idref" href="#phm:277"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:278" class="idref" href="#lm:278"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:279" class="idref" href="#lr:279"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:280" class="idref" href="#vmap:280"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:281" class="idref" href="#p:281"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:282" class="idref" href="#b:282"><span class="id" title="binder">b</span></a> <a id="e:283" class="idref" href="#e:283"><span class="id" title="binder">e</span></a> <a id="a:284" class="idref" href="#a:284"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:285" class="idref" href="#v:285"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="src:286" class="idref" href="#src:286"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:287" class="idref" href="#lwsrc:287"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:276"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:277"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:279"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:278"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:280"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:287"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:281"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:282"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:283"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:284"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:285"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:279"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:286"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:287"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:288" class="idref" href="#a0:288"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:278"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:288"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:285"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:282"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:283"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [ [<span class="id" title="var">_</span> <span class="id" title="var">Hcur_regs</span>] <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget</span> <span class="id" title="var">Hlr_src</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <span class="id" title="var">lwsrc</span> <span class="id" title="var">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_regs</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha0_inbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="abbreviation">vmap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur_a0</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hv'</span> ; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmem_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hroot</span> <span class="id" title="var">Hcur</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">cur</span> &amp; <span class="id" title="var">Hsome</span> &amp; <span class="id" title="var">Hmaxv</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw</span> &amp; <span class="id" title="var">Hlm</span> &amp; <span class="id" title="var">_</span>) ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_same"><span class="id" title="axiom">is_cur_addr_same</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_access_lword_region" class="idref" href="#state_corresponds_access_lword_region"><span class="id" title="lemma">state_corresponds_access_lword_region</span></a><br/>
&nbsp;&nbsp;(<a id="phr:289" class="idref" href="#phr:289"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:290" class="idref" href="#phm:290"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:291" class="idref" href="#lr:291"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:292" class="idref" href="#lm:292"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:293" class="idref" href="#vmap:293"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:294" class="idref" href="#src:294"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:295" class="idref" href="#lwsrc:295"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="p:296" class="idref" href="#p:296"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:297" class="idref" href="#b:297"><span class="id" title="binder">b</span></a> <a id="e:298" class="idref" href="#e:298"><span class="id" title="binder">e</span></a> <a id="a:299" class="idref" href="#a:299"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:300" class="idref" href="#v:300"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:289"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:290"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:291"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:292"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:293"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:295"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:296"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:297"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:298"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:299"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:300"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:291"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:294"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:295"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':301" class="idref" href="#a':301"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:292"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':301"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:300"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:297"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:298"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [ [<span class="id" title="var">_</span> ?] [? ?] ] <span class="id" title="var">Hget</span> <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlsrc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lwsrc</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlsrc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery for word access and unique_in_machine 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addr" class="idref" href="#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> (<a id="a:302" class="idref" href="#a:302"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="w:303" class="idref" href="#w:303"><span class="id" title="binder">w</span></a> : <a class="idref" href="cap_machine.machine_base.html#Word"><span class="id" title="inductive">Word</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#w:303"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#SCap"><span class="id" title="constructor">SCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span>) =&gt; (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:302"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">e</span>)%<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_access_addrL" class="idref" href="#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> (<a id="a:304" class="idref" href="#a:304"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lw:305" class="idref" href="#lw:305"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:304"><span class="id" title="variable">a</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:305"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_word" class="idref" href="#update_cur_word"><span class="id" title="lemma">update_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="lm:306" class="idref" href="#lm:306"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:307" class="idref" href="#vmap:307"><span class="id" title="binder">vmap</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:308" class="idref" href="#a:308"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:309" class="idref" href="#v:309"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:310" class="idref" href="#lw:310"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:308"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:310"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:310"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:307"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:310"><span class="id" title="variable">lw</span></a> ( <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#a:308"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#v:309"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span> ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnaccess</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>; <span class="id" title="var">solve_addr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcur</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;version&nbsp;number&nbsp;of&nbsp;a&nbsp;memory&nbsp;region&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;all&nbsp;the&nbsp;content&nbsp;of&nbsp;a&nbsp;logical&nbsp;memory&nbsp;`lm`,<br/>
&nbsp;&nbsp;&nbsp;no&nbsp;current&nbsp;logical&nbsp;address&nbsp;has&nbsp;a&nbsp;lword&nbsp;that&nbsp;can&nbsp;access&nbsp;the&nbsp;address&nbsp;`a`.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Put&nbsp;another&nbsp;way,&nbsp;the&nbsp;"current&nbsp;view"&nbsp;of&nbsp;the&nbsp;memory&nbsp;cannot&nbsp;access&nbsp;`a`.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lmem_not_access_addrL" class="idref" href="#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> (<a id="lm:311" class="idref" href="#lm:311"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:312" class="idref" href="#vmap:312"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:313" class="idref" href="#a:313"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:314" class="idref" href="#la:314"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lw:315" class="idref" href="#lw:315"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:314"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:312"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:313"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:315"><span class="id" title="variable">lw</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;) <a class="idref" href="cap_machine.logical_mapsto.html#lm:311"><span class="id" title="variable">lm</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;describes&nbsp;whether&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;is&nbsp;not&nbsp;reachable&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="lmem_not_access_wordL" class="idref" href="#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> (<a id="lm:316" class="idref" href="#lm:316"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:317" class="idref" href="#vmap:317"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:318" class="idref" href="#lw:318"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:318"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:319" class="idref" href="#a:319"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:316"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:317"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:319"><span class="id" title="variable">a</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Sweep in logical memory 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="overlap_wordL" class="idref" href="#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a id="lw1:320" class="idref" href="#lw1:320"><span class="id" title="binder">lw1</span></a> <a id="lw2:321" class="idref" href="#lw2:321"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:320"><span class="id" title="variable">lw1</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:321"><span class="id" title="variable">lw2</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="overlap_wordL_dec" class="idref" href="#overlap_wordL_dec"><span class="id" title="instance">overlap_wordL_dec</span></a> (<a id="lw1:322" class="idref" href="#lw1:322"><span class="id" title="binder">lw1</span></a> <a id="lw2:323" class="idref" href="#lw2:323"><span class="id" title="binder">lw2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:322"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:323"><span class="id" title="variable">lw2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_decision</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_word_leaL" class="idref" href="#not_overlap_word_leaL"><span class="id" title="lemma">not_overlap_word_leaL</span></a><br/>
&nbsp;&nbsp;(<a id="p1:324" class="idref" href="#p1:324"><span class="id" title="binder">p1</span></a> <a id="p2:325" class="idref" href="#p2:325"><span class="id" title="binder">p2</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b1:326" class="idref" href="#b1:326"><span class="id" title="binder">b1</span></a> <a id="b2:327" class="idref" href="#b2:327"><span class="id" title="binder">b2</span></a> <a id="e1:328" class="idref" href="#e1:328"><span class="id" title="binder">e1</span></a> <a id="e2:329" class="idref" href="#e2:329"><span class="id" title="binder">e2</span></a> <a id="a1:330" class="idref" href="#a1:330"><span class="id" title="binder">a1</span></a> <a id="a1':331" class="idref" href="#a1':331"><span class="id" title="binder">a1'</span></a> <a id="a2:332" class="idref" href="#a2:332"><span class="id" title="binder">a2</span></a> <a id="a2':333" class="idref" href="#a2':333"><span class="id" title="binder">a2'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:334" class="idref" href="#v1:334"><span class="id" title="binder">v1</span></a> <a id="v2:335" class="idref" href="#v2:335"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw1:336" class="idref" href="#lw1:336"><span class="id" title="binder">lw1</span></a> <a id="lw1':337" class="idref" href="#lw1':337"><span class="id" title="binder">lw1'</span></a> <a id="lw2:338" class="idref" href="#lw2:338"><span class="id" title="binder">lw2</span></a> <a id="lw2':339" class="idref" href="#lw2':339"><span class="id" title="binder">lw2'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:336"><span class="id" title="variable">lw1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:324"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:326"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:328"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:330"><span class="id" title="variable">a1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:334"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':337"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p1:324"><span class="id" title="variable">p1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b1:326"><span class="id" title="variable">b1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e1:328"><span class="id" title="variable">e1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1':331"><span class="id" title="variable">a1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:334"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:338"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:325"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:327"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:329"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:332"><span class="id" title="variable">a2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:335"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':339"><span class="id" title="variable">lw2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p2:325"><span class="id" title="variable">p2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b2:327"><span class="id" title="variable">b2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e2:329"><span class="id" title="variable">e2</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2':333"><span class="id" title="variable">a2'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:335"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1:336"><span class="id" title="variable">lw1</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2:338"><span class="id" title="variable">lw2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw1':337"><span class="id" title="variable">lw1'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw2':339"><span class="id" title="variable">lw2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hlw1</span> <span class="id" title="var">Hlw1'</span> <span class="id" title="var">Hlw2</span> <span class="id" title="var">Hlw2'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Hoverlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw1'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw2'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_overlap_wordL_seq_between" class="idref" href="#not_overlap_wordL_seq_between"><span class="id" title="lemma">not_overlap_wordL_seq_between</span></a><br/>
&nbsp;&nbsp;(<a id="p:340" class="idref" href="#p:340"><span class="id" title="binder">p</span></a> <a id="p':341" class="idref" href="#p':341"><span class="id" title="binder">p'</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:342" class="idref" href="#b:342"><span class="id" title="binder">b</span></a> <a id="b':343" class="idref" href="#b':343"><span class="id" title="binder">b'</span></a> <a id="e:344" class="idref" href="#e:344"><span class="id" title="binder">e</span></a> <a id="e':345" class="idref" href="#e':345"><span class="id" title="binder">e'</span></a> <a id="a:346" class="idref" href="#a:346"><span class="id" title="binder">a</span></a> <a id="a':347" class="idref" href="#a':347"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:348" class="idref" href="#v:348"><span class="id" title="binder">v</span></a> <a id="v':349" class="idref" href="#v':349"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:350" class="idref" href="#lw:350"><span class="id" title="binder">lw</span></a> <a id="lw':351" class="idref" href="#lw':351"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:350"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:340"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:342"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:344"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:346"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:348"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':351"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':341"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':343"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':345"><span class="id" title="variable">e'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':347"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':349"><span class="id" title="variable">v'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:350"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':351"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a0:352" class="idref" href="#a0:352"><span class="id" title="binder">a0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:352"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b':343"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':345"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:352"><span class="id" title="variable">a0</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:342"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:344"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget_lw</span> <span class="id" title="var">Hget_lw'</span> <span class="id" title="var">Hnot_overlap</span> <span class="id" title="var">a0</span> <span class="id" title="var">Ha_in</span> <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnot_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /= /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_in</span>, <span class="id" title="var">Ha_in'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b'</span>)%<span class="id" title="var">a</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hb</span>; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_registersL" class="idref" href="#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> (<a id="lregs:353" class="idref" href="#lregs:353"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:354" class="idref" href="#src:354"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:355" class="idref" href="#lwsrc:355"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="r:356" class="idref" href="#r:356"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwr:357" class="idref" href="#lwr:357"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.logical_mapsto.html#r:356"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:354"><span class="id" title="variable">src</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">True</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:355"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:357"><span class="id" title="variable">lwr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:353"><span class="id" title="variable">lregs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_registersL_dec" class="idref" href="#unique_in_registersL_dec"><span class="id" title="instance">unique_in_registersL_dec</span></a> (<a id="lregs:358" class="idref" href="#lregs:358"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:359" class="idref" href="#src:359"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:360" class="idref" href="#lwsrc:360"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:358"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:359"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:360"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">rw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Returns&nbsp;<span class="inlinecode"><span class="id" title="var">true</span></span>&nbsp;if&nbsp;<span class="inlinecode"><span class="id" title="var">r</span></span>&nbsp;is&nbsp;unique.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_memoryL" class="idref" href="#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> (<a id="lmem:361" class="idref" href="#lmem:361"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:362" class="idref" href="#vmap:362"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lwsrc:363" class="idref" href="#lwsrc:363"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">map_Forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="la:364" class="idref" href="#la:364"><span class="id" title="binder">la</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<a id="lwa:365" class="idref" href="#lwa:365"><span class="id" title="binder">lwa</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:364"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:362"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:363"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:365"><span class="id" title="variable">lwa</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:361"><span class="id" title="variable">lmem</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="unique_in_memoryL_dec" class="idref" href="#unique_in_memoryL_dec"><span class="id" title="instance">unique_in_memoryL_dec</span></a> (<a id="lmem:366" class="idref" href="#lmem:366"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:367" class="idref" href="#vmap:367"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lwsrc:368" class="idref" href="#lwsrc:368"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:366"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:367"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:368"><span class="id" title="variable">lwsrc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">map_Forall_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">la</span> <span class="id" title="var">lwa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">impl_dec</span>; <span class="id" title="var">solve_decision</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="unique_in_machineL" class="idref" href="#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lregs:369" class="idref" href="#lregs:369"><span class="id" title="binder">lregs</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:370" class="idref" href="#lmem:370"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:371" class="idref" href="#vmap:371"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="src:372" class="idref" href="#src:372"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:373" class="idref" href="#lwsrc:373"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:369"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:372"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:373"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:369"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:372"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:373"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:370"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:371"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:373"><span class="id" title="variable">lwsrc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_registersL_mono" class="idref" href="#unique_in_registersL_mono"><span class="id" title="lemma">unique_in_registersL_mono</span></a><br/>
&nbsp;&nbsp;(<a id="lregs:374" class="idref" href="#lregs:374"><span class="id" title="binder">lregs</span></a> <a id="lr:375" class="idref" href="#lr:375"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="src:376" class="idref" href="#src:376"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:377" class="idref" href="#lwsrc:377"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:374"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:375"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:375"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:376"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:377"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:374"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:376"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:377"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hlregs_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hr</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="lemma">decide_False</span> // <span class="id" title="tactic">in</span> <span class="id" title="var">Hlregs_r</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_insert_reg" class="idref" href="#unique_in_machineL_insert_reg"><span class="id" title="lemma">unique_in_machineL_insert_reg</span></a><br/>
&nbsp;&nbsp;(<a id="lr:378" class="idref" href="#lr:378"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:379" class="idref" href="#lm:379"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>)  (<a id="vmap:380" class="idref" href="#vmap:380"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:381" class="idref" href="#src:381"><span class="id" title="binder">src</span></a> <a id="r:382" class="idref" href="#r:382"><span class="id" title="binder">r</span></a>: <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:383" class="idref" href="#lwsrc:383"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:384" class="idref" href="#lwr:384"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:382"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:381"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:378"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:381"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:383"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:383"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:384"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:378"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:379"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:380"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:381"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:383"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#r:382"><span class="id" title="variable">r</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:384"><span class="id" title="variable">lwr</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#lm:379"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:380"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:381"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:383"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_src</span>] <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machineL_not_overlap_word" class="idref" href="#unique_in_machineL_not_overlap_word"><span class="id" title="lemma">unique_in_machineL_not_overlap_word</span></a><br/>
&nbsp;&nbsp;(<a id="lr:385" class="idref" href="#lr:385"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:386" class="idref" href="#lm:386"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:387" class="idref" href="#vmap:387"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:388" class="idref" href="#src:388"><span class="id" title="binder">src</span></a> <a id="r:389" class="idref" href="#r:389"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:390" class="idref" href="#lwsrc:390"><span class="id" title="binder">lwsrc</span></a> <a id="lwr:391" class="idref" href="#lwr:391"><span class="id" title="binder">lwr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:389"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:388"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:385"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:388"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:390"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:385"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:389"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:391"><span class="id" title="variable">lwr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:385"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:386"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:387"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:388"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:390"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:390"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwr:391"><span class="id" title="variable">lwr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hr_neq_src</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hlr_r</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hunique</span> =&gt; [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_unique_in_registers" class="idref" href="#state_corresponds_unique_in_registers"><span class="id" title="lemma">state_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;(<a id="phr:392" class="idref" href="#phr:392"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:393" class="idref" href="#phm:393"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:394" class="idref" href="#lr:394"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:395" class="idref" href="#lm:395"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:396" class="idref" href="#vmap:396"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:397" class="idref" href="#src:397"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:398" class="idref" href="#lwsrc:398"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:392"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:393"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:394"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:395"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:396"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:394"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:397"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:398"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_registers"><span class="id" title="definition">unique_in_registers</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:392"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:397"><span class="id" title="variable">src</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:398"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:394"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:397"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:398"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">lwr</span> <span class="id" title="var">Hlr_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_r</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphr_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)) ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_r</span>; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_corresponds_unique_in_memory" class="idref" href="#state_corresponds_unique_in_memory"><span class="id" title="lemma">state_corresponds_unique_in_memory</span></a><br/>
&nbsp;&nbsp;(<a id="phr:399" class="idref" href="#phr:399"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:400" class="idref" href="#phm:400"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:401" class="idref" href="#lr:401"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:402" class="idref" href="#lm:402"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:403" class="idref" href="#vmap:403"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:404" class="idref" href="#src:404"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:405" class="idref" href="#lwsrc:405"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:399"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:400"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:401"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:402"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:403"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:401"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:404"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:405"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#unique_in_memory"><span class="id" title="definition">unique_in_memory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:400"><span class="id" title="variable">phm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:405"><span class="id" title="variable">lwsrc</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_memoryL"><span class="id" title="definition">unique_in_memoryL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:402"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:403"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:405"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a</span> <span class="id" title="var">v</span>] <span class="id" title="var">lw_la</span> <span class="id" title="var">Hlm_la</span> <span class="id" title="var">His_cur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphm_a</span> : <span class="id" title="var">phm</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw_la</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_corresponds_get_word"><span class="id" title="axiom">lmem_corresponds_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hphm_a</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'phm_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hphm_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;link&nbsp;between<br/>
&nbsp;&nbsp;&nbsp;sweep&nbsp;of&nbsp;the&nbsp;physical&nbsp;machine<br/>
&nbsp;&nbsp;&nbsp;and&nbsp;unique_in_machine&nbsp;of&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="sweep_true_specL" class="idref" href="#sweep_true_specL"><span class="id" title="lemma">sweep_true_specL</span></a><br/>
&nbsp;&nbsp;(<a id="phr:406" class="idref" href="#phr:406"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:407" class="idref" href="#phm:407"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:408" class="idref" href="#lr:408"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lm:409" class="idref" href="#lm:409"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:410" class="idref" href="#vmap:410"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:411" class="idref" href="#src:411"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lwsrc:412" class="idref" href="#lwsrc:412"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:406"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:407"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:408"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:409"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:410"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:408"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:411"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:412"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#sweep"><span class="id" title="definition">sweep</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:407"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:406"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:411"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:408"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:409"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:410"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:411"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:412"><span class="id" title="variable">lwsrc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hsweep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hphr_src</span> : <span class="id" title="var">phr</span> <span class="id" title="notation">!!</span> <span class="id" title="var">src</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_reg_get_word"><span class="id" title="axiom">state_corresponds_reg_get_word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.cap_lang.html#sweep_spec"><span class="id" title="axiom">sweep_spec</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">wsrc</span> := (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lwsrc</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsweep</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsweep</span> <span class="id" title="var">Hphr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsweep</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_unique_in_registers"><span class="id" title="axiom">state_corresponds_unique_in_registers</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#state_corresponds_unique_in_memory"><span class="id" title="axiom">state_corresponds_unique_in_memory</span></a> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="no_overlap_word_no_access_addrL" class="idref" href="#no_overlap_word_no_access_addrL"><span class="id" title="lemma">no_overlap_word_no_access_addrL</span></a><br/>
&nbsp;&nbsp;(<a id="p:413" class="idref" href="#p:413"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:414" class="idref" href="#b:414"><span class="id" title="binder">b</span></a> <a id="e:415" class="idref" href="#e:415"><span class="id" title="binder">e</span></a> <a id="a:416" class="idref" href="#a:416"><span class="id" title="binder">a</span></a> <a id="a':417" class="idref" href="#a':417"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:418" class="idref" href="#v:418"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:419" class="idref" href="#lw:419"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':417"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:414"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:415"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:413"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:414"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:415"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:416"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:418"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lw:419"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':417"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:419"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Ha'</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_overlap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> /<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addr"><span class="id" title="definition">word_access_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Haccess</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> /<a class="idref" href="cap_machine.cap_lang.html#overlap_word"><span class="id" title="definition">overlap_word</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.cap_lang.html#get_scap"><span class="id" title="definition">get_scap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <span class="id" title="var">lw</span>)); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p0</span> <span class="id" title="var">b0</span> <span class="id" title="var">e0</span> <span class="id" title="var">a0</span>|] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#elem_of_finz_seq_between"><span class="id" title="lemma">elem_of_finz_seq_between</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">b</span> <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">b0</span>)%<span class="id" title="var">a</span> ; <span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unique_in_machine_no_accessL" class="idref" href="#unique_in_machine_no_accessL"><span class="id" title="lemma">unique_in_machine_no_accessL</span></a><br/>
&nbsp;&nbsp;(<a id="phm:420" class="idref" href="#phm:420"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lm:421" class="idref" href="#lm:421"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lr:422" class="idref" href="#lr:422"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="vmap:423" class="idref" href="#vmap:423"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:424" class="idref" href="#p:424"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:425" class="idref" href="#b:425"><span class="id" title="binder">b</span></a> <a id="e:426" class="idref" href="#e:426"><span class="id" title="binder">e</span></a> <a id="a:427" class="idref" href="#a:427"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:428" class="idref" href="#v:428"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="src:429" class="idref" href="#src:429"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:430" class="idref" href="#lw:430"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:420"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:421"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:423"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:430"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:424"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:425"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:426"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:427"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:428"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:422"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:429"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:430"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:430"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:423"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:422"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:421"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:423"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:429"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:430"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a':431" class="idref" href="#a':431"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:421"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:423"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':431"><span class="id" title="variable">a'</span></a>) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:425"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:426"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hmem_inv</span> <span class="id" title="var">Hlw</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">His_cur</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="var">vmap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>) <span class="id" title="var">vmap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw</span> := <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcur_a'</span>: <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="abbreviation">vmap</span>).<br/>
&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; [|<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#cur_lword_cur_addr"><span class="id" title="axiom">cur_lword_cur_addr</span></a>; [|<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_lword_version"><span class="id" title="definition">is_lword_version</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#withinBounds_in_seq"><span class="id" title="axiom">withinBounds_in_seq</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hunique</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_impl</span> ; <span class="id" title="tactic">first</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hunique_mem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">move</span>=&gt; [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlast_v</span> <span class="id" title="var">Hcur_v0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#no_overlap_word_no_access_addrL"><span class="id" title="axiom">no_overlap_word_no_access_addrL</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlast_v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <span class="id" title="var">mem_corresponds_cur_addr_last_version_1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery to update the lmemory 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;We&nbsp;assume&nbsp;that&nbsp;*lmem*&nbsp;is&nbsp;a&nbsp;local&nbsp;view&nbsp;compatible&nbsp;with&nbsp;the&nbsp;global&nbsp;view&nbsp;*lm*.<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;also&nbsp;assume&nbsp;that&nbsp;*lm*&nbsp;contains&nbsp;the&nbsp;laddress&nbsp;*(a,v)*,<br/>
&nbsp;&nbsp;&nbsp;whereas&nbsp;*lmem*&nbsp;might&nbsp;not&nbsp;contain&nbsp;it.<br/>
<br/>
&nbsp;&nbsp;&nbsp;This&nbsp;way,&nbsp;the&nbsp;local&nbsp;view&nbsp;*lmem*&nbsp;can&nbsp;be&nbsp;updated,<br/>
&nbsp;&nbsp;&nbsp;even&nbsp;if&nbsp;it&nbsp;does&nbsp;not&nbsp;contain&nbsp;the&nbsp;address&nbsp;(a,v)<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_addr" class="idref" href="#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:432" class="idref" href="#lmem:432"><span class="id" title="binder">lmem</span></a> <a id="lm:433" class="idref" href="#lm:433"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:434" class="idref" href="#vmap:434"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:435" class="idref" href="#a:435"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : (<a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:434"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:435"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:433"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:435"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a> <span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:435"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">lw</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:435"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">lw</span> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lm</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:435"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1 <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vmap</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:432"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:433"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:434"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:432"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:433"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:434"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_region" class="idref" href="#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:436" class="idref" href="#lmem:436"><span class="id" title="binder">lmem</span></a> <a id="lm:437" class="idref" href="#lm:437"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:438" class="idref" href="#vmap:438"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:439" class="idref" href="#la:439"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) : (<a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="keyword">fun</span> <a id="a:440" class="idref" href="#a:440"><span class="id" title="binder">a</span></a> (<a id="upd:441" class="idref" href="#upd:441"><span class="id" title="binder">upd</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">lmem'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">lm'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">vmap'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="cap_machine.logical_mapsto.html#upd:441"><span class="id" title="variable">upd</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap'</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:440"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:436"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:437"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:438"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la:439"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;the&nbsp;region&nbsp;pointed&nbsp;by&nbsp;a&nbsp;lword&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_cur_version_word_region" class="idref" href="#update_cur_version_word_region"><span class="id" title="definition">update_cur_version_word_region</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:443" class="idref" href="#lmem:443"><span class="id" title="binder">lmem</span></a> <a id="lm:444" class="idref" href="#lm:444"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:445" class="idref" href="#vmap:445"><span class="id" title="binder">vmap</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:446" class="idref" href="#lw:446"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : (<a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:446"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:443"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:444"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:445"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem:443"><span class="id" title="variable">lmem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:444"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:445"><span class="id" title="variable">vmap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_cons" class="idref" href="#update_cur_version_region_cons"><span class="id" title="lemma">update_cur_version_region_cons</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:447" class="idref" href="#lmem:447"><span class="id" title="binder">lmem</span></a> <a id="lm:448" class="idref" href="#lm:448"><span class="id" title="binder">lm</span></a> <a id="lmem':449" class="idref" href="#lmem':449"><span class="id" title="binder">lmem'</span></a> <a id="lm':450" class="idref" href="#lm':450"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:451" class="idref" href="#vmap:451"><span class="id" title="binder">vmap</span></a> <a id="vmap':452" class="idref" href="#vmap':452"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:453" class="idref" href="#a:453"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:454" class="idref" href="#la:454"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:447"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:448"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:451"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:453"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:454"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':449"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':450"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':452"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="lmem0:455" class="idref" href="#lmem0:455"><span class="id" title="binder">lmem0</span></a> <a id="lm0:456" class="idref" href="#lm0:456"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap0:457" class="idref" href="#vmap0:457"><span class="id" title="binder">vmap0</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:447"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:448"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:451"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:454"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem0:455"><span class="id" title="variable">lmem0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:456"><span class="id" title="variable">lm0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:457"><span class="id" title="variable">vmap0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:455"><span class="id" title="variable">lmem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:456"><span class="id" title="variable">lm0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:457"><span class="id" title="variable">vmap0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:453"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':449"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':450"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':452"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">vmap</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">vmap</span> <span class="id" title="var">la</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [ [<span class="id" title="var">lmem0</span> <span class="id" title="var">lm0</span>] <span class="id" title="var">vmap0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lmem0</span>, <span class="id" title="var">lm0</span>, <span class="id" title="var">vmap0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_upd</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Hupd</span> : <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> ?<span class="id" title="var">lmem</span> ?<span class="id" title="var">lm</span> ?<span class="id" title="var">vmap</span> (?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">la</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">lmem'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">lm'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">vmap'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">lmem0</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">lmem</span> "0" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">lm0</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">lm</span> "0" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">vmap0</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">vmap</span> "0" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hupd0</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">Hupd</span> "0" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_cons"><span class="id" title="axiom">update_cur_version_region_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lmem0</span> &amp; <span class="id" title="var">lm0</span> &amp; <span class="id" title="var">vmap0</span> &amp; <span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">Hupd0</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook2</span> := <span class="id" title="var">destruct_cons_upd</span> || <span class="id" title="var">destruct_cons_hook1</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook</span> ::= <span class="id" title="var">destruct_cons_hook2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_next" class="idref" href="#update_cur_version_addr_next"><span class="id" title="lemma">update_cur_version_addr_next</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:458" class="idref" href="#lmem:458"><span class="id" title="binder">lmem</span></a> <a id="lm:459" class="idref" href="#lm:459"><span class="id" title="binder">lm</span></a> <a id="lmem':460" class="idref" href="#lmem':460"><span class="id" title="binder">lmem'</span></a> <a id="lm':461" class="idref" href="#lm':461"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:462" class="idref" href="#vmap:462"><span class="id" title="binder">vmap</span></a> <a id="vmap':463" class="idref" href="#vmap':463"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:464" class="idref" href="#a:464"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:465" class="idref" href="#v:465"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lwa:466" class="idref" href="#lwa:466"><span class="id" title="binder">lwa</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:458"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:459"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:462"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:464"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':460"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':461"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':463"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:462"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:464"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:465"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:459"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:464"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:465"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:466"><span class="id" title="variable">lwa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':460"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:464"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:465"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwa:466"><span class="id" title="variable">lwa</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hlm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hlm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_notin_preserves_cur" class="idref" href="#update_cur_version_addr_notin_preserves_cur"><span class="id" title="lemma">update_cur_version_addr_notin_preserves_cur</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:467" class="idref" href="#lmem:467"><span class="id" title="binder">lmem</span></a> <a id="lm:468" class="idref" href="#lm:468"><span class="id" title="binder">lm</span></a> <a id="lmem':469" class="idref" href="#lmem':469"><span class="id" title="binder">lmem'</span></a> <a id="lm':470" class="idref" href="#lm':470"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:471" class="idref" href="#vmap:471"><span class="id" title="binder">vmap</span></a> <a id="vmap':472" class="idref" href="#vmap':472"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:473" class="idref" href="#a:473"><span class="id" title="binder">a</span></a> <a id="a':474" class="idref" href="#a':474"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:467"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:468"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:471"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':474"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':469"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':470"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':472"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:473"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':474"><span class="id" title="variable">a'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':472"><span class="id" title="variable">vmap'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:473"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:471"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:473"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span> |]<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_notin_preserves_cur" class="idref" href="#update_cur_version_region_notin_preserves_cur"><span class="id" title="lemma">update_cur_version_region_notin_preserves_cur</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="lmem:475" class="idref" href="#lmem:475"><span class="id" title="binder">lmem</span></a> <a id="lm:476" class="idref" href="#lm:476"><span class="id" title="binder">lm</span></a> <a id="lmem':477" class="idref" href="#lmem':477"><span class="id" title="binder">lmem'</span></a> <a id="lm':478" class="idref" href="#lm':478"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:479" class="idref" href="#vmap:479"><span class="id" title="binder">vmap</span></a> <a id="vmap':480" class="idref" href="#vmap':480"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:481" class="idref" href="#la:481"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:482" class="idref" href="#a:482"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:475"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:476"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:479"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:481"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':477"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':478"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':480"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:482"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:481"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':480"><span class="id" title="variable">vmap'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:482"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:479"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:482"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hupd</span> <span class="id" title="var">Ha_notin_la</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">vmap0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur0</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_cur</span></a>; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_notin_preserves_lmem" class="idref" href="#update_cur_version_addr_notin_preserves_lmem"><span class="id" title="lemma">update_cur_version_addr_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:483" class="idref" href="#lmem:483"><span class="id" title="binder">lmem</span></a> <a id="lm:484" class="idref" href="#lm:484"><span class="id" title="binder">lm</span></a> <a id="lmem':485" class="idref" href="#lmem':485"><span class="id" title="binder">lmem'</span></a> <a id="lm':486" class="idref" href="#lm':486"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:487" class="idref" href="#vmap:487"><span class="id" title="binder">vmap</span></a> <a id="vmap':488" class="idref" href="#vmap':488"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:489" class="idref" href="#a:489"><span class="id" title="binder">a</span></a> <a id="a':490" class="idref" href="#a':490"><span class="id" title="binder">a'</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:491" class="idref" href="#v:491"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:489"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':490"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:483"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:484"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:487"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':490"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':485"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':486"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':488"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':485"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:489"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:491"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:483"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:489"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:491"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hva'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_notin_preserves_lmem" class="idref" href="#update_cur_version_region_notin_preserves_lmem"><span class="id" title="lemma">update_cur_version_region_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:492" class="idref" href="#lmem:492"><span class="id" title="binder">lmem</span></a> <a id="lm:493" class="idref" href="#lm:493"><span class="id" title="binder">lm</span></a> <a id="lmem':494" class="idref" href="#lmem':494"><span class="id" title="binder">lmem'</span></a> <a id="lm':495" class="idref" href="#lm':495"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:496" class="idref" href="#vmap:496"><span class="id" title="binder">vmap</span></a> <a id="vmap':497" class="idref" href="#vmap':497"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:498" class="idref" href="#la:498"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:499" class="idref" href="#a:499"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:500" class="idref" href="#v:500"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:499"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:498"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:492"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:493"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:496"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:498"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':494"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':495"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':497"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':494"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:499"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:500"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:492"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:499"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:500"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lmem0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_lmem</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem0</span> <span class="id" title="var">Hupd0</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_notin_preserves_lm" class="idref" href="#update_cur_version_addr_notin_preserves_lm"><span class="id" title="lemma">update_cur_version_addr_notin_preserves_lm</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:501" class="idref" href="#lmem:501"><span class="id" title="binder">lmem</span></a> <a id="lm:502" class="idref" href="#lm:502"><span class="id" title="binder">lm</span></a> <a id="lmem':503" class="idref" href="#lmem':503"><span class="id" title="binder">lmem'</span></a> <a id="lm':504" class="idref" href="#lm':504"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:505" class="idref" href="#vmap:505"><span class="id" title="binder">vmap</span></a> <a id="vmap':506" class="idref" href="#vmap':506"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:507" class="idref" href="#a:507"><span class="id" title="binder">a</span></a> <a id="a':508" class="idref" href="#a':508"><span class="id" title="binder">a'</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:509" class="idref" href="#v:509"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:507"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':508"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:501"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:502"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:505"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':508"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':503"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':504"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':506"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':504"><span class="id" title="variable">lm'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:507"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:509"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:502"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:507"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:509"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hva'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw'</span> ; <span class="id" title="var">last</span> (<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_notin_preserves_lm" class="idref" href="#update_cur_version_region_notin_preserves_lm"><span class="id" title="lemma">update_cur_version_region_notin_preserves_lm</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:510" class="idref" href="#lmem:510"><span class="id" title="binder">lmem</span></a> <a id="lm:511" class="idref" href="#lm:511"><span class="id" title="binder">lm</span></a> <a id="lmem':512" class="idref" href="#lmem':512"><span class="id" title="binder">lmem'</span></a> <a id="lm':513" class="idref" href="#lm':513"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:514" class="idref" href="#vmap:514"><span class="id" title="binder">vmap</span></a> <a id="vmap':515" class="idref" href="#vmap':515"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:516" class="idref" href="#la:516"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:517" class="idref" href="#a:517"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:518" class="idref" href="#v:518"><span class="id" title="binder">v</span></a> :<a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:517"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:516"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:510"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:511"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:514"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:516"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':512"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':513"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':515"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm':513"><span class="id" title="variable">lm'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:517"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:518"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:511"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:517"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:518"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lm0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_lm</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem0</span> <span class="id" title="var">Hupd0</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_incl_lmem" class="idref" href="#update_cur_version_addr_incl_lmem"><span class="id" title="lemma">update_cur_version_addr_incl_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:519" class="idref" href="#lmem:519"><span class="id" title="binder">lmem</span></a> <a id="lm:520" class="idref" href="#lm:520"><span class="id" title="binder">lm</span></a> <a id="lmem':521" class="idref" href="#lmem':521"><span class="id" title="binder">lmem'</span></a> <a id="lm':522" class="idref" href="#lm':522"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:523" class="idref" href="#vmap:523"><span class="id" title="binder">vmap</span></a> <a id="vmap':524" class="idref" href="#vmap':524"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:525" class="idref" href="#a:525"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:526" class="idref" href="#v:526"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:523"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:525"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:526"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:519"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:525"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:526"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:519"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:520"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:523"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:525"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':521"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':522"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':524"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:519"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':521"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hmaxv</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_update_vmap" class="idref" href="#update_cur_version_region_update_vmap"><span class="id" title="lemma">update_cur_version_region_update_vmap</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:527" class="idref" href="#lmem:527"><span class="id" title="binder">lmem</span></a> <a id="lm:528" class="idref" href="#lm:528"><span class="id" title="binder">lm</span></a> <a id="lmem':529" class="idref" href="#lmem':529"><span class="id" title="binder">lmem'</span></a> <a id="lm':530" class="idref" href="#lm':530"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:531" class="idref" href="#vmap:531"><span class="id" title="binder">vmap</span></a> <a id="vmap':532" class="idref" href="#vmap':532"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:533" class="idref" href="#la:533"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="a:534" class="idref" href="#a:534"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:535" class="idref" href="#v:535"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:533"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:534"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:533"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:527"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:528"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:531"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:533"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':529"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':530"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':532"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:528"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:534"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:535"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:534"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:535"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:531"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:534"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:535"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':532"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la'</span> <span class="id" title="var">IH</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hupd</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>] <span class="id" title="var">Hcur_a</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha</span>] ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;case&nbsp;(a&nbsp;=&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hcur_a</span> /= <span class="id" title="var">Hlwa</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> //= ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;case&nbsp;(a&nbsp;&lt;&gt;&nbsp;a'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha_neq_a'</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_cur</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_notin_preserves_lm_inv" class="idref" href="#update_cur_version_addr_notin_preserves_lm_inv"><span class="id" title="lemma">update_cur_version_addr_notin_preserves_lm_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:536" class="idref" href="#lmem:536"><span class="id" title="binder">lmem</span></a> <a id="lm:537" class="idref" href="#lm:537"><span class="id" title="binder">lm</span></a> <a id="lmem':538" class="idref" href="#lmem':538"><span class="id" title="binder">lmem'</span></a> <a id="lm':539" class="idref" href="#lm':539"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:540" class="idref" href="#vmap:540"><span class="id" title="binder">vmap</span></a> <a id="vmap':541" class="idref" href="#vmap':541"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:542" class="idref" href="#a:542"><span class="id" title="binder">a</span></a> <a id="a':543" class="idref" href="#a':543"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:544" class="idref" href="#v:544"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:545" class="idref" href="#lw:545"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':543"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:542"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:536"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:537"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:536"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:537"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:540"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':543"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':538"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':539"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':541"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':538"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:542"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:544"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:545"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:537"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:542"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:544"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:545"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span>|] <span class="id" title="var">eqn</span>:? ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">last</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:? ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">last</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>; <span class="id" title="tactic">eauto</span>; [|<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_notin_preserves_lm_inv" class="idref" href="#update_cur_version_region_notin_preserves_lm_inv"><span class="id" title="lemma">update_cur_version_region_notin_preserves_lm_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:546" class="idref" href="#lmem:546"><span class="id" title="binder">lmem</span></a> <a id="lm:547" class="idref" href="#lm:547"><span class="id" title="binder">lm</span></a> <a id="lmem':548" class="idref" href="#lmem':548"><span class="id" title="binder">lmem'</span></a> <a id="lm':549" class="idref" href="#lm':549"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:550" class="idref" href="#vmap:550"><span class="id" title="binder">vmap</span></a> <a id="vmap':551" class="idref" href="#vmap':551"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:552" class="idref" href="#la:552"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:553" class="idref" href="#a:553"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:554" class="idref" href="#v:554"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:555" class="idref" href="#lw:555"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:553"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:552"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:546"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:547"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:546"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:547"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:550"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:552"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':548"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':549"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':551"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':548"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:553"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:554"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:555"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:547"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:553"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:554"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:555"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hlw</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_preserves_lmem_incl" class="idref" href="#update_cur_version_addr_preserves_lmem_incl"><span class="id" title="lemma">update_cur_version_addr_preserves_lmem_incl</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:556" class="idref" href="#lmem:556"><span class="id" title="binder">lmem</span></a> <a id="lmem':557" class="idref" href="#lmem':557"><span class="id" title="binder">lmem'</span></a> <a id="lm:558" class="idref" href="#lm:558"><span class="id" title="binder">lm</span></a> <a id="lm':559" class="idref" href="#lm':559"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:560" class="idref" href="#vmap:560"><span class="id" title="binder">vmap</span></a> <a id="vmap':561" class="idref" href="#vmap':561"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:562" class="idref" href="#a:562"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:563" class="idref" href="#v:563"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:556"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:558"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:560"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:562"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:563"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:558"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:562"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:563"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:556"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:558"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:560"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:562"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':557"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':559"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':561"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':557"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':559"><span class="id" title="variable">lm'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hcur_a</span> <span class="id" title="var">Hmaxv_a</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_preserves_lmem_incl" class="idref" href="#update_cur_version_region_preserves_lmem_incl"><span class="id" title="lemma">update_cur_version_region_preserves_lmem_incl</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:564" class="idref" href="#lmem:564"><span class="id" title="binder">lmem</span></a> <a id="lmem':565" class="idref" href="#lmem':565"><span class="id" title="binder">lmem'</span></a> <a id="lm:566" class="idref" href="#lm:566"><span class="id" title="binder">lm</span></a> <a id="lm':567" class="idref" href="#lm':567"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:568" class="idref" href="#vmap:568"><span class="id" title="binder">vmap</span></a> <a id="vmap':569" class="idref" href="#vmap':569"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:570" class="idref" href="#la:570"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:571" class="idref" href="#v:571"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:570"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:564"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:566"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:572" class="idref" href="#a:572"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:568"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:572"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:571"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:570"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:573" class="idref" href="#a:573"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:566"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:573"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:571"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:570"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:564"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:566"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:568"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:570"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':565"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':567"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':569"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':565"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm':567"><span class="id" title="variable">lm'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">HcurMap</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">simplify_map_eq</span> ; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lm0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem0_incl</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HcurMap_a0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a> ; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_preserves_lmem_incl"><span class="id" title="axiom">update_cur_version_addr_preserves_lmem_incl</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;If&nbsp;an&nbsp;address&nbsp;`a'`&nbsp;is&nbsp;not&nbsp;reachable&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,<br/>
&nbsp;&nbsp;&nbsp;then&nbsp;updating&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;another&nbsp;address&nbsp;`a`<br/>
&nbsp;&nbsp;&nbsp;does&nbsp;not&nbsp;make&nbsp;it&nbsp;reachable&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_notin_preserves_no_access" class="idref" href="#update_cur_version_addr_notin_preserves_no_access"><span class="id" title="lemma">update_cur_version_addr_notin_preserves_no_access</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:574" class="idref" href="#lmem:574"><span class="id" title="binder">lmem</span></a> <a id="lm:575" class="idref" href="#lm:575"><span class="id" title="binder">lm</span></a> <a id="lmem':576" class="idref" href="#lmem':576"><span class="id" title="binder">lmem'</span></a> <a id="lm':577" class="idref" href="#lm':577"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:578" class="idref" href="#vmap:578"><span class="id" title="binder">vmap</span></a> <a id="vmap':579" class="idref" href="#vmap':579"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:580" class="idref" href="#a:580"><span class="id" title="binder">a</span></a> <a id="a':581" class="idref" href="#a':581"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:580"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':581"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:574"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:575"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:578"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':581"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':576"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':577"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':579"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:575"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:578"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:580"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':577"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':579"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:580"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">va'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> ; [|<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqn'</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">va'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hno_access</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heqn'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hno_access</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_notin_preserves_no_access" class="idref" href="#update_cur_version_region_notin_preserves_no_access"><span class="id" title="lemma">update_cur_version_region_notin_preserves_no_access</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:582" class="idref" href="#lmem:582"><span class="id" title="binder">lmem</span></a> <a id="lm:583" class="idref" href="#lm:583"><span class="id" title="binder">lm</span></a> <a id="lmem':584" class="idref" href="#lmem':584"><span class="id" title="binder">lmem'</span></a> <a id="lm':585" class="idref" href="#lm':585"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:586" class="idref" href="#vmap:586"><span class="id" title="binder">vmap</span></a> <a id="vmap':587" class="idref" href="#vmap':587"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:588" class="idref" href="#la:588"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':589" class="idref" href="#a':589"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':589"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:588"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:582"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:583"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:586"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:588"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':584"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':585"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':587"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:583"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:586"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':589"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':585"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':587"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':589"><span class="id" title="variable">a'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hnot_in</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_no_access"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_no_access</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_notin_is_cur_word" class="idref" href="#update_cur_version_notin_is_cur_word"><span class="id" title="lemma">update_cur_version_notin_is_cur_word</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:590" class="idref" href="#lmem:590"><span class="id" title="binder">lmem</span></a> <a id="lm:591" class="idref" href="#lm:591"><span class="id" title="binder">lm</span></a> <a id="lmem':592" class="idref" href="#lmem':592"><span class="id" title="binder">lmem'</span></a> <a id="lm':593" class="idref" href="#lm':593"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:594" class="idref" href="#vmap:594"><span class="id" title="binder">vmap</span></a> <a id="vmap':595" class="idref" href="#vmap':595"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:596" class="idref" href="#p:596"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:597" class="idref" href="#b:597"><span class="id" title="binder">b</span></a> <a id="e:598" class="idref" href="#e:598"><span class="id" title="binder">e</span></a> <a id="a:599" class="idref" href="#a:599"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:600" class="idref" href="#v:600"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:601" class="idref" href="#lw:601"><span class="id" title="binder">lw</span></a> <a id="lwsrc:602" class="idref" href="#lwsrc:602"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:602"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:596"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:597"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:598"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:599"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:600"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:590"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:591"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:594"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:597"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:598"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':592"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':593"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':595"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#overlap_wordL"><span class="id" title="definition">overlap_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:602"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:601"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:601"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:594"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:601"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':595"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hno_overlap</span> <span class="id" title="var">His_cur_lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_cur_lw</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">His_cur_lw</span> <span class="id" title="var">a'0</span> <span class="id" title="var">Ha'0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'0_cur</span><br/>
&nbsp;&nbsp;; (<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'0_cur</span>; <span class="id" title="tactic">eauto</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#not_overlap_wordL_seq_between"><span class="id" title="axiom">not_overlap_wordL_seq_between</span></a>; [| | <span class="id" title="tactic">eauto</span>..].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="has_access_lword_range" class="idref" href="#has_access_lword_range"><span class="id" title="definition">has_access_lword_range</span></a> (<a id="lm:603" class="idref" href="#lm:603"><span class="id" title="binder">lm</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="lw:604" class="idref" href="#lw:604"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;( <span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:604"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealedCap"><span class="id" title="abbreviation">LSealedCap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:606" class="idref" href="#a:606"><span class="id" title="binder"><span id="a:607" class="id">a</span></span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:603"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:606"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) ) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_word_region_update_lword" class="idref" href="#update_cur_version_word_region_update_lword"><span class="id" title="lemma">update_cur_version_word_region_update_lword</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:608" class="idref" href="#lmem:608"><span class="id" title="binder">lmem</span></a> <a id="lm:609" class="idref" href="#lm:609"><span class="id" title="binder">lm</span></a> <a id="lmem':610" class="idref" href="#lmem':610"><span class="id" title="binder">lmem'</span></a> <a id="lm':611" class="idref" href="#lm':611"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:612" class="idref" href="#vmap:612"><span class="id" title="binder">vmap</span></a> <a id="vmap':613" class="idref" href="#vmap':613"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:614" class="idref" href="#lw:614"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region"><span class="id" title="definition">update_cur_version_word_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:608"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:609"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:612"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':610"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':611"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':613"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#has_access_lword_range"><span class="id" title="definition">has_access_lword_range</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:609"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:612"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:614"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':613"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hupd</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hcur</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_update_vmap"><span class="id" title="axiom">update_cur_version_region_update_vmap</span></a><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'</span>]; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_lcap_update_lword" class="idref" href="#update_cur_version_region_lcap_update_lword"><span class="id" title="lemma">update_cur_version_region_lcap_update_lword</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:615" class="idref" href="#lmem:615"><span class="id" title="binder">lmem</span></a> <a id="lm:616" class="idref" href="#lm:616"><span class="id" title="binder">lm</span></a> <a id="lmem':617" class="idref" href="#lmem':617"><span class="id" title="binder">lmem'</span></a> <a id="lm':618" class="idref" href="#lm':618"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:619" class="idref" href="#vmap:619"><span class="id" title="binder">vmap</span></a> <a id="vmap':620" class="idref" href="#vmap':620"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:621" class="idref" href="#p:621"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:622" class="idref" href="#b:622"><span class="id" title="binder">b</span></a> <a id="e:623" class="idref" href="#e:623"><span class="id" title="binder">e</span></a> <a id="a:624" class="idref" href="#a:624"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:625" class="idref" href="#v:625"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:626" class="idref" href="#lw:626"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:626"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:621"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:622"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:623"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:624"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:625"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:615"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:616"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:619"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:622"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:623"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':617"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':618"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':620"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:627" class="idref" href="#a:627"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:616"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:627"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:625"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:622"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:623"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:626"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:619"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#next_version_lword"><span class="id" title="definition">next_version_lword</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:626"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':620"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">Hget</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hsome</span> <span class="id" title="var">Hcur</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hget</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region_update_lword"><span class="id" title="axiom">update_cur_version_word_region_update_lword</span></a>; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;If&nbsp;the&nbsp;address&nbsp;`a`&nbsp;is&nbsp;not&nbsp;reachable<br/>
&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;current&nbsp;view&nbsp;of&nbsp;the&nbsp;lmem,<br/>
&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;still&nbsp;holds<br/>
&nbsp;&nbsp;&nbsp;after&nbsp;updating&nbsp;its&nbsp;version&nbsp;number.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_preserves_mem_corresponds" class="idref" href="#update_cur_version_addr_preserves_mem_corresponds"><span class="id" title="lemma">update_cur_version_addr_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phm:628" class="idref" href="#phm:628"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lmem:629" class="idref" href="#lmem:629"><span class="id" title="binder">lmem</span></a> <a id="lm:630" class="idref" href="#lm:630"><span class="id" title="binder">lm</span></a> <a id="lmem':631" class="idref" href="#lmem':631"><span class="id" title="binder">lmem'</span></a> <a id="lm':632" class="idref" href="#lm':632"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:633" class="idref" href="#vmap:633"><span class="id" title="binder">vmap</span></a> <a id="vmap':634" class="idref" href="#vmap':634"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:635" class="idref" href="#a:635"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:629"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:630"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:633"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:635"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':631"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':632"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':634"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:630"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:633"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:635"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:628"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:630"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:633"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:628"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':632"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':634"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hnaccess_mem</span> [<span class="id" title="var">Hdom</span> <span class="id" title="var">Hroot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">vmap</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcur_la</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lm</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hla</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">vmap</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#word_access_addrL"><span class="id" title="definition">word_access_addrL</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lw</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnaccess</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hla'</span> := <span class="id" title="var">Hla</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">va</span> &amp; <span class="id" title="var">Hcur_va</span> &amp; <span class="id" title="var">Hle_va</span> &amp; [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>, <span class="id" title="var">Hcur_va</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_va</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem_corresponds_read_iscur"><span class="id" title="axiom">lmem_corresponds_read_iscur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1) <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eexists</span> (<span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> //= ; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la'</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hroot'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">la'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a'</span> <span class="id" title="var">v'</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hroot'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hroot'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">Hcur_max</span> &amp; [<span class="id" title="var">cur_lw</span> <span class="id" title="var">Hcur_lw</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1). <span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">va</span> <span class="id" title="keyword">with</span> <span class="id" title="var">cur_v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> ( <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v</span>; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">cur_v</span>. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr_insert_ne"><span class="id" title="axiom">is_cur_addr_insert_ne</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cur_lw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_insert_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hla'</span> := <span class="id" title="var">Hla</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">cur_v</span> &amp; <span class="id" title="var">Hcur_v</span> &amp; <span class="id" title="var">Hcur_max</span> &amp; [<span class="id" title="var">cur_lw</span> <span class="id" title="var">Hcur_lw</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_addr"><span class="id" title="definition">is_cur_addr</span></a> /= <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_v</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_la</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hcur_a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hcur_a''</span> := <span class="id" title="var">Hcur_a'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a''</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcur_a''</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lw'</span> &amp; <span class="id" title="var">Hlw'</span> &amp; <span class="id" title="var">Hw'</span> &amp; <span class="id" title="var">Hcur_lw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_lw'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcur_la</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_a'</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlwa</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">lw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">va</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; [|<span class="id" title="tactic">split</span>] ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_word"><span class="id" title="axiom">update_cur_word</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_preserves_mem_corresponds" class="idref" href="#update_cur_version_region_preserves_mem_corresponds"><span class="id" title="lemma">update_cur_version_region_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phm:636" class="idref" href="#phm:636"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lmem:637" class="idref" href="#lmem:637"><span class="id" title="binder">lmem</span></a> <a id="lm:638" class="idref" href="#lm:638"><span class="id" title="binder">lm</span></a> <a id="lmem':639" class="idref" href="#lmem':639"><span class="id" title="binder">lmem'</span></a> <a id="lm':640" class="idref" href="#lm':640"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:641" class="idref" href="#vmap:641"><span class="id" title="binder">vmap</span></a> <a id="vmap':642" class="idref" href="#vmap':642"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:643" class="idref" href="#la:643"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:643"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:637"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:641"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:643"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':639"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':640"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':642"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:644" class="idref" href="#a:644"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_addrL"><span class="id" title="definition">lmem_not_access_addrL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:641"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:644"><span class="id" title="variable">a</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:643"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:636"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:638"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:641"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:636"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':640"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':642"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">phm</span> <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hno_dup</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hall_naccess_mem</span> <span class="id" title="var">Hmem_corr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <span class="id" title="var">phm</span> <span class="id" title="var">lm0</span> <span class="id" title="var">vmap0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinv0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span> ;<span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_preserves_mem_corresponds"><span class="id" title="axiom">update_cur_version_addr_preserves_mem_corresponds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_no_access"><span class="id" title="axiom">update_cur_version_region_notin_preserves_no_access</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;update&nbsp;the&nbsp;version&nbsp;number&nbsp;of&nbsp;a&nbsp;memory&nbsp;region&nbsp;that&nbsp;is&nbsp;not&nbsp;reacheable,<br/>
&nbsp;&nbsp;&nbsp;preserves&nbsp;the&nbsp;mem_phys_log&nbsp;invariant&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_word_region_preserves_mem_corresponds" class="idref" href="#update_cur_version_word_region_preserves_mem_corresponds"><span class="id" title="lemma">update_cur_version_word_region_preserves_mem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phm:645" class="idref" href="#phm:645"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lmem:646" class="idref" href="#lmem:646"><span class="id" title="binder">lmem</span></a> <a id="lm:647" class="idref" href="#lm:647"><span class="id" title="binder">lm</span></a> <a id="lmem':648" class="idref" href="#lmem':648"><span class="id" title="binder">lmem'</span></a> <a id="lm':649" class="idref" href="#lm':649"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:650" class="idref" href="#vmap:650"><span class="id" title="binder">vmap</span></a> <a id="vmap':651" class="idref" href="#vmap':651"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="lw:652" class="idref" href="#lw:652"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:647"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:650"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:652"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region"><span class="id" title="definition">update_cur_version_word_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:646"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:647"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:650"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:652"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':648"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':649"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':651"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:645"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:647"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:650"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:645"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':649"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':651"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hno_access</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hmem_phys_log</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_word_region"><span class="id" title="definition">update_cur_version_word_region</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lmem_not_access_wordL"><span class="id" title="definition">lmem_not_access_wordL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_access</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <span class="id" title="var">lw</span>) <span class="id" title="keyword">as</span> [[] |] ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_preserves_mem_corresponds"><span class="id" title="axiom">update_cur_version_region_preserves_mem_corresponds</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_lmem_corresponds" class="idref" href="#update_cur_version_region_lmem_corresponds"><span class="id" title="lemma">update_cur_version_region_lmem_corresponds</span></a><br/>
&nbsp;&nbsp;(<a id="phr:653" class="idref" href="#phr:653"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:654" class="idref" href="#lr:654"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="phm:655" class="idref" href="#phm:655"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lmem:656" class="idref" href="#lmem:656"><span class="id" title="binder">lmem</span></a> <a id="lm:657" class="idref" href="#lm:657"><span class="id" title="binder">lm</span></a> <a id="lmem':658" class="idref" href="#lmem':658"><span class="id" title="binder">lmem'</span></a> <a id="lm':659" class="idref" href="#lm':659"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:660" class="idref" href="#vmap:660"><span class="id" title="binder">vmap</span></a> <a id="vmap':661" class="idref" href="#vmap':661"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:662" class="idref" href="#src:662"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:663" class="idref" href="#p:663"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:664" class="idref" href="#b:664"><span class="id" title="binder">b</span></a> <a id="e:665" class="idref" href="#e:665"><span class="id" title="binder">e</span></a> <a id="a:666" class="idref" href="#a:666"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:667" class="idref" href="#v:667"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:668" class="idref" href="#lw:668"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:653"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:655"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:654"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:657"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:660"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:668"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:663"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:664"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:665"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:666"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:667"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:654"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:662"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:668"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:654"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:657"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:660"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:662"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:668"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:656"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:657"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:660"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:664"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:665"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':658"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':659"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':661"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#mem_phys_log_corresponds"><span class="id" title="definition">mem_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:655"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':659"><span class="id" title="variable">lm'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':661"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget</span> <span class="id" title="var">Hsrc</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_preserves_mem_corresponds"><span class="id" title="axiom">update_cur_version_region_preserves_mem_corresponds</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machine_no_accessL"><span class="id" title="axiom">unique_in_machine_no_accessL</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_read_iscur"><span class="id" title="axiom">lreg_corresponds_read_iscur</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_lreg_corresponds_src" class="idref" href="#update_cur_version_region_lreg_corresponds_src"><span class="id" title="lemma">update_cur_version_region_lreg_corresponds_src</span></a><br/>
&nbsp;&nbsp;(<a id="phr:669" class="idref" href="#phr:669"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:670" class="idref" href="#phm:670"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:671" class="idref" href="#lr:671"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:672" class="idref" href="#lmem:672"><span class="id" title="binder">lmem</span></a> <a id="lm:673" class="idref" href="#lm:673"><span class="id" title="binder">lm</span></a> <a id="lmem':674" class="idref" href="#lmem':674"><span class="id" title="binder">lmem'</span></a> <a id="lm':675" class="idref" href="#lm':675"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:676" class="idref" href="#vmap:676"><span class="id" title="binder">vmap</span></a> <a id="vmap':677" class="idref" href="#vmap':677"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:678" class="idref" href="#src:678"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:679" class="idref" href="#p:679"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:680" class="idref" href="#b:680"><span class="id" title="binder">b</span></a> <a id="e:681" class="idref" href="#e:681"><span class="id" title="binder">e</span></a> <a id="a:682" class="idref" href="#a:682"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:683" class="idref" href="#v:683"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) (<a id="lw:684" class="idref" href="#lw:684"><span class="id" title="binder">lw</span></a> <a id="lwsrc:685" class="idref" href="#lwsrc:685"><span class="id" title="binder">lwsrc</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:669"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:670"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:671"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:673"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:676"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:685"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:679"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:680"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:681"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:682"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:683"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:684"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':677"><span class="id" title="variable">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:671"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:678"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:685"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:671"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:673"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:676"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:678"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:685"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:672"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:673"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:676"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:680"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:681"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':674"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':675"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':677"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:678"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:684"><span class="id" title="variable">lw</span></a><span class="id" title="notation">)]&gt;</span> <span class="id" title="notation">phr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.logical_mapsto.html#src:678"><span class="id" title="variable">src</span></a><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:684"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lr</span>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap':677"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;  [<span class="id" title="var">Hreg_inv</span> <span class="id" title="var">Hmem_inv</span>] <span class="id" title="var">Hget</span> <span class="id" title="var">Hcur_lw</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_insert</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">replace</span> <span class="id" title="var">phr</span> <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">_</span>]).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">insert_delete_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_insert_respects"><span class="id" title="axiom">lreg_corresponds_insert_respects</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">phr</span> := (<span class="id" title="definition">delete</span> <span class="id" title="var">src</span> <span class="id" title="var">phr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hreg_inv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstrip</span> <span class="id" title="var">Hcur_reg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="lemma">fmap_delete</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="var">lr</span>) <span class="id" title="var">Hstrip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">lw'</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">src</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hunique</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlr_src</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_registersL"><span class="id" title="definition">unique_in_registersL</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcur_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_lreg_corresponds_notin" class="idref" href="#update_cur_version_region_lreg_corresponds_notin"><span class="id" title="lemma">update_cur_version_region_lreg_corresponds_notin</span></a><br/>
&nbsp;&nbsp;(<a id="phr:686" class="idref" href="#phr:686"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="phm:687" class="idref" href="#phm:687"><span class="id" title="binder">phm</span></a> : <a class="idref" href="cap_machine.machine_base.html#Mem"><span class="id" title="definition">Mem</span></a>) (<a id="lr:688" class="idref" href="#lr:688"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:689" class="idref" href="#lmem:689"><span class="id" title="binder">lmem</span></a> <a id="lm:690" class="idref" href="#lm:690"><span class="id" title="binder">lm</span></a> <a id="lmem':691" class="idref" href="#lmem':691"><span class="id" title="binder">lmem'</span></a> <a id="lm':692" class="idref" href="#lm':692"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:693" class="idref" href="#vmap:693"><span class="id" title="binder">vmap</span></a> <a id="vmap':694" class="idref" href="#vmap':694"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="src:695" class="idref" href="#src:695"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="p:696" class="idref" href="#p:696"><span class="id" title="binder">p</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:697" class="idref" href="#b:697"><span class="id" title="binder">b</span></a> <a id="e:698" class="idref" href="#e:698"><span class="id" title="binder">e</span></a> <a id="a:699" class="idref" href="#a:699"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:700" class="idref" href="#v:700"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> ) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:686"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phm:687"><span class="id" title="variable">phm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:688"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:693"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:688"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:695"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:696"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:697"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:698"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:699"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:700"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:689"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:693"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:697"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:698"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':691"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':692"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':694"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:688"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:690"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:693"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:695"><span class="id" title="variable">src</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:696"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:697"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:698"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:699"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:700"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#src:695"><span class="id" title="variable">src</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.logical_mapsto.html#phr:686"><span class="id" title="variable">phr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#src:695"><span class="id" title="variable">src</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:688"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:686"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:688"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':694"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">HLinv</span> <span class="id" title="var">Hlr_src</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hunique</span> <span class="id" title="var">Hsrc_notin_phr</span> <span class="id" title="var">Hsrc_notin_lr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">HLinv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hreg_strip</span> <span class="id" title="var">Hreg_current</span>] [<span class="id" title="var">Hroot</span> <span class="id" title="var">Hdom</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_Forall_lookup</span> ; <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">r</span> <span class="id" title="var">lwr</span> <span class="id" title="var">Hlr_lwr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr_neq_src</span> : <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">src</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsrc_notin_lr</span>; <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hreg_current</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hunique</span> <span class="id" title="var">Hlr_src</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hunique</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hunique_reg</span> <span class="id" title="var">Hunique_mem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_Forall_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hunique_reg</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_corresponds_insert_respects_updated_vmap" class="idref" href="#lreg_corresponds_insert_respects_updated_vmap"><span class="id" title="lemma">lreg_corresponds_insert_respects_updated_vmap</span></a><br/>
&nbsp;&nbsp;(<a id="phr:701" class="idref" href="#phr:701"><span class="id" title="binder">phr</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="lr:702" class="idref" href="#lr:702"><span class="id" title="binder">lr</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="lmem:703" class="idref" href="#lmem:703"><span class="id" title="binder">lmem</span></a> <a id="lm:704" class="idref" href="#lm:704"><span class="id" title="binder">lm</span></a> <a id="lmem':705" class="idref" href="#lmem':705"><span class="id" title="binder">lmem'</span></a> <a id="lm':706" class="idref" href="#lm':706"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:707" class="idref" href="#vmap:707"><span class="id" title="binder">vmap</span></a> <a id="vmap':708" class="idref" href="#vmap':708"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="p:709" class="idref" href="#p:709"><span class="id" title="binder">p</span></a> <a id="p':710" class="idref" href="#p':710"><span class="id" title="binder">p'</span></a> <a id="p_src:711" class="idref" href="#p_src:711"><span class="id" title="binder">p_src</span></a> : <a class="idref" href="cap_machine.machine_base.html#Perm"><span class="id" title="inductive">Perm</span></a>) (<a id="b:712" class="idref" href="#b:712"><span class="id" title="binder">b</span></a> <a id="e:713" class="idref" href="#e:713"><span class="id" title="binder">e</span></a> <a id="a:714" class="idref" href="#a:714"><span class="id" title="binder">a</span></a> <a id="a':715" class="idref" href="#a':715"><span class="id" title="binder">a'</span></a> <a id="b_src:716" class="idref" href="#b_src:716"><span class="id" title="binder">b_src</span></a> <a id="e_src:717" class="idref" href="#e_src:717"><span class="id" title="binder">e_src</span></a> <a id="a_src:718" class="idref" href="#a_src:718"><span class="id" title="binder">a_src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:719" class="idref" href="#v:719"><span class="id" title="binder">v</span></a> <a id="v_src:720" class="idref" href="#v_src:720"><span class="id" title="binder">v_src</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>)<br/>
&nbsp;&nbsp;(<a id="lw:721" class="idref" href="#lw:721"><span class="id" title="binder">lw</span></a> <a id="lw':722" class="idref" href="#lw':722"><span class="id" title="binder">lw'</span></a> <a id="lwsrc:723" class="idref" href="#lwsrc:723"><span class="id" title="binder">lwsrc</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="r:724" class="idref" href="#r:724"><span class="id" title="binder">r</span></a> <a id="src:725" class="idref" href="#src:725"><span class="id" title="binder">src</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#reg_phys_log_corresponds"><span class="id" title="definition">reg_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#phr:701"><span class="id" title="variable">phr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:702"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:707"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:721"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:709"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:712"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:713"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:714"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':722"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p':710"><span class="id" title="variable">p'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:712"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:713"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':715"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:719"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#get_lcap"><span class="id" title="definition">get_lcap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:723"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LSCap"><span class="id" title="constructor">LSCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p_src:711"><span class="id" title="variable">p_src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b_src:716"><span class="id" title="variable">b_src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e_src:717"><span class="id" title="variable">e_src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a_src:718"><span class="id" title="variable">a_src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v_src:720"><span class="id" title="variable">v_src</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:703"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:704"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:707"><span class="id" title="variable">vmap</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b_src:716"><span class="id" title="variable">b_src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e_src:717"><span class="id" title="variable">e_src</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':705"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':706"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':708"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL"><span class="id" title="definition">unique_in_machineL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lr:702"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:704"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:707"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:725"><span class="id" title="variable">src</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:723"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#r:724"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:725"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:702"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:724"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:721"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lr:702"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#src:725"><span class="id" title="variable">src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lwsrc:723"><span class="id" title="variable">lwsrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':722"><span class="id" title="variable">lw'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':708"><span class="id" title="variable">vmap'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_lword_lea"><span class="id" title="axiom">is_cur_lword_lea</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lw</span> := <span class="id" title="var">lw</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_notin_is_cur_word"><span class="id" title="axiom">update_cur_version_notin_is_cur_word</span></a>; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#unique_in_machineL_not_overlap_word"><span class="id" title="axiom">unique_in_machineL_not_overlap_word</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="var">r</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#lreg_corresponds_read_iscur"><span class="id" title="axiom">lreg_corresponds_read_iscur</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery to update the memory for a given version,
    without knowing the view map 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;for&nbsp;the&nbsp;address&nbsp;a.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;lmem&nbsp;might&nbsp;not&nbsp;contain&nbsp;(a,v),<br/>
&nbsp;&nbsp;&nbsp;because&nbsp;lmem&nbsp;is&nbsp;only&nbsp;a&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;actual&nbsp;lmemory.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_addr" class="idref" href="#update_version_addr"><span class="id" title="definition">update_version_addr</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:726" class="idref" href="#lmem:726"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:727" class="idref" href="#a:727"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:728" class="idref" href="#v:728"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:726"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:727"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:728"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span> =&gt; <span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:727"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:728"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">lw</span> <span class="id" title="notation">]&gt;</span><span class="id" title="notation">lmem</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:726"><span class="id" title="variable">lmem</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Update&nbsp;the&nbsp;lmemory&nbsp;region&nbsp;for&nbsp;a&nbsp;given&nbsp;lregion.<br/>
&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;it&nbsp;only&nbsp;updates&nbsp;the&nbsp;*local*&nbsp;view&nbsp;of&nbsp;the&nbsp;lmemory,<br/>
&nbsp;&nbsp;&nbsp;which&nbsp;might&nbsp;not&nbsp;contain&nbsp;some&nbsp;of&nbsp;the&nbsp;addresses&nbsp;in&nbsp;la.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="update_version_region" class="idref" href="#update_version_region"><span class="id" title="definition">update_version_region</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:729" class="idref" href="#lmem:729"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:730" class="idref" href="#la:730"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:731" class="idref" href="#v:731"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> <a id="a:732" class="idref" href="#a:732"><span class="id" title="binder">a</span></a> <a id="lmem':733" class="idref" href="#lmem':733"><span class="id" title="binder">lmem'</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':733"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:732"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:731"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lmem:729"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:730"><span class="id" title="variable">la</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_lookup" class="idref" href="#update_version_addr_lookup"><span class="id" title="lemma">update_version_addr_lookup</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:734" class="idref" href="#lmem:734"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:735" class="idref" href="#a:735"><span class="id" title="binder">a</span></a> <a id="a':736" class="idref" href="#a':736"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:737" class="idref" href="#v:737"><span class="id" title="binder">v</span></a> <a id="v':738" class="idref" href="#v':738"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw':739" class="idref" href="#lw':739"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:734"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':736"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':738"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':739"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:734"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:735"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:737"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:734"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:735"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:737"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':736"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':738"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':739"><span class="id" title="variable">lw'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlw'</span> <span class="id" title="var">Hmax</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)); <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lw</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlw</span>; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlw'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_lookup_neq" class="idref" href="#update_version_addr_lookup_neq"><span class="id" title="lemma">update_version_addr_lookup_neq</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:740" class="idref" href="#lmem:740"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:741" class="idref" href="#a:741"><span class="id" title="binder">a</span></a> <a id="a':742" class="idref" href="#a':742"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:743" class="idref" href="#v:743"><span class="id" title="binder">v</span></a> <a id="v':744" class="idref" href="#v':744"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:741"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a':742"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:740"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:741"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:743"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':742"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':744"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:740"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':742"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':744"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_lmem" class="idref" href="#update_version_region_preserves_lmem"><span class="id" title="lemma">update_version_region_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:745" class="idref" href="#lmem:745"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:746" class="idref" href="#la:746"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:747" class="idref" href="#a:747"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:748" class="idref" href="#v:748"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:745"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:746"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:748"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:747"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:748"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:745"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:747"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:748"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_notin_preserves_lmem" class="idref" href="#update_version_region_notin_preserves_lmem"><span class="id" title="lemma">update_version_region_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:749" class="idref" href="#lmem:749"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:750" class="idref" href="#la:750"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':751" class="idref" href="#a':751"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:752" class="idref" href="#v:752"><span class="id" title="binder">v</span></a> <a id="v':753" class="idref" href="#v':753"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':751"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:750"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:749"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:750"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:752"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':751"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':753"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:749"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':751"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':753"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha'_notin_la</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_lmem'" class="idref" href="#update_version_region_preserves_lmem'"><span class="id" title="lemma">update_version_region_preserves_lmem'</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:754" class="idref" href="#lmem:754"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:755" class="idref" href="#la:755"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':756" class="idref" href="#a':756"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:757" class="idref" href="#v:757"><span class="id" title="binder">v</span></a> <a id="v':758" class="idref" href="#v':758"><span class="id" title="binder">v'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw':759" class="idref" href="#lw':759"><span class="id" title="binder">lw'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:755"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:760" class="idref" href="#a:760"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:754"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:760"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:757"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:755"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:754"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':756"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':758"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':759"><span class="id" title="variable">lw'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:754"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:755"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:757"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':756"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':758"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw':759"><span class="id" title="variable">lw'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hlw'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_lookup"><span class="id" title="axiom">update_version_addr_lookup</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_preserves_lmem_next" class="idref" href="#update_version_region_preserves_lmem_next"><span class="id" title="lemma">update_version_region_preserves_lmem_next</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:761" class="idref" href="#lmem:761"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:762" class="idref" href="#la:762"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':763" class="idref" href="#a':763"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:764" class="idref" href="#v:764"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:762"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':763"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:762"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:761"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':763"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:764"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:761"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:762"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:764"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':763"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:764"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:761"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':763"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:764"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlmem_next</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Ha'_in_la</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlwa</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //= ; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_updated_incl" class="idref" href="#update_version_addr_updated_incl"><span class="id" title="lemma">update_version_addr_updated_incl</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:765" class="idref" href="#lmem:765"><span class="id" title="binder">lmem</span></a> <a id="lmem':766" class="idref" href="#lmem':766"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:767" class="idref" href="#la:767"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:768" class="idref" href="#a:768"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:769" class="idref" href="#v:769"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:765"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:767"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:769"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:768"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:769"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:765"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:767"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:769"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#a:768"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:769"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':766"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:765"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:767"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:769"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':766"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hupd_max</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#insert_subseteq_r_inv"><span class="id" title="axiom">insert_subseteq_r_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_addr_insert" class="idref" href="#update_version_addr_insert"><span class="id" title="lemma">update_version_addr_insert</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:770" class="idref" href="#lmem:770"><span class="id" title="binder">lmem</span></a> <a id="lmem':771" class="idref" href="#lmem':771"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="a:772" class="idref" href="#a:772"><span class="id" title="binder">a</span></a> <a id="a':773" class="idref" href="#a':773"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:774" class="idref" href="#v:774"><span class="id" title="binder">v</span></a> <a id="v':775" class="idref" href="#v':775"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="la:776" class="idref" href="#la:776"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lw:777" class="idref" href="#lw:777"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:770"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':773"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':775"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':773"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':775"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:777"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:776"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:774"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#a:772"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#v:774"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':771"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:770"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:776"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:774"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':771"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:770"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:776"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:774"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#a:772"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:774"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':771"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hupd_mem_incl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><span class="id" title="var">lw</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a'</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a'</span><br/>
&nbsp;&nbsp;; (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a'</span> ; [| <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span> ])<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hupd_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a'</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#insert_weaken"><span class="id" title="axiom">insert_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_insert" class="idref" href="#update_version_region_insert"><span class="id" title="lemma">update_version_region_insert</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:778" class="idref" href="#lmem:778"><span class="id" title="binder">lmem</span></a> <a id="lmem':779" class="idref" href="#lmem':779"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:780" class="idref" href="#la:780"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':781" class="idref" href="#a':781"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:782" class="idref" href="#v:782"><span class="id" title="binder">v</span></a> <a id="v':783" class="idref" href="#v':783"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:784" class="idref" href="#lw:784"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:780"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':781"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:780"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:778"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':781"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':783"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:785" class="idref" href="#a:785"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:778"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:785"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:782"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:780"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':781"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':783"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:784"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:780"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:782"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':779"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:778"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:780"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:782"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':779"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_notin_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_delete_subseteq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><span class="id" title="var">lw</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <span class="id" title="var">la</span> <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_insert"><span class="id" title="axiom">update_version_addr_insert</span></a> ; <span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">a'</span> := <span class="id" title="var">a'</span>) (<span class="id" title="var">v'</span> := <span class="id" title="var">v'</span>) (<span class="id" title="var">lw</span> := <span class="id" title="var">lw</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_updated_incl"><span class="id" title="axiom">update_version_addr_updated_incl</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_version_region_insert_inv" class="idref" href="#update_version_region_insert_inv"><span class="id" title="lemma">update_version_region_insert_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:786" class="idref" href="#lmem:786"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:787" class="idref" href="#la:787"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':788" class="idref" href="#a':788"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:789" class="idref" href="#v:789"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:790" class="idref" href="#lw:790"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:787"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:786"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':788"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:789"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:791" class="idref" href="#a:791"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:786"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:791"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:789"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:787"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:786"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:787"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:789"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':788"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:789"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.logical_mapsto.html#lw:790"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:787"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:789"><span class="id" title="variable">v</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">lmem</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -!/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hneq</span>]; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlmem_a</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">last</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="var">last</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_addr_update_version_addr" class="idref" href="#update_cur_version_addr_update_version_addr"><span class="id" title="lemma">update_cur_version_addr_update_version_addr</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:792" class="idref" href="#lmem:792"><span class="id" title="binder">lmem</span></a> <a id="lm:793" class="idref" href="#lm:793"><span class="id" title="binder">lm</span></a> <a id="lmem':794" class="idref" href="#lmem':794"><span class="id" title="binder">lmem'</span></a> <a id="lm':795" class="idref" href="#lm':795"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:796" class="idref" href="#vmap:796"><span class="id" title="binder">vmap</span></a> <a id="vmap':797" class="idref" href="#vmap':797"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="a:798" class="idref" href="#a:798"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:799" class="idref" href="#v:799"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:792"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:793"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lm:793"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:798"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:799"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:793"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:798"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:799"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#vmap:796"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:798"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:799"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:792"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:793"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:796"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:798"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':794"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':795"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':797"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:792"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:798"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:799"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':794"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">Hmaxv</span> [<span class="id" title="var">lw</span> <span class="id" title="var">Hlw_a</span>] <span class="id" title="var">Hcur</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="var">Hcur</span> <span class="id" title="var">Hlw_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlmem_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem_a</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw_a</span> ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaxv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_r</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_update_version_region_aux" class="idref" href="#update_cur_version_region_update_version_region_aux"><span class="id" title="lemma">update_cur_version_region_update_version_region_aux</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:800" class="idref" href="#lmem:800"><span class="id" title="binder">lmem</span></a> <a id="lm:801" class="idref" href="#lm:801"><span class="id" title="binder">lm</span></a> <a id="lmem0:802" class="idref" href="#lmem0:802"><span class="id" title="binder">lmem0</span></a> <a id="lm0:803" class="idref" href="#lm0:803"><span class="id" title="binder">lm0</span></a> <a id="lmem':804" class="idref" href="#lmem':804"><span class="id" title="binder">lmem'</span></a> <a id="lm':805" class="idref" href="#lm':805"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:806" class="idref" href="#vmap:806"><span class="id" title="binder">vmap</span></a> <a id="vmap0:807" class="idref" href="#vmap0:807"><span class="id" title="binder">vmap0</span></a> <a id="vmap':808" class="idref" href="#vmap':808"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:809" class="idref" href="#a:809"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="la:810" class="idref" href="#la:810"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:811" class="idref" href="#v:811"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:812" class="idref" href="#lw:812"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a:809"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:810"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:800"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:801"><span class="id" title="variable">lm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:806"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:809"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:811"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:801"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:809"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:811"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:812"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:801"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:809"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:811"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:800"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:801"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:806"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:810"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem0:802"><span class="id" title="variable">lmem0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:803"><span class="id" title="variable">lm0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:807"><span class="id" title="variable">vmap0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:802"><span class="id" title="variable">lmem0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm0:803"><span class="id" title="variable">lm0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap0:807"><span class="id" title="variable">vmap0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:809"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':804"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':805"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':808"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:800"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:810"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:811"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem0:802"><span class="id" title="variable">lmem0</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:800"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:810"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:811"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':804"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">HcurMap_a</span> <span class="id" title="var">Hlwa</span> <span class="id" title="var">HmaxMap_a</span> <span class="id" title="var">Hupd</span> <span class="id" title="var">Hupd0</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hvmap_mem0_a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">lwa'</span> <span class="id" title="var">Hlwa'0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lwa'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem0_a'</span> <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa'0</span>; [|<span class="id" title="var">eassumption</span>] ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hlmem0_a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_incl_lmem"><span class="id" title="axiom">update_cur_version_addr_incl_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lmem</span></a>;<span class="id" title="var">cycle</span> 1 ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_update_version_region" class="idref" href="#update_cur_version_region_update_version_region"><span class="id" title="lemma">update_cur_version_region_update_version_region</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:813" class="idref" href="#lmem:813"><span class="id" title="binder">lmem</span></a> <a id="lm:814" class="idref" href="#lm:814"><span class="id" title="binder">lm</span></a> <a id="lmem':815" class="idref" href="#lmem':815"><span class="id" title="binder">lmem'</span></a> <a id="lm':816" class="idref" href="#lm':816"><span class="id" title="binder">lm'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:817" class="idref" href="#vmap:817"><span class="id" title="binder">vmap</span></a> <a id="vmap':818" class="idref" href="#vmap':818"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>)<br/>
&nbsp;&nbsp;(<a id="la:819" class="idref" href="#la:819"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:820" class="idref" href="#v:820"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:813"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:814"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:821" class="idref" href="#a0:821"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:814"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:821"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:820"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:822" class="idref" href="#a0:822"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:817"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:822"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:820"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:823" class="idref" href="#a0:823"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lm:814"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:823"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:820"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:813"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:814"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:817"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':815"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':816"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':818"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:813"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:819"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:820"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':815"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">HmemMap</span> <span class="id" title="var">HcurMap</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hupd</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> ( <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_map_eq</span> ; <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HmemMap_a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hupd0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hupd0'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lm0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlm0_max</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lm0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lwa</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlwa'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_update_version_addr"><span class="id" title="axiom">update_cur_version_addr_update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_preserves_lmem_incl"><span class="id" title="axiom">update_cur_version_region_preserves_lmem_incl</span></a> ;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lmem0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem_incl0</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lmem'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem_incl'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_update_version_region_aux"><span class="id" title="axiom">update_cur_version_region_update_version_region_aux</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_a</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem_incl</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem_incl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HcurMap_a</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="var">HcurMap_a</span> /= <span class="id" title="var">Hlmem_incl</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Machinery for valid update of the lmemory 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;We&nbsp;require&nbsp;⊆,&nbsp;because&nbsp;lmem&nbsp;might&nbsp;contain&nbsp;only&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;updated&nbsp;region,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;means&nbsp;that&nbsp;lmem'&nbsp;contains&nbsp;both:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;known&nbsp;from&nbsp;lmem<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;updated&nbsp;addresses&nbsp;a&nbsp;∈&nbsp;<span class="inlinecode"><span class="id" title="var">b</span>,</span> <span class="inlinecode"><span class="id" title="var">e</span>),</span> <span class="inlinecode"><span class="id" title="var">unknown</span></span> <span class="inlinecode"><span class="id" title="var">from</span></span> <span class="inlinecode"><span class="id" title="var">lmem</span></span>

       <span class="inlinecode"><span class="id" title="var">We</span></span> <span class="inlinecode"><span class="id" title="var">also</span></span> <span class="inlinecode"><span class="id" title="var">require</span></span> <span class="inlinecode"><span class="id" title="var">that</span></span> <span class="inlinecode"><span class="id" title="var">every</span></span> <span class="inlinecode"><span class="id" title="var">addresses</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">the</span></span> <span class="inlinecode"><span class="id" title="var">region</span></span> <span class="inlinecode"><span class="id" title="var">have</span></span> <span class="inlinecode"><span class="id" title="var">actually</span></span> <span class="inlinecode"><span class="id" title="var">been</span></span> <span class="inlinecode"><span class="id" title="var">updated</span>,</span>
       <span class="inlinecode"><span class="id" title="var">although</span></span> <span class="inlinecode"><span class="id" title="var">we</span></span> <span class="inlinecode"><span class="id" title="var">might</span></span> <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">know</span></span> <span class="inlinecode"><span class="id" title="var">their</span></span> <span class="inlinecode"><span class="id" title="var">value</span></span>
 <span class="inlinecode"></span>*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="is_valid_updated_lmemory" class="idref" href="#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:824" class="idref" href="#lmem:824"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:825" class="idref" href="#la:825"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:826" class="idref" href="#v:826"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lmem':827" class="idref" href="#lmem':827"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:824"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:825"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:826"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':827"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;unclear&nbsp;whether&nbsp;this&nbsp;is&nbsp;useful&nbsp;in&nbsp;the&nbsp;def&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:828" class="idref" href="#a:828"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:824"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:828"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:826"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:825"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:829" class="idref" href="#a:829"><span class="id" title="binder">a</span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem':827"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:829"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:826"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:825"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_notin_preserves_lmem" class="idref" href="#is_valid_updated_lmemory_notin_preserves_lmem"><span class="id" title="lemma">is_valid_updated_lmemory_notin_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:830" class="idref" href="#lmem:830"><span class="id" title="binder">lmem</span></a> <a id="lmem':831" class="idref" href="#lmem':831"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:832" class="idref" href="#la:832"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':833" class="idref" href="#a':833"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:834" class="idref" href="#v:834"><span class="id" title="binder">v</span></a> <a id="v':835" class="idref" href="#v':835"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:836" class="idref" href="#lw:836"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':833"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:832"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:830"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:832"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:834"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':831"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:830"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':833"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':835"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:836"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':831"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':833"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':835"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:836"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ha'_notin_la</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="lemma">map_subseteq_spec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa'</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_preserves_lmem" class="idref" href="#is_valid_updated_lmemory_preserves_lmem"><span class="id" title="lemma">is_valid_updated_lmemory_preserves_lmem</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:837" class="idref" href="#lmem:837"><span class="id" title="binder">lmem</span></a> <a id="lmem':838" class="idref" href="#lmem':838"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:839" class="idref" href="#la:839"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':840" class="idref" href="#a':840"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:841" class="idref" href="#v:841"><span class="id" title="binder">v</span></a> <a id="v':842" class="idref" href="#v':842"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:843" class="idref" href="#lw:843"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:839"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:837"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:839"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:841"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':838"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:837"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':840"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':842"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:843"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':838"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':840"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':842"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:843"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HmaxMem_a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha'_neq_a</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq_v</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_lookup"><span class="id" title="axiom">update_version_addr_lookup</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr_updated_incl"><span class="id" title="axiom">update_version_addr_updated_incl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_lmem_incl" class="idref" href="#is_valid_updated_lmemory_lmem_incl"><span class="id" title="lemma">is_valid_updated_lmemory_lmem_incl</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:844" class="idref" href="#lmem:844"><span class="id" title="binder">lmem</span></a> <a id="lmem':845" class="idref" href="#lmem':845"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:846" class="idref" href="#la:846"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':847" class="idref" href="#a':847"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:848" class="idref" href="#v:848"><span class="id" title="binder">v</span></a> <a id="v':849" class="idref" href="#v':849"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:850" class="idref" href="#lw:850"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:846"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:844"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:846"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:848"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':845"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:844"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':845"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory_preserves_lmem"><span class="id" title="axiom">is_valid_updated_lmemory_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_preserves_lmem_next" class="idref" href="#is_valid_updated_lmemory_preserves_lmem_next"><span class="id" title="lemma">is_valid_updated_lmemory_preserves_lmem_next</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:851" class="idref" href="#lmem:851"><span class="id" title="binder">lmem</span></a> <a id="lmem':852" class="idref" href="#lmem':852"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:853" class="idref" href="#la:853"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':854" class="idref" href="#a':854"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:855" class="idref" href="#v:855"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:856" class="idref" href="#lw:856"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:853"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':854"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:853"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:851"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:853"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':852"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:857" class="idref" href="#a:857"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:851"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:857"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:853"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:851"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':854"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:856"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem':852"><span class="id" title="variable">lmem'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':854"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:855"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:856"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> (<span class="id" title="var">Hcompatibility</span> &amp; <span class="id" title="var">HmaxMem</span> &amp; <span class="id" title="var">Hupdated</span>) <span class="id" title="var">Hmax_la</span> <span class="id" title="var">Hlmem</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hupdated_a</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a> <span class="id" title="lemma">map_subseteq_spec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcompatibility</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcompatibility</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="var">_</span> <span class="id" title="var">la</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlwa'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha'_in_la</span>] ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'_in_la'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_in_la'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'_lookup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax_la</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem_next"><span class="id" title="axiom">update_version_region_preserves_lmem_next</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">Ha'_in_la</span>] ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlmem</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem_next"><span class="id" title="axiom">update_version_region_preserves_lmem_next</span></a> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_in_la</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'_in_la</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax_la</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_insert" class="idref" href="#is_valid_updated_lmemory_insert"><span class="id" title="lemma">is_valid_updated_lmemory_insert</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:858" class="idref" href="#lmem:858"><span class="id" title="binder">lmem</span></a> <a id="lmem':859" class="idref" href="#lmem':859"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:860" class="idref" href="#la:860"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':861" class="idref" href="#a':861"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:862" class="idref" href="#v:862"><span class="id" title="binder">v</span></a> <a id="v':863" class="idref" href="#v':863"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:864" class="idref" href="#lw:864"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:860"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':861"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:860"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:858"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':861"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':863"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:865" class="idref" href="#a:865"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:858"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:865"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:862"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:860"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':861"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':863"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:864"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:860"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:862"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':859"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:858"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:860"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:862"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':859"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_notin_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">HmaxMap'</span> &amp; <span class="id" title="var">HnextMap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_insert"><span class="id" title="axiom">update_version_region_insert</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_valid_updated_lmemory_insert'" class="idref" href="#is_valid_updated_lmemory_insert'"><span class="id" title="lemma">is_valid_updated_lmemory_insert'</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:866" class="idref" href="#lmem:866"><span class="id" title="binder">lmem</span></a> <a id="lmem':867" class="idref" href="#lmem':867"><span class="id" title="binder">lmem'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:868" class="idref" href="#la:868"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':869" class="idref" href="#a':869"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:870" class="idref" href="#v:870"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lw:871" class="idref" href="#lw:871"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:868"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':869"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:868"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:866"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':869"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="a:872" class="idref" href="#a:872"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lmem:866"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:872"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:868"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':869"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:871"><span class="id" title="variable">lw</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">lmem</span>) <a class="idref" href="cap_machine.logical_mapsto.html#la:868"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':867"><span class="id" title="variable">lmem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:866"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:868"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:870"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':867"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span> ; <span class="id" title="tactic">intros</span> [<span class="id" title="var">a0</span> <span class="id" title="var">v0</span>] <span class="id" title="var">lw0</span> <span class="id" title="var">Hlw0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="var">last</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlmem_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw0</span> ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hupd</span> &amp; <span class="id" title="var">HmaxMap'</span> &amp; <span class="id" title="var">HnextMap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_subseteq_trans"><span class="id" title="axiom">map_subseteq_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_insert_inv"><span class="id" title="axiom">update_version_region_insert_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;Maybe&nbsp;the&nbsp;induction&nbsp;case&nbsp;of&nbsp;this&nbsp;proof&nbsp;could&nbsp;be&nbsp;done&nbsp;separately&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="update_cur_version_region_valid" class="idref" href="#update_cur_version_region_valid"><span class="id" title="lemma">update_cur_version_region_valid</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:873" class="idref" href="#lmem:873"><span class="id" title="binder">lmem</span></a> <a id="lm:874" class="idref" href="#lm:874"><span class="id" title="binder">lm</span></a> <a id="lmem':875" class="idref" href="#lmem':875"><span class="id" title="binder">lmem'</span></a> <a id="lm':876" class="idref" href="#lm':876"><span class="id" title="binder">lm'</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="vmap:877" class="idref" href="#vmap:877"><span class="id" title="binder">vmap</span></a> <a id="vmap':878" class="idref" href="#vmap':878"><span class="id" title="binder">vmap'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#VMap"><span class="id" title="definition">VMap</span></a>) (<a id="la:879" class="idref" href="#la:879"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:880" class="idref" href="#v:880"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lmem:873"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:874"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:881" class="idref" href="#a0:881"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:877"><span class="id" title="variable">vmap</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#a0:881"><span class="id" title="variable">a0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:880"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:882" class="idref" href="#a0:882"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lm:874"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:882"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:880"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a0:883" class="idref" href="#a0:883"><span class="id" title="binder">a0</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:874"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:883"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:880"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region"><span class="id" title="definition">update_cur_version_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:873"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:874"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:877"><span class="id" title="variable">vmap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lmem':875"><span class="id" title="variable">lmem'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm':876"><span class="id" title="variable">lm'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap':878"><span class="id" title="variable">vmap'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:873"><span class="id" title="variable">lmem</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:879"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:880"><span class="id" title="variable">v</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lmem':875"><span class="id" title="variable">lmem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">lm</span> <span class="id" title="var">lmem'</span> <span class="id" title="var">lm'</span> <span class="id" title="var">vmap</span> <span class="id" title="var">vmap'</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlmem_incl</span> <span class="id" title="var">HcurMap</span> <span class="id" title="var">HmemMap</span> <span class="id" title="var">HmaxMap</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HmemMap_a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <a class="idref" href="cap_machine.logical_mapsto.html#is_valid_updated_lmemory"><span class="id" title="definition">is_valid_updated_lmemory</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="var">lmem0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hvalid</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /= -/(<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hupd'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">vmap0</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcur0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">lmem0</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lmem'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem_incl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_incl_lmem"><span class="id" title="axiom">update_cur_version_addr_incl_lmem</span></a>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lmem</span></a>; <span class="id" title="var">cycle</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">lmem'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hupd_incl_lmem'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_subseteq_trans"><span class="id" title="axiom">map_subseteq_trans</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_version_addr"><span class="id" title="definition">update_version_addr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.logical_mapsto.html#update_version_region"><span class="id" title="definition">update_version_region</span></a> <span class="id" title="var">lmem</span> <span class="id" title="var">la</span> <span class="id" title="var">v</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa'</span>|]<span class="id" title="var">eqn</span>:<span class="id" title="var">Hupd_lmem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lwa'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem_a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_version_region_preserves_lmem"><span class="id" title="axiom">update_version_region_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd_lmem</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lmem0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lwa'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlmem0_a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lm0</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">lwa'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlm0_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_preserves_lmem_incl"><span class="id" title="axiom">update_cur_version_region_preserves_lmem_incl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_next"><span class="id" title="axiom">update_cur_version_addr_next</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_impl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken_None</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span>. <span class="comment">(*&nbsp;easy,&nbsp;because&nbsp;lmem&nbsp;⊆&nbsp;lm&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_cur"><span class="id" title="axiom">update_cur_version_region_notin_preserves_cur</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HcurMap_a</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lm"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr"><span class="id" title="definition">update_cur_version_addr</span></a> <span class="id" title="var">HcurMap_a</span> <span class="id" title="var">Hlwa</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hupd0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'_in_la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hsome</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_in_la</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Forall_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> ; <span class="id" title="tactic">eauto</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa0</span> <span class="id" title="var">Hlwa0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lwa0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) <span class="id" title="keyword">as</span> [| <span class="id" title="var">Ha'_neq_a</span>]; <span class="id" title="var">simplify_map_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">last</span> (<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_addr_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_addr_notin_preserves_lmem</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#update_cur_version_region_notin_preserves_lmem"><span class="id" title="axiom">update_cur_version_region_notin_preserves_lmem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlwa0</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlwa0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmaxMap_a</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Logical machine 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="isCorrectLPC" class="idref" href="#isCorrectLPC"><span class="id" title="definition, inductive"><span id="isCorrectLPC_ind" class="id"><span id="isCorrectLPC_sind" class="id">isCorrectLPC</span></span></span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="isCorrectLPC_intro" class="idref" href="#isCorrectLPC_intro"><span class="id" title="constructor">isCorrectLPC_intro</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lpc:886" class="idref" href="#lpc:886"><span class="id" title="binder">lpc</span></a> <a id="p:887" class="idref" href="#p:887"><span class="id" title="binder">p</span></a> (<a id="b:888" class="idref" href="#b:888"><span class="id" title="binder">b</span></a> <a id="e:889" class="idref" href="#e:889"><span class="id" title="binder">e</span></a> <a id="a:890" class="idref" href="#a:890"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:886"><span class="id" title="variable">lpc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:887"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:888"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:889"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:890"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:887"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:888"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:889"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:890"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC:884"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lpc:886"><span class="id" title="variable">lpc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC" class="idref" href="#isCorrectLPC_isCorrectPC"><span class="id" title="lemma">isCorrectLPC_isCorrectPC</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:891" class="idref" href="#lw:891"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:891"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:891"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectPC_isCorrectLPC" class="idref" href="#isCorrectPC_isCorrectLPC"><span class="id" title="lemma">isCorrectPC_isCorrectLPC</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:892" class="idref" href="#lw:892"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:892"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:892"><span class="id" title="variable">lw</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lw</span> <span class="id" title="var">Hcorrect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_word</span> <span class="id" title="var">lw</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hcorrect</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_isCorrectPC_iff" class="idref" href="#isCorrectLPC_isCorrectPC_iff"><span class="id" title="lemma">isCorrectLPC_isCorrectPC_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:893" class="idref" href="#lw:893"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:893"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC"><span class="id" title="inductive">isCorrectPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:893"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ; [<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC"><span class="id" title="axiom">isCorrectLPC_isCorrectPC</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectPC_isCorrectLPC"><span class="id" title="axiom">isCorrectPC_isCorrectLPC</span></a>].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_perm" class="idref" href="#not_isCorrectLPC_perm"><span class="id" title="lemma">not_isCorrectLPC_perm</span></a> <a id="p:894" class="idref" href="#p:894"><span class="id" title="binder">p</span></a> <a id="b:895" class="idref" href="#b:895"><span class="id" title="binder">b</span></a> <a id="e:896" class="idref" href="#e:896"><span class="id" title="binder">e</span></a> <a id="a:897" class="idref" href="#a:897"><span class="id" title="binder">a</span></a> <a id="v:898" class="idref" href="#v:898"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#p:894"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:894"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:894"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:895"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:896"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:897"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:898"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_perm"><span class="id" title="axiom">not_isCorrectPC_perm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_isCorrectLPC_bounds" class="idref" href="#not_isCorrectLPC_bounds"><span class="id" title="lemma">not_isCorrectLPC_bounds</span></a> <a id="p:899" class="idref" href="#p:899"><span class="id" title="binder">p</span></a> <a id="b:900" class="idref" href="#b:900"><span class="id" title="binder">b</span></a> <a id="e:901" class="idref" href="#e:901"><span class="id" title="binder">e</span></a> <a id="a:902" class="idref" href="#a:902"><span class="id" title="binder">a</span></a> <a id="v:903" class="idref" href="#v:903"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#b:900"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:902"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#ecb49afb136c57143f8ddd1e3e9a03fe"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:901"><span class="id" title="variable">e</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:899"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:900"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:901"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:902"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:903"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_isCorrectPC_iff"><span class="id" title="axiom">isCorrectLPC_isCorrectPC_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#not_isCorrectPC_bounds"><span class="id" title="axiom">not_isCorrectPC_bounds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">contra</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_ExecPCPerm_InBounds" class="idref" href="#isCorrectLPC_ExecPCPerm_InBounds"><span class="id" title="lemma">isCorrectLPC_ExecPCPerm_InBounds</span></a> <a id="p:904" class="idref" href="#p:904"><span class="id" title="binder">p</span></a> <a id="b:905" class="idref" href="#b:905"><span class="id" title="binder">b</span></a> <a id="e:906" class="idref" href="#e:906"><span class="id" title="binder">e</span></a> <a id="a:907" class="idref" href="#a:907"><span class="id" title="binder">a</span></a> <a id="v:908" class="idref" href="#v:908"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:904"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:905"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:906"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:907"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:904"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:905"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:906"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:907"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:908"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#ExecPCPerm"><span class="id" title="definition">ExecPCPerm</span></a>, <a class="idref" href="machine_utils.finz_base.html#InBounds"><span class="id" title="definition">InBounds</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPC_ExecPCPerm_InBounds"><span class="id" title="axiom">isCorrectPC_ExecPCPerm_InBounds</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isCorrectLPC_dec" class="idref" href="#isCorrectLPC_dec"><span class="id" title="lemma">isCorrectLPC_dec</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lw:909" class="idref" href="#lw:909"><span class="id" title="binder">lw</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:909"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:909"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lw</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">case_eq</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> | <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_le_dec"><span class="id" title="instance">finz_le_dec</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="machine_utils.finz_base.html#finz_lt_dec"><span class="id" title="instance">finz_lt_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_range_is_correctLPC" class="idref" href="#in_range_is_correctLPC"><span class="id" title="lemma">in_range_is_correctLPC</span></a> <a id="p:912" class="idref" href="#p:912"><span class="id" title="binder">p</span></a> <a id="b:913" class="idref" href="#b:913"><span class="id" title="binder">b</span></a> <a id="e:914" class="idref" href="#e:914"><span class="id" title="binder">e</span></a> <a id="a:915" class="idref" href="#a:915"><span class="id" title="binder">a</span></a> <a id="b':916" class="idref" href="#b':916"><span class="id" title="binder">b'</span></a> <a id="e':917" class="idref" href="#e':917"><span class="id" title="binder">e'</span></a> <a id="v:918" class="idref" href="#v:918"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:912"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:913"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:914"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:915"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:918"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':916"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:913"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#e:914"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':917"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#b':916"><span class="id" title="variable">b'</span></a> <a class="idref" href="cap_machine.addr_reg.html#8ccc7a9bb9ba1c27ed0dba9945a4cbb0"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:915"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:915"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.addr_reg.html#::Addr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e':917"><span class="id" title="variable">e'</span></a>)%<span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hvpc</span> [<span class="id" title="var">Hb</span> <span class="id" title="var">He</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvpc</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_addr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="dec_lpc" class="idref" href="#dec_lpc"><span class="id" title="instance">dec_lpc</span></a> <a id="lc:919" class="idref" href="#lc:919"><span class="id" title="binder">lc</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC"><span class="id" title="inductive">isCorrectLPC</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lc:919"><span class="id" title="variable">lc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#isCorrectLPC_dec"><span class="id" title="axiom">isCorrectLPC_dec</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lreg_lookup" class="idref" href="#lreg_lookup"><span class="id" title="lemma">lreg_lookup</span></a> <a id="regs:920" class="idref" href="#regs:920"><span class="id" title="binder">regs</span></a> (<a id="r:921" class="idref" href="#r:921"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<a id="lw:922" class="idref" href="#lw:922"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#regs:920"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:921"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:922"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#regs:920"><span class="id" title="variable">regs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r:921"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:922"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.logical_mapsto.html#lreg_strip"><span class="id" title="definition">lreg_strip</span></a> <span class="id" title="method">lookup_fmap</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_neq" class="idref" href="#laddr_neq"><span class="id" title="lemma">laddr_neq</span></a> (<a id="la1:923" class="idref" href="#la1:923"><span class="id" title="binder">la1</span></a> <a id="la2:924" class="idref" href="#la2:924"><span class="id" title="binder">la2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#la2:924"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:923"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.1</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#la2:924"><span class="id" title="variable">la2</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la1:923"><span class="id" title="variable">la1</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#la1:923"><span class="id" title="variable">la1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la2:924"><span class="id" title="variable">la2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_neq'" class="idref" href="#laddr_neq'"><span class="id" title="lemma">laddr_neq'</span></a> (<a id="a1:925" class="idref" href="#a1:925"><span class="id" title="binder">a1</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v1:926" class="idref" href="#v1:926"><span class="id" title="binder">v1</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="a2:927" class="idref" href="#a2:927"><span class="id" title="binder">a2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v2:928" class="idref" href="#v2:928"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.logical_mapsto.html#a1:925"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:927"><span class="id" title="variable">a2</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v1:926"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:928"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:925"><span class="id" title="variable">a1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v1:926"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a2:927"><span class="id" title="variable">a2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v2:928"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Bool.Bool.html#andb_false_iff"><span class="id" title="lemma">andb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> | <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_neq"><span class="id" title="lemma">Nat.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span> ]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="updatePcPermL" class="idref" href="#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> (<a id="lw:929" class="idref" href="#lw:929"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:929"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lw:929"><span class="id" title="variable">lw</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="updatePcPermL_spec" class="idref" href="#updatePcPermL_spec"><span class="id" title="lemma">updatePcPermL_spec</span></a> (<a id="lw:931" class="idref" href="#lw:931"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:931"><span class="id" title="variable">lw</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#updatePcPerm"><span class="id" title="definition">updatePcPerm</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:931"><span class="id" title="variable">lw</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_cur_updatePcPermL" class="idref" href="#is_cur_updatePcPermL"><span class="id" title="lemma">is_cur_updatePcPermL</span></a> (<a id="lw:932" class="idref" href="#lw:932"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <a id="vmap:933" class="idref" href="#vmap:933"><span class="id" title="binder">vmap</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:932"><span class="id" title="variable">lw</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:933"><span class="id" title="variable">vmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#is_cur_word"><span class="id" title="definition">is_cur_word</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#updatePcPermL"><span class="id" title="definition">updatePcPermL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:932"><span class="id" title="variable">lw</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#vmap:933"><span class="id" title="variable">vmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_lword</span> <span class="id" title="var">lw</span> ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hbounds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="z_of_argumentL" class="idref" href="#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> (<a id="lregs:934" class="idref" href="#lregs:934"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:935" class="idref" href="#a:935"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:935"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:934"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="word_of_argumentL" class="idref" href="#word_of_argumentL"><span class="id" title="definition">word_of_argumentL</span></a> (<a id="lregs:937" class="idref" href="#lregs:937"><span class="id" title="binder">lregs</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>) (<a id="a:938" class="idref" href="#a:938"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#a:938"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r</span> =&gt; <a class="idref" href="cap_machine.logical_mapsto.html#lregs:937"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addr_of_argumentL" class="idref" href="#addr_of_argumentL"><span class="id" title="definition">addr_of_argumentL</span></a> <a id="lregs:940" class="idref" href="#lregs:940"><span class="id" title="binder">lregs</span></a> <a id="src:941" class="idref" href="#src:941"><span class="id" title="binder">src</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:940"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:941"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="cap_machine.addr_reg.html#z_to_addr"><span class="id" title="abbreviation">z_to_addr</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="otype_of_argumentL" class="idref" href="#otype_of_argumentL"><span class="id" title="definition">otype_of_argumentL</span></a> <a id="lregs:942" class="idref" href="#lregs:942"><span class="id" title="binder">lregs</span></a> <a id="src:943" class="idref" href="#src:943"><span class="id" title="binder">src</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#z_of_argumentL"><span class="id" title="definition">z_of_argumentL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:942"><span class="id" title="variable">lregs</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#src:943"><span class="id" title="variable">src</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.addr_reg.html#z_to_otype"><span class="id" title="abbreviation">z_to_otype</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_mutable_rangeL" class="idref" href="#is_mutable_rangeL"><span class="id" title="definition">is_mutable_rangeL</span></a> (<a id="lw:944" class="idref" href="#lw:944"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:944"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> | <a class="idref" href="cap_machine.machine_base.html#E"><span class="id" title="constructor">E</span></a>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="nonZeroL" class="idref" href="#nonZeroL"><span class="id" title="definition">nonZeroL</span></a> (<a id="lw:947" class="idref" href="#lw:947"><span class="id" title="binder">lw</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:947"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zbool.html#Zneq_bool"><span class="id" title="definition">Zneq_bool</span></a> <span class="id" title="var">n</span> 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealbL" class="idref" href="#is_sealbL"><span class="id" title="definition">is_sealbL</span></a> (<a id="lw:949" class="idref" href="#lw:949"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:949"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealable"><span class="id" title="constructor">LWSealable</span></a> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealrL" class="idref" href="#is_sealrL"><span class="id" title="definition">is_sealrL</span></a> (<a id="lw:951" class="idref" href="#lw:951"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:951"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LSealRange"><span class="id" title="abbreviation">LSealRange</span></a> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealedL" class="idref" href="#is_sealedL"><span class="id" title="definition">is_sealedL</span></a> (<a id="lw:953" class="idref" href="#lw:953"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:953"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">a</span> <span class="id" title="var">sb</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_zL" class="idref" href="#is_zL"><span class="id" title="definition">is_zL</span></a> (<a id="lw:955" class="idref" href="#lw:955"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:955"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> <span class="id" title="var">z</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;|  <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_sealed_with_oL" class="idref" href="#is_sealed_with_oL"><span class="id" title="definition">is_sealed_with_oL</span></a> (<a id="lw:957" class="idref" href="#lw:957"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="o:958" class="idref" href="#o:958"><span class="id" title="binder">o</span></a> : <a class="idref" href="cap_machine.addr_reg.html#OType"><span class="id" title="abbreviation">OType</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:957"><span class="id" title="variable">lw</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="cap_machine.logical_mapsto.html#LWSealed"><span class="id" title="constructor">LWSealed</span></a> <span class="id" title="var">o'</span> <span class="id" title="var">sb</span> =&gt; (<a class="idref" href="cap_machine.logical_mapsto.html#o:958"><span class="id" title="variable">o</span></a> <a class="idref" href="cap_machine.addr_reg.html#fc98ca1de87871caf368dfbeb46e594a"><span class="id" title="notation">=?</span></a> <span class="id" title="var">o'</span>)%<span class="id" title="var">ot</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="laddr_ne_reg_ne" class="idref" href="#laddr_ne_reg_ne"><span class="id" title="lemma">laddr_ne_reg_ne</span></a> {<a id="lregs:960" class="idref" href="#lregs:960"><span class="id" title="binder">lregs</span></a> : <span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="cap_machine.logical_mapsto.html#LReg"><span class="id" title="definition">LReg</span></a>} {<a id="r1:961" class="idref" href="#r1:961"><span class="id" title="binder">r1</span></a> <a id="r2:962" class="idref" href="#r2:962"><span class="id" title="binder">r2</span></a> : <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>}<br/>
&nbsp;&nbsp;{<a id="p0:963" class="idref" href="#p0:963"><span class="id" title="binder">p0</span></a> <a id="b0:964" class="idref" href="#b0:964"><span class="id" title="binder">b0</span></a> <a id="e0:965" class="idref" href="#e0:965"><span class="id" title="binder">e0</span></a> <a id="a0:966" class="idref" href="#a0:966"><span class="id" title="binder">a0</span></a> <a id="v0:967" class="idref" href="#v0:967"><span class="id" title="binder">v0</span></a> <a id="p:968" class="idref" href="#p:968"><span class="id" title="binder">p</span></a> <a id="b:969" class="idref" href="#b:969"><span class="id" title="binder">b</span></a> <a id="e:970" class="idref" href="#e:970"><span class="id" title="binder">e</span></a> <a id="a:971" class="idref" href="#a:971"><span class="id" title="binder">a</span></a> <a id="v:972" class="idref" href="#v:972"><span class="id" title="binder">v</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#lregs:960"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r1:961"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p0:963"><span class="id" title="variable">p0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b0:964"><span class="id" title="variable">b0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e0:965"><span class="id" title="variable">e0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a0:966"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:967"><span class="id" title="variable">v0</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lregs:960"><span class="id" title="variable">lregs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.logical_mapsto.html#r2:962"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#LCap"><span class="id" title="abbreviation">LCap</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#p:968"><span class="id" title="variable">p</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:969"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:970"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:971"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:972"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a0:966"><span class="id" title="variable">a0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v0:967"><span class="id" title="variable">v0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:971"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:972"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r1:961"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#r2:962"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span> <span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r2</span>)); <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Instantiation of the program logic 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;CMRΑ&nbsp;for&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="memG" class="idref" href="#memG"><span class="id" title="record">memG</span></a> <a id="3180159a27174059f3daa2ffbe770e3c" class="idref" href="#3180159a27174059f3daa2ffbe770e3c"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">MemG</span> {<br/>
&nbsp;&nbsp;<a id="mem_invG" class="idref" href="#mem_invG"><span class="id" title="projection">mem_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#3180159a27174059f3daa2ffbe770e3c"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="mem_gen_memG" class="idref" href="#mem_gen_memG"><span class="id" title="projection">mem_gen_memG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#3180159a27174059f3daa2ffbe770e3c"><span class="id" title="variable">Σ</span></a>}.<br/>

<br/>
<span class="comment">(*&nbsp;CMRA&nbsp;for&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="regG" class="idref" href="#regG"><span class="id" title="record">regG</span></a> <a id="4c84f963483c299acb882e59e4347bd1" class="idref" href="#4c84f963483c299acb882e59e4347bd1"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">RegG</span> {<br/>
&nbsp;&nbsp;<a id="reg_invG" class="idref" href="#reg_invG"><span class="id" title="projection">reg_invG</span></a> : <span class="id" title="abbreviation">invGS</span> <a class="idref" href="cap_machine.logical_mapsto.html#4c84f963483c299acb882e59e4347bd1"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="reg_gen_regG" class="idref" href="#reg_gen_regG"><span class="id" title="projection">reg_gen_regG</span></a> :: <span class="id" title="class">gen_heapGS</span> <a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#4c84f963483c299acb882e59e4347bd1"><span class="id" title="variable">Σ</span></a>; }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_interp_logical" class="idref" href="#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> (<a id="ab49655aede1944f90f9daa76b5c9a8b" class="idref" href="#ab49655aede1944f90f9daa76b5c9a8b"><span class="id" title="binder">σ</span></a> : <a class="idref" href="cap_machine.cap_lang.html#state"><span class="id" title="definition">cap_lang.state</span></a>) `{<a id="memG0:983" class="idref" href="#memG0:983"><span class="id" title="binder">!</span></a><a id="memG0:983" class="idref" href="#memG0:983"><span class="id" title="binder">memG</span></a> <a id="8321669b67244285738a73634d0369f7" class="idref" href="#8321669b67244285738a73634d0369f7"><span class="id" title="binder"><span id="memG0:983" class="id">Σ</span></span></a>, <a id="regG0:984" class="idref" href="#regG0:984"><span class="id" title="binder">!</span></a><a id="regG0:984" class="idref" href="#regG0:984"><span class="id" title="binder">regG</span></a> <a id="regG0:984" class="idref" href="#regG0:984"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.logical_mapsto.html#8321669b67244285738a73634d0369f7"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="lr:985" class="idref" href="#lr:985"><span class="id" title="binder">lr</span></a> <a id="lm:986" class="idref" href="#lm:986"><span class="id" title="binder">lm</span></a> <a id="vmap:987" class="idref" href="#vmap:987"><span class="id" title="binder">vmap</span></a> <span class="id" title="notation">,</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lr:985"><span class="id" title="variable">lr</span></a> <span class="id" title="notation">∗</span> <span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="cap_machine.logical_mapsto.html#lm:986"><span class="id" title="variable">lm</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="cap_machine.logical_mapsto.html#state_phys_log_corresponds"><span class="id" title="definition">state_phys_log_corresponds</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#ab49655aede1944f90f9daa76b5c9a8b"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#reg"><span class="id" title="projection">reg</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#ab49655aede1944f90f9daa76b5c9a8b"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="cap_machine.cap_lang.html#mem"><span class="id" title="projection">mem</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lr:985"><span class="id" title="variable">lr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lm:986"><span class="id" title="variable">lm</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#vmap:987"><span class="id" title="variable">vmap</span></a><span class="id" title="notation">⌝</span>.<br/>

<br/>
<span class="comment">(*&nbsp;invariants&nbsp;for&nbsp;memory,&nbsp;and&nbsp;a&nbsp;state&nbsp;interpretation&nbsp;for&nbsp;(mem,reg)&nbsp;*)</span><br/>
<span class="id" title="keyword">Global Instance</span> <a id="memG_irisG" class="idref" href="#memG_irisG"><span class="id" title="instance">memG_irisG</span></a> `{<a id="H:988" class="idref" href="#H:988"><span class="id" title="binder">MachineParameters</span></a>} `{<a id="memG0:990" class="idref" href="#memG0:990"><span class="id" title="binder">!</span></a><a id="memG0:990" class="idref" href="#memG0:990"><span class="id" title="binder">memG</span></a> <a id="218bf4334d2d1e903a06dbd9598c0088" class="idref" href="#218bf4334d2d1e903a06dbd9598c0088"><span class="id" title="binder"><span id="memG0:990" class="id">Σ</span></span></a>, <a id="regG0:991" class="idref" href="#regG0:991"><span class="id" title="binder">!</span></a><a id="regG0:991" class="idref" href="#regG0:991"><span class="id" title="binder">regG</span></a> <a id="regG0:991" class="idref" href="#regG0:991"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="abbreviation">irisGS</span> <a class="idref" href="cap_machine.cap_lang.html#cap_lang"><span class="id" title="definition">cap_lang</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#218bf4334d2d1e903a06dbd9598c0088"><span class="id" title="variable">Σ</span></a> := {<br/>
&nbsp;&nbsp;<span class="id" title="method">iris_invGS</span> := <a class="idref" href="cap_machine.logical_mapsto.html#mem_invG"><span class="id" title="method">mem_invG</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp</span> <a id="a8d923088dd9da23821aeee8e1b738fc" class="idref" href="#a8d923088dd9da23821aeee8e1b738fc"><span class="id" title="binder">σ</span></a> <span class="id" title="var">_</span> <a id="aeedba39fab5b2aa82aaf93a68bb3101" class="idref" href="#aeedba39fab5b2aa82aaf93a68bb3101"><span class="id" title="binder">κs</span></a> <span class="id" title="var">_</span> := <a class="idref" href="cap_machine.logical_mapsto.html#state_interp_logical"><span class="id" title="definition">state_interp_logical</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a8d923088dd9da23821aeee8e1b738fc"><span class="id" title="variable">σ</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="method">fork_post</span> <span class="id" title="var">_</span> := <span class="id" title="notation">True</span>%<span class="id" title="var">I</span>;<br/>
&nbsp;&nbsp;<span class="id" title="method">num_laters_per_step</span> <span class="id" title="var">_</span> := 0;<br/>
&nbsp;&nbsp;<span class="id" title="method">state_interp_mono</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> := <span class="id" title="lemma">fupd_intro</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
}.<br/>

<br/>
<span class="comment">(*&nbsp;Points&nbsp;to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;registers&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="b4e695cd58dba538326a0ae97922fc83" class="idref" href="#b4e695cd58dba538326a0ae97922fc83"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "r  ↦ᵣ{ q } lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="db884c99aed36a9ddaddcd7edc424755" class="idref" href="#db884c99aed36a9ddaddcd7edc424755"><span class="id" title="notation">&quot;</span></a>r ↦ᵣ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.addr_reg.html#RegName"><span class="id" title="inductive">RegName</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">r</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Points-to&nbsp;predicates&nbsp;for&nbsp;logical&nbsp;memory&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="1f356528680e66e063184d2852c70086" class="idref" href="#1f356528680e66e063184d2852c70086"><span class="id" title="notation">&quot;</span></a>la ↦ₐ{ q } lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> <span class="id" title="var">q</span> <span class="id" title="var">lw</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "la  ↦ₐ{ q }  lw") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="e389c97555835874498bb08a394266c6" class="idref" href="#e389c97555835874498bb08a394266c6"><span class="id" title="notation">&quot;</span></a>la ↦ₐ lw" := (<span class="id" title="definition">mapsto</span> (<span class="id" title="var">L</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a>) (<span class="id" title="var">V</span>:=<a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) <span class="id" title="var">la</span> (<span class="id" title="constructor">DfracOwn</span> 1) <span class="id" title="var">lw</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">LAddr_scope</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">LAddr_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">la</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="eqb_laddr" class="idref" href="#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="a1:994" class="idref" href="#a1:994"><span class="id" title="binder">a1</span></a> <a id="a2:995" class="idref" href="#a2:995"><span class="id" title="binder">a2</span></a>: <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb"><span class="id" title="definition">Z.eqb</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a1:994"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.1</span> <a class="idref" href="cap_machine.logical_mapsto.html#a2:995"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a1:994"><span class="id" title="variable">a1</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a2:995"><span class="id" title="variable">a2</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="2075081701d58abc4fd86ad4dce27d74" class="idref" href="#2075081701d58abc4fd86ad4dce27d74"><span class="id" title="notation">&quot;</span></a>a1 =? a2" := (<a class="idref" href="cap_machine.logical_mapsto.html#eqb_laddr"><span class="id" title="abbreviation">eqb_laddr</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>) : <span class="id" title="var">LAddr_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="machine_param" class="idref" href="#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:996" class="idref" href="#H:996"><span class="id" title="binder">MachineParameters</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decodeInstrWL" class="idref" href="#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a id="lw:997" class="idref" href="#lw:997"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_parameters.html#decodeInstrW"><span class="id" title="definition">decodeInstrW</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#lword_get_word"><span class="id" title="definition">lword_get_word</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lw:997"><span class="id" title="variable">lw</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrWL" class="idref" href="#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> (<a id="i:998" class="idref" href="#i:998"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>) : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> := <a class="idref" href="cap_machine.logical_mapsto.html#LInt"><span class="id" title="abbreviation">LInt</span></a> (<a class="idref" href="cap_machine.machine_parameters.html#encodeInstr"><span class="id" title="method">encodeInstr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:998"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="decode_encode_instrLW_inv" class="idref" href="#decode_encode_instrLW_inv"><span class="id" title="lemma">decode_encode_instrLW_inv</span></a> (<a id="i:999" class="idref" href="#i:999"><span class="id" title="binder">i</span></a>: <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#decodeInstrWL"><span class="id" title="definition">decodeInstrWL</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:999"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#i:999"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_parameters.html#decode_encode_instr_inv"><span class="id" title="method">decode_encode_instr_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="encodeInstrsLW" class="idref" href="#encodeInstrsLW"><span class="id" title="definition">encodeInstrsLW</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.machine_base.html#instr"><span class="id" title="inductive">instr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#encodeInstrWL"><span class="id" title="definition">encodeInstrWL</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.logical_mapsto.html#machine_param"><span class="id" title="section">machine_param</span></a>.<br/>

<br/>
</div>

<div class="doc">
Miscellaneous about logical regions 
</div>
<div class="code">
<span class="comment">(*&nbsp;TODO&nbsp;move&nbsp;definition&nbsp;to&nbsp;regions.v&nbsp;?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="logical_region_map" class="idref" href="#logical_region_map"><span class="id" title="definition">logical_region_map</span></a><br/>
&nbsp;&nbsp;(<a id="la:1000" class="idref" href="#la:1000"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:1001" class="idref" href="#lws:1001"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="v:1002" class="idref" href="#v:1002"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1000"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1002"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lws:1001"><span class="id" title="variable">lws</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_notin" class="idref" href="#logical_region_notin"><span class="id" title="lemma">logical_region_notin</span></a><br/>
&nbsp;&nbsp;(<a id="la:1003" class="idref" href="#la:1003"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:1004" class="idref" href="#a:1004"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1005" class="idref" href="#v:1005"><span class="id" title="binder">v</span></a> <a id="v':1006" class="idref" href="#v':1006"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1007" class="idref" href="#lws:1007"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1007"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1003"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:1004"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1003"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1003"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1007"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1005"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1004"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':1006"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_list_to_map_1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontra</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_version_neq" class="idref" href="#logical_region_version_neq"><span class="id" title="lemma">logical_region_version_neq</span></a><br/>
&nbsp;&nbsp;(<a id="la:1008" class="idref" href="#la:1008"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:1009" class="idref" href="#a:1009"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1010" class="idref" href="#v:1010"><span class="id" title="binder">v</span></a> <a id="v':1011" class="idref" href="#v':1011"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1012" class="idref" href="#lws:1012"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1012"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1008"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1010"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1011"><span class="id" title="variable">v'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1008"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1012"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1010"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1009"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1011"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_list_to_map_1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontra</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_cons" class="idref" href="#logical_region_map_cons"><span class="id" title="lemma">logical_region_map_cons</span></a><br/>
&nbsp;&nbsp;(<a id="la:1013" class="idref" href="#la:1013"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:1014" class="idref" href="#a:1014"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1015" class="idref" href="#v:1015"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1016" class="idref" href="#lws:1016"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="lw:1017" class="idref" href="#lw:1017"><span class="id" title="binder">lw</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> ):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> (<a class="idref" href="cap_machine.logical_mapsto.html#a:1014"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1013"><span class="id" title="variable">la</span></a>) (<a class="idref" href="cap_machine.logical_mapsto.html#lw:1017"><span class="id" title="variable">lw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1016"><span class="id" title="variable">lws</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:1015"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1014"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v:1015"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.logical_mapsto.html#lw:1017"><span class="id" title="variable">lw</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">logical_region_map</span> <span class="id" title="notation">la</span> <span class="id" title="notation">lws</span> <span class="id" title="notation">v</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_some_inv" class="idref" href="#logical_region_map_some_inv"><span class="id" title="lemma">logical_region_map_some_inv</span></a><br/>
&nbsp;&nbsp;(<a id="a:1018" class="idref" href="#a:1018"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:1019" class="idref" href="#v:1019"><span class="id" title="binder">v</span></a> <a id="v':1020" class="idref" href="#v':1020"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> )<br/>
&nbsp;&nbsp;(<a id="la:1021" class="idref" href="#la:1021"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:1022" class="idref" href="#lws:1022"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1021"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1022"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1021"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1021"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1022"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1019"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1018"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1020"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':1020"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1019"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1018"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1021"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hlen</span> [<span class="id" title="var">lw</span> <span class="id" title="var">Hlw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_zip_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlw</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">last</span>  (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_fmap</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heq</span> ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_lookup_versions" class="idref" href="#logical_region_map_lookup_versions"><span class="id" title="lemma">logical_region_map_lookup_versions</span></a><br/>
&nbsp;&nbsp;(<a id="la:1023" class="idref" href="#la:1023"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':1024" class="idref" href="#a':1024"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1025" class="idref" href="#v:1025"><span class="id" title="binder">v</span></a> <a id="v':1026" class="idref" href="#v':1026"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1027" class="idref" href="#lws:1027"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1023"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':1024"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1023"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1027"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1023"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1023"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1027"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1025"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':1024"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1025"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1023"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1027"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1026"><span class="id" title="variable">v'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':1024"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1026"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">a'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">lws</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Ha'_in_la</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lws</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">lw</span> <span class="id" title="var">lws</span>] ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hlen</span> ; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlen</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_in_la</span>; <span class="id" title="var">cbn</span> ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> /= ; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> /= ; <span class="id" title="var">last</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_region_map_inv" class="idref" href="#logical_region_map_inv"><span class="id" title="lemma">logical_region_map_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:1028" class="idref" href="#lmem:1028"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="la:1029" class="idref" href="#la:1029"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1030" class="idref" href="#v:1030"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1029"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:1031" class="idref" href="#a:1031"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem:1028"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1031"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1030"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <a class="idref" href="cap_machine.logical_mapsto.html#la:1029"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lws:1032" class="idref" href="#lws:1032"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1032"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#la:1029"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map"><span class="id" title="definition">logical_region_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#la:1029"><span class="id" title="variable">la</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1032"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1030"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:1028"><span class="id" title="variable">lmem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">lmem</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">HnextMap</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_empty_subseteq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HnextMap_a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lwa</span> <span class="id" title="var">Hlwa</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HnextMap</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HnextMap</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lws</span> &amp; <span class="id" title="var">Hlen</span> &amp; <span class="id" title="var">Hincl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">lwa</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">lws</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">first</span> (<span class="id" title="var">cbn</span> ; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_cons"><span class="id" title="axiom">logical_region_map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">insert_subseteq_l</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="logical_range_map" class="idref" href="#logical_range_map"><span class="id" title="definition">logical_range_map</span></a><br/>
&nbsp;&nbsp;(<a id="b:1033" class="idref" href="#b:1033"><span class="id" title="binder">b</span></a> <a id="e:1034" class="idref" href="#e:1034"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:1035" class="idref" href="#lws:1035"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) (<a id="v:1036" class="idref" href="#v:1036"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.logical_mapsto.html#LAddr"><span class="id" title="definition">LAddr</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_region"><span class="id" title="definition">logical_region</span></a> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1033"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1034"><span class="id" title="variable">e</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#v:1036"><span class="id" title="variable">v</span></a>) <a class="idref" href="cap_machine.logical_mapsto.html#lws:1035"><span class="id" title="variable">lws</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_notin" class="idref" href="#logical_range_notin"><span class="id" title="lemma">logical_range_notin</span></a><br/>
&nbsp;&nbsp;(<a id="b:1037" class="idref" href="#b:1037"><span class="id" title="binder">b</span></a> <a id="e:1038" class="idref" href="#e:1038"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:1039" class="idref" href="#a:1039"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1040" class="idref" href="#v:1040"><span class="id" title="binder">v</span></a> <a id="v':1041" class="idref" href="#v':1041"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1042" class="idref" href="#lws:1042"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1042"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1037"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1038"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#a:1039"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <span class="id" title="notation">(</span><a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1037"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1038"><span class="id" title="variable">e</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1037"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1038"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1042"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1040"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1039"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':1041"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_notin"><span class="id" title="axiom">logical_region_notin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_version_neq" class="idref" href="#logical_range_version_neq"><span class="id" title="lemma">logical_range_version_neq</span></a><br/>
&nbsp;&nbsp;(<a id="b:1043" class="idref" href="#b:1043"><span class="id" title="binder">b</span></a> <a id="e:1044" class="idref" href="#e:1044"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a:1045" class="idref" href="#a:1045"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1046" class="idref" href="#v:1046"><span class="id" title="binder">v</span></a> <a id="v':1047" class="idref" href="#v':1047"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1048" class="idref" href="#lws:1048"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1048"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1043"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1044"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1046"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1047"><span class="id" title="variable">v'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1043"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1044"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1048"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1046"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1045"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1047"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_version_neq"><span class="id" title="axiom">logical_region_version_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_some_inv" class="idref" href="#logical_range_map_some_inv"><span class="id" title="lemma">logical_range_map_some_inv</span></a><br/>
&nbsp;&nbsp;(<a id="a:1049" class="idref" href="#a:1049"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) ( <a id="v:1050" class="idref" href="#v:1050"><span class="id" title="binder">v</span></a> <a id="v':1051" class="idref" href="#v':1051"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a> )<br/>
&nbsp;&nbsp;(<a id="b:1052" class="idref" href="#b:1052"><span class="id" title="binder">b</span></a> <a id="e:1053" class="idref" href="#e:1053"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="lws:1054" class="idref" href="#lws:1054"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1054"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1052"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1053"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1052"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1053"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1054"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1050"><span class="id" title="variable">v</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1049"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1051"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#v':1051"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1050"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1049"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1052"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1053"><span class="id" title="variable">e</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_some_inv"><span class="id" title="axiom">logical_region_map_some_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_lookup_versions" class="idref" href="#logical_range_map_lookup_versions"><span class="id" title="lemma">logical_range_map_lookup_versions</span></a><br/>
&nbsp;&nbsp;(<a id="b:1055" class="idref" href="#b:1055"><span class="id" title="binder">b</span></a> <a id="e:1056" class="idref" href="#e:1056"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="a':1057" class="idref" href="#a':1057"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1058" class="idref" href="#v:1058"><span class="id" title="binder">v</span></a> <a id="v':1059" class="idref" href="#v':1059"><span class="id" title="binder">v'</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) (<a id="lws:1060" class="idref" href="#lws:1060"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.logical_mapsto.html#a':1057"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1055"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1056"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1060"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1055"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1056"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1055"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1056"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1060"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1058"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':1057"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1058"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1055"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1056"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1060"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1059"><span class="id" title="variable">v'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a':1057"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v':1059"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_lookup_versions"><span class="id" title="axiom">logical_region_map_lookup_versions</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="logical_range_map_inv" class="idref" href="#logical_range_map_inv"><span class="id" title="lemma">logical_range_map_inv</span></a><br/>
&nbsp;&nbsp;(<a id="lmem:1061" class="idref" href="#lmem:1061"><span class="id" title="binder">lmem</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#LMem"><span class="id" title="definition">LMem</span></a>) (<a id="b:1062" class="idref" href="#b:1062"><span class="id" title="binder">b</span></a> <a id="e:1063" class="idref" href="#e:1063"><span class="id" title="binder">e</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="v:1064" class="idref" href="#v:1064"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.logical_mapsto.html#Version"><span class="id" title="definition">Version</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:1065" class="idref" href="#a:1065"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.logical_mapsto.html#lmem:1061"><span class="id" title="variable">lmem</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.logical_mapsto.html#a:1065"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1064"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1062"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1063"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lws:1066" class="idref" href="#lws:1066"><span class="id" title="binder">lws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#LWord"><span class="id" title="inductive">LWord</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1066"><span class="id" title="variable">lws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> (<a class="idref" href="machine_utils.finz_interval.html#finz.seq_between"><span class="id" title="definition">finz.seq_between</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1062"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1063"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.logical_mapsto.html#logical_range_map"><span class="id" title="definition">logical_range_map</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#b:1062"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#e:1063"><span class="id" title="variable">e</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#lws:1066"><span class="id" title="variable">lws</span></a> <a class="idref" href="cap_machine.logical_mapsto.html#v:1064"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.logical_mapsto.html#lmem:1061"><span class="id" title="variable">lmem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.logical_mapsto.html#logical_region_map_inv"><span class="id" title="axiom">logical_region_map_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="machine_utils.finz_interval.html#finz_seq_between_NoDup"><span class="id" title="lemma">finz_seq_between_NoDup</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
