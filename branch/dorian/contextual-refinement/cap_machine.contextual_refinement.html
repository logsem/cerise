<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.contextual_refinement</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#"><span class="id" title="library">gmap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#"><span class="id" title="library">fin_maps</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#"><span class="id" title="library">fin_sets</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="cap_machine.machine_parameters.html#"><span class="id" title="library">machine_parameters</span></a> <a class="idref" href="cap_machine.cap_lang.html#"><span class="id" title="library">cap_lang</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="cap_machine.linking.html#"><span class="id" title="library">linking</span></a> <a class="idref" href="cap_machine.machine_run.html#"><span class="id" title="library">machine_run</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#"><span class="id" title="library">addr_reg_sample</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h1 class="section">Reserved context size</h1>
 Reserve a minimal free memory in which to write our contexts 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="reserved_context_size" class="idref" href="#reserved_context_size"><span class="id" title="section">reserved_context_size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Transparent</span> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reserved_context_size_z" class="idref" href="#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := 10000.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reserved_context_size" class="idref" href="#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> := (<a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>)%<span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="reserved_context_size_le_mem" class="idref" href="#reserved_context_size_le_mem"><span class="id" title="lemma">reserved_context_size_le_mem</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>, <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="reserved_context_size_to_z" class="idref" href="#reserved_context_size_to_z"><span class="id" title="lemma">reserved_context_size_to_z</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="machine_utils.finz_base.html#finz.to_z"><span class="id" title="definition">finz.to_z</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>.<br/>

<br/>
</div>

<div class="doc">
Address greater than a given end_stack parameter 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="addr_gt_than" class="idref" href="#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> (<a id="e_stk:1" class="idref" href="#e_stk:1"><span class="id" title="binder">e_stk</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="dom:2" class="idref" href="#dom:2"><span class="id" title="binder">dom</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="a:3" class="idref" href="#a:3"><span class="id" title="binder">a</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:3"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dom:2"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#e_stk:1"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.addr_reg.html#::Addr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:3"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="addr_gt_than_union_stable" class="idref" href="#addr_gt_than_union_stable"><span class="id" title="lemma">addr_gt_than_union_stable</span></a> (<a id="e_stk:4" class="idref" href="#e_stk:4"><span class="id" title="binder">e_stk</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s1:5" class="idref" href="#s1:5"><span class="id" title="binder">s1</span></a> <a id="s2:6" class="idref" href="#s2:6"><span class="id" title="binder">s2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s2:6"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s2:6"><span class="id" title="variable">s2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom1</span> <span class="id" title="var">dom2</span> <span class="id" title="var">gt_dom1</span> <span class="id" title="var">gt_dom2</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_1or2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a_in_1or2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a_in_1or2</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">a_in_1</span> | <span class="id" title="var">a_in_2</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">gt_dom1</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">gt_dom2</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="section">reserved_context_size</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wf_comp" class="idref" href="#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> := (<a class="idref" href="cap_machine.linking.html#well_formed_comp"><span class="id" title="inductive">well_formed_comp</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
<span class="id" title="keyword">Infix</span> <a id="68d1f67de1b5769f8b935919df65ec2e" class="idref" href="#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">&quot;</span></a>##ₗ" := (<a class="idref" href="cap_machine.linking.html#can_link"><span class="id" title="inductive">can_link</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="is_ctxt" class="idref" href="#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> := (<a class="idref" href="cap_machine.linking.html#is_context"><span class="id" title="inductive">is_context</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab18"></a><h1 class="section">Contextual Refinement definition</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="contextual_refinement" class="idref" href="#contextual_refinement"><span class="id" title="section">contextual_refinement</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="MP:7" class="idref" href="#MP:7"><span class="id" title="binder">MP</span></a>: <a class="idref" href="cap_machine.machine_parameters.html#MachineParameters"><span class="id" title="class">MachineParameters</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Type&nbsp;of&nbsp;symbols&nbsp;to&nbsp;uniquely&nbsp;identify&nbsp;exports/inports.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols:8" class="idref" href="#Symbols:8"><span class="id" title="binder">Symbols</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols_eq_dec:9" class="idref" href="#Symbols_eq_dec:9"><span class="id" title="binder">Symbols_eq_dec</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols_countable:10" class="idref" href="#Symbols_countable:10"><span class="id" title="binder">Symbols_countable</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.countable.html#Countable"><span class="id" title="class">Countable</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="initial_state" class="idref" href="#initial_state"><span class="id" title="definition">initial_state</span></a> (<a id="c:11" class="idref" href="#c:11"><span class="id" title="binder">c</span></a> : <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) (<a id="r:12" class="idref" href="#r:12"><span class="id" title="binder">r</span></a> : <a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="cap_machine.cap_lang.html#cap_lang"><span class="id" title="definition">cap_lang</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Seq"><span class="id" title="constructor">Seq</span></a> (<a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r:12"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:11"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>

<br/>
</div>

<div class="doc">
We need our <span class="inlinecode"><a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a></span>s to leave some space for contexts
      The simplest way is just to require them to not define
      any addresses in between <span class="inlinecode">0</span> and <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="has_free_space" class="idref" href="#has_free_space"><span class="id" title="definition">has_free_space</span></a> (<a id="x:13" class="idref" href="#x:13"><span class="id" title="binder">x</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:13"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="has_free_space_link" class="idref" href="#has_free_space_link"><span class="id" title="lemma">has_free_space_link</span></a> {<a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> <a id="y:15" class="idref" href="#y:15"><span class="id" title="binder">y</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:15"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:15"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:15"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hxy</span> <span class="id" title="var">Hx</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="cap_machine.linking.html#link_segment_dom"><span class="id" title="axiom">link_segment_dom</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than_union_stable"><span class="id" title="axiom">addr_gt_than_union_stable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
This is the contextual refinement relation
      A component 'impl' contextually refines 'spec' if,
      for all contexts 'ctxt'
      if
<ul class="doclist">
<li> 'ctxt' is a valid context to run 'impl' (implies that 'ctxt' is well-formed)

</li>
<li> 'ctxt' linked with 'impl' terminates in a final state 'c'
        (either HALTED or FAILED)

</li>
</ul>
      then
<ul class="doclist">
<li> 'ctxt' is a valid context to run 'spec'

</li>
<li> 'ctxt' linked with 'spce' also terminates in 'c' 

</li>
</ul>
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="contextual_refinement" class="idref" href="#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> <a id="impl:16" class="idref" href="#impl:16"><span class="id" title="binder">impl</span></a> <a id="spec:17" class="idref" href="#spec:17"><span class="id" title="binder">spec</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="ctxt_ref_intro" class="idref" href="#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="Hwf_impl:20" class="idref" href="#Hwf_impl:20"><span class="id" title="binder">Hwf_impl</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hwf_spec:21" class="idref" href="#Hwf_spec:21"><span class="id" title="binder">Hwf_spec</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:17"><span class="id" title="variable">spec</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hexp_incl:22" class="idref" href="#Hexp_incl:22"><span class="id" title="binder">Hexp_incl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:17"><span class="id" title="variable">spec</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfree:23" class="idref" href="#Hfree:23"><span class="id" title="binder">Hfree</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hrefines:29" class="idref" href="#Hrefines:29"><span class="id" title="binder">Hrefines</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="ctxt:24" class="idref" href="#ctxt:24"><span class="id" title="binder">ctxt</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) (<a id="regs:25" class="idref" href="#regs:25"><span class="id" title="binder">regs</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="c:26" class="idref" href="#c:26"><span class="id" title="binder">c</span></a>: <a class="idref" href="cap_machine.cap_lang.html#ConfFlag"><span class="id" title="inductive">ConfFlag</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:24"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:25"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:27" class="idref" href="#n:27"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:27"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#regs:25"><span class="id" title="variable">regs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:24"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:26"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:24"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:17"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:25"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:28" class="idref" href="#n:28"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:28"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#regs:25"><span class="id" title="variable">regs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:24"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:17"><span class="id" title="variable">spec</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:26"><span class="id" title="variable">c</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement:18"><span class="id" title="inductive">contextual_refinement</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:16"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:17"><span class="id" title="variable">spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="341bc3d103ee94e71eaa8029c4cbb0b8" class="idref" href="#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">&quot;</span></a>≼ᵣ" := <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h1 class="section">Easy results about contextual refinement</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.facts" class="idref" href="#contextual_refinement.facts"><span class="id" title="section">facts</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_reflexive" class="idref" href="#ctxt_ref_reflexive"><span class="id" title="lemma">ctxt_ref_reflexive</span></a> {<a id="comp:30" class="idref" href="#comp:30"><span class="id" title="binder">comp</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:30"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:30"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:30"><span class="id" title="variable">comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:30"><span class="id" title="variable">comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Haddr</span> <span class="id" title="var">Hwf_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>. 1,2,4: <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_ctxt_impl</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="ctxt_ref_transitive" class="idref" href="#ctxt_ref_transitive"><span class="id" title="instance">ctxt_ref_transitive</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> [] [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>. 1,2,4: <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_a</span> <span class="id" title="var">mr_ctxt_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_a</span> <span class="id" title="var">mr_ctxt_a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ctxt_b</span> <span class="id" title="var">mr_ctxt_b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hrefines0</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_b</span> <span class="id" title="var">mr_ctxt_b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Alternative Hrefines hypothesis,
        using <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a></span> <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a></span> instead of <span class="inlinecode"><a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.facts.alt_refines" class="idref" href="#contextual_refinement.facts.alt_refines"><span class="id" title="section">alt_refines</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refines_alt" class="idref" href="#refines_alt"><span class="id" title="lemma">refines_alt</span></a> {<a id="a:31" class="idref" href="#a:31"><span class="id" title="binder">a</span></a> <a id="b:32" class="idref" href="#b:32"><span class="id" title="binder">b</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="c:33" class="idref" href="#c:33"><span class="id" title="binder">c</span></a> <a id="r:34" class="idref" href="#r:34"><span class="id" title="binder">r</span></a> <a id="cf:35" class="idref" href="#cf:35"><span class="id" title="binder">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:33"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:31"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:34"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:36" class="idref" href="#n:36"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:36"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r:34"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#c:33"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:31"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#cf:35"><span class="id" title="variable">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:33"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:32"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:34"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:37"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r:34"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#c:33"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:32"><span class="id" title="variable">b</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#cf:35"><span class="id" title="variable">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="c:38" class="idref" href="#c:38"><span class="id" title="binder">c</span></a> <a id="r:39" class="idref" href="#r:39"><span class="id" title="binder">r</span></a> <a id="cf:40" class="idref" href="#cf:40"><span class="id" title="binder">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:38"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:31"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="123cbef456cdd9bcfdd7113f90041335" class="idref" href="#123cbef456cdd9bcfdd7113f90041335"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#c:38"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:31"><span class="id" title="variable">a</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#r:39"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#cf:40"><span class="id" title="variable">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#123cbef456cdd9bcfdd7113f90041335"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:38"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:32"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="b2a34896ac0cae116df1a2aa6de22803" class="idref" href="#b2a34896ac0cae116df1a2aa6de22803"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#c:38"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:32"><span class="id" title="variable">b</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#r:39"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#cf:40"><span class="id" title="variable">cf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b2a34896ac0cae116df1a2aa6de22803"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Href</span> <span class="id" title="var">c</span> <span class="id" title="var">r</span> <span class="id" title="var">cf</span> <span class="id" title="var">Hc</span> [<span class="id" title="var">p</span> <span class="id" title="var">Hmr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_run.html#machine_run_complete"><span class="id" title="axiom">machine_run_complete</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.machine_run.html#machine_run_correct"><span class="id" title="axiom">machine_run_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Href</span> <span class="id" title="var">c</span> <span class="id" title="var">r</span> <span class="id" title="var">cf</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hmr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc'</span> <span class="id" title="var">Hmr'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">Hc'</span>|<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> <span class="id" title="var">Hmr'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.machine_run.html#machine_run_correct"><span class="id" title="axiom">machine_run_correct</span></a> <span class="id" title="var">p'</span> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">cf</span> <span class="id" title="var">Hmr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.machine_run.html#machine_run_complete"><span class="id" title="axiom">machine_run_complete</span></a> <a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">cf</span> <span class="id" title="var">Hmr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="contextual_refinement_rtc_erased_step" class="idref" href="#contextual_refinement_rtc_erased_step"><span class="id" title="lemma">contextual_refinement_rtc_erased_step</span></a> {<a id="impl:43" class="idref" href="#impl:43"><span class="id" title="binder">impl</span></a> <a id="spec:44" class="idref" href="#spec:44"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:43"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:44"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="ctxt:45" class="idref" href="#ctxt:45"><span class="id" title="binder">ctxt</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) (<a id="regs:46" class="idref" href="#regs:46"><span class="id" title="binder">regs</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="c:47" class="idref" href="#c:47"><span class="id" title="binder">c</span></a>: <a class="idref" href="cap_machine.cap_lang.html#ConfFlag"><span class="id" title="inductive">ConfFlag</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:45"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:43"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:46"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="9b322449c3b1489ca352ce1a38e5e025" class="idref" href="#9b322449c3b1489ca352ce1a38e5e025"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:45"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:43"><span class="id" title="variable">impl</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#regs:46"><span class="id" title="variable">regs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:47"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#9b322449c3b1489ca352ce1a38e5e025"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:45"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:44"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:46"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="6126e55ac18715a7e6e2c427a02dfeb9" class="idref" href="#6126e55ac18715a7e6e2c427a02dfeb9"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:45"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:44"><span class="id" title="variable">spec</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#regs:46"><span class="id" title="variable">regs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:47"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6126e55ac18715a7e6e2c427a02dfeb9"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.contextual_refinement.html#refines_alt"><span class="id" title="axiom">refines_alt</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="contextual_refinement_alt" class="idref" href="#contextual_refinement_alt"><span class="id" title="lemma">contextual_refinement_alt</span></a> {<a id="impl:50" class="idref" href="#impl:50"><span class="id" title="binder">impl</span></a> <a id="spec:51" class="idref" href="#spec:51"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:51"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:51"><span class="id" title="variable">spec</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="ctxt:52" class="idref" href="#ctxt:52"><span class="id" title="binder">ctxt</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) (<a id="regs:53" class="idref" href="#regs:53"><span class="id" title="binder">regs</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="c:54" class="idref" href="#c:54"><span class="id" title="binder">c</span></a>: <a class="idref" href="cap_machine.cap_lang.html#ConfFlag"><span class="id" title="inductive">ConfFlag</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:52"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:53"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="9ff63b1d549719d3719dba9067f4b6fe" class="idref" href="#9ff63b1d549719d3719dba9067f4b6fe"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:52"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#regs:53"><span class="id" title="variable">regs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:54"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#9ff63b1d549719d3719dba9067f4b6fe"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:52"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:51"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:53"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="6dec3d557f543f71b962a5e867565daa" class="idref" href="#6dec3d557f543f71b962a5e867565daa"><span class="id" title="binder">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#initial_state"><span class="id" title="definition">initial_state</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:52"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:51"><span class="id" title="variable">spec</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#regs:53"><span class="id" title="variable">regs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.cap_lang.html#Instr"><span class="id" title="constructor">Instr</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:54"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6dec3d557f543f71b962a5e867565daa"><span class="id" title="variable">φ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:50"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:51"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hsi</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Href'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#refines_alt"><span class="id" title="axiom">refines_alt</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.facts.alt_refines"><span class="id" title="section">alt_refines</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_add_exportless" class="idref" href="#ctxt_ref_add_exportless"><span class="id" title="lemma">ctxt_ref_add_exportless</span></a> {<a id="impl:57" class="idref" href="#impl:57"><span class="id" title="binder">impl</span></a> <a id="spec:58" class="idref" href="#spec:58"><span class="id" title="binder">spec</span></a> <a id="extra:59" class="idref" href="#extra:59"><span class="id" title="binder">extra</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:59"><span class="id" title="variable">extra</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#extra:59"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:57"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:59"><span class="id" title="variable">extra</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:57"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:58"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#extra:59"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:57"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:58"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Haddr</span> <span class="id" title="var">Hsep_ei</span> <span class="id" title="var">Hexp</span> [ ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_well_formed"><span class="id" title="axiom">link_well_formed</span></a> <span class="id" title="var">_</span>). <span class="id" title="var">solve_can_link</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hexp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space_link"><span class="id" title="axiom">has_free_space_link</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_in"><span class="id" title="axiom">is_context_move_in</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hctxt</span>; [|<span class="id" title="var">solve_can_link</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">mr_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">extra</span>) <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">Hctxt</span> <span class="id" title="var">mr_impl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span> <span class="id" title="var">Hmr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hctxt'</span>: <a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">spec</span> <span class="id" title="var">regs</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hspec_extra</span>: <span class="id" title="var">spec</span> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <span class="id" title="var">extra</span>). <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_remove_exportless_r"><span class="id" title="axiom">is_context_remove_exportless_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hspec_extra</span> <span class="id" title="var">Hexp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>); [|<span class="id" title="var">solve_can_link</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_out"><span class="id" title="axiom">is_context_move_out</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>). <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Hmr</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.linking.html#link_segment_dom_subseteq_l"><span class="id" title="lemma">link_segment_dom_subseteq_l</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">spec</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom_ctxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.linking.html#link_segment_dom_subseteq_r"><span class="id" title="lemma">link_segment_dom_subseteq_r</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">spec</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="cap_machine.machine_run.html#machine_run_segment_subseteq"><span class="id" title="axiom">machine_run_segment_subseteq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">extra</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">extra</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">extra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="cap_machine.linking.html#resolve_imports"><span class="id" title="definition">resolve_imports</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">extra</span>) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_exports_empty"><span class="id" title="lemma">resolve_imports_exports_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_union_subseteq_l"><span class="id" title="lemma">map_union_subseteq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_is_program"><span class="id" title="axiom">is_context_is_program</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxt'</span> <span class="id" title="keyword">as</span> [ [] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hwr_ms</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_is_program"><span class="id" title="axiom">is_context_is_program</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxt'</span> <span class="id" title="keyword">as</span> [ ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hregs</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hregs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw'</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> | <span class="id" title="var">Hw'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf_comp</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hwr_exp</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_rm_exportless" class="idref" href="#ctxt_ref_rm_exportless"><span class="id" title="lemma">ctxt_ref_rm_exportless</span></a> {<a id="impl:60" class="idref" href="#impl:60"><span class="id" title="binder">impl</span></a> <a id="spec:61" class="idref" href="#spec:61"><span class="id" title="binder">spec</span></a> <a id="extra:62" class="idref" href="#extra:62"><span class="id" title="binder">extra</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#extra:62"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:61"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:62"><span class="id" title="variable">extra</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:60"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:62"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:61"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:60"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:61"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsep</span> <span class="id" title="var">Hexp</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp_incl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">Hctxt</span> <span class="id" title="var">Hmr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">Hctxt</span> <span class="id" title="var">Hmr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt'</span> <span class="id" title="var">Hmr'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hctxt''</span>: <a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">spec</span> <span class="id" title="var">regs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsep</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxt'</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_remove_exportless_r"><span class="id" title="axiom">is_context_remove_exportless_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsep</span> <span class="id" title="var">Hexp</span> <span class="id" title="var">Hctxt'</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Hmr'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="cap_machine.machine_run.html#machine_run_segment_subseteq"><span class="id" title="axiom">machine_run_segment_subseteq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">extra</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="cap_machine.linking.html#resolve_imports"><span class="id" title="definition">resolve_imports</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">extra</span>) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_exports_empty"><span class="id" title="lemma">resolve_imports_exports_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_union_subseteq_l"><span class="id" title="lemma">map_union_subseteq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_is_program"><span class="id" title="axiom">is_context_is_program</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxt''</span> <span class="id" title="keyword">as</span> [ [] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hwr_ms</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_is_program"><span class="id" title="axiom">is_context_is_program</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxt''</span> <span class="id" title="keyword">as</span> [ ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hregs</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hregs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw'</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> | <span class="id" title="var">Hw'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf_comp</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hwr_exp</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
This can be weakened using <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="lemma">ctxt_ref_can_link</span></a></span>, as
        <span class="inlinecode"><span class="id" title="var">common</span></span> <span class="inlinecode">##ₗ</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a></span> and <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a></span> <span class="inlinecode">≼ᵣ</span> <span class="inlinecode"><span class="id" title="var">spec</span></span> often implies
        <span class="inlinecode"><span class="id" title="var">common</span></span> <span class="inlinecode">##ₗ</span> <span class="inlinecode"><span class="id" title="var">spec</span></span> (if we have a new symbol <span class="inlinecode"><span class="id" title="var">s</span></span> not in <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a></span>)

<div class="paragraph"> </div>

        See <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l_inf"><span class="id" title="lemma">ctxt_ref_link_l_inf</span></a></span> for such a stronger version when
        <span class="inlinecode"><span class="id" title="var">Symbols</span></span> is <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Infinite"><span class="id" title="class">Infinite</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_l" class="idref" href="#ctxt_ref_link_l"><span class="id" title="lemma">ctxt_ref_link_l</span></a> {<a id="common:63" class="idref" href="#common:63"><span class="id" title="binder">common</span></a> <a id="impl:64" class="idref" href="#impl:64"><span class="id" title="binder">impl</span></a> <a id="spec:65" class="idref" href="#spec:65"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:63"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:63"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:64"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:63"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:65"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:64"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:65"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:63"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:64"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:63"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:65"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">sep_impl</span> <span class="id" title="var">sep_spec</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_well_formed"><span class="id" title="axiom">link_well_formed</span></a> <span class="id" title="var">_</span> ); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union_L"><span class="id" title="lemma">dom_union_L</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">common</span>) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union_L"><span class="id" title="lemma">dom_union_L</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">common</span>) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq"><span class="id" title="lemma">union_subseteq</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq_l"><span class="id" title="lemma">union_subseteq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hexp_incl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq_r"><span class="id" title="lemma">union_subseteq_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space_link"><span class="id" title="axiom">has_free_space_link</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_in"><span class="id" title="axiom">is_context_move_in</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> (<a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">common</span>) <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">HC</span> <span class="id" title="var">mr_impl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ctxt_spec</span> <span class="id" title="var">mr_spec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_out"><span class="id" title="axiom">is_context_move_out</span></a> <span class="id" title="var">_</span>). <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">ctxt_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">mr_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Same as above, one hypothesis is redundant provided we have fresh <span class="inlinecode"><span class="id" title="var">Symbols</span></span>
        see <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_r_inf"><span class="id" title="lemma">ctxt_ref_link_r_inf</span></a></span> for the stronger_version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_r" class="idref" href="#ctxt_ref_link_r"><span class="id" title="lemma">ctxt_ref_link_r</span></a> {<a id="common:66" class="idref" href="#common:66"><span class="id" title="binder">common</span></a> <a id="impl:67" class="idref" href="#impl:67"><span class="id" title="binder">impl</span></a> <a id="spec:68" class="idref" href="#spec:68"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:66"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:66"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:67"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:66"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:68"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:67"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:68"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:67"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:66"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:68"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:66"><span class="id" title="variable">common</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">common_impl</span> <span class="id" title="var">common_spec</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">common_impl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">common_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l"><span class="id" title="axiom">ctxt_ref_link_l</span></a> <span class="id" title="var">Hf</span> <span class="id" title="var">common_impl</span> <span class="id" title="var">common_spec</span> <span class="id" title="var">impl_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Same as above, some hypotheses are redundant provided we have fresh <span class="inlinecode"><span class="id" title="var">Symbols</span></span>
        see <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_inf"><span class="id" title="lemma">ctxt_ref_link_inf</span></a></span> for the stronger_version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link" class="idref" href="#ctxt_ref_link"><span class="id" title="lemma">ctxt_ref_link</span></a> {<a id="impl:69" class="idref" href="#impl:69"><span class="id" title="binder">impl</span></a> <a id="impl':70" class="idref" href="#impl':70"><span class="id" title="binder">impl'</span></a> <a id="spec:71" class="idref" href="#spec:71"><span class="id" title="binder">spec</span></a> <a id="spec':72" class="idref" href="#spec':72"><span class="id" title="binder">spec'</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:71"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:69"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':70"><span class="id" title="variable">impl'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:71"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':72"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl':70"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:71"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:69"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:71"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':70"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':72"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:69"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':70"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:71"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':72"><span class="id" title="variable">spec'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hii'</span> <span class="id" title="var">Hss'</span> <span class="id" title="var">His'</span> <span class="id" title="var">His</span> <span class="id" title="var">Hi's'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">His</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi's'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">spec</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <span class="id" title="var">impl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_r"><span class="id" title="axiom">ctxt_ref_link_r</span></a>; [<span class="id" title="var">done</span>|..|<span class="id" title="var">done</span>]; <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l"><span class="id" title="axiom">ctxt_ref_link_l</span></a>; [<span class="id" title="var">done</span>|..|<span class="id" title="var">done</span>]; <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.facts"><span class="id" title="section">facts</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h1 class="section"><span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a></span> and <span class="inlinecode"><a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers"><span class="id" title="definition">dummy_registers</span></a></span></h1>
 A simple function generating dummy export (all 0) and dummy registers
      for a given list of imports, usefull for building contexts 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.dummy_exports" class="idref" href="#contextual_refinement.dummy_exports"><span class="id" title="section">dummy_exports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="dummy_exports" class="idref" href="#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a id="target:73" class="idref" href="#target:73"><span class="id" title="binder">target</span></a> : <a class="idref" href="cap_machine.linking.html#exports_type"><span class="id" title="abbreviation">exports_type</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_fold"><span class="id" title="definition">map_fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="s:74" class="idref" href="#s:74"><span class="id" title="binder">s</span></a> <a id="exp:75" class="idref" href="#exp:75"><span class="id" title="binder">exp</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#s:74"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">exp</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:73"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="dummy_registers" class="idref" href="#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#set_fold"><span class="id" title="definition">set_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="r:76" class="idref" href="#r:76"><span class="id" title="binder">r</span></a> (<a id="map:77" class="idref" href="#map:77"><span class="id" title="binder">map</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r:76"><span class="id" title="variable">r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">map</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="cap_machine.addr_reg.html#all_registers_s"><span class="id" title="definition">all_registers_s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_spec" class="idref" href="#dummy_exports_spec"><span class="id" title="lemma">dummy_exports_spec</span></a> <a id="target:78" class="idref" href="#target:78"><span class="id" title="binder">target</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:79" class="idref" href="#s:79"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:78"><span class="id" title="variable">target</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:79"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:78"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:78"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_fold_ind"><span class="id" title="lemma">map_fold_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="m:87" class="idref" href="#m:87"><span class="id" title="binder">m</span></a> <a id="imp:88" class="idref" href="#imp:88"><span class="id" title="binder">imp</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="k:89" class="idref" href="#k:89"><span class="id" title="binder">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#m:82"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#k:84"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#k:84"><span class="id" title="variable">k</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#imp:83"><span class="id" title="variable">imp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#k:84"><span class="id" title="variable">k</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#imp:83"><span class="id" title="variable">imp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">_</span>:<a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="s:85" class="idref" href="#s:85"><span class="id" title="binder">s</span></a>:<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) <a id="exp:86" class="idref" href="#exp:86"><span class="id" title="binder">exp</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#s:80"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">exp</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_empty"><span class="id" title="method">lookup_empty</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_empty_L"><span class="id" title="lemma">map_img_empty_L</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">exp</span> <span class="id" title="var">exp'</span> <span class="id" title="var">imp</span> <span class="id" title="var">IH</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols_eq_dec"><span class="id" title="variable">Symbols_eq_dec</span></a> <span class="id" title="var">s</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sk</span> | <span class="id" title="var">sk</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">sk</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>. 2: <span class="id" title="tactic">exact</span> <span class="id" title="var">sk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">k</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">exp'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHw</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">IHw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a'</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">aa'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">aa'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">imp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">imp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a'</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_Some"><span class="id" title="lemma">lookup_insert_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexp</span> <span class="id" title="keyword">as</span> [ [<span class="id" title="var">aa'</span> <span class="id" title="var">ss'</span>] | [<span class="id" title="var">aa'</span> <span class="id" title="var">Hexpa'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hexpa'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_lookup" class="idref" href="#dummy_exports_lookup"><span class="id" title="lemma">dummy_exports_lookup</span></a> {<a id="target:90" class="idref" href="#target:90"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="w:91" class="idref" href="#w:91"><span class="id" title="binder">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:91"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:90"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:91"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hsw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsw</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hsw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_spec"><span class="id" title="axiom">dummy_exports_spec</span></a> <span class="id" title="var">target</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_from_imports" class="idref" href="#dummy_exports_from_imports"><span class="id" title="lemma">dummy_exports_from_imports</span></a> {<a id="target:92" class="idref" href="#target:92"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#set_eq"><span class="id" title="lemma">set_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_spec"><span class="id" title="axiom">dummy_exports_spec</span></a> <span class="id" title="var">target</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">w</span> <span class="id" title="var">Hde_s_w</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hde_s_w</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_dec"><span class="id" title="definition">Some_dec</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <span class="id" title="var">target</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> [ [<span class="id" title="var">w</span> <span class="id" title="var">Hexp_s</span>] | <span class="id" title="var">Hexp_s</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp_s</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp_s</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_spec" class="idref" href="#dummy_registers_spec"><span class="id" title="lemma">dummy_registers_spec</span></a> <a id="r:93" class="idref" href="#r:93"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:93"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="cap_machine.addr_reg.html#all_registers_s_correct"><span class="id" title="axiom">all_registers_s_correct</span></a> <span class="id" title="var">r</span>). <span class="id" title="var">revert</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#set_fold_ind_L"><span class="id" title="lemma">set_fold_ind_L</span></a> (<span class="id" title="keyword">fun</span> <a id="m:97" class="idref" href="#m:97"><span class="id" title="binder">m</span></a> <a id="s:98" class="idref" href="#s:98"><span class="id" title="binder">s</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="r:99" class="idref" href="#r:99"><span class="id" title="binder">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:96"><span class="id" title="variable">r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:95"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#m:94"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:96"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_empty"><span class="id" title="lemma">elem_of_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">contradiction</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">Hrs</span> <span class="id" title="var">IH</span> <span class="id" title="var">r'</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hr'</span> | <span class="id" title="var">Hr'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r'</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> <span class="id" title="var">r'</span> <span class="id" title="var">Hr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_insert" class="idref" href="#dummy_registers_insert"><span class="id" title="lemma">dummy_registers_insert</span></a> {<a id="r':100" class="idref" href="#r':100"><span class="id" title="binder">r'</span></a> <a id="x:101" class="idref" href="#x:101"><span class="id" title="binder">x</span></a>} <a id="r:102" class="idref" href="#r:102"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r':100"><span class="id" title="variable">r'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:101"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:102"><span class="id" title="variable">r</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">r'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_img" class="idref" href="#dummy_registers_img"><span class="id" title="lemma">dummy_registers_img</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#anti_symm"><span class="id" title="definition">anti_symm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5f07ce23a79afecbb5a4cd6ad9f00f5d"><span class="id" title="notation">(⊆)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_inj"><span class="id" title="instance">Some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a>. <span class="id" title="tactic">exists</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.dummy_exports"><span class="id" title="section">dummy_exports</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h1 class="section">Further consequences of refinement</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;When&nbsp;<span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">≼ᵣ</span> <span class="inlinecode"><span class="id" title="var">b</span></span>&nbsp;then<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">img</span></span> <span class="inlinecode">(<span class="id" title="var">imports</span></span> <span class="inlinecode"><span class="id" title="var">b</span>)</span> <span class="inlinecode">⊆</span> <span class="inlinecode"><span class="id" title="var">img</span></span> <span class="inlinecode">(<span class="id" title="var">imports</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">dom</span></span> <span class="inlinecode">(<span class="id" title="var">segment</span></span> <span class="inlinecode"><span class="id" title="var">b</span>)</span> <span class="inlinecode">⊆</span> <span class="inlinecode"><span class="id" title="var">dom</span></span> <span class="inlinecode">(<span class="id" title="var">segment</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">dom</span></span> <span class="inlinecode">(<span class="id" title="var">exports</span></span> <span class="inlinecode"><span class="id" title="var">b</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">dom</span></span> <span class="inlinecode">(<span class="id" title="var">exports</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.component_part_subseteq" class="idref" href="#contextual_refinement.component_part_subseteq"><span class="id" title="section">component_part_subseteq</span></a>.<br/>

<br/>
</div>

<div class="doc">
We will need a fresh symbol, so we assume our set is infinite 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">Infinite</span></a> <a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">Symbols</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Basic context to prove the forall is non-empty
        Halt immediatly 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Example</span> <a id="halt_context" class="idref" href="#halt_context"><span class="id" title="definition">halt_context</span></a> <a id="s:104" class="idref" href="#s:104"><span class="id" title="binder">s</span></a> <a id="target:105" class="idref" href="#target:105"><span class="id" title="binder">target</span></a> : <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#s:104"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> (<a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a><a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_exports</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">target</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_wf" class="idref" href="#halt_context_wf"><span class="id" title="lemma">halt_context_wf</span></a> {<a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a> <a id="target:107" class="idref" href="#target:107"><span class="id" title="binder">target</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:106"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:107"><span class="id" title="variable">target</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#wf_comp_intro"><span class="id" title="constructor">wf_comp_intro</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_empty_L"><span class="id" title="lemma">map_img_empty_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#disjoint_empty_r"><span class="id" title="lemma">disjoint_empty_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_empty"><span class="id" title="lemma">dom_empty</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_insert_subseteq"><span class="id" title="axiom">map_img_insert_subseteq</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw</span> | <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>. <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_lookup"><span class="id" title="axiom">dummy_exports_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_singleton"><span class="id" title="axiom">map_img_singleton</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_can_link" class="idref" href="#halt_context_can_link"><span class="id" title="lemma">halt_context_can_link</span></a> {<a id="s:108" class="idref" href="#s:108"><span class="id" title="binder">s</span></a> <a id="target:109" class="idref" href="#target:109"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:108"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:109"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:109"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:109"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:108"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:109"><span class="id" title="variable">target</span></a><a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:109"><span class="id" title="variable">target</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_disjoint_spec"><span class="id" title="lemma">map_disjoint_spec</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Hix</span> <span class="id" title="var">Hiy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton_Some"><span class="id" title="lemma">lookup_singleton_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hi</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hf</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Hiy</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_insert"><span class="id" title="lemma">dom_insert</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> [<span class="id" title="var">Hs'</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> | <span class="id" title="var">Hs'</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="var">Hs''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">Hs''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hdisj</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs''</span> <span class="id" title="var">Hs'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_machine_run" class="idref" href="#halt_context_machine_run"><span class="id" title="lemma">halt_context_machine_run</span></a> <a id="s:110" class="idref" href="#s:110"><span class="id" title="binder">s</span></a> {<a id="target:111" class="idref" href="#target:111"><span class="id" title="binder">target</span></a> <a id="comp:112" class="idref" href="#comp:112"><span class="id" title="binder">comp</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:112"><span class="id" title="variable">comp</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:112"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> (<a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a><a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:110"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:111"><span class="id" title="variable">target</span></a><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:112"><span class="id" title="variable">comp</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPCb"><span class="id" title="definition">isCorrectPCb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hp</span>: (0 <a class="idref" href="cap_machine.addr_reg.html#0d5f63436be37e7acb16042877c8bbac"><span class="id" title="notation">&lt;=?</span></a> 0)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> (0 <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> 0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#isPerm"><span class="id" title="definition">isPerm</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="cap_machine.machine_base.html#isPerm"><span class="id" title="definition">isPerm</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_imports_empty"><span class="id" title="lemma">resolve_imports_imports_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a>0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0%<span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.cap_lang.html#exec"><span class="id" title="definition">exec</span></a>, <a class="idref" href="cap_machine.cap_lang.html#exec_opt"><span class="id" title="definition">exec_opt</span></a>, <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.machine_parameters.html#decode_encode_instrW_inv"><span class="id" title="lemma">decode_encode_instrW_inv</span></a> <a class="idref" href="cap_machine.machine_base.html#Halt"><span class="id" title="constructor">Halt</span></a>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_Some_l"><span class="id" title="lemma">lookup_union_Some_l</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton"><span class="id" title="lemma">lookup_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_is_context" class="idref" href="#halt_context_is_context"><span class="id" title="lemma">halt_context_is_context</span></a> <a id="s:113" class="idref" href="#s:113"><span class="id" title="binder">s</span></a> {<a id="target:114" class="idref" href="#target:114"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:113"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:114"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:114"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:114"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:113"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:114"><span class="id" title="variable">target</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#target:114"><span class="id" title="variable">target</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0%<span class="id" title="var">a</span><a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#is_context_intro"><span class="id" title="constructor">is_context_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_insert_subseteq"><span class="id" title="axiom">map_img_insert_subseteq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_img"><span class="id" title="axiom">dummy_registers_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw</span> | <span class="id" title="var">Hw</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img_insert"><span class="id" title="lemma">elem_of_map_img_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_insert"><span class="id" title="axiom">dummy_registers_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <span class="id" title="var">target</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_empty_L"><span class="id" title="lemma">map_img_empty_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Contextual refinement implies that the
        implementation imports all the specifications symbols 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_imports_subseteq" class="idref" href="#ctxt_ref_imports_subseteq"><span class="id" title="lemma">ctxt_ref_imports_subseteq</span></a> <a id="s:115" class="idref" href="#s:115"><span class="id" title="binder">s</span></a> {<a id="impl:116" class="idref" href="#impl:116"><span class="id" title="binder">impl</span></a> <a id="spec:117" class="idref" href="#spec:117"><span class="id" title="binder">spec</span></a> : <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:116"><span class="id" title="variable">impl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:117"><span class="id" title="variable">spec</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:116"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:117"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:117"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:116"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span> <span class="id" title="var">Href</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hspec_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span>: 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>) <a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_is_context"><span class="id" title="axiom">halt_context_is_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a> <span class="id" title="var">s</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hwf_impl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hno_imps_l</span> <span class="id" title="var">_</span> <span class="id" title="var">Hspec_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_insert"><span class="id" title="lemma">dom_insert</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_imps_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_imps_l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs'</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> | <span class="id" title="var">Hs'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hspec_s</span>. <span class="id" title="var">contradiction</span> (<span class="id" title="var">Hs2</span> <span class="id" title="var">Hspec_s</span>). <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Context with a single defined address, optionally an import 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Example</span> <a id="addr_ctxt" class="idref" href="#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a id="a:118" class="idref" href="#a:118"><span class="id" title="binder">a</span></a> <a id="s':119" class="idref" href="#s':119"><span class="id" title="binder">s'</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:118"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#s':119"><span class="id" title="variable">s'</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="cap_machine.linking.html#imports_type"><span class="id" title="abbreviation">imports_type</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s'</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:118"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a> <span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_wf" class="idref" href="#addr_ctxt_wf"><span class="id" title="lemma">addr_ctxt_wf</span></a> <a id="a:121" class="idref" href="#a:121"><span class="id" title="binder">a</span></a> <a id="s':122" class="idref" href="#s':122"><span class="id" title="binder">s'</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:121"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':122"><span class="id" title="variable">s'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#wf_comp_intro"><span class="id" title="constructor">wf_comp_intro</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton_Some"><span class="id" title="lemma">lookup_singleton_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hw</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_sep" class="idref" href="#addr_ctxt_sep"><span class="id" title="lemma">addr_ctxt_sep</span></a> {<a id="target:123" class="idref" href="#target:123"><span class="id" title="binder">target</span></a> <a id="a:124" class="idref" href="#a:124"><span class="id" title="binder">a</span></a> <a id="s':125" class="idref" href="#s':125"><span class="id" title="binder">s'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:123"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:124"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:123"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:124"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':125"><span class="id" title="variable">s'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:123"><span class="id" title="variable">target</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himpl</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_wf"><span class="id" title="axiom">addr_ctxt_wf</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Himpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>. <span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_halt_ctxt" class="idref" href="#addr_ctxt_halt_ctxt"><span class="id" title="lemma">addr_ctxt_halt_ctxt</span></a> <a id="s:126" class="idref" href="#s:126"><span class="id" title="binder">s</span></a> {<a id="target:127" class="idref" href="#target:127"><span class="id" title="binder">target</span></a> <a id="a:128" class="idref" href="#a:128"><span class="id" title="binder">a</span></a> <a id="s':129" class="idref" href="#s':129"><span class="id" title="binder">s'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:127"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:128"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:127"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#s':129"><span class="id" title="variable">s'</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#s:126"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:127"><span class="id" title="variable">target</span></a>) <span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:126"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:127"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:126"><span class="id" title="variable">s</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:128"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':129"><span class="id" title="variable">s'</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:127"><span class="id" title="variable">target</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#anti_symm"><span class="id" title="definition">anti_symm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5f07ce23a79afecbb5a4cd6ad9f00f5d"><span class="id" title="notation">(⊆)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_subseteq_spec"><span class="id" title="lemma">map_subseteq_spec</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">addr</span> <span class="id" title="var">s''</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">addr</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha'</span>|<span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]. <span class="id" title="var">contradiction</span> (<span class="id" title="var">Ha</span> (<span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">Haddr</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_lookup_Some"><span class="id" title="lemma">map_filter_lookup_Some</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_r"><span class="id" title="lemma">lookup_union_r</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Haddr</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton_None"><span class="id" title="lemma">lookup_singleton_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">He</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">target</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s''</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">He'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He'</span>. <span class="id" title="var">contradiction</span> (<span class="id" title="var">He</span> <span class="id" title="var">_</span> <span class="id" title="var">He'</span> (<a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img_2"><span class="id" title="lemma">elem_of_map_img_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Haddr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_lookup_Some"><span class="id" title="lemma">map_filter_lookup_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Haddr</span> <span class="id" title="var">Hs'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">addr</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha'</span>|<span class="id" title="var">Ha'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_union_singleton_l"><span class="id" title="lemma">insert_union_singleton_l</span></a> <span class="id" title="var">Ha'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_inj"><span class="id" title="instance">Some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Haddr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#insert_union_singleton_l"><span class="id" title="lemma">insert_union_singleton_l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_is_ctxt" class="idref" href="#addr_ctxt_is_ctxt"><span class="id" title="lemma">addr_ctxt_is_ctxt</span></a> <a id="s:131" class="idref" href="#s:131"><span class="id" title="binder">s</span></a> {<a id="target:132" class="idref" href="#target:132"><span class="id" title="binder">target</span></a> <a id="a:133" class="idref" href="#a:133"><span class="id" title="binder">a</span></a> <a id="s':134" class="idref" href="#s':134"><span class="id" title="binder">s'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:131"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:133"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:133"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#s':134"><span class="id" title="variable">s'</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#s:131"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a>) <span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:131"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:133"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':134"><span class="id" title="variable">s'</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#target:132"><span class="id" title="variable">target</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span> <span class="id" title="var">Ha2</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">target</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha3</span>: <span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">target</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s'</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>) <span class="id" title="var">Ha3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#is_context_intro"><span class="id" title="constructor">is_context_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_insert_subseteq"><span class="id" title="axiom">map_img_insert_subseteq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_img"><span class="id" title="axiom">dummy_registers_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw</span> | <span class="id" title="var">Hw</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_union_empty"><span class="id" title="instance">map_union_empty</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img_insert"><span class="id" title="lemma">elem_of_map_img_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_insert"><span class="id" title="axiom">dummy_registers_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">target</span>))). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_insert"><span class="id" title="lemma">dom_insert</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union"><span class="id" title="lemma">dom_union</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>|]. <span class="id" title="tactic">transitivity</span> (<a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a><span class="id" title="var">a</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a><span class="id" title="var">s'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#map_subseteq_img"><span class="id" title="axiom">map_subseteq_img</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_subseteq"><span class="id" title="lemma">map_filter_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#map_img_singleton"><span class="id" title="axiom">map_img_singleton</span></a> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_subseteq_singleton"><span class="id" title="lemma">elem_of_subseteq_singleton</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_machine_run" class="idref" href="#addr_ctxt_machine_run"><span class="id" title="lemma">addr_ctxt_machine_run</span></a> <a id="s:136" class="idref" href="#s:136"><span class="id" title="binder">s</span></a> {<a id="target:137" class="idref" href="#target:137"><span class="id" title="binder">target</span></a> <a id="a:138" class="idref" href="#a:138"><span class="id" title="binder">a</span></a> <a id="s':139" class="idref" href="#s':139"><span class="id" title="binder">s'</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:136"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:138"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:138"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#s':139"><span class="id" title="variable">s'</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#s:136"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a>) <span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:136"><span class="id" title="variable">s</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:138"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s':139"><span class="id" title="variable">s'</span></a><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:137"><span class="id" title="variable">target</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span> <span class="id" title="var">Ha2</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha3</span>: <span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">target</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s'</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>) <span class="id" title="var">Ha3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_halt_ctxt"><span class="id" title="axiom">addr_ctxt_halt_ctxt</span></a> <span class="id" title="var">s</span> <span class="id" title="var">target</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hwf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="cap_machine.linking.html#link_segment_dom"><span class="id" title="axiom">link_segment_dom</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ha</span> | <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>. <span class="id" title="var">done</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_segment_subseteq" class="idref" href="#ctxt_ref_segment_subseteq"><span class="id" title="lemma">ctxt_ref_segment_subseteq</span></a> <a id="s:141" class="idref" href="#s:141"><span class="id" title="binder">s</span></a> {<a id="impl:142" class="idref" href="#impl:142"><span class="id" title="binder">impl</span></a> <a id="spec:143" class="idref" href="#spec:143"><span class="id" title="binder">spec</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:141"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:142"><span class="id" title="variable">impl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:142"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:143"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:143"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:142"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> [ ] <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqA</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span>: 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha'</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha'</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [ <span class="id" title="var">Ha0</span> | <span class="id" title="var">Ha0</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_is_context"><span class="id" title="axiom">halt_context_is_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a> <span class="id" title="var">s</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hwf_impl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hms_disj</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>. <span class="id" title="var">set_solver</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">impl</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_is_ctxt"><span class="id" title="axiom">addr_ctxt_is_ctxt</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">Ha0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_machine_run"><span class="id" title="axiom">addr_ctxt_machine_run</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">Ha0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hms_disj</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="cap_machine.linking.html#resolve_imports_imports_empty"><span class="id" title="lemma">resolve_imports_imports_empty</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union"><span class="id" title="lemma">dom_union</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_dom_exports" class="idref" href="#ctxt_ref_dom_exports"><span class="id" title="lemma">ctxt_ref_dom_exports</span></a> <a id="s:144" class="idref" href="#s:144"><span class="id" title="binder">s</span></a> {<a id="impl:145" class="idref" href="#impl:145"><span class="id" title="binder">impl</span></a> <a id="spec:146" class="idref" href="#spec:146"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:144"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:145"><span class="id" title="variable">impl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:145"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:146"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:145"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:146"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> [ ]. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#anti_symm"><span class="id" title="definition">anti_symm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5f07ce23a79afecbb5a4cd6ad9f00f5d"><span class="id" title="notation">(⊆)</span></a>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HeqS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha</span>: (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> 0%<span class="id" title="var">a</span>). <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha'</span>: (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha'</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha'</span>). <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">s</span> <span class="id" title="var">impl</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_is_ctxt"><span class="id" title="axiom">addr_ctxt_is_ctxt</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s'</span>) <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">Ha'</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hs'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_machine_run"><span class="id" title="axiom">addr_ctxt_machine_run</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s'</span>) <span class="id" title="var">Hs</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">Ha'</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hs'</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Himps</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">Himps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_map_img"><span class="id" title="lemma">elem_of_map_img</span></a>. <span class="id" title="tactic">exists</span> (0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_lookup_Some"><span class="id" title="lemma">map_filter_lookup_Some</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton"><span class="id" title="lemma">lookup_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_union_empty"><span class="id" title="instance">map_union_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_spec"><span class="id" title="axiom">dummy_exports_spec</span></a> <span class="id" title="var">impl</span> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hspec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <span class="id" title="var">impl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s'</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hspec</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hspec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hwf</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]. <span class="id" title="var">contradiction</span> (<span class="id" title="var">Hwf</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">Hspec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#eq_None_not_Some"><span class="id" title="lemma">eq_None_not_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hspec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">Hs'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_can_link" class="idref" href="#ctxt_ref_can_link"><span class="id" title="lemma">ctxt_ref_can_link</span></a> <a id="s:147" class="idref" href="#s:147"><span class="id" title="binder">s</span></a> {<a id="a:148" class="idref" href="#a:148"><span class="id" title="binder">a</span></a> <a id="b:149" class="idref" href="#b:149"><span class="id" title="binder">b</span></a> <a id="c:150" class="idref" href="#c:150"><span class="id" title="binder">c</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:147"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:148"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:148"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:148"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:150"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:150"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hctxt_ref</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_ref</span>. <span class="id" title="var">solve_can_link</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">addr</span> <span class="id" title="var">Hb_addr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_segment_subseteq"><span class="id" title="axiom">ctxt_ref_segment_subseteq</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hctxt_ref</span> <span class="id" title="var">addr</span> <span class="id" title="var">Hb_addr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hb_s</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp_disj</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hexp_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_ref</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hexp_incl</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hb_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_has_free_space" class="idref" href="#ctxt_ref_has_free_space"><span class="id" title="lemma">ctxt_ref_has_free_space</span></a> <a id="s:151" class="idref" href="#s:151"><span class="id" title="binder">s</span></a> {<a id="a:152" class="idref" href="#a:152"><span class="id" title="binder">a</span></a> <a id="b:153" class="idref" href="#b:153"><span class="id" title="binder">b</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#s:151"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:152"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:152"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:153"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:153"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hab</span> <span class="id" title="var">addr</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_segment_subseteq"><span class="id" title="axiom">ctxt_ref_segment_subseteq</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hab</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hfree</span> <span class="id" title="var">addr</span> <span class="id" title="var">Haddr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.component_part_subseteq"><span class="id" title="section">component_part_subseteq</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab22"></a><h1 class="section">Simplified results when <span class="inlinecode"><span class="id" title="var">Symbols</span></span> is <span class="inlinecode"><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Infinite"><span class="id" title="class">Infinite</span></a></span></h1>
 We can simplify a few lemmas by just requiring <span class="inlinecode"><span class="id" title="var">Symbols</span></span>
      to be infinite 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.infinite_symbols" class="idref" href="#contextual_refinement.infinite_symbols"><span class="id" title="section">infinite_symbols</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols_infinite:154" class="idref" href="#Symbols_infinite:154"><span class="id" title="binder">Symbols_infinite</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Infinite"><span class="id" title="class">Infinite</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_imports_subseteq_inf" class="idref" href="#ctxt_ref_imports_subseteq_inf"><span class="id" title="lemma">ctxt_ref_imports_subseteq_inf</span></a> {<a id="impl:155" class="idref" href="#impl:155"><span class="id" title="binder">impl</span></a> <a id="spec:156" class="idref" href="#spec:156"><span class="id" title="binder">spec</span></a> : <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:155"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:156"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:156"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:155"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#is_fresh"><span class="id" title="lemma">is_fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="cap_machine.stdpp_img.html#map_img"><span class="id" title="definition">map_img</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <span class="id" title="var">spec</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_imports_subseteq"><span class="id" title="axiom">ctxt_ref_imports_subseteq</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fresh"><span class="id" title="definition">fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#img"><span class="id" title="abbreviation">img</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <span class="id" title="var">spec</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_segment_subseteq_inf" class="idref" href="#ctxt_ref_segment_subseteq_inf"><span class="id" title="lemma">ctxt_ref_segment_subseteq_inf</span></a> {<a id="impl:157" class="idref" href="#impl:157"><span class="id" title="binder">impl</span></a> <a id="spec:158" class="idref" href="#spec:158"><span class="id" title="binder">spec</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:157"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:158"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:158"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:157"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#is_fresh"><span class="id" title="lemma">is_fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_segment_subseteq"><span class="id" title="axiom">ctxt_ref_segment_subseteq</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fresh"><span class="id" title="definition">fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_dom_exports_inf" class="idref" href="#ctxt_ref_dom_exports_inf"><span class="id" title="lemma">ctxt_ref_dom_exports_inf</span></a> {<a id="impl:159" class="idref" href="#impl:159"><span class="id" title="binder">impl</span></a> <a id="spec:160" class="idref" href="#spec:160"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:159"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:160"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:159"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:160"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#is_fresh"><span class="id" title="lemma">is_fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_dom_exports"><span class="id" title="axiom">ctxt_ref_dom_exports</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fresh"><span class="id" title="definition">fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_can_link_inf" class="idref" href="#ctxt_ref_can_link_inf"><span class="id" title="lemma">ctxt_ref_can_link_inf</span></a> {<a id="a:161" class="idref" href="#a:161"><span class="id" title="binder">a</span></a> <a id="b:162" class="idref" href="#b:162"><span class="id" title="binder">b</span></a> <a id="c:163" class="idref" href="#c:163"><span class="id" title="binder">c</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:161"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:162"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:161"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:163"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:162"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:163"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#is_fresh"><span class="id" title="lemma">is_fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">a</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="axiom">ctxt_ref_can_link</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fresh"><span class="id" title="definition">fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">a</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_has_free_space_inf" class="idref" href="#ctxt_ref_has_free_space_inf"><span class="id" title="lemma">ctxt_ref_has_free_space_inf</span></a> {<a id="a:164" class="idref" href="#a:164"><span class="id" title="binder">a</span></a> <a id="b:165" class="idref" href="#b:165"><span class="id" title="binder">b</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:164"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:165"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:165"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#is_fresh"><span class="id" title="lemma">is_fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">a</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_has_free_space"><span class="id" title="axiom">ctxt_ref_has_free_space</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#fresh"><span class="id" title="definition">fresh</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">a</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_l_inf" class="idref" href="#ctxt_ref_link_l_inf"><span class="id" title="lemma">ctxt_ref_link_l_inf</span></a> {<a id="common:166" class="idref" href="#common:166"><span class="id" title="binder">common</span></a> <a id="impl:167" class="idref" href="#impl:167"><span class="id" title="binder">impl</span></a> <a id="spec:168" class="idref" href="#spec:168"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:166"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:166"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:167"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:167"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:168"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:166"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:167"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:166"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:168"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l"><span class="id" title="axiom">ctxt_ref_link_l</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link_inf"><span class="id" title="axiom">ctxt_ref_can_link_inf</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_r_inf" class="idref" href="#ctxt_ref_link_r_inf"><span class="id" title="lemma">ctxt_ref_link_r_inf</span></a> {<a id="common:169" class="idref" href="#common:169"><span class="id" title="binder">common</span></a> <a id="impl:170" class="idref" href="#impl:170"><span class="id" title="binder">impl</span></a> <a id="spec:171" class="idref" href="#spec:171"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:169"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:169"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:170"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:170"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:171"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:170"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:169"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:171"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:169"><span class="id" title="variable">common</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_r"><span class="id" title="axiom">ctxt_ref_link_r</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link_inf"><span class="id" title="axiom">ctxt_ref_can_link_inf</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_inf" class="idref" href="#ctxt_ref_link_inf"><span class="id" title="lemma">ctxt_ref_link_inf</span></a> {<a id="impl:172" class="idref" href="#impl:172"><span class="id" title="binder">impl</span></a> <a id="impl':173" class="idref" href="#impl':173"><span class="id" title="binder">impl'</span></a> <a id="spec:174" class="idref" href="#spec:174"><span class="id" title="binder">spec</span></a> <a id="spec':175" class="idref" href="#spec':175"><span class="id" title="binder">spec'</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:172"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':173"><span class="id" title="variable">impl'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:172"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:174"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':173"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':175"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:172"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':173"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">≼ᵣ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:174"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">⋈</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':175"><span class="id" title="variable">spec'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: <span class="id" title="var">impl'</span> <a class="idref" href="cap_machine.contextual_refinement.html#68d1f67de1b5769f8b935919df65ec2e"><span class="id" title="notation">##ₗ</span></a> <span class="id" title="var">spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link_inf"><span class="id" title="axiom">ctxt_ref_can_link_inf</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link"><span class="id" title="axiom">ctxt_ref_link</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_has_free_space_inf"><span class="id" title="axiom">ctxt_ref_has_free_space_inf</span></a> <span class="id" title="var">H2</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link_inf"><span class="id" title="axiom">ctxt_ref_can_link_inf</span></a> <span class="id" title="var">H3</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H4</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.infinite_symbols"><span class="id" title="section">infinite_symbols</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="section">contextual_refinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="4b789fbbf8a7799c36b8e9249417ecf1" class="idref" href="#4b789fbbf8a7799c36b8e9249417ecf1"><span class="id" title="notation">&quot;</span></a>≼ᵣ" := <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
