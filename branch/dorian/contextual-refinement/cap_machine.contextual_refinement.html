<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.contextual_refinement</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#"><span class="id" title="library">gmap</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#"><span class="id" title="library">fin_maps</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#"><span class="id" title="library">fin_sets</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="cap_machine.machine_parameters.html#"><span class="id" title="library">machine_parameters</span></a> <a class="idref" href="cap_machine.cap_lang.html#"><span class="id" title="library">cap_lang</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="cap_machine.stdpp_img.html#"><span class="id" title="library">stdpp_img</span></a> <a class="idref" href="cap_machine.linking.html#"><span class="id" title="library">linking</span></a> <a class="idref" href="cap_machine.machine_run.html#"><span class="id" title="library">machine_run</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#"><span class="id" title="library">addr_reg_sample</span></a>.<br/>

<br/>
</div>

<div class="doc">
Minimal free memory in which to write our contexts 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="reserved_context_size_z" class="idref" href="#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := 100000.<br/>
<span class="id" title="keyword">Definition</span> <a id="reserved_context_size" class="idref" href="#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a> := (<a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>)%<span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reserved_context_size_le_mem" class="idref" href="#reserved_context_size_le_mem"><span class="id" title="lemma">reserved_context_size_le_mem</span></a> :<br/>
&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.addr_reg.html#MemNum"><span class="id" title="definition">MemNum</span></a>, <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reserved_context_size_to_z" class="idref" href="#reserved_context_size_to_z"><span class="id" title="lemma">reserved_context_size_to_z</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="machine_utils.finz_base.html#finz.to_z"><span class="id" title="definition">finz.to_z</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size_z"><span class="id" title="definition">reserved_context_size_z</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Example addr_restriction, address greater than a given end_stack parameter 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="addr_gt_than" class="idref" href="#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> (<a id="e_stk:1" class="idref" href="#e_stk:1"><span class="id" title="binder">e_stk</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="dom:2" class="idref" href="#dom:2"><span class="id" title="binder">dom</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="a:3" class="idref" href="#a:3"><span class="id" title="binder">a</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:3"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dom:2"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#e_stk:1"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.addr_reg.html#::Addr_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:3"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="addr_gt_than_union_stable" class="idref" href="#addr_gt_than_union_stable"><span class="id" title="lemma">addr_gt_than_union_stable</span></a> (<a id="e_stk:4" class="idref" href="#e_stk:4"><span class="id" title="binder">e_stk</span></a>: <a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s1:5" class="idref" href="#s1:5"><span class="id" title="binder">s1</span></a> <a id="s2:6" class="idref" href="#s2:6"><span class="id" title="binder">s2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s2:6"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#e_stk:4"><span class="id" title="variable">e_stk</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s2:6"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom1</span> <span class="id" title="var">dom2</span> <span class="id" title="var">gt_dom1</span> <span class="id" title="var">gt_dom2</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_1or2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a_in_1or2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a_in_1or2</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">a_in_1</span> | <span class="id" title="var">a_in_2</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">gt_dom1</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">gt_dom2</span> <span class="id" title="var">a</span> <span class="id" title="var">a_in_2</span>).<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="contextual_refinement" class="idref" href="#contextual_refinement"><span class="id" title="section">contextual_refinement</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="MP:7" class="idref" href="#MP:7"><span class="id" title="binder">MP</span></a>: <a class="idref" href="cap_machine.machine_parameters.html#MachineParameters"><span class="id" title="class">MachineParameters</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Type&nbsp;of&nbsp;symbols&nbsp;to&nbsp;uniquely&nbsp;identify&nbsp;exports/inports.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols:8" class="idref" href="#Symbols:8"><span class="id" title="binder">Symbols</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols_eq_dec:9" class="idref" href="#Symbols_eq_dec:9"><span class="id" title="binder">Symbols_eq_dec</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Symbols_countable:10" class="idref" href="#Symbols_countable:10"><span class="id" title="binder">Symbols_countable</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.countable.html#Countable"><span class="id" title="class">Countable</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="wf_comp" class="idref" href="#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> := (<a class="idref" href="cap_machine.linking.html#well_formed_comp"><span class="id" title="inductive">well_formed_comp</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="6708c68a988970b9ce23ab6e6d0b43b8" class="idref" href="#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">&quot;</span></a>##â‚—" := (<a class="idref" href="cap_machine.linking.html#can_link"><span class="id" title="inductive">can_link</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="is_ctxt" class="idref" href="#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> := (<a class="idref" href="cap_machine.linking.html#is_context"><span class="id" title="inductive">is_context</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="has_free_space" class="idref" href="#has_free_space"><span class="id" title="definition">has_free_space</span></a> (<a id="x:11" class="idref" href="#x:11"><span class="id" title="binder">x</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than"><span class="id" title="definition">addr_gt_than</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#reserved_context_size"><span class="id" title="definition">reserved_context_size</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:11"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="has_free_space_link" class="idref" href="#has_free_space_link"><span class="id" title="lemma">has_free_space_link</span></a> {<a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> <a id="y:13" class="idref" href="#y:13"><span class="id" title="binder">y</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:13"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:13"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#y:13"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hxy</span> <span class="id" title="var">Hx</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="cap_machine.linking.html#link_segment_dom"><span class="id" title="axiom">link_segment_dom</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_gt_than_union_stable"><span class="id" title="axiom">addr_gt_than_union_stable</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
This is the contextual refinement relation
      A component 'impl' contextually refines 'spec' if,
      for all contexts 'ctxt'
      if
<ul class="doclist">
<li> 'ctxt' is a valid context to run 'impl' (implies that 'ctxt' is well-formed)

</li>
<li> 'ctxt' linked with 'impl' terminates in a final state 'c'
        (either HALTED or FAILED)

</li>
</ul>
      then
<ul class="doclist">
<li> 'ctxt' is a valid context to run 'spec'

</li>
<li> 'ctxt' linked with 'spce' also terminates in 'c' 

</li>
</ul>
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="contextual_refinement" class="idref" href="#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> <a id="impl:14" class="idref" href="#impl:14"><span class="id" title="binder">impl</span></a> <a id="spec:15" class="idref" href="#spec:15"><span class="id" title="binder">spec</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="ctxt_ref_intro" class="idref" href="#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="Hwf_impl:18" class="idref" href="#Hwf_impl:18"><span class="id" title="binder">Hwf_impl</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hwf_spec:19" class="idref" href="#Hwf_spec:19"><span class="id" title="binder">Hwf_spec</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:15"><span class="id" title="variable">spec</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hexp_incl:20" class="idref" href="#Hexp_incl:20"><span class="id" title="binder">Hexp_incl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:15"><span class="id" title="variable">spec</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">âŠ†</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
We need some free addresses to place our contexts 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfree:21" class="idref" href="#Hfree:21"><span class="id" title="binder">Hfree</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hrefines:27" class="idref" href="#Hrefines:27"><span class="id" title="binder">Hrefines</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="ctxt:22" class="idref" href="#ctxt:22"><span class="id" title="binder">ctxt</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) (<a id="regs:23" class="idref" href="#regs:23"><span class="id" title="binder">regs</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) (<a id="c:24" class="idref" href="#c:24"><span class="id" title="binder">c</span></a>: <a class="idref" href="cap_machine.cap_lang.html#ConfFlag"><span class="id" title="inductive">ConfFlag</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:22"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:23"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">âˆƒ</span></a> <a id="n:25" class="idref" href="#n:25"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:25"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#regs:23"><span class="id" title="variable">regs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:22"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:24"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt:22"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:15"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#regs:23"><span class="id" title="variable">regs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">âˆƒ</span></a> <a id="n:26" class="idref" href="#n:26"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#n:26"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#regs:23"><span class="id" title="variable">regs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt:22"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:15"><span class="id" title="variable">spec</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:24"><span class="id" title="variable">c</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement:16"><span class="id" title="inductive">contextual_refinement</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:14"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:15"><span class="id" title="variable">spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="341bc3d103ee94e71eaa8029c4cbb0b8" class="idref" href="#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">&quot;</span></a>â‰¼áµ£" := <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>

<br/>
</div>

<div class="doc">
Easy results about contextual refinement 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.facts" class="idref" href="#contextual_refinement.facts"><span class="id" title="section">facts</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_reflexive" class="idref" href="#ctxt_ref_reflexive"><span class="id" title="lemma">ctxt_ref_reflexive</span></a> {<a id="comp:28" class="idref" href="#comp:28"><span class="id" title="binder">comp</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:28"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:28"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:28"><span class="id" title="variable">comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:28"><span class="id" title="variable">comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Haddr</span> <span class="id" title="var">Hwf_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>. 1,2,4: <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_ctxt_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="ctxt_ref_transitive" class="idref" href="#ctxt_ref_transitive"><span class="id" title="instance">ctxt_ref_transitive</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">a_b</span> <span class="id" title="var">b_c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">a_b</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">b_c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">b</span>)); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_a</span> <span class="id" title="var">mr_ctxt_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_a</span> <span class="id" title="var">mr_ctxt_a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ctxt_b</span> <span class="id" title="var">mr_ctxt_b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hrefines0</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">conf</span> <span class="id" title="var">ctxt_b</span> <span class="id" title="var">mr_ctxt_b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_grow_impl" class="idref" href="#ctxt_ref_grow_impl"><span class="id" title="lemma">ctxt_ref_grow_impl</span></a> {<a id="impl:29" class="idref" href="#impl:29"><span class="id" title="binder">impl</span></a> <a id="spec:30" class="idref" href="#spec:30"><span class="id" title="binder">spec</span></a> <a id="extra:31" class="idref" href="#extra:31"><span class="id" title="binder">extra</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:31"><span class="id" title="variable">extra</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#extra:31"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:29"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#extra:31"><span class="id" title="variable">extra</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:29"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:30"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#extra:31"><span class="id" title="variable">extra</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:29"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:30"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Haddr</span> <span class="id" title="var">Hsep_ei</span> <span class="id" title="var">Hexp</span> [ ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_well_formed"><span class="id" title="axiom">link_well_formed</span></a> <span class="id" title="var">_</span>). <span class="id" title="var">solve_can_link</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hexp</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space_link"><span class="id" title="axiom">has_free_space_link</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_in"><span class="id" title="axiom">is_context_move_in</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hctxt</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">mr_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">extra</span>) <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">Hctxt</span> <span class="id" title="var">mr_impl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span> <span class="id" title="var">Hmr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="cap_machine.linking.html#is_context_remove_exportless_r"><span class="id" title="axiom">is_context_remove_exportless_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hexp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_out"><span class="id" title="axiom">is_context_move_out</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hwr_regs</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hc</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Hmr</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="cap_machine.machine_run.html#machine_run_segment_subseteq"><span class="id" title="axiom">machine_run_segment_subseteq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">extra</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hmr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">extra</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">extra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_segment_union"><span class="id" title="axiom">link_segment_union</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_segment_union"><span class="id" title="axiom">link_segment_union</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_segment_union"><span class="id" title="axiom">link_segment_union</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3,4: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="cap_machine.linking.html#resolve_imports"><span class="id" title="definition">resolve_imports</span></a> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>)) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">extra</span>) (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_exports_empty"><span class="id" title="axiom">resolve_imports_exports_empty</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_union_subseteq_l"><span class="id" title="lemma">map_union_subseteq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hdom_ctxt</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">ctxt</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">âŠ†</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,3: <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_segment_dom_subseteq_l"><span class="id" title="axiom">link_segment_dom_subseteq_l</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hdom_spec</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">spec</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">âŠ†</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_segment_dom_subseteq_r"><span class="id" title="axiom">link_segment_dom_subseteq_r</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>; <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hex</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">âˆ€</span></a> <a id="w:33" class="idref" href="#w:33"><span class="id" title="binder">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:32"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:32"><span class="id" title="variable">w</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hw'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_Some_raw"><span class="id" title="lemma">lookup_union_Some_raw</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw'</span> | [<span class="id" title="var">_</span> <span class="id" title="var">Hw'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#relation_stable2"><span class="id" title="definition">relation_stable2</span></a> <span class="id" title="var">w</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">ctxt</span>)) <span class="id" title="var">_</span> <span class="id" title="var">Hdom_ctxt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> [ [ [] ] ]. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwr_exp</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#relation_stable2"><span class="id" title="definition">relation_stable2</span></a> <span class="id" title="var">w</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">spec</span>)) <span class="id" title="var">_</span> <span class="id" title="var">Hdom_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf_r</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwr_exp</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span>. <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hse</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">âˆ€</span></a> <a id="a':36" class="idref" href="#a':36"><span class="id" title="binder">a'</span></a> <a id="w:37" class="idref" href="#w:37"><span class="id" title="binder">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">spec</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a':34"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:35"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:35"><span class="id" title="variable">w</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<span class="id" title="var">ctxt</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">spec</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_Some_raw"><span class="id" title="lemma">lookup_union_Some_raw</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw'</span> | [<span class="id" title="var">_</span> <span class="id" title="var">Hw'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#relation_stable2"><span class="id" title="definition">relation_stable2</span></a> <span class="id" title="var">w</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">ctxt</span>)) <span class="id" title="var">_</span> <span class="id" title="var">Hdom_ctxt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> [ [ [] ] ]. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwr_ms</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#relation_stable2"><span class="id" title="definition">relation_stable2</span></a> <span class="id" title="var">w</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">spec</span>)) <span class="id" title="var">_</span> <span class="id" title="var">Hdom_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf_r</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwr_ms</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw'</span>. <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_spec"><span class="id" title="axiom">resolve_imports_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <span class="id" title="var">spec</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_inj"><span class="id" title="instance">Some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">rewrite</span> &lt;-<span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hex</span> <span class="id" title="var">_</span> <span class="id" title="var">He</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_spec"><span class="id" title="axiom">resolve_imports_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>|]; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hse</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hw</span>) ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">He'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hse</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hw</span>) || <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_inj"><span class="id" title="instance">Some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">rewrite</span> &lt;-<span class="id" title="var">Hw</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He'</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hex</span> <span class="id" title="var">_</span> <span class="id" title="var">He'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> [ [ [] ] ]. <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#relation_stable2"><span class="id" title="definition">relation_stable2</span></a> <span class="id" title="var">w</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">ctxt</span>)) <span class="id" title="var">_</span> <span class="id" title="var">Hdom_ctxt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals_weaken"><span class="id" title="axiom">can_address_only_no_seals_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hwr_regs</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
This can be weakened, since
        (common #â‚— impl) and (impl â‰¼áµ£ spec) implies
        (common #â‚— spec).

<div class="paragraph"> </div>

        See ctxt_ref_link_l for the stronger version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_l_1" class="idref" href="#ctxt_ref_link_l_1"><span class="id" title="lemma">ctxt_ref_link_l_1</span></a> {<a id="common:38" class="idref" href="#common:38"><span class="id" title="binder">common</span></a> <a id="impl:39" class="idref" href="#impl:39"><span class="id" title="binder">impl</span></a> <a id="spec:40" class="idref" href="#spec:40"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:38"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:38"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:39"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:38"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:40"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:39"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:40"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:38"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:39"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:38"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:40"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">sep_impl</span> <span class="id" title="var">sep_spec</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_intro"><span class="id" title="constructor">ctxt_ref_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#link_well_formed"><span class="id" title="axiom">link_well_formed</span></a> <span class="id" title="var">_</span> ); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union_L"><span class="id" title="lemma">dom_union_L</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">common</span>) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">spec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union_L"><span class="id" title="lemma">dom_union_L</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">common</span>) (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq"><span class="id" title="lemma">union_subseteq</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq_l"><span class="id" title="lemma">union_subseteq_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hexp_incl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_subseteq_r"><span class="id" title="lemma">union_subseteq_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space_link"><span class="id" title="axiom">has_free_space_link</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctxt</span> <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ctxt_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_in"><span class="id" title="axiom">is_context_move_in</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ctxt_impl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">mr_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrefines</span> (<a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a> <span class="id" title="var">ctxt</span> <span class="id" title="var">common</span>) <span class="id" title="var">regs</span> <span class="id" title="var">c</span> <span class="id" title="var">HC</span> <span class="id" title="var">mr_impl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ctxt_spec</span> <span class="id" title="var">mr_spec</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.linking.html#is_context_move_out"><span class="id" title="axiom">is_context_move_out</span></a> <span class="id" title="var">_</span>). <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hwr_regs</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">ctxt_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">mr_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Same as above, one hypothesis is redundant,
        see ctxt_ref_link_r for the stronger_version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_r_1" class="idref" href="#ctxt_ref_link_r_1"><span class="id" title="lemma">ctxt_ref_link_r_1</span></a> {<a id="common:41" class="idref" href="#common:41"><span class="id" title="binder">common</span></a> <a id="impl:42" class="idref" href="#impl:42"><span class="id" title="binder">impl</span></a> <a id="spec:43" class="idref" href="#spec:43"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:41"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:41"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:42"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:41"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:43"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:42"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:43"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:42"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:41"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:43"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:41"><span class="id" title="variable">common</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">common_impl</span> <span class="id" title="var">common_spec</span> <span class="id" title="var">impl_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">common_impl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="cap_machine.linking.html#link_comm"><span class="id" title="axiom">link_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">common_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l_1"><span class="id" title="axiom">ctxt_ref_link_l_1</span></a> <span class="id" title="var">Hf</span> <span class="id" title="var">common_impl</span> <span class="id" title="var">common_spec</span> <span class="id" title="var">impl_spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Same as above, some hypotheses are redundant,
        see ctxt_ref_link for the stronger_version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_1" class="idref" href="#ctxt_ref_link_1"><span class="id" title="lemma">ctxt_ref_link_1</span></a> {<a id="impl:44" class="idref" href="#impl:44"><span class="id" title="binder">impl</span></a> <a id="impl':45" class="idref" href="#impl':45"><span class="id" title="binder">impl'</span></a> <a id="spec:46" class="idref" href="#spec:46"><span class="id" title="binder">spec</span></a> <a id="spec':47" class="idref" href="#spec':47"><span class="id" title="binder">spec'</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:46"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:44"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':45"><span class="id" title="variable">impl'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:46"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':47"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl':45"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:46"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:44"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:46"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':45"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':47"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:44"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':45"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:46"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':47"><span class="id" title="variable">spec'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hii'</span> <span class="id" title="var">Hss'</span> <span class="id" title="var">His'</span> <span class="id" title="var">His</span> <span class="id" title="var">Hi's'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">His</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi's'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">spec</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <span class="id" title="var">impl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_r_1"><span class="id" title="axiom">ctxt_ref_link_r_1</span></a>; <span class="id" title="var">solve_can_link</span> || <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l_1"><span class="id" title="axiom">ctxt_ref_link_l_1</span></a>; <span class="id" title="var">solve_can_link</span> || <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.facts"><span class="id" title="section">facts</span></a>.<br/>

<br/>
</div>

<div class="doc">
A simple function generating dummy export (all 0) and dummy registers
      for a given list of imports, usefull for building contexts 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.dummy_exports" class="idref" href="#contextual_refinement.dummy_exports"><span class="id" title="section">dummy_exports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="dummy_exports" class="idref" href="#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a id="target:48" class="idref" href="#target:48"><span class="id" title="binder">target</span></a> : <a class="idref" href="cap_machine.linking.html#exports_type"><span class="id" title="abbreviation">exports_type</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_fold"><span class="id" title="definition">map_fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="s:49" class="idref" href="#s:49"><span class="id" title="binder">s</span></a> <a id="exp:50" class="idref" href="#exp:50"><span class="id" title="binder">exp</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#s:49"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">exp</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:48"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="dummy_registers" class="idref" href="#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#set_fold"><span class="id" title="definition">set_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="r:51" class="idref" href="#r:51"><span class="id" title="binder">r</span></a> (<a id="map:52" class="idref" href="#map:52"><span class="id" title="binder">map</span></a>:<a class="idref" href="cap_machine.machine_base.html#Reg"><span class="id" title="definition">Reg</span></a>) =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r:51"><span class="id" title="variable">r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">map</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a> <a class="idref" href="cap_machine.addr_reg.html#all_registers_s"><span class="id" title="definition">all_registers_s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_spec" class="idref" href="#dummy_exports_spec"><span class="id" title="lemma">dummy_exports_spec</span></a> <a id="target:53" class="idref" href="#target:53"><span class="id" title="binder">target</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:54" class="idref" href="#s:54"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:53"><span class="id" title="variable">target</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:54"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#s:54"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:53"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:54"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:53"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_fold_ind"><span class="id" title="lemma">map_fold_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a> <a id="imp:63" class="idref" href="#imp:63"><span class="id" title="binder">imp</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">âˆ€</span></a> <a id="k:64" class="idref" href="#k:64"><span class="id" title="binder">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.contextual_refinement.html#m:57"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#k:59"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.contextual_refinement.html#k:59"><span class="id" title="variable">k</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#imp:58"><span class="id" title="variable">imp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#k:59"><span class="id" title="variable">k</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#imp:58"><span class="id" title="variable">imp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">_</span>:<a class="idref" href="cap_machine.addr_reg.html#Addr"><span class="id" title="abbreviation">Addr</span></a>) (<a id="s:60" class="idref" href="#s:60"><span class="id" title="binder">s</span></a>:<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>) <a id="exp:61" class="idref" href="#exp:61"><span class="id" title="binder">exp</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#s:55"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">exp</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_empty"><span class="id" title="method">lookup_empty</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#img_empty_L"><span class="id" title="lemma">img_empty_L</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">exp</span> <span class="id" title="var">exp'</span> <span class="id" title="var">imp</span> <span class="id" title="var">IH</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols_eq_dec"><span class="id" title="variable">Symbols_eq_dec</span></a> <span class="id" title="var">s</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sk</span> | <span class="id" title="var">sk</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">sk</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>. 2: <span class="id" title="tactic">exact</span> <span class="id" title="var">sk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">k</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">exp'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHw</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">IHw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a'</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">aa'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">aa'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">imp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">imp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a'</span> <span class="id" title="var">Hexp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_Some"><span class="id" title="lemma">lookup_insert_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexp</span> <span class="id" title="keyword">as</span> [ [<span class="id" title="var">aa'</span> <span class="id" title="var">ss'</span>] | [<span class="id" title="var">aa'</span> <span class="id" title="var">Hexpa'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hexpa'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_lookup" class="idref" href="#dummy_exports_lookup"><span class="id" title="lemma">dummy_exports_lookup</span></a> {<a id="target:65" class="idref" href="#target:65"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">âˆ€</span></a> <a id="w:66" class="idref" href="#w:66"><span class="id" title="binder">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:66"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:65"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#w:66"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hsw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsw</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hsw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_spec"><span class="id" title="axiom">dummy_exports_spec</span></a> <span class="id" title="var">target</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_exports_from_imports" class="idref" href="#dummy_exports_from_imports"><span class="id" title="lemma">dummy_exports_from_imports</span></a> {<a id="target:67" class="idref" href="#target:67"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:67"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#target:67"><span class="id" title="variable">target</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#set_eq"><span class="id" title="lemma">set_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_spec"><span class="id" title="axiom">dummy_exports_spec</span></a> <span class="id" title="var">target</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">w</span> <span class="id" title="var">Hde_s_w</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hde_s_w</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_dec"><span class="id" title="definition">Some_dec</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <span class="id" title="var">target</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> [ [<span class="id" title="var">w</span> <span class="id" title="var">Hexp_s</span>] | <span class="id" title="var">Hexp_s</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp_s</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hexp_s</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_spec" class="idref" href="#dummy_registers_spec"><span class="id" title="lemma">dummy_registers_spec</span></a> <a id="r:68" class="idref" href="#r:68"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:68"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="cap_machine.addr_reg.html#all_registers_s_correct"><span class="id" title="axiom">all_registers_s_correct</span></a> <span class="id" title="var">r</span>). <span class="id" title="var">revert</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_sets.html#set_fold_ind_L"><span class="id" title="lemma">set_fold_ind_L</span></a> (<span class="id" title="keyword">fun</span> <a id="m:72" class="idref" href="#m:72"><span class="id" title="binder">m</span></a> <a id="s:73" class="idref" href="#s:73"><span class="id" title="binder">s</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">âˆ€</span></a> <a id="r:74" class="idref" href="#r:74"><span class="id" title="binder">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:71"><span class="id" title="variable">r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">âˆˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#m:69"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:71"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_empty"><span class="id" title="lemma">elem_of_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">contradiction</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">Hrs</span> <span class="id" title="var">IH</span> <span class="id" title="var">r'</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hr'</span> | <span class="id" title="var">Hr'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r'</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> <span class="id" title="var">r'</span> <span class="id" title="var">Hr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_insert" class="idref" href="#dummy_registers_insert"><span class="id" title="lemma">dummy_registers_insert</span></a> {<a id="r':75" class="idref" href="#r':75"><span class="id" title="binder">r'</span></a> <a id="x:76" class="idref" href="#x:76"><span class="id" title="binder">x</span></a>} <a id="r:77" class="idref" href="#r:77"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.contextual_refinement.html#r':75"><span class="id" title="variable">r'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#x:76"><span class="id" title="variable">x</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#r:77"><span class="id" title="variable">r</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">r'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert_ne"><span class="id" title="lemma">lookup_insert_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dummy_registers_img" class="idref" href="#dummy_registers_img"><span class="id" title="lemma">dummy_registers_img</span></a> : <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers"><span class="id" title="definition">dummy_registers</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#anti_symm"><span class="id" title="definition">anti_symm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5f07ce23a79afecbb5a4cd6ad9f00f5d"><span class="id" title="notation">(âŠ†)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#Some_inj"><span class="id" title="instance">Some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a>. <span class="id" title="tactic">exists</span> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_spec"><span class="id" title="axiom">dummy_registers_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.dummy_exports"><span class="id" title="section">dummy_exports</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;When&nbsp;a&nbsp;â‰¼áµ£&nbsp;b&nbsp;then<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;img&nbsp;(imports&nbsp;b)&nbsp;âŠ†&nbsp;img&nbsp;(imports&nbsp;a)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;dom&nbsp;(segment&nbsp;b)&nbsp;âŠ†&nbsp;dom&nbsp;(segment&nbsp;a)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;exports&nbsp;b&nbsp;=&nbsp;exports&nbsp;a&nbsp;(not&nbsp;proved&nbsp;here)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.component_part_subseteq" class="idref" href="#contextual_refinement.component_part_subseteq"><span class="id" title="section">component_part_subseteq</span></a>.<br/>
</div>

<div class="doc">
Basic context to prove the forall is non-empty
        Halt immediatly 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Example</span> <a id="halt_context" class="idref" href="#halt_context"><span class="id" title="definition">halt_context</span></a> <a id="target:78" class="idref" href="#target:78"><span class="id" title="binder">target</span></a> : <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> := <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:78"><span class="id" title="variable">target</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_wf" class="idref" href="#halt_context_wf"><span class="id" title="lemma">halt_context_wf</span></a> {<a id="target:79" class="idref" href="#target:79"><span class="id" title="binder">target</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:79"><span class="id" title="variable">target</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#wf_comp_intro"><span class="id" title="constructor">wf_comp_intro</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#img_empty_L"><span class="id" title="lemma">img_empty_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#disjoint_empty_r"><span class="id" title="lemma">disjoint_empty_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_empty"><span class="id" title="lemma">dom_empty</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">exp_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_lookup"><span class="id" title="axiom">dummy_exports_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">exp_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">exp_s</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#img_singleton"><span class="id" title="axiom">img_singleton</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_can_link" class="idref" href="#halt_context_can_link"><span class="id" title="lemma">halt_context_can_link</span></a> {<a id="target:80" class="idref" href="#target:80"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:80"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:80"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:80"><span class="id" title="variable">target</span></a><a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:80"><span class="id" title="variable">target</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_disjoint_spec"><span class="id" title="lemma">map_disjoint_spec</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Hix</span> <span class="id" title="var">Hiy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton_Some"><span class="id" title="lemma">lookup_singleton_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hi</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hf</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Hiy</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hdisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_machine_run" class="idref" href="#halt_context_machine_run"><span class="id" title="lemma">halt_context_machine_run</span></a> {<a id="target:81" class="idref" href="#target:81"><span class="id" title="binder">target</span></a> <a id="comp:82" class="idref" href="#comp:82"><span class="id" title="binder">comp</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:82"><span class="id" title="variable">comp</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:82"><span class="id" title="variable">comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> (<a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a><a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> <a class="idref" href="cap_machine.addr_reg.html#za"><span class="id" title="abbreviation">za</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:81"><span class="id" title="variable">target</span></a><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#comp:82"><span class="id" title="variable">comp</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.machine_base.html#isCorrectPCb"><span class="id" title="definition">isCorrectPCb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: (0 <a class="idref" href="cap_machine.addr_reg.html#0d5f63436be37e7acb16042877c8bbac"><span class="id" title="notation">&lt;=?</span></a> 0)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> (0 <a class="idref" href="cap_machine.addr_reg.html#f9f0bbf7338c04b048aba7393b183966"><span class="id" title="notation">&lt;?</span></a> 0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.machine_base.html#isPerm"><span class="id" title="definition">isPerm</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="cap_machine.machine_base.html#RX"><span class="id" title="constructor">RX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="cap_machine.machine_base.html#isPerm"><span class="id" title="definition">isPerm</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_spec"><span class="id" title="axiom">resolve_imports_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> <span class="id" title="var">comp</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0%<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hita</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hita</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span> (<span class="id" title="var">Hi</span> (<span class="id" title="var">Himp</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Hita</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.linking.html#resolve_imports_spec"><span class="id" title="axiom">resolve_imports_spec</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_empty"><span class="id" title="method">lookup_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a>0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">âˆª</span></a> <a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">comp</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0%<span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.cap_lang.html#exec"><span class="id" title="definition">exec</span></a>, <a class="idref" href="cap_machine.cap_lang.html#exec_opt"><span class="id" title="definition">exec_opt</span></a>, <a class="idref" href="cap_machine.examples.addr_reg_sample.html#halt"><span class="id" title="definition">halt</span></a>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="cap_machine.machine_parameters.html#decode_encode_instrW_inv"><span class="id" title="lemma">decode_encode_instrW_inv</span></a> <a class="idref" href="cap_machine.machine_base.html#Halt"><span class="id" title="constructor">Halt</span></a>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_union_Some_l"><span class="id" title="lemma">lookup_union_Some_l</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton"><span class="id" title="lemma">lookup_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="halt_context_is_context" class="idref" href="#halt_context_is_context"><span class="id" title="lemma">halt_context_is_context</span></a> {<a id="target:83" class="idref" href="#target:83"><span class="id" title="binder">target</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:83"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:83"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:83"><span class="id" title="variable">target</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#target:83"><span class="id" title="variable">target</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0%<span class="id" title="var">a</span><a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#is_context_intro"><span class="id" title="constructor">is_context_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hf</span> <span class="id" title="var">Hwf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#img_insert"><span class="id" title="axiom">img_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_img"><span class="id" title="axiom">dummy_registers_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw</span> | <span class="id" title="var">Hw</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha01</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_finz</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_insert"><span class="id" title="axiom">dummy_registers_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#img_empty_L"><span class="id" title="lemma">img_empty_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Contextual refinement implies that the
        implementation imports all the specifications symbols 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_imports_subseteq" class="idref" href="#ctxt_ref_imports_subseteq"><span class="id" title="lemma">ctxt_ref_imports_subseteq</span></a> {<a id="impl:84" class="idref" href="#impl:84"><span class="id" title="binder">impl</span></a> <a id="spec:85" class="idref" href="#spec:85"><span class="id" title="binder">spec</span></a>: <a class="idref" href="cap_machine.linking.html#component"><span class="id" title="record">component</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:84"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:85"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:85"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">âŠ†</span></a> <a class="idref" href="cap_machine.stdpp_img.html#img"><span class="id" title="definition">img</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:84"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Href</span> <span class="id" title="var">s</span> <span class="id" title="var">Hspec_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span>: 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_is_context"><span class="id" title="axiom">halt_context_is_context</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">Hwf_impl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hno_imps_l</span> <span class="id" title="var">s</span> <span class="id" title="var">Hspec_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_imps_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hno_imps_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_imps_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Example</span> <a id="addr_ctxt" class="idref" href="#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a id="a:86" class="idref" href="#a:86"><span class="id" title="binder">a</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">{[</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:86"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WInt"><span class="id" title="constructor">WInt</span></a> 0 <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#48d4c2b6ed36ec2eb2fe40dfec8e1392"><span class="id" title="notation">]}</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#imports"><span class="id" title="projection">imports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="cap_machine.linking.html#imports_type"><span class="id" title="abbreviation">imports_type</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.Symbols"><span class="id" title="variable">Symbols</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">âˆ…</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_wf" class="idref" href="#addr_ctxt_wf"><span class="id" title="lemma">addr_ctxt_wf</span></a> <a id="a:87" class="idref" href="#a:87"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:87"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#wf_comp_intro"><span class="id" title="constructor">wf_comp_intro</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img"><span class="id" title="method">elem_of_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_singleton_Some"><span class="id" title="lemma">lookup_singleton_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hw</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_sep" class="idref" href="#addr_ctxt_sep"><span class="id" title="lemma">addr_ctxt_sep</span></a> {<a id="target:88" class="idref" href="#target:88"><span class="id" title="binder">target</span></a> <a id="a:89" class="idref" href="#a:89"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:88"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:88"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:88"><span class="id" title="variable">target</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himpl</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_wf"><span class="id" title="axiom">addr_ctxt_wf</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Himpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>. <span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_halt_ctxt" class="idref" href="#addr_ctxt_halt_ctxt"><span class="id" title="lemma">addr_ctxt_halt_ctxt</span></a> {<a id="target:90" class="idref" href="#target:90"><span class="id" title="binder">target</span></a> <a id="a:91" class="idref" href="#a:91"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:90"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:90"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:90"><span class="id" title="variable">target</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports"><span class="id" title="definition">dummy_exports</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.linking.html#link"><span class="id" title="definition">link</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_empty_union"><span class="id" title="instance">map_empty_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#anti_symm"><span class="id" title="definition">anti_symm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5f07ce23a79afecbb5a4cd6ad9f00f5d"><span class="id" title="notation">(âŠ†)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_subseteq_spec"><span class="id" title="lemma">map_subseteq_spec</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">addr</span> <span class="id" title="var">s</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_lookup_Some"><span class="id" title="lemma">map_filter_lookup_Some</span></a>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#elem_of_img_2"><span class="id" title="lemma">elem_of_img_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_filter_subseteq"><span class="id" title="lemma">map_filter_subseteq</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#map_subseteq_spec"><span class="id" title="lemma">map_subseteq_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_is_ctxt" class="idref" href="#addr_ctxt_is_ctxt"><span class="id" title="lemma">addr_ctxt_is_ctxt</span></a> {<a id="target:92" class="idref" href="#target:92"><span class="id" title="binder">target</span></a> <a id="a:93" class="idref" href="#a:93"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:93"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:93"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â‰ </span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#is_ctxt"><span class="id" title="abbreviation">is_ctxt</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:93"><span class="id" title="variable">a</span></a>) <a class="idref" href="cap_machine.contextual_refinement.html#target:92"><span class="id" title="variable">target</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span> <span class="id" title="var">Ha2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha3</span>: <span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">target</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>) <span class="id" title="var">Ha3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#is_context_intro"><span class="id" title="constructor">is_context_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_img.html#img_insert"><span class="id" title="axiom">img_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_img"><span class="id" title="axiom">dummy_registers_img</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hw</span> | <span class="id" title="var">Hw</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="cap_machine.linking.html#resolve_imports_imports_empty"><span class="id" title="axiom">resolve_imports_imports_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha01</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union"><span class="id" title="lemma">dom_union</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>. <span class="id" title="var">solve_finz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_registers_insert"><span class="id" title="axiom">dummy_registers_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#exports"><span class="id" title="projection">exports</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">target</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.contextual_refinement.html#dummy_exports_from_imports"><span class="id" title="axiom">dummy_exports_from_imports</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union"><span class="id" title="lemma">dom_union</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_img.html#img_empty_L"><span class="id" title="lemma">img_empty_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#empty_subseteq"><span class="id" title="lemma">empty_subseteq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a id="addr_ctxt_machine_run" class="idref" href="#addr_ctxt_machine_run"><span class="id" title="lemma">addr_ctxt_machine_run</span></a> {<a id="target:94" class="idref" href="#target:94"><span class="id" title="binder">target</span></a> <a id="a:95" class="idref" href="#a:95"><span class="id" title="binder">a</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:94"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#wf_comp"><span class="id" title="abbreviation">wf_comp</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:94"><span class="id" title="variable">target</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:95"><span class="id" title="variable">a</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:94"><span class="id" title="variable">target</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:95"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">â‰ </span></a> 0%<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.machine_run.html#machine_run"><span class="id" title="definition">machine_run</span></a> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.cap_lang.html#Executable"><span class="id" title="constructor">Executable</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0 <a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a> 1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:94"><span class="id" title="variable">target</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:95"><span class="id" title="variable">a</span></a><a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#target:94"><span class="id" title="variable">target</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span> <span class="id" title="var">Ha2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ha1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha3</span>: <span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">target</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_sep"><span class="id" title="axiom">addr_ctxt_sep</span></a> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_wf"><span class="id" title="axiom">halt_context_wf</span></a>) <span class="id" title="var">Ha3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_can_link"><span class="id" title="axiom">halt_context_can_link</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsep3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - (<a class="idref" href="cap_machine.linking.html#link_assoc"><span class="id" title="axiom">link_assoc</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_halt_ctxt"><span class="id" title="axiom">addr_ctxt_halt_ctxt</span></a> <span class="id" title="var">target</span> <span class="id" title="var">a</span> <span class="id" title="var">Hwf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="cap_machine.linking.html#link_segment_dom"><span class="id" title="axiom">link_segment_dom</span></a> <a class="idref" href="cap_machine.linking.html#can_address_only_no_seals"><span class="id" title="definition">can_address_only_no_seals</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ha</span> | <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_segment_subseteq" class="idref" href="#ctxt_ref_segment_subseteq"><span class="id" title="lemma">ctxt_ref_segment_subseteq</span></a> {<a id="impl:96" class="idref" href="#impl:96"><span class="id" title="binder">impl</span></a> <a id="spec:97" class="idref" href="#spec:97"><span class="id" title="binder">spec</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:96"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:97"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:97"><span class="id" title="variable">spec</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">âŠ†</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:96"><span class="id" title="variable">impl</span></a>.(<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [ ] <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.option.html#mk_is_Some"><span class="id" title="lemma">mk_is_Some</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqA</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span>: 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">âˆ‰</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="cap_machine.linking.html#segment"><span class="id" title="projection">segment</span></a> <span class="id" title="var">impl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha'</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> 0%<span class="id" title="var">a</span> <span class="id" title="var">Ha'</span>). <span class="id" title="var">solve_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [ <span class="id" title="var">Ha0</span> | <span class="id" title="var">Ha0</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_is_context"><span class="id" title="axiom">halt_context_is_context</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (<a class="idref" href="cap_machine.contextual_refinement.html#halt_context_machine_run"><span class="id" title="axiom">halt_context_machine_run</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">Hwf_impl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hms_disj</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>. <span class="id" title="var">set_solver</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrefines</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a> <span class="id" title="var">impl</span> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt"><span class="id" title="definition">addr_ctxt</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="cap_machine.addr_reg.html#PC"><span class="id" title="constructor">PC</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="cap_machine.machine_base.html#WCap"><span class="id" title="abbreviation">WCap</span></a> <a class="idref" href="cap_machine.machine_base.html#RWX"><span class="id" title="constructor">RWX</span></a> 0%<span class="id" title="var">a</span> (0<a class="idref" href="cap_machine.addr_reg.html#58e53c8acf01fb8822eb5bae448055ec"><span class="id" title="notation">^+</span></a>1)%<span class="id" title="var">a</span> 0%<span class="id" title="var">a</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">dummy_registers</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.cap_lang.html#Halted"><span class="id" title="constructor">Halted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_is_ctxt"><span class="id" title="axiom">addr_ctxt_is_ctxt</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">Ha0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> 2 (<a class="idref" href="cap_machine.contextual_refinement.html#addr_ctxt_machine_run"><span class="id" title="axiom">addr_ctxt_machine_run</span></a> <span class="id" title="var">Hfree</span> <span class="id" title="var">Hwf_impl</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">Ha0</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrefines</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hctxt_spec</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_spec</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcan_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hms_disj</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="cap_machine.contextual_refinement.html#halt_context"><span class="id" title="definition">halt_context</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="cap_machine.linking.html#resolve_imports_imports_empty"><span class="id" title="axiom">resolve_imports_imports_empty</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_union"><span class="id" title="lemma">dom_union</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_singleton"><span class="id" title="lemma">dom_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.component_part_subseteq"><span class="id" title="section">component_part_subseteq</span></a>.<br/>

<br/>
</div>

<div class="doc">
Stronger results then those in facts, using
      a â‰¼áµ£ b -&gt; a #â‚— c -&gt; b #â‚— c
      to eliminate redundant hypotheses 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="contextual_refinement.ctxt_ref_link" class="idref" href="#contextual_refinement.ctxt_ref_link"><span class="id" title="section">ctxt_ref_link</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_can_link" class="idref" href="#ctxt_ref_can_link"><span class="id" title="lemma">ctxt_ref_can_link</span></a> {<a id="a:98" class="idref" href="#a:98"><span class="id" title="binder">a</span></a> <a id="b:99" class="idref" href="#b:99"><span class="id" title="binder">b</span></a> <a id="c:100" class="idref" href="#c:100"><span class="id" title="binder">c</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:98"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:99"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#a:98"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:100"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:99"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#c:100"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hctxt_ref</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.linking.html#can_link_intro"><span class="id" title="constructor">can_link_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_ref</span>. <span class="id" title="var">solve_can_link</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">addr</span> <span class="id" title="var">Hb_addr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hms_disj</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hms_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_segment_subseteq"><span class="id" title="axiom">ctxt_ref_segment_subseteq</span></a> <span class="id" title="var">Hctxt_ref</span> <span class="id" title="var">addr</span> <span class="id" title="var">Hb_addr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hb_s</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#map_disjoint_dom"><span class="id" title="lemma">map_disjoint_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hexp_disj</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hexp_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hctxt_ref</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hexp_incl</span> <span class="id" title="var">s</span> <span class="id" title="var">Hb_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_has_free_space" class="idref" href="#ctxt_ref_has_free_space"><span class="id" title="lemma">ctxt_ref_has_free_space</span></a> {<a id="a:101" class="idref" href="#a:101"><span class="id" title="binder">a</span></a> <a id="b:102" class="idref" href="#b:102"><span class="id" title="binder">b</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#a:101"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:102"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#b:102"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hab</span> <span class="id" title="var">addr</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_segment_subseteq"><span class="id" title="axiom">ctxt_ref_segment_subseteq</span></a> <span class="id" title="var">Hab</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Haddr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hfree</span> <span class="id" title="var">addr</span> <span class="id" title="var">Haddr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_l" class="idref" href="#ctxt_ref_link_l"><span class="id" title="lemma">ctxt_ref_link_l</span></a> {<a id="common:103" class="idref" href="#common:103"><span class="id" title="binder">common</span></a> <a id="impl:104" class="idref" href="#impl:104"><span class="id" title="binder">impl</span></a> <a id="spec:105" class="idref" href="#spec:105"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:103"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:103"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:104"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:104"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:105"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:103"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:104"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:103"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:105"><span class="id" title="variable">spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_l_1"><span class="id" title="axiom">ctxt_ref_link_l_1</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="axiom">ctxt_ref_can_link</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link_r" class="idref" href="#ctxt_ref_link_r"><span class="id" title="lemma">ctxt_ref_link_r</span></a> {<a id="common:106" class="idref" href="#common:106"><span class="id" title="binder">common</span></a> <a id="impl:107" class="idref" href="#impl:107"><span class="id" title="binder">impl</span></a> <a id="spec:108" class="idref" href="#spec:108"><span class="id" title="binder">spec</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#has_free_space"><span class="id" title="definition">has_free_space</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:106"><span class="id" title="variable">common</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#common:106"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:107"><span class="id" title="variable">impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:107"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:108"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:107"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:106"><span class="id" title="variable">common</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:108"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#common:106"><span class="id" title="variable">common</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_r_1"><span class="id" title="axiom">ctxt_ref_link_r_1</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="axiom">ctxt_ref_can_link</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Same as above, some hypotheses are redundant,
        see ctxt_ref_link for the stronger_version 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctxt_ref_link" class="idref" href="#ctxt_ref_link"><span class="id" title="lemma">ctxt_ref_link</span></a> {<a id="impl:109" class="idref" href="#impl:109"><span class="id" title="binder">impl</span></a> <a id="impl':110" class="idref" href="#impl':110"><span class="id" title="binder">impl'</span></a> <a id="spec:111" class="idref" href="#spec:111"><span class="id" title="binder">spec</span></a> <a id="spec':112" class="idref" href="#spec':112"><span class="id" title="binder">spec'</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:109"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':110"><span class="id" title="variable">impl'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl:109"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:111"><span class="id" title="variable">spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':110"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':112"><span class="id" title="variable">spec'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.contextual_refinement.html#impl:109"><span class="id" title="variable">impl</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#impl':110"><span class="id" title="variable">impl'</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#341bc3d103ee94e71eaa8029c4cbb0b8"><span class="id" title="notation">â‰¼áµ£</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec:111"><span class="id" title="variable">spec</span></a> <a class="idref" href="cap_machine.linking.html#ef9d256079c0792b68e6d5b9b0edd2f4"><span class="id" title="notation">â‹ˆ</span></a> <a class="idref" href="cap_machine.contextual_refinement.html#spec':112"><span class="id" title="variable">spec'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: <span class="id" title="var">impl'</span> <a class="idref" href="cap_machine.contextual_refinement.html#6708c68a988970b9ce23ab6e6d0b43b8"><span class="id" title="notation">##â‚—</span></a> <span class="id" title="var">spec</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="axiom">ctxt_ref_can_link</span></a> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_link_1"><span class="id" title="axiom">ctxt_ref_link_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_has_free_space"><span class="id" title="axiom">ctxt_ref_has_free_space</span></a> <span class="id" title="var">H2</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="cap_machine.contextual_refinement.html#ctxt_ref_can_link"><span class="id" title="axiom">ctxt_ref_can_link</span></a> <span class="id" title="var">H3</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H4</span>. <span class="id" title="var">solve_can_link</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement.ctxt_ref_link"><span class="id" title="section">ctxt_ref_link</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="section">contextual_refinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="4b789fbbf8a7799c36b8e9249417ecf1" class="idref" href="#4b789fbbf8a7799c36b8e9249417ecf1"><span class="id" title="notation">&quot;</span></a>â‰¼áµ£" := <a class="idref" href="cap_machine.contextual_refinement.html#contextual_refinement"><span class="id" title="inductive">contextual_refinement</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
