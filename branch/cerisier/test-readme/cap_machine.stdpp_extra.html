<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.stdpp_extra</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">countable</span> <span class="id" title="library">gmap</span> <span class="id" title="library">list</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_map_lookup_is_Some" class="idref" href="#list_to_map_lookup_is_Some"><span class="id" title="lemma">list_to_map_lookup_is_Some</span></a> {<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> <a id="B:2" class="idref" href="#B:2"><span class="id" title="binder">B</span></a>} `{<a id="H:4" class="idref" href="#H:4"><span class="id" title="binder">Countable</span></a> <a id="H:4" class="idref" href="#H:4"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:5" class="idref" href="#EqDecision1:5"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:5" class="idref" href="#EqDecision1:5"><span class="id" title="binder">A</span></a>} (<a id="l:6" class="idref" href="#l:6"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:2"><span class="id" title="variable">B</span></a>)) (<a id="a:7" class="idref" href="#a:7"><span class="id" title="binder">a</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:1"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<span class="id" title="notation">(</span><span class="id" title="definition">list_to_map</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:6"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:2"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:7"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:7"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:6"><span class="id" title="variable">l</span></a><span class="id" title="notation">.*1</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_is_Some'</span> <span class="id" title="lemma">elem_of_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">HH</span>|<span class="id" title="var">HH</span>]; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">IHl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="zip_app" class="idref" href="#zip_app"><span class="id" title="lemma">zip_app</span></a> {<a id="A:8" class="idref" href="#A:8"><span class="id" title="binder">A</span></a> <a id="B:9" class="idref" href="#B:9"><span class="id" title="binder">B</span></a>} (<a id="l1:10" class="idref" href="#l1:10"><span class="id" title="binder">l1</span></a> <a id="l1':11" class="idref" href="#l1':11"><span class="id" title="binder">l1'</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:8"><span class="id" title="variable">A</span></a>) (<a id="l2:12" class="idref" href="#l2:12"><span class="id" title="binder">l2</span></a> <a id="l2':13" class="idref" href="#l2':13"><span class="id" title="binder">l2'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:9"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:10"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:12"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">zip</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:10"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1':11"><span class="id" title="variable">l1'</span></a>) (<a class="idref" href="cap_machine.stdpp_extra.html#l2:12"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2':13"><span class="id" title="variable">l2'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:10"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:12"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1':11"><span class="id" title="variable">l1'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2':13"><span class="id" title="variable">l2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;[|<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>]. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;[<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>|]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_zip_l" class="idref" href="#length_zip_l"><span class="id" title="lemma">length_zip_l</span></a> {<a id="A:14" class="idref" href="#A:14"><span class="id" title="binder">A</span></a> <a id="B:15" class="idref" href="#B:15"><span class="id" title="binder">B</span></a>} (<a id="l1:16" class="idref" href="#l1:16"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:14"><span class="id" title="variable">A</span></a>) (<a id="l2:17" class="idref" href="#l2:17"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:15"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:16"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:17"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:16"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:17"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:16"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hl2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl2</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl1</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_filter_forall" class="idref" href="#list_filter_forall"><span class="id" title="lemma">list_filter_forall</span></a> { <a id="A:18" class="idref" href="#A:18"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span> } (<a id="P:19" class="idref" href="#P:19"><span class="id" title="binder">P</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:18"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) `{ <a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">forall</span></a> <a id="x:20" class="idref" href="#x:20"><span class="id" title="binder"><span id="H:21" class="id">x</span></span></a><a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">,</span></a> <a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">Decision</span></a> <a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">(</span></a><a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">P</span></a> <a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">x</span></a><a id="H:21" class="idref" href="#H:21"><span class="id" title="binder">)</span></a> } <a id="l:22" class="idref" href="#l:22"><span class="id" title="binder">l</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#P:19"><span class="id" title="variable">P</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:22"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;@<span class="id" title="instance">list_filter</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.stdpp_extra.html#P:19"><span class="id" title="variable">P</span></a> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:22"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:22"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)); <span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">filter</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dom_list_to_map_singleton" class="idref" href="#dom_list_to_map_singleton"><span class="id" title="lemma">dom_list_to_map_singleton</span></a> {<a id="K:23" class="idref" href="#K:23"><span class="id" title="binder">K</span></a> <a id="V:24" class="idref" href="#V:24"><span class="id" title="binder">V</span></a>: <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:25" class="idref" href="#EqDecision0:25"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:25" class="idref" href="#EqDecision0:25"><span class="id" title="binder">K</span></a>, <a id="H:27" class="idref" href="#H:27"><span class="id" title="binder">Countable</span></a> <a id="H:27" class="idref" href="#H:27"><span class="id" title="binder">K</span></a>} (<a id="x:28" class="idref" href="#x:28"><span class="id" title="binder">x</span></a>:<a class="idref" href="cap_machine.stdpp_extra.html#K:23"><span class="id" title="variable">K</span></a>) (<a id="y:29" class="idref" href="#y:29"><span class="id" title="binder">y</span></a>:<a class="idref" href="cap_machine.stdpp_extra.html#V:24"><span class="id" title="variable">V</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="definition">dom</span> (<span class="id" title="definition">list_to_map</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#x:28"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:29"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:23"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:24"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_to_set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#x:28"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span> /= <span class="id" title="lemma">dom_empty_L</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj" class="idref" href="#list_to_set_disj"><span class="id" title="lemma">list_to_set_disj</span></a> {<a id="A:30" class="idref" href="#A:30"><span class="id" title="binder">A</span></a>} `{<a id="H:32" class="idref" href="#H:32"><span class="id" title="binder">Countable</span></a> <a id="H:32" class="idref" href="#H:32"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:33" class="idref" href="#EqDecision1:33"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:33" class="idref" href="#EqDecision1:33"><span class="id" title="binder">A</span></a>} (<a id="l1:34" class="idref" href="#l1:34"><span class="id" title="binder">l1</span></a> <a id="l2:35" class="idref" href="#l2:35"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:30"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l1:34"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:35"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:34"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="definition">gset</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:30"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">##</span> <span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:35"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">HH</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_disjoint</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">elem_of_list_to_set</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_disjoint</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span> |- *. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_to_list_fst" class="idref" href="#map_to_list_fst"><span class="id" title="lemma">map_to_list_fst</span></a> {<a id="A:36" class="idref" href="#A:36"><span class="id" title="binder">A</span></a> <a id="B:37" class="idref" href="#B:37"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:38" class="idref" href="#EqDecision0:38"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:38" class="idref" href="#EqDecision0:38"><span class="id" title="binder">A</span></a>, <a id="H:40" class="idref" href="#H:40"><span class="id" title="binder">Countable</span></a> <a id="H:40" class="idref" href="#H:40"><span class="id" title="binder">A</span></a>} (<a id="m:41" class="idref" href="#m:41"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:36"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:37"><span class="id" title="variable">B</span></a>) <a id="i:42" class="idref" href="#i:42"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#i:42"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:41"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="x:43" class="idref" href="#x:43"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#i:42"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.stdpp_extra.html#x:43"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:41"><span class="id" title="variable">m</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">list_to_map_to_list</span> <span class="id" title="var">m</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_elem_of_list_to_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">Hix</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="drop_S'" class="idref" href="#drop_S'"><span class="id" title="lemma">drop_S'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="A:44" class="idref" href="#A:44"><span class="id" title="binder">A</span></a> <a id="l:45" class="idref" href="#l:45"><span class="id" title="binder">l</span></a> <a id="n:46" class="idref" href="#n:46"><span class="id" title="binder">n</span></a> (<a id="a:47" class="idref" href="#a:47"><span class="id" title="binder">a</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:44"><span class="id" title="variable">A</span></a>) <a id="l':48" class="idref" href="#l':48"><span class="id" title="binder">l'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">drop</span> <a class="idref" href="cap_machine.stdpp_extra.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:45"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:47"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="cap_machine.stdpp_extra.html#l':48"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#n:46"><span class="id" title="variable">n</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#l:45"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l':48"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">drop_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">drop_0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="disjoint_nil_l" class="idref" href="#disjoint_nil_l"><span class="id" title="lemma">disjoint_nil_l</span></a> {<a id="A:49" class="idref" href="#A:49"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:50" class="idref" href="#EqDecision0:50"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:50" class="idref" href="#EqDecision0:50"><span class="id" title="binder">A</span></a>} (<a id="a:51" class="idref" href="#a:51"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:49"><span class="id" title="variable">A</span></a>) (<a id="l2:52" class="idref" href="#l2:52"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:49"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:52"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_disjoint</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcontr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="disjoint_nil_r" class="idref" href="#disjoint_nil_r"><span class="id" title="lemma">disjoint_nil_r</span></a> {<a id="A:53" class="idref" href="#A:53"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:54" class="idref" href="#EqDecision0:54"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:54" class="idref" href="#EqDecision0:54"><span class="id" title="binder">A</span></a>} (<a id="a:55" class="idref" href="#a:55"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:53"><span class="id" title="variable">A</span></a>) (<a id="l2:56" class="idref" href="#l2:56"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:53"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l2:56"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">##</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_disjoint</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcontr</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="disjoint_cons" class="idref" href="#disjoint_cons"><span class="id" title="lemma">disjoint_cons</span></a> {<a id="A:57" class="idref" href="#A:57"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:58" class="idref" href="#EqDecision0:58"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:58" class="idref" href="#EqDecision0:58"><span class="id" title="binder">A</span></a>} (<a id="a:59" class="idref" href="#a:59"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:57"><span class="id" title="variable">A</span></a>) (<a id="l1:60" class="idref" href="#l1:60"><span class="id" title="binder">l1</span></a> <a id="l2:61" class="idref" href="#l2:61"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:57"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:59"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:60"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:61"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:59"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:61"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_disjoint</span> =&gt;<span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>;<span class="id" title="tactic">auto</span>;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a</span> <span class="id" title="var">Hs</span>). <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="disjoint_weak" class="idref" href="#disjoint_weak"><span class="id" title="lemma">disjoint_weak</span></a> {<a id="A:62" class="idref" href="#A:62"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:63" class="idref" href="#EqDecision0:63"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:63" class="idref" href="#EqDecision0:63"><span class="id" title="binder">A</span></a>} (<a id="a:64" class="idref" href="#a:64"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:62"><span class="id" title="variable">A</span></a>) (<a id="l1:65" class="idref" href="#l1:65"><span class="id" title="binder">l1</span></a> <a id="l2:66" class="idref" href="#l2:66"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:62"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:64"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:65"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:66"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:65"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:66"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_disjoint</span> =&gt;<span class="id" title="var">Ha</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hl1</span> <span class="id" title="var">Hl2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a'</span> <span class="id" title="notation">∈</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>;<span class="id" title="tactic">auto</span>;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hl2</span>). <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="disjoint_swap" class="idref" href="#disjoint_swap"><span class="id" title="lemma">disjoint_swap</span></a> {<a id="A:67" class="idref" href="#A:67"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:68" class="idref" href="#EqDecision0:68"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:68" class="idref" href="#EqDecision0:68"><span class="id" title="binder">A</span></a>} (<a id="a:69" class="idref" href="#a:69"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:67"><span class="id" title="variable">A</span></a>) (<a id="l1:70" class="idref" href="#l1:70"><span class="id" title="binder">l1</span></a> <a id="l2:71" class="idref" href="#l2:71"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:67"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:69"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:70"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:69"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:70"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:71"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:70"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:69"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:71"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_disjoint</span> =&gt;<span class="id" title="var">Hnin</span> <span class="id" title="var">Ha</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hl1</span> <span class="id" title="var">Hl2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">with</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Hl2</span>]; [<span class="id" title="var">contradiction</span>|].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;delete_list:&nbsp;delete&nbsp;a&nbsp;list&nbsp;of&nbsp;keys&nbsp;in&nbsp;a&nbsp;map&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="delete_list" class="idref" href="#delete_list"><span class="id" title="definition">delete_list</span></a> {<a id="K:72" class="idref" href="#K:72"><span class="id" title="binder">K</span></a> <a id="V:73" class="idref" href="#V:73"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:75" class="idref" href="#H:75"><span class="id" title="binder">Countable</span></a> <a id="H:75" class="idref" href="#H:75"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:76" class="idref" href="#EqDecision1:76"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:76" class="idref" href="#EqDecision1:76"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ks:77" class="idref" href="#ks:77"><span class="id" title="binder">ks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:72"><span class="id" title="variable">K</span></a>) (<a id="m:78" class="idref" href="#m:78"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:72"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:73"><span class="id" title="variable">V</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:72"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:73"><span class="id" title="variable">V</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.stdpp_extra.html#ks:77"><span class="id" title="variable">ks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ks'</span> =&gt; <span class="id" title="definition">delete</span> <span class="id" title="var">k</span> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_list:79"><span class="id" title="definition">delete_list</span></a> <span class="id" title="var">ks'</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:78"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="cap_machine.stdpp_extra.html#m:78"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_list_insert" class="idref" href="#delete_list_insert"><span class="id" title="lemma">delete_list_insert</span></a> {<a id="K:81" class="idref" href="#K:81"><span class="id" title="binder">K</span></a> <a id="V:82" class="idref" href="#V:82"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:84" class="idref" href="#H:84"><span class="id" title="binder">Countable</span></a> <a id="H:84" class="idref" href="#H:84"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:85" class="idref" href="#EqDecision1:85"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:85" class="idref" href="#EqDecision1:85"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ks:86" class="idref" href="#ks:86"><span class="id" title="binder">ks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:81"><span class="id" title="variable">K</span></a>) (<a id="m:87" class="idref" href="#m:87"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:81"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:82"><span class="id" title="variable">V</span></a>) (<a id="l:88" class="idref" href="#l:88"><span class="id" title="binder">l</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:81"><span class="id" title="variable">K</span></a>) (<a id="v:89" class="idref" href="#v:89"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V:82"><span class="id" title="variable">V</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:88"><span class="id" title="variable">l</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#ks:86"><span class="id" title="variable">ks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#ks:86"><span class="id" title="variable">ks</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#l:88"><span class="id" title="variable">l</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#v:89"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#l:88"><span class="id" title="variable">l</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#v:89"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">delete_list</span> <span class="id" title="notation">ks</span> <span class="id" title="notation">m</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hnin</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">delete_insert_ne</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHks</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_list_delete" class="idref" href="#delete_list_delete"><span class="id" title="lemma">delete_list_delete</span></a> {<a id="K:90" class="idref" href="#K:90"><span class="id" title="binder">K</span></a> <a id="V:91" class="idref" href="#V:91"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:93" class="idref" href="#H:93"><span class="id" title="binder">Countable</span></a> <a id="H:93" class="idref" href="#H:93"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:94" class="idref" href="#EqDecision1:94"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:94" class="idref" href="#EqDecision1:94"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ks:95" class="idref" href="#ks:95"><span class="id" title="binder">ks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:90"><span class="id" title="variable">K</span></a>) (<a id="m:96" class="idref" href="#m:96"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:90"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:91"><span class="id" title="variable">V</span></a>) (<a id="l:97" class="idref" href="#l:97"><span class="id" title="binder">l</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:90"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:97"><span class="id" title="variable">l</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#ks:95"><span class="id" title="variable">ks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#ks:95"><span class="id" title="variable">ks</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:97"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:96"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:97"><span class="id" title="variable">l</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#ks:95"><span class="id" title="variable">ks</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:96"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hnin</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">delete_commute</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHks</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_delete_list_notin" class="idref" href="#lookup_delete_list_notin"><span class="id" title="lemma">lookup_delete_list_notin</span></a> {<a id="K:98" class="idref" href="#K:98"><span class="id" title="binder">K</span></a> <a id="V:99" class="idref" href="#V:99"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:101" class="idref" href="#H:101"><span class="id" title="binder">Countable</span></a> <a id="H:101" class="idref" href="#H:101"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:102" class="idref" href="#EqDecision1:102"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:102" class="idref" href="#EqDecision1:102"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ks:103" class="idref" href="#ks:103"><span class="id" title="binder">ks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:98"><span class="id" title="variable">K</span></a>) (<a id="m:104" class="idref" href="#m:104"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:98"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:99"><span class="id" title="variable">V</span></a>) (<a id="l:105" class="idref" href="#l:105"><span class="id" title="binder">l</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:98"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:105"><span class="id" title="variable">l</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#ks:103"><span class="id" title="variable">ks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#ks:103"><span class="id" title="variable">ks</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:104"><span class="id" title="variable">m</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:105"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:104"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:105"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_list_permutation" class="idref" href="#delete_list_permutation"><span class="id" title="lemma">delete_list_permutation</span></a> {<a id="A:106" class="idref" href="#A:106"><span class="id" title="binder">A</span></a> <a id="B:107" class="idref" href="#B:107"><span class="id" title="binder">B</span></a>} `{<a id="H:109" class="idref" href="#H:109"><span class="id" title="binder">Countable</span></a> <a id="H:109" class="idref" href="#H:109"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:110" class="idref" href="#EqDecision1:110"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:110" class="idref" href="#EqDecision1:110"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:111" class="idref" href="#l1:111"><span class="id" title="binder">l1</span></a> <a id="l2:112" class="idref" href="#l2:112"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:106"><span class="id" title="variable">A</span></a>) (<a id="m:113" class="idref" href="#m:113"><span class="id" title="binder">m</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:106"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:107"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l1:111"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:112"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:111"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:113"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:112"><span class="id" title="variable">l2</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:113"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHPermutation</span> //. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_commute</span> //. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHPermutation1</span> //. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_list_swap" class="idref" href="#delete_list_swap"><span class="id" title="lemma">delete_list_swap</span></a> {<a id="A:114" class="idref" href="#A:114"><span class="id" title="binder">A</span></a> <a id="B:115" class="idref" href="#B:115"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:116" class="idref" href="#EqDecision0:116"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:116" class="idref" href="#EqDecision0:116"><span class="id" title="binder">A</span></a>, <a id="H:118" class="idref" href="#H:118"><span class="id" title="binder">Countable</span></a> <a id="H:118" class="idref" href="#H:118"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:119" class="idref" href="#a:119"><span class="id" title="binder">a</span></a> <a id="a':120" class="idref" href="#a':120"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:114"><span class="id" title="variable">A</span></a>) (<a id="l1:121" class="idref" href="#l1:121"><span class="id" title="binder">l1</span></a> <a id="l2:122" class="idref" href="#l2:122"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:114"><span class="id" title="variable">A</span></a>) (<a id="M:123" class="idref" href="#M:123"><span class="id" title="binder">M</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:114"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:115"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#a':120"><span class="id" title="variable">a'</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:121"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:119"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:122"><span class="id" title="variable">l2</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#M:123"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:119"><span class="id" title="variable">a</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#a':120"><span class="id" title="variable">a'</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:121"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:122"><span class="id" title="variable">l2</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#M:123"><span class="id" title="variable">M</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">delete_commute</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">delete_commute</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Map&nbsp;difference&nbsp;for&nbsp;heterogeneous&nbsp;maps,&nbsp;and&nbsp;lemmas&nbsp;relating&nbsp;it&nbsp;to&nbsp;delete_list&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_difference_het" class="idref" href="#map_difference_het"><span class="id" title="definition">map_difference_het</span></a><br/>
&nbsp;&nbsp;{<a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a> <a id="B:125" class="idref" href="#B:125"><span class="id" title="binder">B</span></a> <a id="C:126" class="idref" href="#C:126"><span class="id" title="binder">C</span></a>} `{<a id="H:128" class="idref" href="#H:128"><span class="id" title="binder">Countable</span></a> <a id="H:128" class="idref" href="#H:128"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:129" class="idref" href="#EqDecision1:129"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:129" class="idref" href="#EqDecision1:129"><span class="id" title="binder">A</span></a>, <a id="H0:131" class="idref" href="#H0:131"><span class="id" title="binder">Countable</span></a> <a id="H0:131" class="idref" href="#H0:131"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:132" class="idref" href="#EqDecision3:132"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:132" class="idref" href="#EqDecision3:132"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:133" class="idref" href="#m1:133"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:124"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:125"><span class="id" title="variable">B</span></a>) (<a id="m2:134" class="idref" href="#m2:134"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:124"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:126"><span class="id" title="variable">C</span></a>): <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:124"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:125"><span class="id" title="variable">B</span></a><br/>
:=<br/>
&nbsp;&nbsp;<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> '<a id="pat:137" class="idref" href="#pat:137"><span class="id" title="binder">(</span></a><a id="k:136" class="idref" href="#k:136"><span class="id" title="binder"><span id="pat:137" class="id">k</span></span></a><a id="pat:137" class="idref" href="#pat:137"><span class="id" title="binder">,</span></a> <a id="v:135" class="idref" href="#v:135"><span class="id" title="binder"><span id="pat:137" class="id">v</span></span></a><a id="pat:137" class="idref" href="#pat:137"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="cap_machine.stdpp_extra.html#m2:134"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:136"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#m1:133"><span class="id" title="variable">m1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="e59c59f7717be00f8d97e3ac563ecaf2" class="idref" href="#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">&quot;</span></a>m1 ∖∖ m2" := (<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_eq'" class="idref" href="#map_eq'"><span class="id" title="lemma">map_eq'</span></a> {<a id="A:138" class="idref" href="#A:138"><span class="id" title="binder">A</span></a> <a id="B:139" class="idref" href="#B:139"><span class="id" title="binder">B</span></a>} `{<a id="H:141" class="idref" href="#H:141"><span class="id" title="binder">Countable</span></a> <a id="H:141" class="idref" href="#H:141"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:142" class="idref" href="#EqDecision1:142"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:142" class="idref" href="#EqDecision1:142"><span class="id" title="binder">A</span></a>, <a id="H0:144" class="idref" href="#H0:144"><span class="id" title="binder">Countable</span></a> <a id="H0:144" class="idref" href="#H0:144"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:145" class="idref" href="#EqDecision3:145"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:145" class="idref" href="#EqDecision3:145"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:146" class="idref" href="#m1:146"><span class="id" title="binder">m1</span></a> <a id="m2:147" class="idref" href="#m2:147"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:138"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:139"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:146"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:147"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="k:148" class="idref" href="#k:148"><span class="id" title="binder">k</span></a> <a id="v:149" class="idref" href="#v:149"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.stdpp_extra.html#m1:146"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:148"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:149"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:147"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:148"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:149"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="method">map_eq</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HHH</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HHH</span>. <span class="id" title="tactic">congruence</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_lookup_Some" class="idref" href="#difference_het_lookup_Some"><span class="id" title="lemma">difference_het_lookup_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:150" class="idref" href="#A:150"><span class="id" title="binder">A</span></a> <a id="B:151" class="idref" href="#B:151"><span class="id" title="binder">B</span></a> <a id="C:152" class="idref" href="#C:152"><span class="id" title="binder">C</span></a>} `{<a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">Countable</span></a> <a id="H:154" class="idref" href="#H:154"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:155" class="idref" href="#EqDecision1:155"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:155" class="idref" href="#EqDecision1:155"><span class="id" title="binder">A</span></a>, <a id="H0:157" class="idref" href="#H0:157"><span class="id" title="binder">Countable</span></a> <a id="H0:157" class="idref" href="#H0:157"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:158" class="idref" href="#EqDecision3:158"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:158" class="idref" href="#EqDecision3:158"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:159" class="idref" href="#m1:159"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:150"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:151"><span class="id" title="variable">B</span></a>) (<a id="m2:160" class="idref" href="#m2:160"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:150"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:152"><span class="id" title="variable">C</span></a>) (<a id="k:161" class="idref" href="#k:161"><span class="id" title="binder">k</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:150"><span class="id" title="variable">A</span></a>) (<a id="v:162" class="idref" href="#v:162"><span class="id" title="binder">v</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#B:151"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#m1:159"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:160"><span class="id" title="variable">m2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:161"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:162"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:159"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:161"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:162"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:160"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:161"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <span class="id" title="lemma">map_lookup_filter_Some</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_lookup_None" class="idref" href="#difference_het_lookup_None"><span class="id" title="lemma">difference_het_lookup_None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:163" class="idref" href="#A:163"><span class="id" title="binder">A</span></a> <a id="B:164" class="idref" href="#B:164"><span class="id" title="binder">B</span></a> <a id="C:165" class="idref" href="#C:165"><span class="id" title="binder">C</span></a>} `{<a id="H:167" class="idref" href="#H:167"><span class="id" title="binder">Countable</span></a> <a id="H:167" class="idref" href="#H:167"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:168" class="idref" href="#EqDecision1:168"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:168" class="idref" href="#EqDecision1:168"><span class="id" title="binder">A</span></a>, <a id="H0:170" class="idref" href="#H0:170"><span class="id" title="binder">Countable</span></a> <a id="H0:170" class="idref" href="#H0:170"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:171" class="idref" href="#EqDecision3:171"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:171" class="idref" href="#EqDecision3:171"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:172" class="idref" href="#m1:172"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:163"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:164"><span class="id" title="variable">B</span></a>) (<a id="m2:173" class="idref" href="#m2:173"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:163"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:165"><span class="id" title="variable">C</span></a>) (<a id="k:174" class="idref" href="#k:174"><span class="id" title="binder">k</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:163"><span class="id" title="variable">A</span></a>) (<a id="v:175" class="idref" href="#v:175"><span class="id" title="binder">v</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#B:164"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#m1:172"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:173"><span class="id" title="variable">m2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:172"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <span class="id" title="definition">is_Some</span> (<a class="idref" href="cap_machine.stdpp_extra.html#m2:173"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:174"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <span class="id" title="lemma">map_lookup_filter_None</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">HH1</span>|<span class="id" title="var">HH2</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">HH2</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HH2</span> <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">congruence</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_empty" class="idref" href="#difference_het_empty"><span class="id" title="lemma">difference_het_empty</span></a><br/>
&nbsp;&nbsp;{<a id="A:176" class="idref" href="#A:176"><span class="id" title="binder">A</span></a> <a id="B:177" class="idref" href="#B:177"><span class="id" title="binder">B</span></a> <a id="C:178" class="idref" href="#C:178"><span class="id" title="binder">C</span></a>} `{<a id="H:180" class="idref" href="#H:180"><span class="id" title="binder">Countable</span></a> <a id="H:180" class="idref" href="#H:180"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:181" class="idref" href="#EqDecision1:181"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:181" class="idref" href="#EqDecision1:181"><span class="id" title="binder">A</span></a>, <a id="H0:183" class="idref" href="#H0:183"><span class="id" title="binder">Countable</span></a> <a id="H0:183" class="idref" href="#H0:183"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:184" class="idref" href="#EqDecision3:184"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:184" class="idref" href="#EqDecision3:184"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;(<a id="m:185" class="idref" href="#m:185"><span class="id" title="binder">m</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:176"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:177"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m:185"><span class="id" title="variable">m</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">(</span></a><span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:176"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:178"><span class="id" title="variable">C</span></a><a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:185"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span>. <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <a id="difference_het_eq_empty" class="idref" href="#difference_het_eq_empty"><span class="id" title="lemma">difference_het_eq_empty</span></a><br/>
&nbsp;&nbsp;{<a id="A:186" class="idref" href="#A:186"><span class="id" title="binder">A</span></a> <a id="B:187" class="idref" href="#B:187"><span class="id" title="binder">B</span></a>} `{<a id="H:189" class="idref" href="#H:189"><span class="id" title="binder">Countable</span></a> <a id="H:189" class="idref" href="#H:189"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:190" class="idref" href="#EqDecision1:190"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:190" class="idref" href="#EqDecision1:190"><span class="id" title="binder">A</span></a>, <a id="H0:192" class="idref" href="#H0:192"><span class="id" title="binder">Countable</span></a> <a id="H0:192" class="idref" href="#H0:192"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:193" class="idref" href="#EqDecision3:193"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:193" class="idref" href="#EqDecision3:193"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;(<a id="m:194" class="idref" href="#m:194"><span class="id" title="binder">m</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:186"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:187"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m:194"><span class="id" title="variable">m</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:194"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:186"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:187"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span>. <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_insert_r" class="idref" href="#difference_het_insert_r"><span class="id" title="lemma">difference_het_insert_r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:195" class="idref" href="#A:195"><span class="id" title="binder">A</span></a> <a id="B:196" class="idref" href="#B:196"><span class="id" title="binder">B</span></a> <a id="C:197" class="idref" href="#C:197"><span class="id" title="binder">C</span></a>} `{<a id="H:199" class="idref" href="#H:199"><span class="id" title="binder">Countable</span></a> <a id="H:199" class="idref" href="#H:199"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:200" class="idref" href="#EqDecision1:200"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:200" class="idref" href="#EqDecision1:200"><span class="id" title="binder">A</span></a>, <a id="H0:202" class="idref" href="#H0:202"><span class="id" title="binder">Countable</span></a> <a id="H0:202" class="idref" href="#H0:202"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:203" class="idref" href="#EqDecision3:203"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:203" class="idref" href="#EqDecision3:203"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:204" class="idref" href="#m1:204"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:195"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:196"><span class="id" title="variable">B</span></a>) (<a id="m2:205" class="idref" href="#m2:205"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:195"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:197"><span class="id" title="variable">C</span></a>) (<a id="k:206" class="idref" href="#k:206"><span class="id" title="binder">k</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:195"><span class="id" title="variable">A</span></a>) (<a id="v:207" class="idref" href="#v:207"><span class="id" title="binder">v</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#C:197"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:204"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">(</span></a><span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:206"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:207"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m2</span><a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:206"><span class="id" title="variable">k</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#m1:204"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:205"><span class="id" title="variable">m2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="lemma">lookup_delete_Some</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="lemma">lookup_insert_None</span>. <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_insert_l" class="idref" href="#difference_het_insert_l"><span class="id" title="lemma">difference_het_insert_l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:208" class="idref" href="#A:208"><span class="id" title="binder">A</span></a> <a id="B:209" class="idref" href="#B:209"><span class="id" title="binder">B</span></a> <a id="C:210" class="idref" href="#C:210"><span class="id" title="binder">C</span></a>} `{<a id="H:212" class="idref" href="#H:212"><span class="id" title="binder">Countable</span></a> <a id="H:212" class="idref" href="#H:212"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:213" class="idref" href="#EqDecision1:213"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:213" class="idref" href="#EqDecision1:213"><span class="id" title="binder">A</span></a>, <a id="H0:215" class="idref" href="#H0:215"><span class="id" title="binder">Countable</span></a> <a id="H0:215" class="idref" href="#H0:215"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:216" class="idref" href="#EqDecision3:216"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:216" class="idref" href="#EqDecision3:216"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:217" class="idref" href="#m1:217"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:208"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:209"><span class="id" title="variable">B</span></a>) (<a id="m2:218" class="idref" href="#m2:218"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:208"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:210"><span class="id" title="variable">C</span></a>) (<a id="k:219" class="idref" href="#k:219"><span class="id" title="binder">k</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:208"><span class="id" title="variable">A</span></a>) (<a id="v:220" class="idref" href="#v:220"><span class="id" title="binder">v</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#B:209"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m2:218"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:219"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:219"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:220"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m1</span> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:218"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:219"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:220"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">m1</span> <span class="id" title="notation">∖∖</span> <span class="id" title="notation">m2</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="lemma">lookup_insert_Some</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">map_filter_insert_True</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="lemma">lookup_insert_Some</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_het_delete_assoc" class="idref" href="#difference_het_delete_assoc"><span class="id" title="lemma">difference_het_delete_assoc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:221" class="idref" href="#A:221"><span class="id" title="binder">A</span></a> <a id="B:222" class="idref" href="#B:222"><span class="id" title="binder">B</span></a> <a id="C:223" class="idref" href="#C:223"><span class="id" title="binder">C</span></a>} `{<a id="H:225" class="idref" href="#H:225"><span class="id" title="binder">Countable</span></a> <a id="H:225" class="idref" href="#H:225"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:226" class="idref" href="#EqDecision1:226"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:226" class="idref" href="#EqDecision1:226"><span class="id" title="binder">A</span></a>, <a id="H0:228" class="idref" href="#H0:228"><span class="id" title="binder">Countable</span></a> <a id="H0:228" class="idref" href="#H0:228"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:229" class="idref" href="#EqDecision3:229"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:229" class="idref" href="#EqDecision3:229"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:230" class="idref" href="#m1:230"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:221"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:222"><span class="id" title="variable">B</span></a>) (<a id="m2:231" class="idref" href="#m2:231"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:221"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:223"><span class="id" title="variable">C</span></a>) (<a id="k:232" class="idref" href="#k:232"><span class="id" title="binder">k</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#A:221"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:232"><span class="id" title="variable">k</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#m1:230"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:231"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">(</span></a><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:232"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:230"><span class="id" title="variable">m1</span></a><a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">)</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:231"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#map_difference_het"><span class="id" title="definition">map_difference_het</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">map_filter_delete</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_lookup_filter_Some</span>. <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dom_difference_het" class="idref" href="#dom_difference_het"><span class="id" title="lemma">dom_difference_het</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:233" class="idref" href="#A:233"><span class="id" title="binder">A</span></a> <a id="B:234" class="idref" href="#B:234"><span class="id" title="binder">B</span></a> <a id="C:235" class="idref" href="#C:235"><span class="id" title="binder">C</span></a>} `{<a id="H:237" class="idref" href="#H:237"><span class="id" title="binder">Countable</span></a> <a id="H:237" class="idref" href="#H:237"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:238" class="idref" href="#EqDecision1:238"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:238" class="idref" href="#EqDecision1:238"><span class="id" title="binder">A</span></a>, <a id="H0:240" class="idref" href="#H0:240"><span class="id" title="binder">Countable</span></a> <a id="H0:240" class="idref" href="#H0:240"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:241" class="idref" href="#EqDecision3:241"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:241" class="idref" href="#EqDecision3:241"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:242" class="idref" href="#m1:242"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:233"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:234"><span class="id" title="variable">B</span></a>) (<a id="m2:243" class="idref" href="#m2:243"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:233"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:235"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="definition">dom</span> (<a class="idref" href="cap_machine.stdpp_extra.html#m1:242"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:243"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m1:242"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">∖</span> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:243"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="definition">anti_symm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="definition">subseteq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_subseteq</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#difference_het_lookup_Some"><span class="id" title="lemma">difference_het_lookup_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_difference</span> !<span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? ?]. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_subseteq</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_difference</span> !<span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">v</span> ?] <span class="id" title="var">Hcontra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#difference_het_lookup_Some"><span class="id" title="lemma">difference_het_lookup_Some</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="tactic">eauto</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_elements_eq_difference_het" class="idref" href="#delete_elements_eq_difference_het"><span class="id" title="lemma">delete_elements_eq_difference_het</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:244" class="idref" href="#A:244"><span class="id" title="binder">A</span></a> <a id="B:245" class="idref" href="#B:245"><span class="id" title="binder">B</span></a> <a id="C:246" class="idref" href="#C:246"><span class="id" title="binder">C</span></a>} `{<a id="H:248" class="idref" href="#H:248"><span class="id" title="binder">Countable</span></a> <a id="H:248" class="idref" href="#H:248"><span class="id" title="binder">A</span></a>, <a id="EqDecision1:249" class="idref" href="#EqDecision1:249"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:249" class="idref" href="#EqDecision1:249"><span class="id" title="binder">A</span></a>, <a id="H0:251" class="idref" href="#H0:251"><span class="id" title="binder">Countable</span></a> <a id="H0:251" class="idref" href="#H0:251"><span class="id" title="binder">B</span></a>, <a id="EqDecision3:252" class="idref" href="#EqDecision3:252"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:252" class="idref" href="#EqDecision3:252"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m1:253" class="idref" href="#m1:253"><span class="id" title="binder">m1</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:244"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:245"><span class="id" title="variable">B</span></a>) (<a id="m2:254" class="idref" href="#m2:254"><span class="id" title="binder">m2</span></a>: <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:244"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:246"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> (<span class="id" title="definition">elements</span> (<span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:254"><span class="id" title="variable">m2</span></a>)) <a class="idref" href="cap_machine.stdpp_extra.html#m1:253"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:253"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#e59c59f7717be00f8d97e3ac563ecaf2"><span class="id" title="notation">∖∖</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:254"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l</span> := <span class="id" title="definition">elements</span> (<span class="id" title="definition">dom</span> <span class="id" title="var">m2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">l</span> <span class="id" title="notation">≡ₚ</span> <span class="id" title="definition">elements</span> (<span class="id" title="definition">dom</span> <span class="id" title="var">m2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">l</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">m1</span>. <span class="id" title="tactic">pattern</span> <span class="id" title="var">m2</span>. <span class="id" title="var">revert</span> <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">m1</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_empty_L</span> <span class="id" title="lemma">elements_empty</span> <a class="idref" href="cap_machine.stdpp_extra.html#difference_het_empty"><span class="id" title="axiom">difference_het_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Permutation_nil_r</span>. <span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m2</span> <span class="id" title="var">Hm2k</span> <span class="id" title="var">HI</span> <span class="id" title="var">m1</span> <span class="id" title="var">l</span> <span class="id" title="var">Hm1l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#difference_het_insert_r"><span class="id" title="axiom">difference_het_insert_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1l</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hm1l</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elements_union_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_dom</span>; <span class="id" title="tactic">intros</span> [? ?]; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hm1l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="definition">delete</span> <span class="id" title="var">k</span> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_list"><span class="id" title="definition">delete_list</span></a> (<span class="id" title="definition">elements</span> (<span class="id" title="definition">dom</span> <span class="id" title="var">m2</span>)) <span class="id" title="var">m1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#delete_list_permutation"><span class="id" title="axiom">delete_list_permutation</span></a>. 2: <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HI</span>//. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;rtc&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rtc_implies" class="idref" href="#rtc_implies"><span class="id" title="lemma">rtc_implies</span></a> {<a id="A:255" class="idref" href="#A:255"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="R:256" class="idref" href="#R:256"><span class="id" title="binder">R</span></a> <a id="Q:257" class="idref" href="#Q:257"><span class="id" title="binder">Q</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:255"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:255"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:258" class="idref" href="#x:258"><span class="id" title="binder">x</span></a> <a id="y:259" class="idref" href="#y:259"><span class="id" title="binder">y</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:255"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="r:260" class="idref" href="#r:260"><span class="id" title="binder">r</span></a> <a id="q:261" class="idref" href="#q:261"><span class="id" title="binder">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#R:256"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#r:260"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#q:261"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#Q:257"><span class="id" title="variable">Q</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#r:260"><span class="id" title="variable">r</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#q:261"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> <a class="idref" href="cap_machine.stdpp_extra.html#R:256"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:258"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:259"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="inductive">rtc</span> <a class="idref" href="cap_machine.stdpp_extra.html#Q:257"><span class="id" title="variable">Q</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:258"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:259"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himpl</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Himpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_once</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_transitive</span> <span class="id" title="keyword">with</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rtc_or_intro" class="idref" href="#rtc_or_intro"><span class="id" title="lemma">rtc_or_intro</span></a> {<a id="A:262" class="idref" href="#A:262"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="R:263" class="idref" href="#R:263"><span class="id" title="binder">R</span></a> <a id="Q:264" class="idref" href="#Q:264"><span class="id" title="binder">Q</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:262"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:262"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:265" class="idref" href="#x:265"><span class="id" title="binder">x</span></a> <a id="y:266" class="idref" href="#y:266"><span class="id" title="binder">y</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:262"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:267" class="idref" href="#a:267"><span class="id" title="binder">a</span></a> <a id="b:268" class="idref" href="#b:268"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#R:263"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:267"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:268"><span class="id" title="variable">b</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#x:265"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:266"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:269" class="idref" href="#a:269"><span class="id" title="binder">a</span></a> <a id="b:270" class="idref" href="#b:270"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#R:263"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:269"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:270"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#Q:264"><span class="id" title="variable">Q</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:269"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:270"><span class="id" title="variable">b</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#x:265"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:266"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HR</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_transitive</span> <span class="id" title="keyword">with</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_once</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rtc_or_intro_l" class="idref" href="#rtc_or_intro_l"><span class="id" title="lemma">rtc_or_intro_l</span></a> {<a id="A:271" class="idref" href="#A:271"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="R:272" class="idref" href="#R:272"><span class="id" title="binder">R</span></a> <a id="Q:273" class="idref" href="#Q:273"><span class="id" title="binder">Q</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:271"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:271"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:274" class="idref" href="#x:274"><span class="id" title="binder">x</span></a> <a id="y:275" class="idref" href="#y:275"><span class="id" title="binder">y</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:271"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:276" class="idref" href="#a:276"><span class="id" title="binder">a</span></a> <a id="b:277" class="idref" href="#b:277"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#R:272"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:276"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:277"><span class="id" title="variable">b</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#x:274"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:275"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a:278" class="idref" href="#a:278"><span class="id" title="binder">a</span></a> <a id="b:279" class="idref" href="#b:279"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#Q:273"><span class="id" title="variable">Q</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:278"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:279"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#R:272"><span class="id" title="variable">R</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:278"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:279"><span class="id" title="variable">b</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#x:274"><span class="id" title="variable">x</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#y:275"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HR</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_transitive</span> <span class="id" title="keyword">with</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_once</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;Helper&nbsp;lemmas&nbsp;on&nbsp;list&nbsp;differences&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_elem_of_list" class="idref" href="#not_elem_of_list"><span class="id" title="lemma">not_elem_of_list</span></a> {<a id="A:280" class="idref" href="#A:280"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:281" class="idref" href="#EqDecision0:281"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:281" class="idref" href="#EqDecision0:281"><span class="id" title="binder">A</span></a>} (<a id="a:282" class="idref" href="#a:282"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:280"><span class="id" title="variable">A</span></a>) (<a id="l:283" class="idref" href="#l:283"><span class="id" title="binder">l</span></a> <a id="x:284" class="idref" href="#x:284"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:280"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:282"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#x:284"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:282"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:283"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:284"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hax</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_difference</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hal</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha'</span> <span class="id" title="var">Hax_not</span>].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_nil" class="idref" href="#list_difference_nil"><span class="id" title="lemma">list_difference_nil</span></a> {<a id="A:285" class="idref" href="#A:285"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:286" class="idref" href="#EqDecision0:286"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:286" class="idref" href="#EqDecision0:286"><span class="id" title="binder">A</span></a>} (<a id="l:287" class="idref" href="#l:287"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:285"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:287"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:287"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_length_cons" class="idref" href="#list_difference_length_cons"><span class="id" title="lemma">list_difference_length_cons</span></a> {<a id="A:288" class="idref" href="#A:288"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:289" class="idref" href="#EqDecision0:289"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:289" class="idref" href="#EqDecision0:289"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l2:290" class="idref" href="#l2:290"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:288"><span class="id" title="variable">A</span></a>) (<a id="a:291" class="idref" href="#a:291"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:288"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_difference</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:291"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#a:291"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:290"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>)); <span class="id" title="tactic">auto</span>; <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_skip" class="idref" href="#list_difference_skip"><span class="id" title="lemma">list_difference_skip</span></a> {<a id="A:292" class="idref" href="#A:292"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:293" class="idref" href="#EqDecision0:293"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:293" class="idref" href="#EqDecision0:293"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:294" class="idref" href="#l1:294"><span class="id" title="binder">l1</span></a> <a id="l2:295" class="idref" href="#l2:295"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:292"><span class="id" title="variable">A</span></a>) (<a id="b:296" class="idref" href="#b:296"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:292"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:296"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:294"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:294"><span class="id" title="variable">l1</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#b:296"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:295"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:294"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:295"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne</span> <span class="id" title="var">Hl1</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Hl2</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne'</span> <span class="id" title="var">Hl2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_nested" class="idref" href="#list_difference_nested"><span class="id" title="lemma">list_difference_nested</span></a> {<a id="A:297" class="idref" href="#A:297"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:298" class="idref" href="#EqDecision0:298"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:298" class="idref" href="#EqDecision0:298"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:299" class="idref" href="#l1:299"><span class="id" title="binder">l1</span></a> <a id="l1':300" class="idref" href="#l1':300"><span class="id" title="binder">l1'</span></a> <a id="l2:301" class="idref" href="#l2:301"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:297"><span class="id" title="variable">A</span></a>) (<a id="b:302" class="idref" href="#b:302"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:297"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:302"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#l1:299"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1':300"><span class="id" title="variable">l1'</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_difference</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:299"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#b:302"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1':300"><span class="id" title="variable">l1'</span></a>) (<a class="idref" href="cap_machine.stdpp_extra.html#b:302"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:301"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_difference</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:299"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1':300"><span class="id" title="variable">l1'</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#l2:301"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span><span class="id" title="notation">)</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">b</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>)); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_skip"><span class="id" title="axiom">list_difference_skip</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnotin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne</span> <span class="id" title="var">Hnotin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Hl2</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne'</span> <span class="id" title="var">Hnotin'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_length_ni" class="idref" href="#list_difference_length_ni"><span class="id" title="lemma">list_difference_length_ni</span></a>  {<a id="A:303" class="idref" href="#A:303"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:304" class="idref" href="#EqDecision0:304"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:304" class="idref" href="#EqDecision0:304"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:305" class="idref" href="#l1:305"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:303"><span class="id" title="variable">A</span></a>) (<a id="b:306" class="idref" href="#b:306"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:303"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:306"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:305"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:305"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:306"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:305"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hna</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hna</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hna</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne</span> <span class="id" title="var">Hna</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_skip"><span class="id" title="axiom">list_difference_skip</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_nil"><span class="id" title="axiom">list_difference_nil</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_single_length" class="idref" href="#list_difference_single_length"><span class="id" title="lemma">list_difference_single_length</span></a> {<a id="A:307" class="idref" href="#A:307"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:308" class="idref" href="#EqDecision0:308"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:308" class="idref" href="#EqDecision0:308"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:309" class="idref" href="#l1:309"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:307"><span class="id" title="variable">A</span></a>) (<a id="b:310" class="idref" href="#b:310"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:307"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#b:310"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:309"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:309"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:309"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:310"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:309"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hndup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt;<span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hndup</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hndup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hni</span> <span class="id" title="var">Hndup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hni'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>. <span class="id" title="var">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_length_ni"><span class="id" title="axiom">list_difference_length_ni</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hndup</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Ha</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_app" class="idref" href="#list_difference_app"><span class="id" title="lemma">list_difference_app</span></a> {<a id="A:311" class="idref" href="#A:311"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:312" class="idref" href="#EqDecision0:312"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:312" class="idref" href="#EqDecision0:312"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:313" class="idref" href="#l1:313"><span class="id" title="binder">l1</span></a> <a id="l2:314" class="idref" href="#l2:314"><span class="id" title="binder">l2</span></a> <a id="l2':315" class="idref" href="#l2':315"><span class="id" title="binder">l2'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:311"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:313"><span class="id" title="variable">l1</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#l2:314"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2':315"><span class="id" title="variable">l2'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_difference</span> (<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:313"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:314"><span class="id" title="variable">l2</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#l2':315"><span class="id" title="variable">l2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> (<span class="id" title="var">l2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2'</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl2</span> | <span class="id" title="var">Hl2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2'</span>); <span class="id" title="var">last</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl2</span> <span class="id" title="var">Hl2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2'</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_Permutation" class="idref" href="#list_difference_Permutation"><span class="id" title="lemma">list_difference_Permutation</span></a> {<a id="A:316" class="idref" href="#A:316"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:317" class="idref" href="#EqDecision0:317"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:317" class="idref" href="#EqDecision0:317"><span class="id" title="binder">A</span></a>} (<a id="l:318" class="idref" href="#l:318"><span class="id" title="binder">l</span></a> <a id="l1:319" class="idref" href="#l1:319"><span class="id" title="binder">l1</span></a> <a id="l2:320" class="idref" href="#l2:320"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:316"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l1:319"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:320"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:318"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:319"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:318"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:320"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l1</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_in"><span class="id" title="lemma">Permutation_in</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>);[|<span class="id" title="var">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_sym"><span class="id" title="lemma">Permutation_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_in"><span class="id" title="lemma">Permutation_in</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hnin</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hnin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>);[<span class="id" title="var">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_length" class="idref" href="#list_difference_length"><span class="id" title="lemma">list_difference_length</span></a> {<a id="A:321" class="idref" href="#A:321"><span class="id" title="binder">A</span></a>} `{<a id="EqDecision0:322" class="idref" href="#EqDecision0:322"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:322" class="idref" href="#EqDecision0:322"><span class="id" title="binder">A</span></a>} (<a id="l1:323" class="idref" href="#l1:323"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:321"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l2:324" class="idref" href="#l2:324"><span class="id" title="binder">l2</span></a><span class="id" title="notation">,</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:323"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:324"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:324"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:323"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:323"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:324"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:323"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:324"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hdup1</span> <span class="id" title="var">Hdup2</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">submseteq_cons_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | [<span class="id" title="var">k</span> [<span class="id" title="var">Hperm</span> <span class="id" title="var">Hk</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_submseteq</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:=<span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontr</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnin</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_Permutation"><span class="id" title="axiom">list_difference_Permutation</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l1</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hperm</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_skip"><span class="id" title="axiom">list_difference_skip</span></a>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnin</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl1</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hdup2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hperm</span> =&gt;<span class="id" title="var">Hdup2</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup2</span> <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hperm</span> /=. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">submseteq_cons_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsub</span> | <span class="id" title="var">Hcontr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl1</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">submseteq_length</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup1</span> <span class="id" title="keyword">as</span> [? ?]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">submseteq_length</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">Hperm</span> <span class="id" title="var">Hl'</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hperm</span>. <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_difference" class="idref" href="#list_to_set_difference"><span class="id" title="lemma">list_to_set_difference</span></a> <a id="A:325" class="idref" href="#A:325"><span class="id" title="binder">A</span></a> {<span class="id" title="var">_</span>: <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">_</span>: <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a>} (<a id="l1:326" class="idref" href="#l1:326"><span class="id" title="binder">l1</span></a> <a id="l2:327" class="idref" href="#l2:327"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set</span> (<span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:326"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:327"><span class="id" title="variable">l2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="definition">gset</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:326"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="definition">gset</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:327"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="definition">gset</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:325"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>. <span class="id" title="var">cbn</span> [<span class="id" title="definition">list_difference</span> <span class="id" title="definition">list_to_set</span>]. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span>. <span class="id" title="var">cbn</span> [<span class="id" title="definition">list_difference</span> <span class="id" title="definition">list_to_set</span>]. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>); <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;creates&nbsp;a&nbsp;gmap&nbsp;with&nbsp;domain&nbsp;from&nbsp;the&nbsp;list,&nbsp;all&nbsp;pointing&nbsp;to&nbsp;a&nbsp;default&nbsp;value&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a id="create_gmap_default" class="idref" href="#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> {<a id="K:328" class="idref" href="#K:328"><span class="id" title="binder">K</span></a> <a id="V:329" class="idref" href="#V:329"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:331" class="idref" href="#H:331"><span class="id" title="binder">Countable</span></a> <a id="H:331" class="idref" href="#H:331"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:332" class="idref" href="#l:332"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:328"><span class="id" title="variable">K</span></a>) (<a id="d:333" class="idref" href="#d:333"><span class="id" title="binder">d</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V:329"><span class="id" title="variable">V</span></a>) : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:328"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:329"><span class="id" title="variable">V</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:332"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> =&gt; <span class="id" title="notation">&lt;[</span><span class="id" title="var">k</span><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#d:333"><span class="id" title="variable">d</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">create_gmap_default</span> <span class="id" title="notation">tl</span> <span class="id" title="notation">d</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_gmap_default_lookup" class="idref" href="#create_gmap_default_lookup"><span class="id" title="lemma">create_gmap_default_lookup</span></a> {<a id="K:336" class="idref" href="#K:336"><span class="id" title="binder">K</span></a> <a id="V:337" class="idref" href="#V:337"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:339" class="idref" href="#H:339"><span class="id" title="binder">Countable</span></a> <a id="H:339" class="idref" href="#H:339"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:340" class="idref" href="#l:340"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:336"><span class="id" title="variable">K</span></a>) (<a id="d:341" class="idref" href="#d:341"><span class="id" title="binder">d</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V:337"><span class="id" title="variable">V</span></a>) (<a id="k:342" class="idref" href="#k:342"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:336"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#k:342"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:340"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:340"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:341"><span class="id" title="variable">d</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:342"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:341"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k</span>)); [<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k</span>)); [<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">simplify_map_eq</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_gmap_default_lookup_is_Some" class="idref" href="#create_gmap_default_lookup_is_Some"><span class="id" title="lemma">create_gmap_default_lookup_is_Some</span></a> {<a id="K:343" class="idref" href="#K:343"><span class="id" title="binder">K</span></a> <a id="V:344" class="idref" href="#V:344"><span class="id" title="binder">V</span></a>} `{<a id="EqDecision0:345" class="idref" href="#EqDecision0:345"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:345" class="idref" href="#EqDecision0:345"><span class="id" title="binder">K</span></a>, <a id="H:347" class="idref" href="#H:347"><span class="id" title="binder">Countable</span></a> <a id="H:347" class="idref" href="#H:347"><span class="id" title="binder">K</span></a>} (<a id="l:348" class="idref" href="#l:348"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:343"><span class="id" title="variable">K</span></a>) (<a id="d:349" class="idref" href="#d:349"><span class="id" title="binder">d</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#V:344"><span class="id" title="variable">V</span></a>) <a id="x:350" class="idref" href="#x:350"><span class="id" title="binder">x</span></a> <a id="v:351" class="idref" href="#v:351"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:348"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:349"><span class="id" title="variable">d</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#x:350"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:351"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:350"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:348"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:351"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:349"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">l</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>)) <span class="id" title="keyword">as</span> [-&gt;|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //. <span class="id" title="tactic">intros</span> [? ?]%<span class="id" title="var">IHl</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_gmap_default_dom" class="idref" href="#create_gmap_default_dom"><span class="id" title="lemma">create_gmap_default_dom</span></a> {<a id="K:352" class="idref" href="#K:352"><span class="id" title="binder">K</span></a> <a id="V:353" class="idref" href="#V:353"><span class="id" title="binder">V</span></a>} `{<a id="EqDecision0:354" class="idref" href="#EqDecision0:354"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:354" class="idref" href="#EqDecision0:354"><span class="id" title="binder">K</span></a>, <a id="H:356" class="idref" href="#H:356"><span class="id" title="binder">Countable</span></a> <a id="H:356" class="idref" href="#H:356"><span class="id" title="binder">K</span></a>} (<a id="l:357" class="idref" href="#l:357"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:352"><span class="id" title="variable">K</span></a>) (<a id="d:358" class="idref" href="#d:358"><span class="id" title="binder">d</span></a>: <a class="idref" href="cap_machine.stdpp_extra.html#V:353"><span class="id" title="variable">V</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="definition">dom</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:357"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:358"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:357"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_empty_L</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> [<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <span class="id" title="definition">list_to_set</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span> // <span class="id" title="var">IHl</span> //.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_gmap_default_lookup_None" class="idref" href="#create_gmap_default_lookup_None"><span class="id" title="lemma">create_gmap_default_lookup_None</span></a> {<a id="K:359" class="idref" href="#K:359"><span class="id" title="binder">K</span></a> <a id="V:360" class="idref" href="#V:360"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:362" class="idref" href="#H:362"><span class="id" title="binder">Countable</span></a> <a id="H:362" class="idref" href="#H:362"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;(<a id="l:363" class="idref" href="#l:363"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:359"><span class="id" title="variable">K</span></a>) (<a id="d:364" class="idref" href="#d:364"><span class="id" title="binder">d</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V:360"><span class="id" title="variable">V</span></a>) (<a id="k:365" class="idref" href="#k:365"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:359"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#k:365"><span class="id" title="variable">k</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:363"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:363"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:364"><span class="id" title="variable">d</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:365"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hne</span> <span class="id" title="var">Hk</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>//. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_gmap_default_permutation" class="idref" href="#create_gmap_default_permutation"><span class="id" title="lemma">create_gmap_default_permutation</span></a> {<a id="K:366" class="idref" href="#K:366"><span class="id" title="binder">K</span></a> <a id="V:367" class="idref" href="#V:367"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:369" class="idref" href="#H:369"><span class="id" title="binder">Countable</span></a> <a id="H:369" class="idref" href="#H:369"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;(<a id="l:370" class="idref" href="#l:370"><span class="id" title="binder">l</span></a> <a id="l':371" class="idref" href="#l':371"><span class="id" title="binder">l'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#K:366"><span class="id" title="variable">K</span></a>) (<a id="d:372" class="idref" href="#d:372"><span class="id" title="binder">d</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V:367"><span class="id" title="variable">V</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:370"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#l':371"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:370"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:372"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l':371"><span class="id" title="variable">l'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#d:372"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hperm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">map_eq</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <span class="id" title="notation">∈</span> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <span class="id" title="notation">∈</span> <span class="id" title="var">l'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e'</span>;[<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hperm</span>;<span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_lookup"><span class="id" title="axiom">create_gmap_default_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_lookup"><span class="id" title="axiom">create_gmap_default_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span> <span class="id" title="keyword">as</span> -&gt;. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <span class="id" title="notation">∉</span> <span class="id" title="var">l'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e'</span>;[<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hperm</span>;<span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_lookup_None"><span class="id" title="axiom">create_gmap_default_lookup_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_lookup_None"><span class="id" title="axiom">create_gmap_default_lookup_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span> <span class="id" title="keyword">as</span> -&gt;. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fst_zip_prefix" class="idref" href="#fst_zip_prefix"><span class="id" title="lemma">fst_zip_prefix</span></a> <a id="A:373" class="idref" href="#A:373"><span class="id" title="binder">A</span></a> <a id="B:374" class="idref" href="#B:374"><span class="id" title="binder">B</span></a> (<a id="l:375" class="idref" href="#l:375"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:373"><span class="id" title="variable">A</span></a>) (<a id="k:376" class="idref" href="#k:376"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:374"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:375"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#k:376"><span class="id" title="variable">k</span></a><span class="id" title="notation">).*1</span> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:375"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">k</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_cons</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prefix_of_nil" class="idref" href="#prefix_of_nil"><span class="id" title="lemma">prefix_of_nil</span></a> <a id="A:377" class="idref" href="#A:377"><span class="id" title="binder">A</span></a> (<a id="l:378" class="idref" href="#l:378"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:377"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:378"><span class="id" title="variable">l</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l:378"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?%<span class="id" title="lemma">prefix_nil_not</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_prefix" class="idref" href="#in_prefix"><span class="id" title="lemma">in_prefix</span></a> <a id="A:379" class="idref" href="#A:379"><span class="id" title="binder">A</span></a> (<a id="l1:380" class="idref" href="#l1:380"><span class="id" title="binder">l1</span></a> <a id="l2:381" class="idref" href="#l2:381"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:379"><span class="id" title="variable">A</span></a>) <a id="x:382" class="idref" href="#x:382"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l1:380"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:381"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#x:382"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:380"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#x:382"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:381"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">prefix</span>. <span class="id" title="tactic">intros</span> [? -&gt;] ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="NoDup_prefix" class="idref" href="#NoDup_prefix"><span class="id" title="lemma">NoDup_prefix</span></a> <a id="A:383" class="idref" href="#A:383"><span class="id" title="binder">A</span></a> (<a id="l1:384" class="idref" href="#l1:384"><span class="id" title="binder">l1</span></a> <a id="l2:385" class="idref" href="#l2:385"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:383"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:385"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#l1:384"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:385"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:384"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt;%<a class="idref" href="cap_machine.stdpp_extra.html#prefix_of_nil"><span class="id" title="lemma">prefix_of_nil</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">prefix_cons_inv_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HH</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_cons_inv_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.stdpp_extra.html#in_prefix"><span class="id" title="axiom">in_prefix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HH</span> <span class="id" title="var">Hx</span>). <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="take_lookup_Some_inv" class="idref" href="#take_lookup_Some_inv"><span class="id" title="lemma">take_lookup_Some_inv</span></a> <a id="A:386" class="idref" href="#A:386"><span class="id" title="binder">A</span></a> (<a id="l:387" class="idref" href="#l:387"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:386"><span class="id" title="variable">A</span></a>) (<a id="n:388" class="idref" href="#n:388"><span class="id" title="binder">n</span></a> <a id="i:389" class="idref" href="#i:389"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="x:390" class="idref" href="#x:390"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">take</span> <a class="idref" href="cap_machine.stdpp_extra.html#n:388"><span class="id" title="variable">n</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:387"><span class="id" title="variable">l</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:389"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:390"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#i:389"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#n:388"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:387"><span class="id" title="variable">l</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:389"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:390"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">inversion</span> 1. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">simplify_eq</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [? ?]%<span class="id" title="var">IHn</span>. <span class="id" title="tactic">split</span>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">auto</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="NoDup_fst" class="idref" href="#NoDup_fst"><span class="id" title="lemma">NoDup_fst</span></a> {<a id="A:391" class="idref" href="#A:391"><span class="id" title="binder">A</span></a> <a id="B:392" class="idref" href="#B:392"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l:393" class="idref" href="#l:393"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#A:391"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a><a class="idref" href="cap_machine.stdpp_extra.html#B:392"><span class="id" title="variable">B</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:393"><span class="id" title="variable">l</span></a><span class="id" title="notation">.*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:393"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span> <span class="id" title="var">Hdup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fst_elem_of_cons" class="idref" href="#fst_elem_of_cons"><span class="id" title="lemma">fst_elem_of_cons</span></a> {<a id="A:394" class="idref" href="#A:394"><span class="id" title="binder">A</span></a> <a id="B:395" class="idref" href="#B:395"><span class="id" title="binder">B</span></a>} `{<a id="EqDecision0:396" class="idref" href="#EqDecision0:396"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:396" class="idref" href="#EqDecision0:396"><span class="id" title="binder">A</span></a>} (<a id="l:397" class="idref" href="#l:397"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:394"><span class="id" title="variable">A</span></a>) (<a id="x:398" class="idref" href="#x:398"><span class="id" title="binder">x</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:394"><span class="id" title="variable">A</span></a>) (<a id="l':399" class="idref" href="#l':399"><span class="id" title="binder">l'</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:395"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#x:398"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:397"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l':399"><span class="id" title="variable">l'</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#x:398"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:397"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#in_prefix"><span class="id" title="axiom">in_prefix</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#fst_zip_prefix"><span class="id" title="axiom">fst_zip_prefix</span></a>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_fst_snd" class="idref" href="#length_fst_snd"><span class="id" title="lemma">length_fst_snd</span></a> {<a id="A:400" class="idref" href="#A:400"><span class="id" title="binder">A</span></a> <a id="B:401" class="idref" href="#B:401"><span class="id" title="binder">B</span></a>} `{<a id="H:403" class="idref" href="#H:403"><span class="id" title="binder">Countable</span></a> <a id="H:403" class="idref" href="#H:403"><span class="id" title="binder">A</span></a>} (<a id="m:404" class="idref" href="#m:404"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:400"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:401"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:404"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:404"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_empty</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_insert</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_to_list_delete" class="idref" href="#map_to_list_delete"><span class="id" title="lemma">map_to_list_delete</span></a> {<a id="A:405" class="idref" href="#A:405"><span class="id" title="binder">A</span></a> <a id="B:406" class="idref" href="#B:406"><span class="id" title="binder">B</span></a>} `{<a id="H:408" class="idref" href="#H:408"><span class="id" title="binder">Countable</span></a> <a id="H:408" class="idref" href="#H:408"><span class="id" title="binder">A</span></a>} `{<a id="EqDecision1:409" class="idref" href="#EqDecision1:409"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:409" class="idref" href="#EqDecision1:409"><span class="id" title="binder">A</span></a>} (<a id="m:410" class="idref" href="#m:410"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:405"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:406"><span class="id" title="variable">B</span></a>) (<a id="i:411" class="idref" href="#i:411"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:405"><span class="id" title="variable">A</span></a>) (<a id="x:412" class="idref" href="#x:412"><span class="id" title="binder">x</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#B:406"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:413" class="idref" href="#l:413"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#i:411"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.stdpp_extra.html#x:412"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:413"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span> <span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:410"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> (<a class="idref" href="cap_machine.stdpp_extra.html#i:411"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:413"><span class="id" title="variable">l</span></a><span class="id" title="notation">.*1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:411"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:410"><span class="id" title="variable">m</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:413"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hdup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">map_to_list</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hl</span>. <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_Permutation</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_map_to_list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#NoDup_fst"><span class="id" title="axiom">NoDup_fst</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i0</span> <span class="id" title="var">x0</span>]. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinx</span>%<span class="id" title="lemma">elem_of_map_to_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hne</span>;[<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="var">simplify_map_eq</span>|<span class="id" title="var">simplify_map_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Hin'</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hne</span>;[|<span class="id" title="var">simplify_map_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="inductive">NoDup</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdup'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_map_to_list</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i0</span> <span class="id" title="notation">∈</span> <span class="id" title="var">l</span><span class="id" title="notation">.*1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HWInt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> ?]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcontr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hl</span> =&gt;<span class="id" title="var">Hin'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="NoDup_map_to_list_fst" class="idref" href="#NoDup_map_to_list_fst"><span class="id" title="lemma">NoDup_map_to_list_fst</span></a> (<a id="A:414" class="idref" href="#A:414"><span class="id" title="binder">A</span></a> <a id="B:415" class="idref" href="#B:415"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="EqDecision0:416" class="idref" href="#EqDecision0:416"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:416" class="idref" href="#EqDecision0:416"><span class="id" title="binder">A</span></a>} `{<a id="H:418" class="idref" href="#H:418"><span class="id" title="binder">Countable</span></a> <a id="H:418" class="idref" href="#H:418"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:419" class="idref" href="#m:419"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:414"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:415"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:419"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span>] <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_empty</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_insert</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">NoDup_cons</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>%<span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcontr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ab</span> [<span class="id" title="var">Heqab</span> <span class="id" title="var">Hcontr</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ab</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">b</span>]. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcontr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_to_list_delete_fst" class="idref" href="#map_to_list_delete_fst"><span class="id" title="lemma">map_to_list_delete_fst</span></a> {<a id="A:420" class="idref" href="#A:420"><span class="id" title="binder">A</span></a> <a id="B:421" class="idref" href="#B:421"><span class="id" title="binder">B</span></a>} `{<a id="H:423" class="idref" href="#H:423"><span class="id" title="binder">Countable</span></a> <a id="H:423" class="idref" href="#H:423"><span class="id" title="binder">A</span></a>} (<a id="m:424" class="idref" href="#m:424"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:420"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:421"><span class="id" title="variable">B</span></a>) (<a id="i:425" class="idref" href="#i:425"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:420"><span class="id" title="variable">A</span></a>) (<a id="x:426" class="idref" href="#x:426"><span class="id" title="binder">x</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#B:421"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:427" class="idref" href="#l:427"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:427"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:424"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> (<a class="idref" href="cap_machine.stdpp_extra.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:427"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:424"><span class="id" title="variable">m</span></a>)<span class="id" title="notation">).*1</span> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:427"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hdup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <span class="id" title="var">m</span><span class="id" title="notation">).*1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hl</span>. <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> <span class="id" title="var">Hdup</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_Permutation</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#NoDup_map_to_list_fst"><span class="id" title="axiom">NoDup_map_to_list_fst</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">l'</span> := <span class="id" title="abbreviation">zip</span> <span class="id" title="var">l</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#repeat"><span class="id" title="definition">repeat</span></a> <span class="id" title="var">x</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l'</span><span class="id" title="notation">.*1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>;[<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span>;<span class="id" title="tactic">auto</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>;<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i0</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinx</span>%<span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinx</span> <span class="id" title="keyword">as</span> [ [? ?] [? <span class="id" title="var">Hinx</span>] ]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i0</span>));[<span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinx</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hinx</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinx</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i0</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <span class="id" title="var">m</span><span class="id" title="notation">).*1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hinx'</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hl</span> =&gt;<span class="id" title="var">Hinx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinx'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcontr</span> | <span class="id" title="var">Hinx'</span>];[<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinx</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hne</span>;[<span class="id" title="tactic">congruence</span>|<span class="id" title="var">simplify_map_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i0</span> <span class="id" title="notation">∈</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hl</span> =&gt;<span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_to_list_fst"><span class="id" title="axiom">map_to_list_fst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x'</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_to_list_fst"><span class="id" title="axiom">map_to_list_fst</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="submseteq_list_difference" class="idref" href="#submseteq_list_difference"><span class="id" title="lemma">submseteq_list_difference</span></a> {<a id="A:428" class="idref" href="#A:428"><span class="id" title="binder">A</span></a>} `{<a id="EqDecision0:429" class="idref" href="#EqDecision0:429"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:429" class="idref" href="#EqDecision0:429"><span class="id" title="binder">A</span></a>} (<a id="l1:430" class="idref" href="#l1:430"><span class="id" title="binder">l1</span></a> <a id="l2:431" class="idref" href="#l2:431"><span class="id" title="binder">l2</span></a> <a id="l3:432" class="idref" href="#l3:432"><span class="id" title="binder">l3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:428"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:430"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:433" class="idref" href="#a:433"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:433"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l3:432"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:433"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:430"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:430"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:431"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l1:430"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">⊆+</span> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:431"><span class="id" title="variable">l2</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l3:432"><span class="id" title="variable">l3</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdup</span> <span class="id" title="var">Hnin</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_submseteq</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_difference</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_submseteq</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontr</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_difference_cons" class="idref" href="#list_difference_cons"><span class="id" title="lemma">list_difference_cons</span></a> {<a id="A:434" class="idref" href="#A:434"><span class="id" title="binder">A</span></a>} `{<a id="EqDecision0:435" class="idref" href="#EqDecision0:435"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:435" class="idref" href="#EqDecision0:435"><span class="id" title="binder">A</span></a>} (<a id="l1:436" class="idref" href="#l1:436"><span class="id" title="binder">l1</span></a> <a id="l2:437" class="idref" href="#l2:437"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:434"><span class="id" title="variable">A</span></a>) (<a id="a:438" class="idref" href="#a:438"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:434"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:436"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:438"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:436"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:438"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:437"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:436"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:437"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:438"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="definition">list_difference</span> <a class="idref" href="cap_machine.stdpp_extra.html#l1:436"><span class="id" title="variable">l1</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#a:438"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:437"><span class="id" title="variable">l2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hdup</span> <span class="id" title="var">Hin1</span> <span class="id" title="var">Hin2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <span class="id" title="definition">elem_of</span> <span class="id" title="var">a</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hne</span>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontr</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="var">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>. { <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>. <span class="id" title="tactic">right</span>;<span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [? ?];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin1</span> <span class="id" title="keyword">as</span> [? | ?];[<span class="id" title="tactic">congruence</span>|<span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>));<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> <span class="id" title="var">Hdup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>;[<span class="id" title="tactic">constructor</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_difference_skip"><span class="id" title="axiom">list_difference_skip</span></a>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> <span class="id" title="var">Hdup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin1</span> <span class="id" title="keyword">as</span> [? | ?];[<span class="id" title="tactic">congruence</span>|<span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">IHl1</span>;<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_swap</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_map_to_list" class="idref" href="#list_to_set_map_to_list"><span class="id" title="lemma">list_to_set_map_to_list</span></a> {<a id="K:439" class="idref" href="#K:439"><span class="id" title="binder">K</span></a> <a id="V:440" class="idref" href="#V:440"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:441" class="idref" href="#EqDecision0:441"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:441" class="idref" href="#EqDecision0:441"><span class="id" title="binder">K</span></a>} `{<a id="H:443" class="idref" href="#H:443"><span class="id" title="binder">Countable</span></a> <a id="H:443" class="idref" href="#H:443"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:444" class="idref" href="#m:444"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:439"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V:440"><span class="id" title="variable">V</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_set</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:444"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:444"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_empty</span> <span class="id" title="lemma">dom_empty_L</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_to_list_insert</span>// <span class="id" title="lemma">dom_insert_L</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;last&nbsp;element&nbsp;of&nbsp;a&nbsp;list&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;a&nbsp;list&nbsp;where&nbsp;we&nbsp;drop&nbsp;fewer&nbsp;elements&nbsp;than&nbsp;the&nbsp;list&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="last_drop_lt" class="idref" href="#last_drop_lt"><span class="id" title="lemma">last_drop_lt</span></a> {<a id="A:445" class="idref" href="#A:445"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l:446" class="idref" href="#l:446"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:445"><span class="id" title="variable">A</span></a>) (<a id="i:447" class="idref" href="#i:447"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="a:448" class="idref" href="#a:448"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:445"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#i:447"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:446"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="definition">list.last</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:446"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:448"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="definition">list.last</span> (<span class="id" title="abbreviation">drop</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:447"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:446"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:448"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hlast</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hlast</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.lt_irrefl"><span class="id" title="lemma">Nat.lt_irrefl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_lookup" class="idref" href="#last_lookup"><span class="id" title="lemma">last_lookup</span></a> {<a id="A:449" class="idref" href="#A:449"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l:450" class="idref" href="#l:450"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:449"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list.last</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:450"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:450"><span class="id" title="variable">l</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:450"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> {1}/<span class="id" title="definition">last</span> -/<span class="id" title="definition">last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">PeanoNat.Nat.sub_0_r</span></a>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_app_iff" class="idref" href="#last_app_iff"><span class="id" title="lemma">last_app_iff</span></a> {<a id="A:451" class="idref" href="#A:451"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l1:452" class="idref" href="#l1:452"><span class="id" title="binder">l1</span></a> <a id="l2:453" class="idref" href="#l2:453"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:451"><span class="id" title="variable">A</span></a>) <a id="a:454" class="idref" href="#a:454"><span class="id" title="binder">a</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list.last</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:453"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:454"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:453"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="definition">list.last</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:452"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:453"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:454"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl2</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHl1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlt</span> <span class="id" title="var">Hlast</span>]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> {1}/<span class="id" title="definition">last</span> -/<span class="id" title="definition">last</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l1'</span> [<span class="id" title="var">Hlen</span> <span class="id" title="var">Hl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;[<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">last_snoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>; <span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="var">IHl2</span> (<span class="id" title="var">l1'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>;[<span class="id" title="var">lia</span>|]. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> -<span class="id" title="lemma">cons_middle</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_app_eq" class="idref" href="#last_app_eq"><span class="id" title="lemma">last_app_eq</span></a> {<a id="A:455" class="idref" href="#A:455"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l1:456" class="idref" href="#l1:456"><span class="id" title="binder">l1</span></a> <a id="l2:457" class="idref" href="#l2:457"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:455"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:457"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list.last</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:457"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list.last</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:456"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l2:457"><span class="id" title="variable">l2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l2</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">l1</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">last_snoc</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_middle</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> -(<span class="id" title="var">IHl2</span> (<span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>));[<span class="id" title="tactic">simpl</span>;<span class="id" title="var">lia</span>|<span class="id" title="tactic">auto</span>].<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_nil_inv" class="idref" href="#rev_nil_inv"><span class="id" title="lemma">rev_nil_inv</span></a> {<a id="A:458" class="idref" href="#A:458"><span class="id" title="binder">A</span></a>} (<a id="l:459" class="idref" href="#l:459"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:458"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:459"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:459"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hrev</span>. <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_eq_nil"><span class="id" title="lemma">app_eq_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrev</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrev1</span> <span class="id" title="var">Hrev2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrev2</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_singleton_inv" class="idref" href="#rev_singleton_inv"><span class="id" title="lemma">rev_singleton_inv</span></a> {<a id="A:460" class="idref" href="#A:460"><span class="id" title="binder">A</span></a>} (<a id="l:461" class="idref" href="#l:461"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:460"><span class="id" title="variable">A</span></a>) (<a id="a:462" class="idref" href="#a:462"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:460"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:461"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:462"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:461"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:462"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hrev</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrev</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrev</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">app_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrev</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrev</span> <span class="id" title="keyword">as</span> [ [<span class="id" title="var">Hrev1</span> <span class="id" title="var">Hrev2</span>] | [<span class="id" title="var">Hrev1</span> <span class="id" title="var">Hrev2</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>);<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrev2</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_lookup" class="idref" href="#rev_lookup"><span class="id" title="lemma">rev_lookup</span></a> {<a id="A:463" class="idref" href="#A:463"><span class="id" title="binder">A</span></a>} (<a id="l:464" class="idref" href="#l:464"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:463"><span class="id" title="variable">A</span></a>) (<a id="a:465" class="idref" href="#a:465"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:463"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:464"><span class="id" title="variable">l</span></a> <span class="id" title="notation">!!</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:465"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:464"><span class="id" title="variable">l</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:464"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1<span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:465"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.stdpp_extra.html#last_lookup"><span class="id" title="axiom">last_lookup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_app_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>;[<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=;<span class="id" title="var">lia</span>|]. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.stdpp_extra.html#last_lookup"><span class="id" title="axiom">last_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_app_l</span>;[<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> /=;<span class="id" title="var">lia</span>|]. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">auto</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_cons_inv" class="idref" href="#rev_cons_inv"><span class="id" title="lemma">rev_cons_inv</span></a> {<a id="A:466" class="idref" href="#A:466"><span class="id" title="binder">A</span></a>} (<a id="l:467" class="idref" href="#l:467"><span class="id" title="binder">l</span></a> <a id="l':468" class="idref" href="#l':468"><span class="id" title="binder">l'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:466"><span class="id" title="variable">A</span></a>) (<a id="a:469" class="idref" href="#a:469"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:466"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:467"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:469"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l':468"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="l'':470" class="idref" href="#l'':470"><span class="id" title="binder">l''</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:467"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l'':470"><span class="id" title="variable">l''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:469"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">(</span><span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <span class="id" title="keyword">as</span> -&gt;;[<span class="id" title="tactic">simpl</span>;<span class="id" title="var">lia</span>|]. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#rev_lookup"><span class="id" title="axiom">rev_lookup</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrel</span>. <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_S_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="abbreviation">take</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">rev_unit</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_involutive"><span class="id" title="lemma">rev_involutive</span></a>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hsome</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#firstn_all"><span class="id" title="lemma">firstn_all</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="prod_op" class="idref" href="#prod_op"><span class="id" title="definition">prod_op</span></a> {<a id="A:471" class="idref" href="#A:471"><span class="id" title="binder">A</span></a> <a id="B:472" class="idref" href="#B:472"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="o1:473" class="idref" href="#o1:473"><span class="id" title="binder">o1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:471"><span class="id" title="variable">A</span></a>) (<a id="o2:474" class="idref" href="#o2:474"><span class="id" title="binder">o2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:472"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.stdpp_extra.html#o1:473"><span class="id" title="variable">o1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.stdpp_extra.html#o2:474"><span class="id" title="variable">o2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">c</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="prod_merge" class="idref" href="#prod_merge"><span class="id" title="definition">prod_merge</span></a> {<a id="A:477" class="idref" href="#A:477"><span class="id" title="binder">A</span></a> <a id="B:478" class="idref" href="#B:478"><span class="id" title="binder">B</span></a> <a id="C:479" class="idref" href="#C:479"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:481" class="idref" href="#H:481"><span class="id" title="binder">Countable</span></a> <a id="H:481" class="idref" href="#H:481"><span class="id" title="binder">A</span></a>} : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:477"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:478"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:477"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:479"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:477"><span class="id" title="variable">A</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#B:478"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#C:479"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="m1:482" class="idref" href="#m1:482"><span class="id" title="binder">m1</span></a> <a id="m2:483" class="idref" href="#m2:483"><span class="id" title="binder">m2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="definition">merge</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_op"><span class="id" title="definition">prod_op</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:482"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:483"><span class="id" title="variable">m2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prod_merge_empty_r" class="idref" href="#prod_merge_empty_r"><span class="id" title="lemma">prod_merge_empty_r</span></a><br/>
&nbsp;&nbsp;{<a id="K:484" class="idref" href="#K:484"><span class="id" title="binder">K</span></a> <a id="A:485" class="idref" href="#A:485"><span class="id" title="binder">A</span></a> <a id="B:486" class="idref" href="#B:486"><span class="id" title="binder">B</span></a>} `{<a id="H:488" class="idref" href="#H:488"><span class="id" title="binder">Countable</span></a> <a id="H:488" class="idref" href="#H:488"><span class="id" title="binder">K</span></a>} (<a id="m1:489" class="idref" href="#m1:489"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:484"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:485"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.stdpp_extra.html#B:486"><span class="id" title="variable">B</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.stdpp_extra.html#m1:489"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">∅</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">merge_empty_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_op"><span class="id" title="definition">prod_op</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m1</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">omap_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="notation">((</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="y:490" class="idref" href="#y:490"><span class="id" title="binder"><span id="y:492" class="id">y</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="cap_machine.stdpp_extra.html#y:490"><span class="id" title="variable">y</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><span class="id" title="notation">)</span> <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#prod"><span class="id" title="inductive">prod</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">omap_insert_None</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <span class="id" title="var">i</span>) (<span class="id" title="var">m</span> := <span class="id" title="var">m</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prod_merge_empty_l" class="idref" href="#prod_merge_empty_l"><span class="id" title="lemma">prod_merge_empty_l</span></a><br/>
&nbsp;&nbsp;{<a id="K:494" class="idref" href="#K:494"><span class="id" title="binder">K</span></a> <a id="A:495" class="idref" href="#A:495"><span class="id" title="binder">A</span></a> <a id="B:496" class="idref" href="#B:496"><span class="id" title="binder">B</span></a>} `{<a id="H:498" class="idref" href="#H:498"><span class="id" title="binder">Countable</span></a> <a id="H:498" class="idref" href="#H:498"><span class="id" title="binder">K</span></a>} (<a id="m2:499" class="idref" href="#m2:499"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:494"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:496"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="var">_</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:495"><span class="id" title="variable">A</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">∅</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:499"><span class="id" title="variable">m2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">merge_empty_l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_op"><span class="id" title="definition">prod_op</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m2</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">omap_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="notation">((</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#prod"><span class="id" title="inductive">prod</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">omap_insert_None</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <span class="id" title="var">i</span>) (<span class="id" title="var">m</span> := <span class="id" title="var">m</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prod_merge_insert" class="idref" href="#prod_merge_insert"><span class="id" title="lemma">prod_merge_insert</span></a><br/>
&nbsp;&nbsp;{<a id="K:500" class="idref" href="#K:500"><span class="id" title="binder">K</span></a> <a id="A:501" class="idref" href="#A:501"><span class="id" title="binder">A</span></a> <a id="B:502" class="idref" href="#B:502"><span class="id" title="binder">B</span></a>} `{<a id="H:504" class="idref" href="#H:504"><span class="id" title="binder">Countable</span></a> <a id="H:504" class="idref" href="#H:504"><span class="id" title="binder">K</span></a>} (<a id="m1:505" class="idref" href="#m1:505"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:500"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:501"><span class="id" title="variable">A</span></a>) (<a id="m2:506" class="idref" href="#m2:506"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:500"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:502"><span class="id" title="variable">B</span></a>) (<a id="k:507" class="idref" href="#k:507"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:500"><span class="id" title="variable">K</span></a>) (<a id="a:508" class="idref" href="#a:508"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:501"><span class="id" title="variable">A</span></a>) (<a id="b:509" class="idref" href="#b:509"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#B:502"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#k:507"><span class="id" title="variable">k</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#a:508"><span class="id" title="variable">a</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m1</span>) (<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#k:507"><span class="id" title="variable">k</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#b:509"><span class="id" title="variable">b</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#k:507"><span class="id" title="variable">k</span></a><span class="id" title="notation">:=</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:508"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="cap_machine.stdpp_extra.html#b:509"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">prod_merge</span> <span class="id" title="notation">m1</span> <span class="id" title="notation">m2</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> //=.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="lemma">insert_merge</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="snd_prod_merge_inv" class="idref" href="#snd_prod_merge_inv"><span class="id" title="lemma">snd_prod_merge_inv</span></a><br/>
&nbsp;&nbsp;{<a id="K:510" class="idref" href="#K:510"><span class="id" title="binder">K</span></a> <a id="A:511" class="idref" href="#A:511"><span class="id" title="binder">A</span></a> <a id="B:512" class="idref" href="#B:512"><span class="id" title="binder">B</span></a>} `{<a id="H:514" class="idref" href="#H:514"><span class="id" title="binder">Countable</span></a> <a id="H:514" class="idref" href="#H:514"><span class="id" title="binder">K</span></a>} (<a id="m1:515" class="idref" href="#m1:515"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:510"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:511"><span class="id" title="variable">A</span></a>) (<a id="m2:516" class="idref" href="#m2:516"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:510"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:512"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m1:515"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:516"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:515"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:516"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:516"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m2</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m2</span> <span class="id" title="var">Hm2_k</span> <span class="id" title="var">IHm2</span> ] <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_empty_r"><span class="id" title="axiom">prod_merge_empty_r</span></a> <span class="id" title="lemma">fmap_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <span class="id" title="notation">∈</span> <span class="id" title="definition">dom</span> <span class="id" title="var">m1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk_indom_m1</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk_indom_m1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hk_indom_m1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> <span class="id" title="var">Hm1_k</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="lemma">fmap_merge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k'</span>)) ; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hm1_k'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">k'</span> <span class="id" title="notation">∈</span> <span class="id" title="definition">dom</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk'_indom_m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">k'</span> <span class="id" title="notation">∈</span> <span class="id" title="definition">dom</span> <span class="id" title="var">m1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk'_indom_m1</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>; <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk'_indom_m1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk'_indom_m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hk'_indom_m2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v2</span> <span class="id" title="var">Hm2_k'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm2_k'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">k'</span> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk'_notindom_m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_insert_L</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">k'</span> <span class="id" title="notation">∉</span> <span class="id" title="definition">dom</span> <span class="id" title="var">m1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk'_notindom_m1</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk'_notindom_m1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk'_notindom_m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_prod_merge_snd" class="idref" href="#lookup_prod_merge_snd"><span class="id" title="lemma">lookup_prod_merge_snd</span></a> {<a id="K:517" class="idref" href="#K:517"><span class="id" title="binder">K</span></a> <a id="A:518" class="idref" href="#A:518"><span class="id" title="binder">A</span></a> <a id="B:519" class="idref" href="#B:519"><span class="id" title="binder">B</span></a>} `{<a id="H:521" class="idref" href="#H:521"><span class="id" title="binder">Countable</span></a> <a id="H:521" class="idref" href="#H:521"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:522" class="idref" href="#m1:522"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:517"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:518"><span class="id" title="variable">A</span></a>) (<a id="m2:523" class="idref" href="#m2:523"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:517"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:519"><span class="id" title="variable">B</span></a>) <a id="va:524" class="idref" href="#va:524"><span class="id" title="binder">va</span></a> <a id="vb:525" class="idref" href="#vb:525"><span class="id" title="binder">vb</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:522"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:523"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#va:524"><span class="id" title="variable">va</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#vb:525"><span class="id" title="variable">vb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m2:523"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#va:524"><span class="id" title="variable">va</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#vb:525"><span class="id" title="variable">vb</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m2</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_empty_r"><span class="id" title="axiom">prod_merge_empty_r</span></a> <span class="id" title="method">lookup_empty</span> // <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">va</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; [| <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vb</span> ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">va</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">va</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq_m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">simplify_map_eq</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_inj" class="idref" href="#insert_inj"><span class="id" title="lemma">insert_inj</span></a> {<a id="K:526" class="idref" href="#K:526"><span class="id" title="binder">K</span></a> <a id="A:527" class="idref" href="#A:527"><span class="id" title="binder">A</span></a>} `{<a id="H:529" class="idref" href="#H:529"><span class="id" title="binder">Countable</span></a> <a id="H:529" class="idref" href="#H:529"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:530" class="idref" href="#EqDecision1:530"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:530" class="idref" href="#EqDecision1:530"><span class="id" title="binder">K</span></a>, <a id="H0:532" class="idref" href="#H0:532"><span class="id" title="binder">Countable</span></a> <a id="H0:532" class="idref" href="#H0:532"><span class="id" title="binder">A</span></a>, <a id="EqDecision3:533" class="idref" href="#EqDecision3:533"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:533" class="idref" href="#EqDecision3:533"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:534" class="idref" href="#m1:534"><span class="id" title="binder">m1</span></a> <a id="m2:535" class="idref" href="#m2:535"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:526"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:527"><span class="id" title="variable">A</span></a>) (<a id="k:536" class="idref" href="#k:536"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:526"><span class="id" title="variable">K</span></a>) (<a id="v:537" class="idref" href="#v:537"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:527"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:534"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:536"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:535"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:536"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:536"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:537"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:536"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:537"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:534"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:535"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq_k</span> <span class="id" title="var">Heq_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_eq'"><span class="id" title="axiom">map_eq'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k'</span>)) ; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hm1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heq_insert</span> <span class="id" title="var">k'</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //= <span class="id" title="lemma">lookup_insert_ne</span> //= <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heq_insert</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hm2</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heq_insert</span> <span class="id" title="var">k'</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //= <span class="id" title="lemma">lookup_insert_ne</span> //= <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Heq_insert</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm2</span> ; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_subseteq_r_inv" class="idref" href="#insert_subseteq_r_inv"><span class="id" title="lemma">insert_subseteq_r_inv</span></a><br/>
&nbsp;&nbsp;{<a id="K:538" class="idref" href="#K:538"><span class="id" title="binder">K</span></a> <a id="A:539" class="idref" href="#A:539"><span class="id" title="binder">A</span></a>} `{<a id="H:541" class="idref" href="#H:541"><span class="id" title="binder">Countable</span></a> <a id="H:541" class="idref" href="#H:541"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:542" class="idref" href="#EqDecision1:542"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:542" class="idref" href="#EqDecision1:542"><span class="id" title="binder">K</span></a>, <a id="H0:544" class="idref" href="#H0:544"><span class="id" title="binder">Countable</span></a> <a id="H0:544" class="idref" href="#H0:544"><span class="id" title="binder">A</span></a>, <a id="EqDecision3:545" class="idref" href="#EqDecision3:545"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:545" class="idref" href="#EqDecision3:545"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:546" class="idref" href="#m1:546"><span class="id" title="binder">m1</span></a> <a id="m2:547" class="idref" href="#m2:547"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:538"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:539"><span class="id" title="variable">A</span></a>) (<a id="k:548" class="idref" href="#k:548"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:538"><span class="id" title="variable">K</span></a>) (<a id="v:549" class="idref" href="#v:549"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:539"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:546"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:548"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><span class="id" title="notation">&lt;[</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:548"><span class="id" title="variable">k</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.stdpp_extra.html#v:549"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m1</span><span class="id" title="notation">)</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:547"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:546"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:547"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hk</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //=; <span class="id" title="tactic">intro</span>; <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="insert_weaken" class="idref" href="#insert_weaken"><span class="id" title="lemma">insert_weaken</span></a><br/>
&nbsp;&nbsp;{<a id="K:550" class="idref" href="#K:550"><span class="id" title="binder">K</span></a> : <span class="id" title="keyword">Type</span>} {<a id="EqDecision0:551" class="idref" href="#EqDecision0:551"><span class="id" title="binder">EqDecision0</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:550"><span class="id" title="variable">K</span></a>} {<a id="H:552" class="idref" href="#H:552"><span class="id" title="binder">H</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:550"><span class="id" title="variable">K</span></a>} {<a id="A:553" class="idref" href="#A:553"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="m:554" class="idref" href="#m:554"><span class="id" title="binder">m</span></a> <a id="m':555" class="idref" href="#m':555"><span class="id" title="binder">m'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:550"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:553"><span class="id" title="variable">A</span></a>) (<a id="k:556" class="idref" href="#k:556"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:550"><span class="id" title="variable">K</span></a>) (<a id="v:557" class="idref" href="#v:557"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:553"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.stdpp_extra.html#k:556"><span class="id" title="variable">k</span></a><span class="id" title="notation">:=</span><a class="idref" href="cap_machine.stdpp_extra.html#v:557"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m'</span> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:554"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:554"><span class="id" title="variable">m</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:556"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:557"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_subseteq_trans" class="idref" href="#map_subseteq_trans"><span class="id" title="lemma">map_subseteq_trans</span></a><br/>
&nbsp;&nbsp;{<a id="K:558" class="idref" href="#K:558"><span class="id" title="binder">K</span></a> <a id="A:559" class="idref" href="#A:559"><span class="id" title="binder">A</span></a>} `{<a id="H:561" class="idref" href="#H:561"><span class="id" title="binder">Countable</span></a> <a id="H:561" class="idref" href="#H:561"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:562" class="idref" href="#EqDecision1:562"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:562" class="idref" href="#EqDecision1:562"><span class="id" title="binder">K</span></a>, <a id="H0:564" class="idref" href="#H0:564"><span class="id" title="binder">Countable</span></a> <a id="H0:564" class="idref" href="#H0:564"><span class="id" title="binder">A</span></a>, <a id="EqDecision3:565" class="idref" href="#EqDecision3:565"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:565" class="idref" href="#EqDecision3:565"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:566" class="idref" href="#m1:566"><span class="id" title="binder">m1</span></a> <a id="m2:567" class="idref" href="#m2:567"><span class="id" title="binder">m2</span></a> <a id="m3:568" class="idref" href="#m3:568"><span class="id" title="binder">m3</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:558"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:559"><span class="id" title="variable">A</span></a>): <a class="idref" href="cap_machine.stdpp_extra.html#m1:566"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:567"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:567"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m3:568"><span class="id" title="variable">m3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:566"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m3:568"><span class="id" title="variable">m3</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H12</span> <span class="id" title="var">H23</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_subseteq_spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H12</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_subseteq_r" class="idref" href="#delete_subseteq_r"><span class="id" title="lemma">delete_subseteq_r</span></a><br/>
&nbsp;&nbsp;{<a id="K:569" class="idref" href="#K:569"><span class="id" title="binder">K</span></a> <a id="A:570" class="idref" href="#A:570"><span class="id" title="binder">A</span></a>} `{<a id="H:572" class="idref" href="#H:572"><span class="id" title="binder">Countable</span></a> <a id="H:572" class="idref" href="#H:572"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:573" class="idref" href="#EqDecision1:573"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:573" class="idref" href="#EqDecision1:573"><span class="id" title="binder">K</span></a>, <a id="H0:575" class="idref" href="#H0:575"><span class="id" title="binder">Countable</span></a> <a id="H0:575" class="idref" href="#H0:575"><span class="id" title="binder">A</span></a>, <a id="EqDecision3:576" class="idref" href="#EqDecision3:576"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:576" class="idref" href="#EqDecision3:576"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:577" class="idref" href="#m1:577"><span class="id" title="binder">m1</span></a> <a id="m2:578" class="idref" href="#m2:578"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:569"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:570"><span class="id" title="variable">A</span></a>) (<a id="k:579" class="idref" href="#k:579"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:569"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:577"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:579"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:577"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:578"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:577"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:579"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:578"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hk'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k'</span>)) ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk'</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_subseteq_list_r" class="idref" href="#delete_subseteq_list_r"><span class="id" title="lemma">delete_subseteq_list_r</span></a><br/>
&nbsp;&nbsp;{<a id="K:580" class="idref" href="#K:580"><span class="id" title="binder">K</span></a> <a id="A:581" class="idref" href="#A:581"><span class="id" title="binder">A</span></a>} `{<a id="H:583" class="idref" href="#H:583"><span class="id" title="binder">Countable</span></a> <a id="H:583" class="idref" href="#H:583"><span class="id" title="binder">K</span></a>, <a id="EqDecision1:584" class="idref" href="#EqDecision1:584"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:584" class="idref" href="#EqDecision1:584"><span class="id" title="binder">K</span></a>, <a id="H0:586" class="idref" href="#H0:586"><span class="id" title="binder">Countable</span></a> <a id="H0:586" class="idref" href="#H0:586"><span class="id" title="binder">A</span></a>, <a id="EqDecision3:587" class="idref" href="#EqDecision3:587"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision3:587" class="idref" href="#EqDecision3:587"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:588" class="idref" href="#m1:588"><span class="id" title="binder">m1</span></a> <a id="m2:589" class="idref" href="#m2:589"><span class="id" title="binder">m2</span></a> <a id="m3:590" class="idref" href="#m3:590"><span class="id" title="binder">m3</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:580"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:581"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m1:588"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">##ₘ</span> <a class="idref" href="cap_machine.stdpp_extra.html#m3:590"><span class="id" title="variable">m3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:588"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:589"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:588"><span class="id" title="variable">m1</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#m2:589"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="cap_machine.stdpp_extra.html#m3:590"><span class="id" title="variable">m3</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m3</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m3</span> <span class="id" title="var">Hm3_k</span> <span class="id" title="var">IHm3</span>] <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">Hdisjoint</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hk'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_difference_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_subseteq_spec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hm1_k'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hm2_k'</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> ; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_disjoint_insert_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdisjoint</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdisjoint</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hm1_k</span> <span class="id" title="var">Hdisjoint</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="cap_machine.stdpp_extra.html#delete_subseteq_r"><span class="id" title="axiom">delete_subseteq_r</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">k</span> <span class="id" title="var">Hm1_k</span> <span class="id" title="var">Hincl</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHm3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdel</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">k'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq_k</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hm1_k'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hk'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_difference</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">map_disjoint_Some_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm1_k'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm1_k'</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delete_difference_assoc" class="idref" href="#delete_difference_assoc"><span class="id" title="lemma">delete_difference_assoc</span></a><br/>
&nbsp;&nbsp;{<a id="K:591" class="idref" href="#K:591"><span class="id" title="binder">K</span></a> : <span class="id" title="keyword">Type</span>} {<a id="EqDecision0:592" class="idref" href="#EqDecision0:592"><span class="id" title="binder">EqDecision0</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:591"><span class="id" title="variable">K</span></a>} {<a id="H:593" class="idref" href="#H:593"><span class="id" title="binder">H</span></a> : <span class="id" title="class">Countable</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:591"><span class="id" title="variable">K</span></a>} {<a id="A:594" class="idref" href="#A:594"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="m:595" class="idref" href="#m:595"><span class="id" title="binder">m</span></a> <a id="m':596" class="idref" href="#m':596"><span class="id" title="binder">m'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:591"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:594"><span class="id" title="variable">A</span></a>) (<a id="k':597" class="idref" href="#k':597"><span class="id" title="binder">k'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:591"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k':597"><span class="id" title="variable">k'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:595"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="cap_machine.stdpp_extra.html#m':596"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#k':597"><span class="id" title="variable">k'</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#m:595"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="cap_machine.stdpp_extra.html#m':596"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m'</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hm'_k</span> <span class="id" title="var">IHm'</span> ] <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">map_difference_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -!<span class="id" title="lemma">delete_difference</span> <span class="id" title="var">IHm'</span> <span class="id" title="lemma">delete_commute</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_list_submsteq" class="idref" href="#list_remove_list_submsteq"><span class="id" title="lemma">list_remove_list_submsteq</span></a><br/>
&nbsp;&nbsp;`{<a id="A:598" class="idref" href="#A:598"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:599" class="idref" href="#EqDecision0:599"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:599" class="idref" href="#EqDecision0:599"><span class="id" title="binder">A</span></a>} (<a id="a:600" class="idref" href="#a:600"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:598"><span class="id" title="variable">A</span></a>) (<a id="la:601" class="idref" href="#la:601"><span class="id" title="binder">la</span></a> <a id="la':602" class="idref" href="#la':602"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:598"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:600"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:601"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':602"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#la':602"><span class="id" title="variable">la'</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:601"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la'</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hla'</span> ; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">submseteq_nil_l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a</span> <span class="id" title="var">la</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hremove</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hla'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">list_remove_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hremove</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">submseteq_cons_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> (<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">la'</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#perm_swap"><span class="id" title="constructor">perm_swap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">submseteq_cons</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;Unelegant&nbsp;way&nbsp;to&nbsp;create&nbsp;an&nbsp;extensible&nbsp;tactic,<br/>
&nbsp;&nbsp;&nbsp;cf.&nbsp;https://stackoverflow.com/questions/48868186/extensible-tactic-in-coq&nbsp;*)</span><br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook0</span> := <span class="id" title="tactic">fail</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook</span> := <span class="id" title="var">destruct_cons_hook0</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons</span>:= <span class="id" title="tactic">repeat</span> <span class="id" title="var">destruct_cons_hook</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_nodup</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">HNoDup</span> : <span class="id" title="inductive">NoDup</span> (?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">la</span>) |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Ha_notin_la</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="var">a</span> "_notin_" <span class="id" title="var">la</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HNoDup_la</span> := <span class="id" title="tactic">fresh</span> "HNoDup_" <span class="id" title="var">la</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_notin_la</span> <span class="id" title="var">HNoDup_la</span>]<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_notin</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">HnotIn</span> : ?<span class="id" title="var">a'</span> <span class="id" title="notation">∉</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">la</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="var">a'</span> "_neq_" <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HnotIn'</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="var">a'</span> "_notin_" <span class="id" title="var">la</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HnotIn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HnotIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">HnotIn'</span>]<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_forall</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Hforall</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> ?<span class="id" title="var">f</span> (?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">la</span>)  |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Ha</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">Hforall</span> "_" <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hforall</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> <span class="id" title="var">Hforall</span>]<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_in</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">HIn</span> : ?<span class="id" title="var">a'</span> <span class="id" title="notation">∈</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">la</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook1</span> := <span class="id" title="var">destruct_cons_forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">destruct_cons_notin</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">destruct_cons_in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">destruct_cons_nodup</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">destruct_cons_hook0</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_cons_hook</span> ::= <span class="id" title="var">destruct_cons_hook1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_In" class="idref" href="#list_remove_In"><span class="id" title="lemma">list_remove_In</span></a><br/>
&nbsp;&nbsp;{<a id="A:603" class="idref" href="#A:603"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:604" class="idref" href="#EqDecision0:604"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:604" class="idref" href="#EqDecision0:604"><span class="id" title="binder">A</span></a>} (<a id="a':605" class="idref" href="#a':605"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:603"><span class="id" title="variable">A</span></a>) (<a id="la:606" class="idref" href="#la:606"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:603"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':605"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:606"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">is_Some</span> (<span class="id" title="definition">list_remove</span> <a class="idref" href="cap_machine.stdpp_extra.html#a':605"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:606"><span class="id" title="variable">la</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hin</span>] ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span><br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> |] ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">fmap_is_Some</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_None_inv" class="idref" href="#list_remove_None_inv"><span class="id" title="lemma">list_remove_None_inv</span></a><br/>
&nbsp;&nbsp;{<a id="A:607" class="idref" href="#A:607"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="EqDecision0:608" class="idref" href="#EqDecision0:608"><span class="id" title="binder">EqDecision0</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:607"><span class="id" title="variable">A</span></a>} (<a id="a:609" class="idref" href="#a:609"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:607"><span class="id" title="variable">A</span></a>) (<a id="la:610" class="idref" href="#la:610"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:607"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:609"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:610"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:609"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:610"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la'</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) <span class="id" title="keyword">as</span> [?|<span class="id" title="var">Hneq</span>] ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">fmap_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_preserves_notin" class="idref" href="#list_remove_preserves_notin"><span class="id" title="lemma">list_remove_preserves_notin</span></a><br/>
&nbsp;&nbsp;{<a id="A:611" class="idref" href="#A:611"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:612" class="idref" href="#EqDecision0:612"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:612" class="idref" href="#EqDecision0:612"><span class="id" title="binder">A</span></a>} (<a id="a':613" class="idref" href="#a':613"><span class="id" title="binder">a'</span></a> <a id="a'':614" class="idref" href="#a'':614"><span class="id" title="binder">a''</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:611"><span class="id" title="variable">A</span></a>) (<a id="la:615" class="idref" href="#la:615"><span class="id" title="binder">la</span></a> <a id="la':616" class="idref" href="#la':616"><span class="id" title="binder">la'</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:611"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':613"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:615"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove</span> <a class="idref" href="cap_machine.stdpp_extra.html#a'':614"><span class="id" title="variable">a''</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:615"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':616"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':613"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la':616"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a'</span> <span class="id" title="var">a''</span> <span class="id" title="var">la'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hnotin</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a''</span> <span class="id" title="var">la</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_elem_of_cons</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_NoDup" class="idref" href="#list_remove_NoDup"><span class="id" title="lemma">list_remove_NoDup</span></a><br/>
&nbsp;&nbsp;`{<a id="A:617" class="idref" href="#A:617"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:618" class="idref" href="#EqDecision0:618"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:618" class="idref" href="#EqDecision0:618"><span class="id" title="binder">A</span></a>} (<a id="a:619" class="idref" href="#a:619"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:617"><span class="id" title="variable">A</span></a>) (<a id="la:620" class="idref" href="#la:620"><span class="id" title="binder">la</span></a> <a id="la':621" class="idref" href="#la':621"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:617"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:620"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove</span> <a class="idref" href="cap_machine.stdpp_extra.html#a:619"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:620"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':621"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la':621"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a</span> <span class="id" title="var">la'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hremove</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [|?] ; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a0</span> <span class="id" title="var">la</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> ; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_preserves_notin"><span class="id" title="axiom">list_remove_preserves_notin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_list_NoDup" class="idref" href="#list_remove_list_NoDup"><span class="id" title="lemma">list_remove_list_NoDup</span></a><br/>
&nbsp;&nbsp;`{<a id="A:622" class="idref" href="#A:622"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:623" class="idref" href="#EqDecision0:623"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:623" class="idref" href="#EqDecision0:623"><span class="id" title="binder">A</span></a>} (<a id="la1:624" class="idref" href="#la1:624"><span class="id" title="binder">la1</span></a> <a id="la2:625" class="idref" href="#la2:625"><span class="id" title="binder">la2</span></a> <a id="la':626" class="idref" href="#la':626"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:622"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la2:625"><span class="id" title="variable">la2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove_list</span> <a class="idref" href="cap_machine.stdpp_extra.html#la1:624"><span class="id" title="variable">la1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la2:625"><span class="id" title="variable">la2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':626"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la':626"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">la2</span> <span class="id" title="var">la'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la1</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a</span> <span class="id" title="var">la2</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hremove'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_NoDup"><span class="id" title="axiom">list_remove_NoDup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla1</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_elemof_list_remove" class="idref" href="#not_elemof_list_remove"><span class="id" title="lemma">not_elemof_list_remove</span></a><br/>
&nbsp;&nbsp;`{<a id="A:627" class="idref" href="#A:627"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:628" class="idref" href="#EqDecision0:628"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:628" class="idref" href="#EqDecision0:628"><span class="id" title="binder">A</span></a>} (<a id="a':629" class="idref" href="#a':629"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:627"><span class="id" title="variable">A</span></a>) (<a id="la:630" class="idref" href="#la:630"><span class="id" title="binder">la</span></a> <a id="la':631" class="idref" href="#la':631"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:627"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:630"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove</span> <a class="idref" href="cap_machine.stdpp_extra.html#a':629"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:630"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':631"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':629"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la':631"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">la'</span> <span class="id" title="var">a'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hremove</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a'</span> <span class="id" title="var">la</span>) <span class="id" title="var">eqn</span>:? ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_elemof_list_remove_list" class="idref" href="#not_elemof_list_remove_list"><span class="id" title="lemma">not_elemof_list_remove_list</span></a><br/>
&nbsp;&nbsp;`{<a id="A:632" class="idref" href="#A:632"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:633" class="idref" href="#EqDecision0:633"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:633" class="idref" href="#EqDecision0:633"><span class="id" title="binder">A</span></a>} (<a id="a:634" class="idref" href="#a:634"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:632"><span class="id" title="variable">A</span></a>) (<a id="la:635" class="idref" href="#la:635"><span class="id" title="binder">la</span></a> <a id="la':636" class="idref" href="#la':636"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:632"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:634"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:635"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:635"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:634"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:635"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':636"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:634"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la':636"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">la'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a'</span> <span class="id" title="var">la'</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">bind_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hremove</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a0</span> &amp; <span class="id" title="var">Hremove</span> &amp; ?); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hin</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">set_solver</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove</span> <span class="id" title="var">a</span> <span class="id" title="var">la'</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_cons</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_list_region" class="idref" href="#list_remove_list_region"><span class="id" title="lemma">list_remove_list_region</span></a><br/>
&nbsp;&nbsp;`{<a id="A:637" class="idref" href="#A:637"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:638" class="idref" href="#EqDecision0:638"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:638" class="idref" href="#EqDecision0:638"><span class="id" title="binder">A</span></a>} (<a id="a':639" class="idref" href="#a':639"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:637"><span class="id" title="variable">A</span></a>) (<a id="la:640" class="idref" href="#la:640"><span class="id" title="binder">la</span></a> <a id="la':641" class="idref" href="#la':641"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:637"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':639"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:640"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:640"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a':639"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:640"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':641"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#la:640"><span class="id" title="variable">la</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.stdpp_extra.html#a':639"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':641"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a'</span> <span class="id" title="var">la'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>] ; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> <span class="id" title="var">HoDup</span> <span class="id" title="var">Hremove</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hin</span>] ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; [ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hremove</span> ; <span class="id" title="tactic">first</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">set_solver</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> ; <span class="id" title="var">set_solver</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="definition">list_remove</span> <span class="id" title="var">a'</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [?|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hremove'</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">la</span> <span class="id" title="notation">⊆+</span> <span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hremove'</span> //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">submseteq_trans</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l2</span> := (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">l</span>)) ; <span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="list_remove_elem" class="idref" href="#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> `{<a id="A:642" class="idref" href="#A:642"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:643" class="idref" href="#EqDecision0:643"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:643" class="idref" href="#EqDecision0:643"><span class="id" title="binder">A</span></a>} (<a id="a:644" class="idref" href="#a:644"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:642"><span class="id" title="variable">A</span></a>) (<a id="la:645" class="idref" href="#la:645"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:642"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:642"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a:644"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:645"><span class="id" title="variable">la</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">la'</span> =&gt; <span class="id" title="var">la'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="cap_machine.stdpp_extra.html#la:645"><span class="id" title="variable">la</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_list_in" class="idref" href="#list_remove_list_in"><span class="id" title="lemma">list_remove_list_in</span></a><br/>
&nbsp;&nbsp;`{<a id="A:646" class="idref" href="#A:646"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:647" class="idref" href="#EqDecision0:647"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:647" class="idref" href="#EqDecision0:647"><span class="id" title="binder">A</span></a>} (<a id="a':648" class="idref" href="#a':648"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:646"><span class="id" title="variable">A</span></a>) (<a id="la:649" class="idref" href="#la:649"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:646"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':648"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:649"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="la':650" class="idref" href="#la':650"><span class="id" title="binder">la'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:646"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a':648"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:649"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':650"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [?|<span class="id" title="var">Hin</span>]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">la</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">la'</span> <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hneq</span>]; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> | <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">la'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bind_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">la''</span> &amp; <span class="id" title="var">Hin</span> &amp; ?) ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_in" class="idref" href="#list_remove_elem_in"><span class="id" title="lemma">list_remove_elem_in</span></a><br/>
&nbsp;&nbsp;`{<a id="A:651" class="idref" href="#A:651"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:652" class="idref" href="#EqDecision0:652"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:652" class="idref" href="#EqDecision0:652"><span class="id" title="binder">A</span></a>} (<a id="a':653" class="idref" href="#a':653"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:651"><span class="id" title="variable">A</span></a>) (<a id="la:654" class="idref" href="#la:654"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:651"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':653"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:654"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="la':655" class="idref" href="#la':655"><span class="id" title="binder">la'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a':653"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:654"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':655"><span class="id" title="variable">la'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a':653"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:654"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la':655"><span class="id" title="variable">la'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_list_in"><span class="id" title="axiom">list_remove_list_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">la'</span> <span class="id" title="var">Hrem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">la'</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <span class="id" title="var">Hrem</span> //=.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_list_notin" class="idref" href="#list_remove_list_notin"><span class="id" title="lemma">list_remove_list_notin</span></a><br/>
&nbsp;&nbsp;`{<a id="A:656" class="idref" href="#A:656"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:657" class="idref" href="#EqDecision0:657"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:657" class="idref" href="#EqDecision0:657"><span class="id" title="binder">A</span></a>} (<a id="a':658" class="idref" href="#a':658"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:656"><span class="id" title="variable">A</span></a>) (<a id="la:659" class="idref" href="#la:659"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:656"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':658"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:659"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="cap_machine.stdpp_extra.html#a':658"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:659"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHla</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bind_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha'_notin_la</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'_notin_la</span> <span class="id" title="keyword">as</span> [ -&gt; | [? [? <span class="id" title="var">Hcontra</span>] ] ]; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_notin" class="idref" href="#list_remove_elem_notin"><span class="id" title="lemma">list_remove_elem_notin</span></a><br/>
&nbsp;&nbsp;`{<a id="A:660" class="idref" href="#A:660"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:661" class="idref" href="#EqDecision0:661"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:661" class="idref" href="#EqDecision0:661"><span class="id" title="binder">A</span></a>} (<a id="a':662" class="idref" href="#a':662"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:660"><span class="id" title="variable">A</span></a>) (<a id="la:663" class="idref" href="#la:663"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:660"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':662"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a':662"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:663"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:663"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">a'</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">la</span> <span class="id" title="var">IHla</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_list_notin"><span class="id" title="axiom">list_remove_list_notin</span></a> //=.<br/>
&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_elemof_list_remove_elem" class="idref" href="#not_elemof_list_remove_elem"><span class="id" title="lemma">not_elemof_list_remove_elem</span></a><br/>
&nbsp;&nbsp;`{<a id="A:664" class="idref" href="#A:664"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:665" class="idref" href="#EqDecision0:665"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:665" class="idref" href="#EqDecision0:665"><span class="id" title="binder">A</span></a>} (<a id="a:666" class="idref" href="#a:666"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:664"><span class="id" title="variable">A</span></a>) (<a id="la:667" class="idref" href="#la:667"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:664"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:667"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:666"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:666"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:667"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">la</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hla</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bind_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">la'</span> &amp; <span class="id" title="var">Hin</span> &amp; ?) ; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#not_elemof_list_remove"><span class="id" title="axiom">not_elemof_list_remove</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">bind_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hla</span> | (<span class="id" title="var">la'</span> &amp; <span class="id" title="var">Hla'</span> &amp; ?)] ; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_None_inv"><span class="id" title="axiom">list_remove_None_inv</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_NoDup" class="idref" href="#list_remove_elem_NoDup"><span class="id" title="lemma">list_remove_elem_NoDup</span></a><br/>
&nbsp;&nbsp;`{<a id="A:668" class="idref" href="#A:668"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:669" class="idref" href="#EqDecision0:669"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:669" class="idref" href="#EqDecision0:669"><span class="id" title="binder">A</span></a>} (<a id="a:670" class="idref" href="#a:670"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:668"><span class="id" title="variable">A</span></a>) (<a id="la:671" class="idref" href="#la:671"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:668"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:671"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">NoDup</span> (<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:670"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:671"><span class="id" title="variable">la</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HNoDup</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">list_remove_list</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">la</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hremove</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_list_NoDup"><span class="id" title="axiom">list_remove_list_NoDup</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_submsteq" class="idref" href="#list_remove_elem_submsteq"><span class="id" title="lemma">list_remove_elem_submsteq</span></a><br/>
&nbsp;&nbsp;`{<a id="A:672" class="idref" href="#A:672"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:673" class="idref" href="#EqDecision0:673"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:673" class="idref" href="#EqDecision0:673"><span class="id" title="binder">A</span></a>} (<a id="a:674" class="idref" href="#a:674"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:672"><span class="id" title="variable">A</span></a>) (<a id="la:675" class="idref" href="#la:675"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:672"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:674"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:675"><span class="id" title="variable">la</span></a> <span class="id" title="notation">⊆+</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:675"><span class="id" title="variable">la</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">la</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span> | <span class="id" title="var">Hnotin</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_in"><span class="id" title="axiom">list_remove_elem_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">la'</span> &amp; &lt;- &amp; <span class="id" title="var">Hla'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_list_submsteq"><span class="id" title="axiom">list_remove_list_submsteq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hla'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_notin"><span class="id" title="axiom">list_remove_elem_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnotin</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnotin</span> ; <span class="id" title="var">done</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prod_merge_delete_l" class="idref" href="#prod_merge_delete_l"><span class="id" title="lemma">prod_merge_delete_l</span></a> {<a id="K:676" class="idref" href="#K:676"><span class="id" title="binder">K</span></a> <a id="A:677" class="idref" href="#A:677"><span class="id" title="binder">A</span></a> <a id="B:678" class="idref" href="#B:678"><span class="id" title="binder">B</span></a>} `{<a id="H:680" class="idref" href="#H:680"><span class="id" title="binder">Countable</span></a> <a id="H:680" class="idref" href="#H:680"><span class="id" title="binder">K</span></a>}<br/>
&nbsp;&nbsp;(<a id="m1:681" class="idref" href="#m1:681"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:676"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:677"><span class="id" title="variable">A</span></a>) (<a id="m2:682" class="idref" href="#m2:682"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:676"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:678"><span class="id" title="variable">B</span></a>) (<a id="i:683" class="idref" href="#i:683"><span class="id" title="binder">i</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:676"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> (<span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:683"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:681"><span class="id" title="variable">m1</span></a>) <a class="idref" href="cap_machine.stdpp_extra.html#m2:682"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.stdpp_extra.html#i:683"><span class="id" title="variable">i</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:681"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:682"><span class="id" title="variable">m2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hm1_k</span> <span class="id" title="var">IHm1</span>] <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_empty</span> !<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_empty_l"><span class="id" title="axiom">prod_merge_empty_l</span></a> .<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="method">map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="method">lookup_merge</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span>) ; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_merge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">simplify_map_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v2</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hk_m2</span>; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_cons" class="idref" href="#list_remove_elem_cons"><span class="id" title="lemma">list_remove_elem_cons</span></a><br/>
&nbsp;&nbsp;`{<a id="A:684" class="idref" href="#A:684"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:685" class="idref" href="#EqDecision0:685"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:685" class="idref" href="#EqDecision0:685"><span class="id" title="binder">A</span></a>} (<a id="a:686" class="idref" href="#a:686"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:684"><span class="id" title="variable">A</span></a>) (<a id="la:687" class="idref" href="#la:687"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:684"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:686"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:687"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:686"><span class="id" title="variable">a</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#a:686"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="cap_machine.stdpp_extra.html#la:687"><span class="id" title="variable">la</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:686"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:687"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_notin"><span class="id" title="axiom">list_remove_elem_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_in"><span class="id" title="axiom">list_remove_elem_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">la'</span> &amp; <span class="id" title="var">Hla'</span> &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnotin</span> <span class="id" title="var">Hla'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> ; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_idem" class="idref" href="#list_remove_elem_idem"><span class="id" title="lemma">list_remove_elem_idem</span></a><br/>
&nbsp;&nbsp;`{<a id="A:688" class="idref" href="#A:688"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:689" class="idref" href="#EqDecision0:689"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:689" class="idref" href="#EqDecision0:689"><span class="id" title="binder">A</span></a>} (<a id="a:690" class="idref" href="#a:690"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:688"><span class="id" title="variable">A</span></a>) (<a id="la:691" class="idref" href="#la:691"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:688"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:691"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:690"><span class="id" title="variable">a</span></a> (<a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:690"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:691"><span class="id" title="variable">la</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a:690"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:691"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_notin"><span class="id" title="axiom">list_remove_elem_notin</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#not_elemof_list_remove_elem"><span class="id" title="axiom">not_elemof_list_remove_elem</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_remove_elem_neq" class="idref" href="#list_remove_elem_neq"><span class="id" title="lemma">list_remove_elem_neq</span></a><br/>
&nbsp;&nbsp;`{<a id="A:692" class="idref" href="#A:692"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:693" class="idref" href="#EqDecision0:693"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:693" class="idref" href="#EqDecision0:693"><span class="id" title="binder">A</span></a>} (<a id="a:694" class="idref" href="#a:694"><span class="id" title="binder">a</span></a> <a id="a':695" class="idref" href="#a':695"><span class="id" title="binder">a'</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:692"><span class="id" title="variable">A</span></a>) (<a id="la:696" class="idref" href="#la:696"><span class="id" title="binder">la</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:692"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:696"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a':695"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#la:696"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:694"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem"><span class="id" title="definition">list_remove_elem</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a':695"><span class="id" title="variable">a'</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#la:696"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#a:694"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#a':695"><span class="id" title="variable">a'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HnoDup</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hrem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hin'</span> := <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#list_remove_elem_in"><span class="id" title="axiom">list_remove_elem_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">la'</span> &amp; <span class="id" title="var">Hla'</span> &amp; <span class="id" title="var">Hrem'</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#not_elemof_list_remove_list"><span class="id" title="axiom">not_elemof_list_remove_list</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrem'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prod_merge_none_l" class="idref" href="#prod_merge_none_l"><span class="id" title="lemma">prod_merge_none_l</span></a><br/>
&nbsp;&nbsp;{<a id="K:697" class="idref" href="#K:697"><span class="id" title="binder">K</span></a> <a id="A:698" class="idref" href="#A:698"><span class="id" title="binder">A</span></a> <a id="B:699" class="idref" href="#B:699"><span class="id" title="binder">B</span></a>} `{<a id="H:701" class="idref" href="#H:701"><span class="id" title="binder">Countable</span></a> <a id="H:701" class="idref" href="#H:701"><span class="id" title="binder">K</span></a>} (<a id="m1:702" class="idref" href="#m1:702"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:697"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:698"><span class="id" title="variable">A</span></a>) (<a id="m2:703" class="idref" href="#m2:703"><span class="id" title="binder">m2</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:697"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:699"><span class="id" title="variable">B</span></a>) (<a id="k:704" class="idref" href="#k:704"><span class="id" title="binder">k</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#K:697"><span class="id" title="variable">K</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m2:703"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:704"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:702"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:703"><span class="id" title="variable">m2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.stdpp_extra.html#k:704"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hm2_k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <span class="id" title="method">lookup_merge</span> <span class="id" title="var">Hm2_k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">k</span>) ; <span class="id" title="var">simplify_map_eq</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="snd_prod_merge_subseteq" class="idref" href="#snd_prod_merge_subseteq"><span class="id" title="lemma">snd_prod_merge_subseteq</span></a><br/>
&nbsp;&nbsp;{<a id="K:705" class="idref" href="#K:705"><span class="id" title="binder">K</span></a> <a id="A:706" class="idref" href="#A:706"><span class="id" title="binder">A</span></a> <a id="B:707" class="idref" href="#B:707"><span class="id" title="binder">B</span></a>} `{<a id="H:709" class="idref" href="#H:709"><span class="id" title="binder">Countable</span></a> <a id="H:709" class="idref" href="#H:709"><span class="id" title="binder">K</span></a>} (<a id="m1:710" class="idref" href="#m1:710"><span class="id" title="binder">m1</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:705"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:706"><span class="id" title="variable">A</span></a>) (<a id="m2:711" class="idref" href="#m2:711"><span class="id" title="binder">m2</span></a> <a id="m2':712" class="idref" href="#m2':712"><span class="id" title="binder">m2'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:705"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#B:707"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m1:710"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">dom</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2:711"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge"><span class="id" title="definition">prod_merge</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m1:710"><span class="id" title="variable">m1</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m2:711"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2':712"><span class="id" title="variable">m2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#m2:711"><span class="id" title="variable">m2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="cap_machine.stdpp_extra.html#m2':712"><span class="id" title="variable">m2'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">m1</span> <span class="id" title="var">m2'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m2</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">m2</span> <span class="id" title="var">m2'</span> <span class="id" title="var">Hdom</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_empty_r"><span class="id" title="axiom">prod_merge_empty_r</span></a> <span class="id" title="lemma">fmap_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="definition">is_Some</span> (<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hm2_i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdom</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm2_i</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">x0</span> &amp; <span class="id" title="var">Hm2_i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">insert_id</span> <span class="id" title="var">m2</span> <span class="id" title="var">i</span> <span class="id" title="var">x0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_insert"><span class="id" title="axiom">prod_merge_insert</span></a> <span class="id" title="lemma">fmap_insert</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m2'</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> ( <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">simplify_map_eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">insert_id</span> <span class="id" title="var">m2'</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>) //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_delete_subseteq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">eapply</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_none_l"><span class="id" title="axiom">prod_merge_none_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_fmap</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">A</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">insert_id</span> <span class="id" title="var">m2'</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>) //= <span class="id" title="lemma">delete_insert_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_mono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="var">IHm2</span> (<span class="id" title="definition">delete</span> <span class="id" title="var">i</span> <span class="id" title="var">m2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_delete_L</span> <span class="id" title="var">Hdom</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">difference_union_distr_l_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="definition">dom</span> <span class="id" title="var">m</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><span class="id" title="var">i</span><span class="id" title="notation">]}</span>) <span class="id" title="keyword">with</span> (<span class="id" title="definition">dom</span> <span class="id" title="var">m</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">dom_delete_L</span> <span class="id" title="lemma">delete_notin</span> //=).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#prod_merge_delete_l"><span class="id" title="axiom">prod_merge_delete_l</span></a> <span class="id" title="lemma">fmap_delete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_subseteq_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">w</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k</span>)) ; <span class="id" title="var">simplify_map_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_fmap</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_or" class="idref" href="#not_or"><span class="id" title="lemma">not_or</span></a> {<a id="P:713" class="idref" href="#P:713"><span class="id" title="binder">P</span></a> <a id="Q:714" class="idref" href="#Q:714"><span class="id" title="binder">Q</span></a> : <span class="id" title="keyword">Prop</span>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#P:713"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#Q:714"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a><a class="idref" href="cap_machine.stdpp_extra.html#P:713"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a><a class="idref" href="cap_machine.stdpp_extra.html#Q:714"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">tauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="snd_fmap_pair_inv" class="idref" href="#snd_fmap_pair_inv"><span class="id" title="lemma">snd_fmap_pair_inv</span></a> {<a id="K:715" class="idref" href="#K:715"><span class="id" title="binder">K</span></a> <a id="V1:716" class="idref" href="#V1:716"><span class="id" title="binder">V1</span></a> <a id="V2:717" class="idref" href="#V2:717"><span class="id" title="binder">V2</span></a>} `{<a id="H:719" class="idref" href="#H:719"><span class="id" title="binder">Countable</span></a> <a id="H:719" class="idref" href="#H:719"><span class="id" title="binder">K</span></a>} (<a id="m:720" class="idref" href="#m:720"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.stdpp_extra.html#K:715"><span class="id" title="variable">K</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#V1:716"><span class="id" title="variable">V1</span></a>) (<a id="v2:721" class="idref" href="#v2:721"><span class="id" title="binder">v2</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V2:717"><span class="id" title="variable">V2</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="notation">((</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:722" class="idref" href="#v:722"><span class="id" title="binder">v</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#V1:716"><span class="id" title="variable">V1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#v2:721"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#v:722"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="cap_machine.stdpp_extra.html#m:720"><span class="id" title="variable">m</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#m:720"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">fmap_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">fmap_insert</span> /= <span class="id" title="var">IHm</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="elem_of_dec" class="idref" href="#elem_of_dec"><span class="id" title="instance">elem_of_dec</span></a> `{<a id="EqDecision0:724" class="idref" href="#EqDecision0:724"><span class="id" title="binder">EqDecision</span></a> <a id="A:723" class="idref" href="#A:723"><span class="id" title="binder"><span id="EqDecision0:724" class="id">A</span></span></a>} (<a id="a:725" class="idref" href="#a:725"><span class="id" title="binder">a</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:723"><span class="id" title="variable">A</span></a>) (<a id="l:726" class="idref" href="#l:726"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:723"><span class="id" title="variable">A</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.stdpp_extra.html#a:725"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:726"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a0</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="disjoint_dec" class="idref" href="#disjoint_dec"><span class="id" title="instance">disjoint_dec</span></a> `{<a id="EqDecision0:728" class="idref" href="#EqDecision0:728"><span class="id" title="binder">EqDecision</span></a> <a id="A:727" class="idref" href="#A:727"><span class="id" title="binder"><span id="EqDecision0:728" class="id">A</span></span></a>} (<a id="l1:729" class="idref" href="#l1:729"><span class="id" title="binder">l1</span></a> <a id="l2:730" class="idref" href="#l2:730"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:727"><span class="id" title="variable">A</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="cap_machine.stdpp_extra.html#l1:729"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">##</span> <a class="idref" href="cap_machine.stdpp_extra.html#l2:730"><span class="id" title="variable">l2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">l2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_filter" class="idref" href="#list_to_set_filter"><span class="id" title="lemma">list_to_set_filter</span></a><br/>
&nbsp;&nbsp;{<a id="A:731" class="idref" href="#A:731"><span class="id" title="binder">A</span></a>} `{<a id="H:733" class="idref" href="#H:733"><span class="id" title="binder">Countable</span></a> <a id="H:733" class="idref" href="#H:733"><span class="id" title="binder">A</span></a>} (<a id="F:734" class="idref" href="#F:734"><span class="id" title="binder">F</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:731"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) `{<a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">∀</span></a> <a id="x:735" class="idref" href="#x:735"><span class="id" title="binder"><span id="H0:736" class="id">x</span></span></a> <a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">:</span></a> <a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">A</span></a><a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">,</span></a> <a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">Decision</span></a> <a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">(</span></a><a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">F</span></a> <a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">x</span></a><a id="H0:736" class="idref" href="#H0:736"><span class="id" title="binder">)</span></a>} (<a id="l:737" class="idref" href="#l:737"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#A:731"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set</span> (<span class="id" title="definition">filter</span> <a class="idref" href="cap_machine.stdpp_extra.html#F:734"><span class="id" title="variable">F</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#l:737"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="definition">gset</span> <a class="idref" href="cap_machine.stdpp_extra.html#A:731"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">filter</span> <a class="idref" href="cap_machine.stdpp_extra.html#F:734"><span class="id" title="variable">F</span></a> (<span class="id" title="definition">list_to_set</span> <a class="idref" href="cap_machine.stdpp_extra.html#l:737"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">filter_union_L</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">F</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">filter_singleton_L</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">filter_singleton_not_L</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;integrate&nbsp;into&nbsp;stdpp?&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="pair_eq_inv" class="idref" href="#pair_eq_inv"><span class="id" title="lemma">pair_eq_inv</span></a> {<a id="A:738" class="idref" href="#A:738"><span class="id" title="binder">A</span></a> <a id="B:739" class="idref" href="#B:739"><span class="id" title="binder">B</span></a>} {<a id="y:740" class="idref" href="#y:740"><span class="id" title="binder">y</span></a> <a id="u:741" class="idref" href="#u:741"><span class="id" title="binder">u</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#A:738"><span class="id" title="variable">A</span></a>} {<a id="z:742" class="idref" href="#z:742"><span class="id" title="binder">z</span></a> <a id="t:743" class="idref" href="#t:743"><span class="id" title="binder">t</span></a> : <a class="idref" href="cap_machine.stdpp_extra.html#B:739"><span class="id" title="variable">B</span></a>} {<a id="x:744" class="idref" href="#x:744"><span class="id" title="binder">x</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#x:744"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#y:740"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#z:742"><span class="id" title="variable">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#x:744"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="cap_machine.stdpp_extra.html#u:741"><span class="id" title="variable">u</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#t:743"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.stdpp_extra.html#y:740"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#u:741"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#z:742"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#t:743"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">inversion</span> 1. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;integrate&nbsp;into&nbsp;stdpp?&nbsp;*)</span><br/>
<span class="id" title="keyword">Tactic Notation</span> "simplify_pair_eq" :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H1</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">H2</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [? ?] <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.stdpp_extra.html#pair_eq_inv"><span class="id" title="lemma">pair_eq_inv</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>)); <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span>, <span class="id" title="var">H2</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [? ?] <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.stdpp_extra.html#pair_eq_inv"><span class="id" title="lemma">pair_eq_inv</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">H1</span>) <span class="id" title="var">H2</span>)); <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H1</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">H2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [? ?] <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.stdpp_extra.html#pair_eq_inv"><span class="id" title="lemma">pair_eq_inv</span></a> <span class="id" title="var">H1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">H2</span>))); <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span>, <span class="id" title="var">H2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [? ?] <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> (<a class="idref" href="cap_machine.stdpp_extra.html#pair_eq_inv"><span class="id" title="lemma">pair_eq_inv</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">H1</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">H2</span>))); <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">simplify_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*-----------------------&nbsp;FIXME&nbsp;TEMPORARY&nbsp;------------------------------------*)</span><br/>
<span class="comment">(*&nbsp;This&nbsp;is&nbsp;a&nbsp;copy-paste&nbsp;from&nbsp;stdpp&nbsp;(fin_maps.v),&nbsp;plus&nbsp;a&nbsp;fix&nbsp;to&nbsp;avoid&nbsp;using<br/>
&nbsp;&nbsp;&nbsp;"rewrite&nbsp;..&nbsp;by&nbsp;.."&nbsp;that&nbsp;is&nbsp;not&nbsp;available&nbsp;when&nbsp;using&nbsp;ssreflect's&nbsp;rewrite.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;TODO:&nbsp;upstream&nbsp;the&nbsp;fix&nbsp;into&nbsp;stdpp,&nbsp;and&nbsp;remove&nbsp;the&nbsp;code&nbsp;below&nbsp;whenever&nbsp;we<br/>
&nbsp;&nbsp;&nbsp;upgrade&nbsp;to&nbsp;a&nbsp;version&nbsp;of&nbsp;stdpp&nbsp;that&nbsp;includes&nbsp;it&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "simpl_map" "by" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) := <span class="id" title="tactic">repeat</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">∅</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="notation">&lt;[</span><span class="id" title="var">_</span><span class="id" title="notation">:=</span><span class="id" title="var">_</span><span class="id" title="notation">]&gt;</span><span class="id" title="notation">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">alter</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_alter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_alter_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">{[</span> <span class="id" title="var">_</span> <span class="id" title="notation">:=</span> <span class="id" title="var">_</span> <span class="id" title="notation">]}</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="var">_</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">omap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_omap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="definition">lookup</span> (<span class="id" title="var">A</span>:=?<span class="id" title="var">A</span>) ?<span class="id" title="var">i</span> (?<span class="id" title="var">m1</span> <span class="id" title="notation">∪</span> ?<span class="id" title="var">m2</span>) ] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">evar</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">unfold</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">E</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">(</span><span class="id" title="var">m1</span> <span class="id" title="notation">∪</span> <span class="id" title="var">m2</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">E</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">∅</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="notation">&lt;[</span><span class="id" title="var">_</span><span class="id" title="notation">:=</span><span class="id" title="var">_</span><span class="id" title="notation">]&gt;</span><span class="id" title="notation">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">alter</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_alter</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_alter_ne</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">{[</span> <span class="id" title="var">_</span> <span class="id" title="notation">:=</span> <span class="id" title="var">_</span> <span class="id" title="notation">]}</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton</span> || (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton_ne</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>])<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="var">_</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_fmap</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span>[ <span class="id" title="notation">(</span><span class="id" title="definition">omap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_omap</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="definition">lookup</span> (<span class="id" title="var">A</span>:=?<span class="id" title="var">A</span>) ?<span class="id" title="var">i</span> ?<span class="id" title="var">m</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">evar</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">unfold</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">E</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span> <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">E</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "simpl_map" := <span class="id" title="var">simpl_map</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_map</span> <span class="id" title="var">map_disjoint</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "simplify_map_eq" "by" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">decompose_map_disjoint</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">simpl_map</span> <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">simplify_eq</span>/=<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">simpl_option</span> <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="notation">{[</span> <span class="id" title="var">_</span> <span class="id" title="notation">:=</span> <span class="id" title="var">_</span> <span class="id" title="notation">]}</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton_None</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="notation">{[</span> <span class="id" title="var">_</span> <span class="id" title="notation">:=</span> <span class="id" title="var">_</span> <span class="id" title="notation">]}</span> <span class="id" title="notation">!!</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_singleton_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H1</span> : ?<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">x</span>, <span class="id" title="var">H2</span> : ?<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H3</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">opose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">lookup_weaken_inv</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H3</span>; [<span class="id" title="var">done</span>|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>|<span class="id" title="var">done</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H1</span> : ?<span class="id" title="var">m1</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">x</span>, <span class="id" title="var">H2</span> : ?<span class="id" title="var">m2</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H3</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">lookup_weaken</span> <span class="id" title="var">_</span> <span class="id" title="var">m2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; [<span class="id" title="tactic">congruence</span>|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>]<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">m</span> <span class="id" title="notation">∪</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">m</span> <span class="id" title="notation">∪</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_union_cancel_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>]<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <span class="id" title="notation">∪</span> ?<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> <span class="id" title="notation">∪</span> ?<span class="id" title="var">m</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_union_cancel_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; [|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>|<span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>]<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="notation">{[</span>?<span class="id" title="var">i</span> <span class="id" title="notation">:=</span> ?<span class="id" title="var">x</span><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">map_non_empty_singleton</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">{[</span>?<span class="id" title="var">i</span> <span class="id" title="notation">:=</span> ?<span class="id" title="var">x</span><span class="id" title="notation">]}</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">map_non_empty_singleton</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span> : ?<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> ?<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unless</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">j</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">j</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="var">simplify_eq</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "simplify_map_eq" "/=" "by" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">progress</span> <span class="id" title="var">csimpl</span> <span class="id" title="tactic">in</span> * || <span class="id" title="var">simplify_map_eq</span> <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "simplify_map_eq" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_map</span> <span class="id" title="var">map_disjoint</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "simplify_map_eq" "/=" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_map_eq</span>/= <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_map</span> <span class="id" title="var">map_disjoint</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
