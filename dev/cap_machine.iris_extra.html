<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">cap_machine.iris_extra</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">frac</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">invariants</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">cap_machine</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="cap_machine.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepM_to_big_sepL" class="idref" href="#big_sepM_to_big_sepL"><span class="id" title="lemma">big_sepM_to_big_sepL</span></a> {<a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:2" class="idref" href="#A:2"><span class="id" title="binder">A</span></a> <a id="B:3" class="idref" href="#B:3"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:4" class="idref" href="#EqDecision0:4"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:4" class="idref" href="#EqDecision0:4"><span class="id" title="binder">A</span></a>} `{<a id="H:6" class="idref" href="#H:6"><span class="id" title="binder">Countable</span></a> <a id="H:6" class="idref" href="#H:6"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:7" class="idref" href="#r:7"><span class="id" title="binder">r</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.iris_extra.html#A:2"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:3"><span class="id" title="variable">B</span></a>) (<a id="lr:8" class="idref" href="#lr:8"><span class="id" title="binder">lr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:2"><span class="id" title="variable">A</span></a>) (<a id="d0ef999d5cf1ae64cfccc412cd27a7cb" class="idref" href="#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:2"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:3"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.iris_extra.html#lr:8"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="r0:10" class="idref" href="#r0:10"><span class="id" title="binder">r0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.iris_extra.html#r0:10"><span class="id" title="variable">r0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#lr:8"><span class="id" title="variable">lr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="b:11" class="idref" href="#b:11"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.iris_extra.html#r:7"><span class="id" title="variable">r</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#r0:10"><span class="id" title="variable">r0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:11"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="k:12" class="idref" href="#k:12"><span class="id" title="binder"><span id="k:13" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y:14" class="idref" href="#y:14"><span class="id" title="binder"><span id="y:15" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#r:7"><span class="id" title="variable">r</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:12"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#y:14"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y:16" class="idref" href="#y:16"><span class="id" title="binder"><span id="y:17" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#lr:8"><span class="id" title="variable">lr</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="b:18" class="idref" href="#b:18"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y:16"><span class="id" title="variable">y</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:18"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">lr</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">r0</span> ] "IHl" <span class="id" title="keyword">forall</span> (<span class="id" title="var">r</span>); <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hdup</span> <span class="id" title="var">Hlookup</span>) "Hmap".<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="b:19" class="idref" href="#b:19"><span class="id" title="binder"><span id="b:20" class="id">b</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">r</span> <span class="id" title="notation">!!</span> <span class="id" title="var">r0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:19"><span class="id" title="variable">b</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hr0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlookup</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r0</span> <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hr0 Hmap]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hr0".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iExists</span> <span class="id" title="var">b</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IHl" <span class="id" title="notation">with</span> "[] [] [$Hmap]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons_1_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r1</span> <span class="id" title="var">Hr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">r0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnelem</span> <span class="id" title="var">Hdup</span>]. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ne</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepM_to_big_sepL2" class="idref" href="#big_sepM_to_big_sepL2"><span class="id" title="lemma">big_sepM_to_big_sepL2</span></a> (<a id="PROP:21" class="idref" href="#PROP:21"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>) (<a id="A:22" class="idref" href="#A:22"><span class="id" title="binder">A</span></a> <a id="B:23" class="idref" href="#B:23"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="EqDecision0:24" class="idref" href="#EqDecision0:24"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:24" class="idref" href="#EqDecision0:24"><span class="id" title="binder">A</span></a>} `{<a id="H:26" class="idref" href="#H:26"><span class="id" title="binder">Countable</span></a> <a id="H:26" class="idref" href="#H:26"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="121d2b861d49b1fcee040f9bfb948b0a" class="idref" href="#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="binder">φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:22"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:23"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:21"><span class="id" title="variable">PROP</span></a>) (<a id="l1:28" class="idref" href="#l1:28"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:22"><span class="id" title="variable">A</span></a>) (<a id="l2:29" class="idref" href="#l2:29"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:23"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.iris_extra.html#l1:28"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:28"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l2:29"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="y1:30" class="idref" href="#y1:30"><span class="id" title="binder"><span id="y1:31" class="id">y1</span></span></a><span class="id" title="notation">↦</span><a id="y2:32" class="idref" href="#y2:32"><span class="id" title="binder"><span id="y2:33" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.iris_extra.html#l1:28"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2:29"><span class="id" title="variable">l2</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:30"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:32"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y1:34" class="idref" href="#y1:34"><span class="id" title="binder"><span id="y1:35" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="y2:36" class="idref" href="#y2:36"><span class="id" title="binder"><span id="y2:37" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:28"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:29"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:34"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:36"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="var">iInduction</span> (<span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l1</span>] "IH"; <span class="id" title="var">iIntros</span> (<span class="id" title="var">l2</span> <span class="id" title="var">Hnd</span> <span class="id" title="var">Hlen</span>) "H".<br/>
&nbsp;&nbsp;- <span class="id" title="var">iSimpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnd</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_insert</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[A B]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_elem_of_list_to_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">$!</span> <span class="id" title="var">l2</span> <span class="id" title="var">H4</span> <span class="id" title="var">H1</span> <span class="id" title="notation">with</span> "B"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="NoDup_of_sepL2_exclusive" class="idref" href="#NoDup_of_sepL2_exclusive"><span class="id" title="lemma">NoDup_of_sepL2_exclusive</span></a> {<a id="4419af43eee85446dd7b19942c9f830b" class="idref" href="#4419af43eee85446dd7b19942c9f830b"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:39" class="idref" href="#A:39"><span class="id" title="binder">A</span></a> <a id="B:40" class="idref" href="#B:40"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} (<a id="l1:41" class="idref" href="#l1:41"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:39"><span class="id" title="variable">A</span></a>) (<a id="l2:42" class="idref" href="#l2:42"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:40"><span class="id" title="variable">B</span></a>) (<a id="d555d90f2a9e89dae376afbe346ddfc7" class="idref" href="#d555d90f2a9e89dae376afbe346ddfc7"><span class="id" title="binder">Φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:39"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:40"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#4419af43eee85446dd7b19942c9f830b"><span class="id" title="variable">Σ</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="a:44" class="idref" href="#a:44"><span class="id" title="binder">a</span></a> <a id="x1:45" class="idref" href="#x1:45"><span class="id" title="binder">x1</span></a> <a id="x2:46" class="idref" href="#x2:46"><span class="id" title="binder">x2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#d555d90f2a9e89dae376afbe346ddfc7"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:44"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#x1:45"><span class="id" title="variable">x1</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="cap_machine.iris_extra.html#d555d90f2a9e89dae376afbe346ddfc7"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:44"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#x2:46"><span class="id" title="variable">x2</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">False</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:47" class="idref" href="#a:47"><span class="id" title="binder"><span id="a:48" class="id">a</span></span></a><span class="id" title="notation">;</span><a id="x:49" class="idref" href="#x:49"><span class="id" title="binder"><span id="x:50" class="id">x</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:41"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:42"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#d555d90f2a9e89dae376afbe346ddfc7"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:47"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#x:49"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">⌜</span><span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.iris_extra.html#l1:41"><span class="id" title="variable">l1</span></a><span class="id" title="notation">⌝</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a1'</span> <span class="id" title="var">l1</span>].<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (?) "_ _". <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">l2</span>) "HΦ H". <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a2'</span> <span class="id" title="var">l2</span>]; [<span class="id" title="var">done</span>|]. <span class="id" title="var">cbn</span>. <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[Ha1 H]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="var">IHl1</span> <span class="id" title="notation">with</span> "HΦ H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">⌜</span><span class="id" title="var">a1'</span> <span class="id" title="notation">∉</span> <span class="id" title="var">l1</span><span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hin</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">elem_of_list_lookup_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">lookup_lt_is_Some_2</span> <span class="id" title="var">l2</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hlen12</span> -<span class="id" title="lemma">lookup_lt_is_Some</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_lookup</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Ha1'"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"HΦ" <span class="id" title="notation">with</span> "Ha1 Ha1'"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_extract_l" class="idref" href="#big_sepL2_extract_l"><span class="id" title="lemma">big_sepL2_extract_l</span></a> `{<a id="cbbfa2396495d39f80c59fc2f71e0bb6" class="idref" href="#cbbfa2396495d39f80c59fc2f71e0bb6"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> <a id="B:53" class="idref" href="#B:53"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:54" class="idref" href="#i:54"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="ai:55" class="idref" href="#ai:55"><span class="id" title="binder">ai</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:52"><span class="id" title="variable">A</span></a>) (<a id="a:56" class="idref" href="#a:56"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:52"><span class="id" title="variable">A</span></a>) (<a id="b:57" class="idref" href="#b:57"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:53"><span class="id" title="variable">B</span></a>) (<a id="5c5aa00dc5548d5de33f208517f82135" class="idref" href="#5c5aa00dc5548d5de33f208517f82135"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:52"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:53"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#cbbfa2396495d39f80c59fc2f71e0bb6"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#a:56"><span class="id" title="variable">a</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#i:54"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:55"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:59" class="idref" href="#a_i:59"><span class="id" title="binder"><span id="a_i:60" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:61" class="idref" href="#b_i:61"><span class="id" title="binder"><span id="b_i:62" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:56"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#b:57"><span class="id" title="variable">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#5c5aa00dc5548d5de33f208517f82135"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:59"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:61"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="b':63" class="idref" href="#b':63"><span class="id" title="binder">b'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:64" class="idref" href="#a_i:64"><span class="id" title="binder"><span id="a_i:65" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:66" class="idref" href="#b_i:66"><span class="id" title="binder"><span id="b_i:67" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:54"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:56"><span class="id" title="variable">a</span></a><span class="id" title="notation">);</span><a class="idref" href="cap_machine.iris_extra.html#b':63"><span class="id" title="variable">b'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#5c5aa00dc5548d5de33f208517f82135"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:64"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:66"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <span class="id" title="notation">∃</span> <a id="b:68" class="idref" href="#b:68"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#5c5aa00dc5548d5de33f208517f82135"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:55"><span class="id" title="variable">ai</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:68"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hsome</span>) "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqa</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqb</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Heqa</span> -<span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app_inv</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Htake Hdrop]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length_le</span>;[|<span class="id" title="var">lia</span>]). <span class="id" title="tactic">left</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ai</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>);[<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlength'</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hdrop" <span class="id" title="keyword">as</span> "[Hφ Hdrop]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hφ";[|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app</span> <span class="id" title="notation">with</span> "Htake Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_take_drop</span>. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_extract_l'" class="idref" href="#big_sepL2_extract_l'"><span class="id" title="lemma">big_sepL2_extract_l'</span></a> {<a id="4490fc2114c8436ece16d296ed53d878" class="idref" href="#4490fc2114c8436ece16d296ed53d878"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:70" class="idref" href="#A:70"><span class="id" title="binder">A</span></a> <a id="B:71" class="idref" href="#B:71"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:72" class="idref" href="#i:72"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="ai:73" class="idref" href="#ai:73"><span class="id" title="binder">ai</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:70"><span class="id" title="variable">A</span></a>) (<a id="a:74" class="idref" href="#a:74"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:70"><span class="id" title="variable">A</span></a>) (<a id="b:75" class="idref" href="#b:75"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:71"><span class="id" title="variable">B</span></a>) (<a id="c7b0d168aca7081bb85c3a05853b3c46" class="idref" href="#c7b0d168aca7081bb85c3a05853b3c46"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:70"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#4490fc2114c8436ece16d296ed53d878"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#a:74"><span class="id" title="variable">a</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#i:72"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:73"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:77" class="idref" href="#a_i:77"><span class="id" title="binder"><span id="a_i:78" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:79" class="idref" href="#b_i:79"><span class="id" title="binder"><span id="b_i:80" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:74"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#b:75"><span class="id" title="variable">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#c7b0d168aca7081bb85c3a05853b3c46"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:77"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:79"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:81" class="idref" href="#a_i:81"><span class="id" title="binder"><span id="a_i:82" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:83" class="idref" href="#b_i:83"><span class="id" title="binder"><span id="b_i:84" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:72"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:74"><span class="id" title="variable">a</span></a><span class="id" title="notation">);(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:72"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:75"><span class="id" title="variable">b</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#c7b0d168aca7081bb85c3a05853b3c46"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:81"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:83"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <span class="id" title="notation">∃</span> <a id="b:85" class="idref" href="#b:85"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#c7b0d168aca7081bb85c3a05853b3c46"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:73"><span class="id" title="variable">ai</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:85"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hsome</span>) "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqa</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqb</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Heqa</span> -<span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app_inv</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Htake Hdrop]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length_le</span>;[|<span class="id" title="var">lia</span>]). <span class="id" title="tactic">left</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ai</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>);[<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlength'</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hdrop" <span class="id" title="keyword">as</span> "[Hφ Hdrop]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hφ";[|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcons</span>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app</span> <span class="id" title="notation">with</span> "Htake Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">delete_take_drop</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">delete_take_drop</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">take_drop_middle</span> <span class="id" title="var">b</span> <span class="id" title="var">i</span> <span class="id" title="var">b0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">b0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>)). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_lookup_middle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length_le</span> //. <span class="id" title="var">enough</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="abbreviation">length</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hlength</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_is_Some</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_extract'" class="idref" href="#big_sepL2_extract'"><span class="id" title="lemma">big_sepL2_extract'</span></a> {<a id="fc85eefe06c558ba688df7af8e52608e" class="idref" href="#fc85eefe06c558ba688df7af8e52608e"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:87" class="idref" href="#A:87"><span class="id" title="binder">A</span></a> <a id="B:88" class="idref" href="#B:88"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:89" class="idref" href="#i:89"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="ai:90" class="idref" href="#ai:90"><span class="id" title="binder">ai</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:87"><span class="id" title="variable">A</span></a>) (<a id="bi:91" class="idref" href="#bi:91"><span class="id" title="binder">bi</span></a> : <a class="idref" href="cap_machine.iris_extra.html#B:88"><span class="id" title="variable">B</span></a>) (<a id="a:92" class="idref" href="#a:92"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:87"><span class="id" title="variable">A</span></a>) (<a id="b:93" class="idref" href="#b:93"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:88"><span class="id" title="variable">B</span></a>) (<a id="d5b93cc29a7c58afda78c3e94af09715" class="idref" href="#d5b93cc29a7c58afda78c3e94af09715"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:87"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:88"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#fc85eefe06c558ba688df7af8e52608e"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#a:92"><span class="id" title="variable">a</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#i:89"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:90"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:93"><span class="id" title="variable">b</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#i:89"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#bi:91"><span class="id" title="variable">bi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:95" class="idref" href="#a_i:95"><span class="id" title="binder"><span id="a_i:96" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:97" class="idref" href="#b_i:97"><span class="id" title="binder"><span id="b_i:98" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:92"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#b:93"><span class="id" title="variable">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#d5b93cc29a7c58afda78c3e94af09715"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:95"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:97"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:99" class="idref" href="#a_i:99"><span class="id" title="binder"><span id="a_i:100" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:101" class="idref" href="#b_i:101"><span class="id" title="binder"><span id="b_i:102" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:89"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:92"><span class="id" title="variable">a</span></a><span class="id" title="notation">);(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:89"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:93"><span class="id" title="variable">b</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#d5b93cc29a7c58afda78c3e94af09715"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:99"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:101"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.iris_extra.html#d5b93cc29a7c58afda78c3e94af09715"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:90"><span class="id" title="variable">ai</span></a> <a class="idref" href="cap_machine.iris_extra.html#bi:91"><span class="id" title="variable">bi</span></a>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hsome</span> <span class="id" title="var">Hsome'</span>) "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqa</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqb</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="definition">take_drop</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Heqa</span> -<span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app_inv</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Htake Hdrop]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length_le</span>;[|<span class="id" title="var">lia</span>]). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcons'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ai</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hhb</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hh</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hhb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hdrop" <span class="id" title="keyword">as</span> "[Hφ Hdrop]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span> "Hφ";[|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcons</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcons'</span>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app</span> <span class="id" title="notation">with</span> "Htake Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">delete_take_drop</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">delete_take_drop</span> <span class="id" title="var">a</span>). <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_close_l" class="idref" href="#big_sepL2_close_l"><span class="id" title="lemma">big_sepL2_close_l</span></a> {<a id="b0c243fdea575b06d729ab1bfbed1dd2" class="idref" href="#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:104" class="idref" href="#A:104"><span class="id" title="binder">A</span></a> <a id="B:105" class="idref" href="#B:105"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:106" class="idref" href="#i:106"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="ai:107" class="idref" href="#ai:107"><span class="id" title="binder">ai</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:104"><span class="id" title="variable">A</span></a>) (<a id="bi:108" class="idref" href="#bi:108"><span class="id" title="binder">bi</span></a> : <a class="idref" href="cap_machine.iris_extra.html#B:105"><span class="id" title="variable">B</span></a>) (<a id="a:109" class="idref" href="#a:109"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:104"><span class="id" title="variable">A</span></a>) (<a id="b:110" class="idref" href="#b:110"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:105"><span class="id" title="variable">B</span></a>) (<a id="ba6c166dd9455105c426f23ac14bfacf" class="idref" href="#ba6c166dd9455105c426f23ac14bfacf"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:104"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:105"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#a:109"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#b:110"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#a:109"><span class="id" title="variable">a</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="cap_machine.iris_extra.html#i:106"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:107"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:112" class="idref" href="#a_i:112"><span class="id" title="binder"><span id="a_i:113" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:114" class="idref" href="#b_i:114"><span class="id" title="binder"><span id="b_i:115" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:106"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:109"><span class="id" title="variable">a</span></a><span class="id" title="notation">);(</span><span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#i:106"><span class="id" title="variable">i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:110"><span class="id" title="variable">b</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#ba6c166dd9455105c426f23ac14bfacf"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:112"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:114"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <a class="idref" href="cap_machine.iris_extra.html#ba6c166dd9455105c426f23ac14bfacf"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#ai:107"><span class="id" title="variable">ai</span></a> <a class="idref" href="cap_machine.iris_extra.html#bi:108"><span class="id" title="variable">bi</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a_i:116" class="idref" href="#a_i:116"><span class="id" title="binder"><span id="a_i:117" class="id">a_i</span></span></a><span class="id" title="notation">;</span><a id="b_i:118" class="idref" href="#b_i:118"><span class="id" title="binder"><span id="b_i:119" class="id">b_i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:109"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><span class="id" title="notation">&lt;[</span><a class="idref" href="cap_machine.iris_extra.html#i:106"><span class="id" title="variable">i</span></a><span class="id" title="notation">:=</span> <a class="idref" href="cap_machine.iris_extra.html#bi:108"><span class="id" title="variable">bi</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">b</span><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#ba6c166dd9455105c426f23ac14bfacf"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a_i:116"><span class="id" title="variable">a_i</span></a> <a class="idref" href="cap_machine.iris_extra.html#b_i:118"><span class="id" title="variable">b_i</span></a><span class="id" title="notation">)</span> )%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span> <span class="id" title="var">Hsome</span>) "[Hl Hb]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_take_drop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="abbreviation">strings.length</span> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt'</span>;[<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app_inv</span> <span class="id" title="notation">with</span> "Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Htake Hdrop]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ai</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">drop</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inv_head"><span class="id" title="lemma">app_inv_head</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcons</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">take_drop</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y1:120" class="idref" href="#y1:120"><span class="id" title="binder"><span id="y1:121" class="id"><span id="y1:124" class="id"><span id="y1:125" class="id">y1</span></span></span></span></a><span class="id" title="notation">;</span><a id="y2:122" class="idref" href="#y2:122"><span class="id" title="binder"><span id="y2:123" class="id"><span id="y2:126" class="id"><span id="y2:127" class="id">y2</span></span></span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">ai</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">a</span><span class="id" title="notation">;</span><span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">b</span><span class="id" title="notation">,</span> φ <a class="idref" href="cap_machine.iris_extra.html#y1:120"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:122"><span class="id" title="variable">y2</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[Hb Hdrop]" <span class="id" title="keyword">as</span> "Hdrop";[<span class="id" title="var">iFrame</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app</span> <span class="id" title="notation">with</span> "Htake Hdrop"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hab".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">take_drop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="abbreviation">drop</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><span class="id" title="var">i</span><span class="id" title="notation">:=</span><span class="id" title="var">bi</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">b</span>) <span class="id" title="keyword">as</span> -&gt;;[|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">i</span><span class="id" title="notation">:=</span><span class="id" title="var">bi</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">b</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">bi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsome'</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_lookup_insert</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">take_drop_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome'</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hsome'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_insert</span>;[|<span class="id" title="var">lia</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">drop_insert_gt</span>;[|<span class="id" title="var">lia</span>]. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="region_addrs_exists" class="idref" href="#region_addrs_exists"><span class="id" title="lemma">region_addrs_exists</span></a> `{<a id="4cf90600e8413682f73ea298d1219fe2" class="idref" href="#4cf90600e8413682f73ea298d1219fe2"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:129" class="idref" href="#A:129"><span class="id" title="binder">A</span></a> <a id="B:130" class="idref" href="#B:130"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a:131" class="idref" href="#a:131"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:129"><span class="id" title="variable">A</span></a>) (<a id="7daa287e528036c696860f585d8407e3" class="idref" href="#7daa287e528036c696860f585d8407e3"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:129"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:130"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#4cf90600e8413682f73ea298d1219fe2"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:133" class="idref" href="#a0:133"><span class="id" title="binder"><span id="a0:134" class="id">a0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:131"><span class="id" title="variable">a</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="b0:135" class="idref" href="#b0:135"><span class="id" title="binder">b0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#7daa287e528036c696860f585d8407e3"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:133"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#b0:135"><span class="id" title="variable">b0</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="ws:136" class="idref" href="#ws:136"><span class="id" title="binder">ws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:130"><span class="id" title="variable">B</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:137" class="idref" href="#a0:137"><span class="id" title="binder"><span id="a0:138" class="id">a0</span></span></a><span class="id" title="notation">;</span><a id="b0:139" class="idref" href="#b0:139"><span class="id" title="binder"><span id="b0:140" class="id">b0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:131"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#ws:136"><span class="id" title="variable">ws</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#7daa287e528036c696860f585d8407e3"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:137"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#b0:139"><span class="id" title="variable">b0</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha0" <span class="id" title="keyword">as</span> (<span class="id" title="var">w0</span>) "Ha0".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span>) "Ha'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ws</span>). <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span>) "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ws</span>;[<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="lemma">bi.False_elim</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "[Ha]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Ha'"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="region_addrs_exists_zip" class="idref" href="#region_addrs_exists_zip"><span class="id" title="lemma">region_addrs_exists_zip</span></a> `{<a id="5782d2a432c0c60d384cbd149f501dec" class="idref" href="#5782d2a432c0c60d384cbd149f501dec"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:142" class="idref" href="#A:142"><span class="id" title="binder">A</span></a> <a id="B:143" class="idref" href="#B:143"><span class="id" title="binder">B</span></a> <a id="C:144" class="idref" href="#C:144"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a:145" class="idref" href="#a:145"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:142"><span class="id" title="variable">A</span></a>) (<a id="c9fb0d4cfb90f3cd18ac576f5bff5be1" class="idref" href="#c9fb0d4cfb90f3cd18ac576f5bff5be1"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:142"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:143"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:144"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#5782d2a432c0c60d384cbd149f501dec"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:147" class="idref" href="#a0:147"><span class="id" title="binder"><span id="a0:148" class="id">a0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:145"><span class="id" title="variable">a</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="b0:149" class="idref" href="#b0:149"><span class="id" title="binder">b0</span></a> <a id="c0:150" class="idref" href="#c0:150"><span class="id" title="binder">c0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#c9fb0d4cfb90f3cd18ac576f5bff5be1"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:147"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#b0:149"><span class="id" title="variable">b0</span></a> <a class="idref" href="cap_machine.iris_extra.html#c0:150"><span class="id" title="variable">c0</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="ws:151" class="idref" href="#ws:151"><span class="id" title="binder">ws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="cap_machine.iris_extra.html#B:143"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:144"><span class="id" title="variable">C</span></a>)<span class="id" title="notation">),</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:152" class="idref" href="#a0:152"><span class="id" title="binder"><span id="a0:153" class="id">a0</span></span></a><span class="id" title="notation">;</span><a id="bc0:154" class="idref" href="#bc0:154"><span class="id" title="binder"><span id="bc0:155" class="id">bc0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:145"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#ws:151"><span class="id" title="variable">ws</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#c9fb0d4cfb90f3cd18ac576f5bff5be1"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:152"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#bc0:154"><span class="id" title="variable">bc0</span></a><span class="id" title="notation">.1</span> <a class="idref" href="cap_machine.iris_extra.html#bc0:154"><span class="id" title="variable">bc0</span></a><span class="id" title="notation">.2</span><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha0" <span class="id" title="keyword">as</span> (<span class="id" title="var">w0</span> <span class="id" title="var">p0</span>) "Ha0".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span>) "Ha'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">w0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">p0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ws</span>). <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span>) "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ws</span>;[<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="lemma">bi.False_elim</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "[Ha]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Ha'"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="region_addrs_exists2" class="idref" href="#region_addrs_exists2"><span class="id" title="lemma">region_addrs_exists2</span></a> `{<a id="4d868aba64cc2c334790fc00a245c2a9" class="idref" href="#4d868aba64cc2c334790fc00a245c2a9"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:157" class="idref" href="#A:157"><span class="id" title="binder">A</span></a> <a id="B:158" class="idref" href="#B:158"><span class="id" title="binder">B</span></a> <a id="C:159" class="idref" href="#C:159"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a:160" class="idref" href="#a:160"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:157"><span class="id" title="variable">A</span></a>) (<a id="b:161" class="idref" href="#b:161"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:158"><span class="id" title="variable">B</span></a>) (<a id="e97778aaf3d88fd5578b5ed988982285" class="idref" href="#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:157"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:158"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:159"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#4d868aba64cc2c334790fc00a245c2a9"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:163" class="idref" href="#a0:163"><span class="id" title="binder"><span id="a0:164" class="id">a0</span></span></a><span class="id" title="notation">;</span><a id="b0:165" class="idref" href="#b0:165"><span class="id" title="binder"><span id="b0:166" class="id">b0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:160"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#b:161"><span class="id" title="variable">b</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="c0:167" class="idref" href="#c0:167"><span class="id" title="binder">c0</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:163"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#b0:165"><span class="id" title="variable">b0</span></a> <a class="idref" href="cap_machine.iris_extra.html#c0:167"><span class="id" title="variable">c0</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="ws:168" class="idref" href="#ws:168"><span class="id" title="binder">ws</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:159"><span class="id" title="variable">C</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">⌜</span><span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#ws:168"><span class="id" title="variable">ws</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#b:161"><span class="id" title="variable">b</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a0:169" class="idref" href="#a0:169"><span class="id" title="binder"><span id="a0:170" class="id">a0</span></span></a><span class="id" title="notation">;</span><a id="bc0:171" class="idref" href="#bc0:171"><span class="id" title="binder"><span id="bc0:172" class="id">bc0</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#a:160"><span class="id" title="variable">a</span></a><span class="id" title="notation">;(</span><span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.iris_extra.html#b:161"><span class="id" title="variable">b</span></a> <a class="idref" href="cap_machine.iris_extra.html#ws:168"><span class="id" title="variable">ws</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a0:169"><span class="id" title="variable">a0</span></a> <a class="idref" href="cap_machine.iris_extra.html#bc0:171"><span class="id" title="variable">bc0</span></a><span class="id" title="notation">.1</span> <a class="idref" href="cap_machine.iris_extra.html#bc0:171"><span class="id" title="variable">bc0</span></a><span class="id" title="notation">.2</span><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlength</span>. <span class="id" title="var">iSplit</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; [<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlength</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha0" <span class="id" title="keyword">as</span> (<span class="id" title="var">w0</span>) "Ha0".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span> <span class="id" title="var">Hlen</span>) "Ha'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ws</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">iSplit</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a0</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span> <span class="id" title="var">Hlen</span>) "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>,<span class="id" title="var">ws</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlength</span>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> (<span class="id" title="var">ws</span> <span class="id" title="var">Hlen</span>) "Ha".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ws</span>,<span class="id" title="var">b</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="lemma">bi.False_elim</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ha" <span class="id" title="keyword">as</span> "[Ha0 Ha]". <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Ha"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "[Ha]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Ha'"; <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_to_big_sepL_r" class="idref" href="#big_sepL2_to_big_sepL_r"><span class="id" title="lemma">big_sepL2_to_big_sepL_r</span></a> `{<a id="c1c5c8c67a0dc9808d5f39ed656267e7" class="idref" href="#c1c5c8c67a0dc9808d5f39ed656267e7"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a> <a id="B:175" class="idref" href="#B:175"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="95273034286a1ddf11aeb691346a0961" class="idref" href="#95273034286a1ddf11aeb691346a0961"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#B:175"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#c1c5c8c67a0dc9808d5f39ed656267e7"><span class="id" title="variable">Σ</span></a>) (<a id="l1:177" class="idref" href="#l1:177"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:174"><span class="id" title="variable">A</span></a>) <a id="l2:178" class="idref" href="#l2:178"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:177"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l2:178"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="pat:179" class="idref" href="#pat:179"><span class="id" title="binder">_</span></a><span class="id" title="notation">;</span><a id="y2:180" class="idref" href="#y2:180"><span class="id" title="binder"><span id="y2:181" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:177"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:178"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#95273034286a1ddf11aeb691346a0961"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:180"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y:182" class="idref" href="#y:182"><span class="id" title="binder"><span id="y:183" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l2:178"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#95273034286a1ddf11aeb691346a0961"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y:182"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hl2". <span class="id" title="var">iRevert</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l2</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">y2</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l1</span>); <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>;[<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="lemma">bi.False_elim</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hl2" <span class="id" title="keyword">as</span> "[$ Hl2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hl2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRevert</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l2</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">y2</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l1</span>); <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Hl2" <span class="id" title="keyword">as</span> "[Hy2 Hl2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">$!</span> <span class="id" title="var">l1</span> <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hl2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> "Hl2". <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_to_big_sepL_l" class="idref" href="#big_sepL2_to_big_sepL_l"><span class="id" title="lemma">big_sepL2_to_big_sepL_l</span></a> `{<a id="959df3c356b65207af3b634cad3947e8" class="idref" href="#959df3c356b65207af3b634cad3947e8"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:185" class="idref" href="#A:185"><span class="id" title="binder">A</span></a> <a id="B:186" class="idref" href="#B:186"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="913bbde52bc9d7d991fadd990a5309bb" class="idref" href="#913bbde52bc9d7d991fadd990a5309bb"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:185"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#959df3c356b65207af3b634cad3947e8"><span class="id" title="variable">Σ</span></a>) (<a id="l1:188" class="idref" href="#l1:188"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:185"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l2:189" class="idref" href="#l2:189"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:186"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:188"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l2:189"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y1:190" class="idref" href="#y1:190"><span class="id" title="binder"><span id="y1:191" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="pat:192" class="idref" href="#pat:192"><span class="id" title="binder">_</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:188"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:189"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#913bbde52bc9d7d991fadd990a5309bb"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:190"><span class="id" title="variable">y1</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y:193" class="idref" href="#y:193"><span class="id" title="binder"><span id="y:194" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:188"><span class="id" title="variable">l1</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#913bbde52bc9d7d991fadd990a5309bb"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y:193"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hl2". <span class="id" title="var">iRevert</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">y1</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l2</span>); <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;[<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="lemma">bi.False_elim</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hl2" <span class="id" title="keyword">as</span> "[$ Hl2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hl2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRevert</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">y1</span>] "IHn" <span class="id" title="keyword">forall</span> (<span class="id" title="var">l2</span>); <span class="id" title="var">iIntros</span> (<span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> "Hl2" <span class="id" title="keyword">as</span> "[Hy2 Hl2]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IHn" <span class="id" title="notation">$!</span> <span class="id" title="var">l2</span> <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hl2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> "Hl2". <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_app'" class="idref" href="#big_sepL2_app'"><span class="id" title="lemma">big_sepL2_app'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PROP:195" class="idref" href="#PROP:195"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>) (<a id="A:196" class="idref" href="#A:196"><span class="id" title="binder">A</span></a> <a id="B:197" class="idref" href="#B:197"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="808b076347e1d828efd153671a2cf17b" class="idref" href="#808b076347e1d828efd153671a2cf17b"><span class="id" title="binder">Φ</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:196"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:197"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:195"><span class="id" title="variable">PROP</span></a>) (<a id="l1:199" class="idref" href="#l1:199"><span class="id" title="binder">l1</span></a> <a id="l2:200" class="idref" href="#l2:200"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:196"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1':201" class="idref" href="#l1':201"><span class="id" title="binder">l1'</span></a> <a id="l2':202" class="idref" href="#l2':202"><span class="id" title="binder">l2'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:197"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:199"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1':201"><span class="id" title="variable">l1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:203" class="idref" href="#k:203"><span class="id" title="binder"><span id="k:204" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y1:205" class="idref" href="#y1:205"><span class="id" title="binder"><span id="y1:206" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="y2:207" class="idref" href="#y2:207"><span class="id" title="binder"><span id="y2:208" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:199"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l1':201"><span class="id" title="variable">l1'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#808b076347e1d828efd153671a2cf17b"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:203"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:205"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:207"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:209" class="idref" href="#k:209"><span class="id" title="binder"><span id="k:210" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y1:211" class="idref" href="#y1:211"><span class="id" title="binder"><span id="y1:212" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="y2:213" class="idref" href="#y2:213"><span class="id" title="binder"><span id="y2:214" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l2:200"><span class="id" title="variable">l2</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2':202"><span class="id" title="variable">l2'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#808b076347e1d828efd153671a2cf17b"><span class="id" title="variable">Φ</span></a> (<span class="id" title="abbreviation">strings.length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:199"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:209"><span class="id" title="variable">k</span></a>) <a class="idref" href="cap_machine.iris_extra.html#y1:211"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:213"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">≡</span> (<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:215" class="idref" href="#k:215"><span class="id" title="binder"><span id="k:216" class="id">k</span></span></a><span class="id" title="notation">↦</span><a id="y1:217" class="idref" href="#y1:217"><span class="id" title="binder"><span id="y1:218" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="y2:219" class="idref" href="#y2:219"><span class="id" title="binder"><span id="y2:220" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.iris_extra.html#l1:199"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2:200"><span class="id" title="variable">l2</span></a><span class="id" title="notation">);(</span><a class="idref" href="cap_machine.iris_extra.html#l1':201"><span class="id" title="variable">l1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2':202"><span class="id" title="variable">l2'</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#808b076347e1d828efd153671a2cf17b"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:215"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:217"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:219"><span class="id" title="variable">y2</span></a>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlenl1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "[Hl1 Hl2]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app</span> <span class="id" title="notation">with</span> "Hl1 Hl2"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Happ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">∃</span> <a id="l0':221" class="idref" href="#l0':221"><span class="id" title="binder"><span id="l0':235" class="id">l0'</span></span></a> <a id="l0'':222" class="idref" href="#l0'':222"><span class="id" title="binder"><span id="l0'':236" class="id">l0''</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⌜</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.iris_extra.html#l0':221"><span class="id" title="variable">l0'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="cap_machine.iris_extra.html#l0'':222"><span class="id" title="variable">l0''</span></a><span class="id" title="notation">⌝</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:223" class="idref" href="#k:223"><span class="id" title="binder"><span id="k:224" class="id"><span id="k:237" class="id"><span id="k:238" class="id">k</span></span></span></span></a><span class="id" title="notation">↦</span><a id="y1:225" class="idref" href="#y1:225"><span class="id" title="binder"><span id="y1:226" class="id"><span id="y1:239" class="id"><span id="y1:240" class="id">y1</span></span></span></span></a><span class="id" title="notation">;</span><a id="y2:227" class="idref" href="#y2:227"><span class="id" title="binder"><span id="y2:228" class="id"><span id="y2:241" class="id"><span id="y2:242" class="id">y2</span></span></span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l0':221"><span class="id" title="variable">l0'</span></a><span class="id" title="notation">;</span><span class="id" title="var">l1'</span><span class="id" title="notation">,</span> <span class="id" title="var">Φ</span> <a class="idref" href="cap_machine.iris_extra.html#k:223"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:225"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:227"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:229" class="idref" href="#k:229"><span class="id" title="binder"><span id="k:230" class="id"><span id="k:243" class="id"><span id="k:244" class="id">k</span></span></span></span></a><span class="id" title="notation">↦</span><a id="y1:231" class="idref" href="#y1:231"><span class="id" title="binder"><span id="y1:232" class="id"><span id="y1:245" class="id"><span id="y1:246" class="id">y1</span></span></span></span></a><span class="id" title="notation">;</span><a id="y2:233" class="idref" href="#y2:233"><span class="id" title="binder"><span id="y2:234" class="id"><span id="y2:247" class="id"><span id="y2:248" class="id">y2</span></span></span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l0'':222"><span class="id" title="variable">l0''</span></a><span class="id" title="notation">;</span><span class="id" title="var">l2'</span><span class="id" title="notation">,</span> <span class="id" title="var">Φ</span> (<span class="id" title="abbreviation">strings.length</span> <span class="id" title="var">l1'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:229"><span class="id" title="variable">k</span></a>) <a class="idref" href="cap_machine.iris_extra.html#y1:231"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:233"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> "[Happ]" <span class="id" title="keyword">as</span> (<span class="id" title="var">l0'</span> <span class="id" title="var">l0''</span>) "(% &amp; Happl0' &amp; Happl0'')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_app_inv_r</span> <span class="id" title="notation">with</span> "Happ"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Happl0'"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "Happl0''"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hlenl1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l0'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">l2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l0''</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq1</span> <span class="id" title="var">Heq2</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">app_inj_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlenl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_split_at" class="idref" href="#big_sepL2_split_at"><span class="id" title="lemma">big_sepL2_split_at</span></a> `{<a id="147419d37c9ad39321d8c49e14219600" class="idref" href="#147419d37c9ad39321d8c49e14219600"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:250" class="idref" href="#A:250"><span class="id" title="binder">A</span></a> <a id="B:251" class="idref" href="#B:251"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:252" class="idref" href="#EqDecision0:252"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:252" class="idref" href="#EqDecision0:252"><span class="id" title="binder">A</span></a>} `{<a id="H:254" class="idref" href="#H:254"><span class="id" title="binder">Countable</span></a> <a id="H:254" class="idref" href="#H:254"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:255" class="idref" href="#k:255"><span class="id" title="binder">k</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l1:256" class="idref" href="#l1:256"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:250"><span class="id" title="variable">A</span></a>) (<a id="l2:257" class="idref" href="#l2:257"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:251"><span class="id" title="variable">B</span></a>) (<a id="1d5b0def5455d91e950f55ff4a14bafc" class="idref" href="#1d5b0def5455d91e950f55ff4a14bafc"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:250"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:251"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#147419d37c9ad39321d8c49e14219600"><span class="id" title="variable">Σ</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:259" class="idref" href="#a:259"><span class="id" title="binder"><span id="a:260" class="id">a</span></span></a><span class="id" title="notation">;</span><a id="b:261" class="idref" href="#b:261"><span class="id" title="binder"><span id="b:262" class="id">b</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:256"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:257"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#1d5b0def5455d91e950f55ff4a14bafc"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:259"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:261"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:263" class="idref" href="#a:263"><span class="id" title="binder"><span id="a:264" class="id">a</span></span></a><span class="id" title="notation">;</span><a id="b:265" class="idref" href="#b:265"><span class="id" title="binder"><span id="b:266" class="id">b</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">take</span> <a class="idref" href="cap_machine.iris_extra.html#k:255"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#l1:256"><span class="id" title="variable">l1</span></a><span class="id" title="notation">);(</span><span class="id" title="abbreviation">take</span> <a class="idref" href="cap_machine.iris_extra.html#k:255"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2:257"><span class="id" title="variable">l2</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#1d5b0def5455d91e950f55ff4a14bafc"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:263"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:265"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:267" class="idref" href="#a:267"><span class="id" title="binder"><span id="a:268" class="id">a</span></span></a><span class="id" title="notation">;</span><a id="b:269" class="idref" href="#b:269"><span class="id" title="binder"><span id="b:270" class="id">b</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="abbreviation">drop</span> <a class="idref" href="cap_machine.iris_extra.html#k:255"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#l1:256"><span class="id" title="variable">l1</span></a><span class="id" title="notation">);(</span><span class="id" title="abbreviation">drop</span> <a class="idref" href="cap_machine.iris_extra.html#k:255"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2:257"><span class="id" title="variable">l2</span></a><span class="id" title="notation">),</span> <a class="idref" href="cap_machine.iris_extra.html#1d5b0def5455d91e950f55ff4a14bafc"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:267"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:269"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{1}(<span class="id" title="definition">take_drop</span> <span class="id" title="var">k</span> <span class="id" title="var">l1</span>) -{1}(<span class="id" title="definition">take_drop</span> <span class="id" title="var">k</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.iris_extra.html#big_sepL2_app'"><span class="id" title="axiom">big_sepL2_app'</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[? ?]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">take_length</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL_delete'" class="idref" href="#big_sepL_delete'"><span class="id" title="lemma">big_sepL_delete'</span></a> {<a id="PROP:271" class="idref" href="#PROP:271"><span class="id" title="binder">PROP</span></a>: <span class="id" title="record">bi</span>} {<a id="A:272" class="idref" href="#A:272"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a276c594933a6a01267278fc6b54a2a2" class="idref" href="#a276c594933a6a01267278fc6b54a2a2"><span class="id" title="binder">φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:272"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:271"><span class="id" title="variable">PROP</span></a>) (<a id="l:274" class="idref" href="#l:274"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:272"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="k:275" class="idref" href="#k:275"><span class="id" title="binder">k</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k0:276" class="idref" href="#k0:276"><span class="id" title="binder"><span id="k0:277" class="id">k0</span></span></a><span class="id" title="notation">↦</span><a id="y:278" class="idref" href="#y:278"><span class="id" title="binder"><span id="y:279" class="id">y</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l:274"><span class="id" title="variable">l</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">decide</span> (<a class="idref" href="cap_machine.iris_extra.html#k0:276"><span class="id" title="variable">k0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:275"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="notation">emp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="cap_machine.iris_extra.html#a276c594933a6a01267278fc6b54a2a2"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y:278"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k0:280" class="idref" href="#k0:280"><span class="id" title="binder"><span id="k0:281" class="id">k0</span></span></a><span class="id" title="notation">↦</span><a id="x0:282" class="idref" href="#x0:282"><span class="id" title="binder"><span id="x0:283" class="id">x0</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">delete</span> <a class="idref" href="cap_machine.iris_extra.html#k:275"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#l:274"><span class="id" title="variable">l</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="x1:284" class="idref" href="#x1:284"><span class="id" title="binder">x1</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:272"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="cap_machine.iris_extra.html#a276c594933a6a01267278fc6b54a2a2"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#x1:284"><span class="id" title="variable">x1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">k0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">x0</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l</span>] "IH"; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">iIntros</span> (<span class="id" title="var">k</span>) "H".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[H1 H2]".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">delete</span> /=. <span class="id" title="tactic">destruct</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_impl</span> <span class="id" title="notation">with</span> "H2"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> "H1". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iIntros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "[H2]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_impl</span> <span class="id" title="notation">with</span> "H2"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iIntros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">k</span>)); <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>)); <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL_merge" class="idref" href="#big_sepL_merge"><span class="id" title="lemma">big_sepL_merge</span></a> {<a id="PROP:285" class="idref" href="#PROP:285"><span class="id" title="binder">PROP</span></a>: <span class="id" title="record">bi</span>} {<a id="A:286" class="idref" href="#A:286"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} (<a id="l:287" class="idref" href="#l:287"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:286"><span class="id" title="variable">A</span></a>) (<a id="HNoDup:288" class="idref" href="#HNoDup:288"><span class="id" title="binder">HNoDup</span></a>: <span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.iris_extra.html#l:287"><span class="id" title="variable">l</span></a>) (<a id="45e3facd03f4be90f1b51fe99dff4448" class="idref" href="#45e3facd03f4be90f1b51fe99dff4448"><span class="id" title="binder">φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:286"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:285"><span class="id" title="variable">PROP</span></a>) {<a id="Haffine:291" class="idref" href="#Haffine:291"><span class="id" title="binder">Haffine</span></a>: <span class="id" title="notation">forall</span> <a id="a:290" class="idref" href="#a:290"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Affine</span> (<a class="idref" href="cap_machine.iris_extra.html#45e3facd03f4be90f1b51fe99dff4448"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:290"><span class="id" title="variable">a</span></a>)}:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l1:292" class="idref" href="#l1:292"><span class="id" title="binder">l1</span></a> <a id="l2:293" class="idref" href="#l2:293"><span class="id" title="binder">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a:294" class="idref" href="#a:294"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#a:294"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l:287"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:294"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:292"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:294"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l2:293"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:295" class="idref" href="#a:295"><span class="id" title="binder"><span id="a:296" class="id">a</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:292"><span class="id" title="variable">l1</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#45e3facd03f4be90f1b51fe99dff4448"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:295"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:297" class="idref" href="#a:297"><span class="id" title="binder"><span id="a:298" class="id">a</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l2:293"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#45e3facd03f4be90f1b51fe99dff4448"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:297"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:299" class="idref" href="#a:299"><span class="id" title="binder"><span id="a:300" class="id">a</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l:287"><span class="id" title="variable">l</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#45e3facd03f4be90f1b51fe99dff4448"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:299"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l</span>] "IH"; <span class="id" title="var">iIntros</span> (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">H</span>) "Hl1 Hl2".<br/>
&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepL_nil</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepL_cons</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">x</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">elem_of_list_here</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H'</span>|<span class="id" title="var">H'</span>]; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_delete</span> <span class="id" title="notation">with</span> "Hl1"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[$ Hl1]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:301" class="idref" href="#a:301"><span class="id" title="binder"><span id="a:302" class="id"><span id="a:303" class="id"><span id="a:304" class="id">a</span></span></span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l1</span><span class="id" title="notation">,</span> φ <a class="idref" href="cap_machine.iris_extra.html#a:301"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Hl1]" <span class="id" title="keyword">as</span> "Hl1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_impl</span> <span class="id" title="notation">with</span> "[Hl1]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.iris_extra.html#big_sepL_delete'"><span class="id" title="axiom">big_sepL_delete'</span></a> <span class="id" title="notation">with</span> "Hl1"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hincl</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:305" class="idref" href="#a:305"><span class="id" title="binder"><span id="a:306" class="id">a</span></span></a> : <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:305"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:305"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:305"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">elem_of_list_further</span>; <span class="id" title="tactic">eauto</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span>  (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">x0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_lt</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1). <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ge</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)) <span class="id" title="keyword">with</span> <span class="id" title="var">x0</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">$!</span> <span class="id" title="var">H3</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l1</span><span class="id" title="notation">)</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hincl</span> <span class="id" title="notation">with</span> "[$Hl1] [$Hl2]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_delete</span> <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[$ Hl2]"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:307" class="idref" href="#a:307"><span class="id" title="binder"><span id="a:308" class="id"><span id="a:309" class="id"><span id="a:310" class="id">a</span></span></span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l2</span><span class="id" title="notation">,</span> φ <a class="idref" href="cap_machine.iris_extra.html#a:307"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">with</span> "[Hl2]" <span class="id" title="keyword">as</span> "Hl2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL_impl</span> <span class="id" title="notation">with</span> "[Hl2]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="cap_machine.iris_extra.html#big_sepL_delete'"><span class="id" title="axiom">big_sepL_delete'</span></a> <span class="id" title="notation">with</span> "Hl2"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hincl</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="a:311" class="idref" href="#a:311"><span class="id" title="binder"><span id="a:312" class="id">a</span></span></a> : <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:311"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:311"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:311"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">elem_of_list_further</span>; <span class="id" title="tactic">eauto</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span>  (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">x0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_lt</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1). <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_delete_ge</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)) <span class="id" title="keyword">with</span> <span class="id" title="var">x0</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">$!</span> <span class="id" title="var">H3</span> <span class="id" title="var">l1</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <span class="id" title="var">k</span> <span class="id" title="var">l2</span><span class="id" title="notation">)</span> <span class="id" title="var">Hincl</span> <span class="id" title="notation">with</span> "[$Hl1] [$Hl2]"<span class="id" title="notation">)</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_to_big_sepM" class="idref" href="#big_sepL2_to_big_sepM"><span class="id" title="lemma">big_sepL2_to_big_sepM</span></a> (<a id="PROP:313" class="idref" href="#PROP:313"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>) (<a id="A:314" class="idref" href="#A:314"><span class="id" title="binder">A</span></a> <a id="B:315" class="idref" href="#B:315"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="EqDecision0:316" class="idref" href="#EqDecision0:316"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:316" class="idref" href="#EqDecision0:316"><span class="id" title="binder">A</span></a>} `{<a id="H:318" class="idref" href="#H:318"><span class="id" title="binder">Countable</span></a> <a id="H:318" class="idref" href="#H:318"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="927422e2f8c2bec9a3eb920c25a3821c" class="idref" href="#927422e2f8c2bec9a3eb920c25a3821c"><span class="id" title="binder">φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:314"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:315"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:313"><span class="id" title="variable">PROP</span></a>) (<a id="l1:320" class="idref" href="#l1:320"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:314"><span class="id" title="variable">A</span></a>) (<a id="l2:321" class="idref" href="#l2:321"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:315"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="cap_machine.iris_extra.html#l1:320"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="y1:322" class="idref" href="#y1:322"><span class="id" title="binder"><span id="y1:323" class="id">y1</span></span></a><span class="id" title="notation">;</span><a id="y2:324" class="idref" href="#y2:324"><span class="id" title="binder"><span id="y2:325" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:320"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:321"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#927422e2f8c2bec9a3eb920c25a3821c"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:322"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:324"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="y1:326" class="idref" href="#y1:326"><span class="id" title="binder"><span id="y1:327" class="id">y1</span></span></a><span class="id" title="notation">↦</span><a id="y2:328" class="idref" href="#y2:328"><span class="id" title="binder"><span id="y2:329" class="id">y2</span></span></a> <span class="id" title="notation">∈</span> <span class="id" title="definition">list_to_map</span> (<span class="id" title="abbreviation">zip</span> <a class="idref" href="cap_machine.iris_extra.html#l1:320"><span class="id" title="variable">l1</span></a> <a class="idref" href="cap_machine.iris_extra.html#l2:321"><span class="id" title="variable">l2</span></a>)<span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#927422e2f8c2bec9a3eb920c25a3821c"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#y1:326"><span class="id" title="variable">y1</span></a> <a class="idref" href="cap_machine.iris_extra.html#y2:328"><span class="id" title="variable">y2</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="var">iInduction</span> (<span class="id" title="var">l1</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l1</span>] "IH"; <span class="id" title="var">iIntros</span> (<span class="id" title="var">l2</span> <span class="id" title="var">Hnd</span>) "H".<br/>
&nbsp;&nbsp;- <span class="id" title="var">iSimpl</span>. <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepM_empty</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnd</span>. <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[A B]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_insert</span> <span class="id" title="notation">with</span> "[A B]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_elem_of_list_to_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fst_zip</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iFrame</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">$!</span> <span class="id" title="var">l2</span> <span class="id" title="var">H5</span> <span class="id" title="notation">with</span> "B"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_bupd" class="idref" href="#big_sepL2_bupd"><span class="id" title="lemma">big_sepL2_bupd</span></a><br/>
&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="PROP:330" class="idref" href="#PROP:330"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>) (<a id="H:331" class="idref" href="#H:331"><span class="id" title="binder">H</span></a> : <span class="id" title="class">BiBUpd</span> <a class="idref" href="cap_machine.iris_extra.html#PROP:330"><span class="id" title="variable">PROP</span></a>) (<a id="A:332" class="idref" href="#A:332"><span class="id" title="binder">A</span></a> <a id="B:333" class="idref" href="#B:333"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="8f666848a514640af8ed218d95e5c2ce" class="idref" href="#8f666848a514640af8ed218d95e5c2ce"><span class="id" title="binder">Φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:332"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:333"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#PROP:330"><span class="id" title="variable">PROP</span></a>) (<a id="l1:335" class="idref" href="#l1:335"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:332"><span class="id" title="variable">A</span></a>) (<a id="l2:336" class="idref" href="#l2:336"><span class="id" title="binder">l2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:333"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:337" class="idref" href="#k:337"><span class="id" title="binder"><span id="k:338" class="id">k</span></span></a><span class="id" title="notation">;</span><a id="x:339" class="idref" href="#x:339"><span class="id" title="binder"><span id="x:340" class="id">x</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:335"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:336"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">|==&gt;</span> <a class="idref" href="cap_machine.iris_extra.html#8f666848a514640af8ed218d95e5c2ce"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:337"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#x:339"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">|==&gt;</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="k:341" class="idref" href="#k:341"><span class="id" title="binder"><span id="k:342" class="id">k</span></span></a><span class="id" title="notation">;</span><a id="x:343" class="idref" href="#x:343"><span class="id" title="binder"><span id="x:344" class="id">x</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:335"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#l2:336"><span class="id" title="variable">l2</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#8f666848a514640af8ed218d95e5c2ce"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#k:341"><span class="id" title="variable">k</span></a> <a class="idref" href="cap_machine.iris_extra.html#x:343"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">x</span> <span class="id" title="var">l1</span>].<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepL2_length</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hlen</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span> |]. <span class="id" title="var">cbn</span>. <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> "[&gt;? H]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="var">IHl1</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "&gt;?". <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>. }<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Helper&nbsp;lemma&nbsp;for&nbsp;reasoning&nbsp;about&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;a&nbsp;region&nbsp;map&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepM_exists" class="idref" href="#big_sepM_exists"><span class="id" title="lemma">big_sepM_exists</span></a> `{<a id="ac10eb6ae79cd8215886a7e819f14945" class="idref" href="#ac10eb6ae79cd8215886a7e819f14945"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:346" class="idref" href="#A:346"><span class="id" title="binder">A</span></a> <a id="B:347" class="idref" href="#B:347"><span class="id" title="binder">B</span></a> <a id="C:348" class="idref" href="#C:348"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:349" class="idref" href="#EqDecision0:349"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:349" class="idref" href="#EqDecision0:349"><span class="id" title="binder">A</span></a>, <a id="H:351" class="idref" href="#H:351"><span class="id" title="binder">Countable</span></a> <a id="H:351" class="idref" href="#H:351"><span class="id" title="binder">A</span></a>} (<a id="m:352" class="idref" href="#m:352"><span class="id" title="binder">m</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.iris_extra.html#A:346"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:347"><span class="id" title="variable">B</span></a>) (<a id="157fa92d5838002585eafb27cbdf0465" class="idref" href="#157fa92d5838002585eafb27cbdf0465"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:346"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:348"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:347"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#ac10eb6ae79cd8215886a7e819f14945"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">⊢</span> (<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:354" class="idref" href="#a:354"><span class="id" title="binder"><span id="a:355" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="b:356" class="idref" href="#b:356"><span class="id" title="binder"><span id="b:357" class="id">b</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#m:352"><span class="id" title="variable">m</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="c:358" class="idref" href="#c:358"><span class="id" title="binder">c</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#157fa92d5838002585eafb27cbdf0465"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:354"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#c:358"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:356"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="notation">(</span><a id="m':359" class="idref" href="#m':359"><span class="id" title="binder">m'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.iris_extra.html#A:346"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.iris_extra.html#C:348"><span class="id" title="variable">C</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:360" class="idref" href="#a:360"><span class="id" title="binder"><span id="a:361" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="c:362" class="idref" href="#c:362"><span class="id" title="binder"><span id="c:363" class="id">c</span></span></a><span class="id" title="notation">;</span><a id="b:364" class="idref" href="#b:364"><span class="id" title="binder"><span id="b:365" class="id">b</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#m':359"><span class="id" title="variable">m'</span></a><span class="id" title="notation">;</span><a class="idref" href="cap_machine.iris_extra.html#m:352"><span class="id" title="variable">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#157fa92d5838002585eafb27cbdf0465"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:360"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#c:362"><span class="id" title="variable">c</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:364"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span>)%<span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hmap".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnone</span>] "IH" <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iExists</span> <span class="id" title="definition">empty</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_insert</span> <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hc Hmap]"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hc" <span class="id" title="keyword">as</span> (<span class="id" title="var">c</span>) "Hc".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">m'</span>) "Hmap".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">a</span><span class="id" title="notation">:=</span><span class="id" title="var">c</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">m'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM2_insert_2</span> <span class="id" title="notation">with</span> "Hc"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "Hmap".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hmap" <span class="id" title="keyword">as</span> (<span class="id" title="var">m'</span>) "Hmap".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> (<span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnone</span>] "IH" <span class="id" title="keyword">using</span> <span class="id" title="lemma">map_ind</span> <span class="id" title="keyword">forall</span> (<span class="id" title="var">m'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM2_dom</span> <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %<span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">is_Some</span> (<span class="id" title="var">m'</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [ρ <span class="id" title="var">H</span>ρ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdom</span> <span class="id" title="lemma">dom_insert_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_union_l</span>, <span class="id" title="method">elem_of_singleton</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">insert_id</span> <span class="id" title="var">m'</span> <span class="id" title="var">a</span> ρ); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">insert_delete_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM2_insert</span> <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hφ Hmap]";[<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_delete</span>|<span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepM_insert</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">with</span> "Hmap"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hmap". <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> ρ. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepL2_to_big_sepL_replicate" class="idref" href="#big_sepL2_to_big_sepL_replicate"><span class="id" title="lemma">big_sepL2_to_big_sepL_replicate</span></a> {<a id="4073d2851eaacec7d4d74a5e8e5c3466" class="idref" href="#4073d2851eaacec7d4d74a5e8e5c3466"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:367" class="idref" href="#A:367"><span class="id" title="binder">A</span></a> <a id="B:368" class="idref" href="#B:368"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} (<a id="l1:369" class="idref" href="#l1:369"><span class="id" title="binder">l1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:367"><span class="id" title="variable">A</span></a>) (<a id="b:370" class="idref" href="#b:370"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.iris_extra.html#B:368"><span class="id" title="variable">B</span></a>) (<a id="31e3db76c340ca69390438a329bb73bb" class="idref" href="#31e3db76c340ca69390438a329bb73bb"><span class="id" title="binder">Φ</span></a>: <a class="idref" href="cap_machine.iris_extra.html#A:367"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:368"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#4073d2851eaacec7d4d74a5e8e5c3466"><span class="id" title="variable">Σ</span></a>) :<br/>
&nbsp;&nbsp;(<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:372" class="idref" href="#a:372"><span class="id" title="binder"><span id="a:373" class="id">a</span></span></a><span class="id" title="notation">;</span><a id="b':374" class="idref" href="#b':374"><span class="id" title="binder"><span id="b':375" class="id">b'</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:369"><span class="id" title="variable">l1</span></a><span class="id" title="notation">;</span><span class="id" title="definition">replicate</span> (<span class="id" title="abbreviation">length</span> <a class="idref" href="cap_machine.iris_extra.html#l1:369"><span class="id" title="variable">l1</span></a>) <a class="idref" href="cap_machine.iris_extra.html#b:370"><span class="id" title="variable">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#31e3db76c340ca69390438a329bb73bb"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:372"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b':374"><span class="id" title="variable">b'</span></a>)%<span class="id" title="var">I</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="a:376" class="idref" href="#a:376"><span class="id" title="binder"><span id="a:377" class="id">a</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#l1:369"><span class="id" title="variable">l1</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#31e3db76c340ca69390438a329bb73bb"><span class="id" title="variable">Φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:376"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:370"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hl".<br/>
&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l1</span>] "IH".<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">iDestruct</span> "Hl" <span class="id" title="keyword">as</span> "[$ Hl]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "IH". <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="big_sepM_to_create_gmap_default" class="idref" href="#big_sepM_to_create_gmap_default"><span class="id" title="lemma">big_sepM_to_create_gmap_default</span></a> {<a id="91aed22a5c02de037b46f2a963d12bf6" class="idref" href="#91aed22a5c02de037b46f2a963d12bf6"><span class="id" title="binder">Σ</span></a> : <span class="id" title="record">gFunctors</span>} {<a id="A:379" class="idref" href="#A:379"><span class="id" title="binder">A</span></a> <a id="B:380" class="idref" href="#B:380"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="H:382" class="idref" href="#H:382"><span class="id" title="binder">Countable</span></a> <a id="H:382" class="idref" href="#H:382"><span class="id" title="binder">A</span></a>} (<a id="m:383" class="idref" href="#m:383"><span class="id" title="binder">m</span></a> <a id="m':384" class="idref" href="#m':384"><span class="id" title="binder">m'</span></a> : <span class="id" title="record">gmap</span> <a class="idref" href="cap_machine.iris_extra.html#A:379"><span class="id" title="variable">A</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:380"><span class="id" title="variable">B</span></a>) (<a id="13c9c45b7928acbf7709fa297a4a49b7" class="idref" href="#13c9c45b7928acbf7709fa297a4a49b7"><span class="id" title="binder">φ</span></a> : <a class="idref" href="cap_machine.iris_extra.html#A:379"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="cap_machine.iris_extra.html#B:380"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="cap_machine.iris_extra.html#91aed22a5c02de037b46f2a963d12bf6"><span class="id" title="variable">Σ</span></a>) (<a id="b:386" class="idref" href="#b:386"><span class="id" title="binder">b</span></a> : <a class="idref" href="cap_machine.iris_extra.html#B:380"><span class="id" title="variable">B</span></a>) (<a id="l:387" class="idref" href="#l:387"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="cap_machine.iris_extra.html#A:379"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#l:387"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span><span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <a class="idref" href="cap_machine.iris_extra.html#m:383"><span class="id" title="variable">m</span></a><span class="id" title="notation">).*1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="cap_machine.iris_extra.html#m':384"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <a class="idref" href="cap_machine.iris_extra.html#l:387"><span class="id" title="variable">l</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:386"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:388" class="idref" href="#a:388"><span class="id" title="binder"><span id="a:389" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="pat:390" class="idref" href="#pat:390"><span class="id" title="binder">_</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#m:383"><span class="id" title="variable">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#13c9c45b7928acbf7709fa297a4a49b7"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:388"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b:386"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗</span> <span class="id" title="notation">map</span><span class="id" title="notation">]</span> <a id="a:391" class="idref" href="#a:391"><span class="id" title="binder"><span id="a:392" class="id">a</span></span></a><span class="id" title="notation">↦</span><a id="b':393" class="idref" href="#b':393"><span class="id" title="binder"><span id="b':394" class="id">b'</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="cap_machine.iris_extra.html#m':384"><span class="id" title="variable">m'</span></a><span class="id" title="notation">,</span> <a class="idref" href="cap_machine.iris_extra.html#13c9c45b7928acbf7709fa297a4a49b7"><span class="id" title="variable">φ</span></a> <a class="idref" href="cap_machine.iris_extra.html#a:391"><span class="id" title="variable">a</span></a> <a class="idref" href="cap_machine.iris_extra.html#b':393"><span class="id" title="variable">b'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hl</span> <span class="id" title="var">Hm</span>) "Hm".<br/>
&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l</span>] "IH" <span class="id" title="keyword">forall</span> (<span class="id" title="var">m</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hm</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="inductive">NoDup</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#NoDup_map_to_list_fst"><span class="id" title="axiom">NoDup_map_to_list_fst</span></a>. <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">map_to_list</span> <span class="id" title="var">m</span><span class="id" title="notation">).*1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hl</span>. <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">is_Some</span>(<span class="id" title="var">m</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">b'</span> <span class="id" title="var">Hsome</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_dom</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="cap_machine.stdpp_extra.html#list_to_set_map_to_list"><span class="id" title="axiom">list_to_set_map_to_list</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">big_sepM_delete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="notation">with</span> "Hm"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Ha Hm]";<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">big_sepM_delete</span>;[|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_insert</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hm</span> /= <span class="id" title="lemma">delete_insert_delete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"IH" <span class="id" title="notation">$!</span> <span class="id" title="notation">(</span><span class="id" title="definition">delete</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span><span class="id" title="notation">))</span>;[..|<span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="cap_machine.stdpp_extra.html#map_to_list_delete_fst"><span class="id" title="axiom">map_to_list_delete_fst</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">delete_notin</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default"><span class="id" title="definition">create_gmap_default</span></a> <span class="id" title="var">l</span> <span class="id" title="var">b</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hsome'</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> <span class="id" title="var">Hdup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="cap_machine.stdpp_extra.html#create_gmap_default_lookup_is_Some"><span class="id" title="axiom">create_gmap_default_lookup_is_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsome'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span> <span class="id" title="var">Hsome'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">idtac</span>. <span class="id" title="var">Admitted</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
